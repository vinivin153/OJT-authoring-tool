var G1=i=>{throw TypeError(i)};var zg=(i,t,e)=>t.has(i)||G1("Cannot "+e);var z=(i,t,e)=>(zg(i,t,"read from private field"),e?e.call(i):t.get(i)),Et=(i,t,e)=>t.has(i)?G1("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),yt=(i,t,e,n)=>(zg(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),Pt=(i,t,e)=>(zg(i,t,"access private method"),e);var Uu=(i,t,e,n)=>({set _(a){yt(i,t,a,e)},get _(){return z(i,t,n)}});function lw(i,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in i)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(i,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function Wx(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ng={exports:{}},Ol={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I1;function cw(){if(I1)return Ol;I1=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:i,type:n,key:c,ref:a!==void 0?a:null,props:o}}return Ol.Fragment=t,Ol.jsx=e,Ol.jsxs=e,Ol}var W1;function uw(){return W1||(W1=1,Ng.exports=cw()),Ng.exports}var Q=uw(),Hg={exports:{}},jt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q1;function hw(){if(Q1)return jt;Q1=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=y&&M[y]||M["@@iterator"],typeof M=="function"?M:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function _(M,K,ct){this.props=M,this.context=K,this.refs=C,this.updater=ct||b}_.prototype.isReactComponent={},_.prototype.setState=function(M,K){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,K,"setState")},_.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function w(){}w.prototype=_.prototype;function T(M,K,ct){this.props=M,this.context=K,this.refs=C,this.updater=ct||b}var E=T.prototype=new w;E.constructor=T,S(E,_.prototype),E.isPureReactComponent=!0;var k=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function F(M,K,ct,it,gt,Mt){return ct=Mt.ref,{$$typeof:i,type:M,key:K,ref:ct!==void 0?ct:null,props:Mt}}function N(M,K){return F(M.type,K,void 0,void 0,void 0,M.props)}function I(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function J(M){var K={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ct){return K[ct]})}var ot=/\/+/g;function rt(M,K){return typeof M=="object"&&M!==null&&M.key!=null?J(""+M.key):K.toString(36)}function ut(){}function ft(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ut,ut):(M.status="pending",M.then(function(K){M.status==="pending"&&(M.status="fulfilled",M.value=K)},function(K){M.status==="pending"&&(M.status="rejected",M.reason=K)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function bt(M,K,ct,it,gt){var Mt=typeof M;(Mt==="undefined"||Mt==="boolean")&&(M=null);var vt=!1;if(M===null)vt=!0;else switch(Mt){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(M.$$typeof){case i:case t:vt=!0;break;case m:return vt=M._init,bt(vt(M._payload),K,ct,it,gt)}}if(vt)return gt=gt(M),vt=it===""?"."+rt(M,0):it,k(gt)?(ct="",vt!=null&&(ct=vt.replace(ot,"$&/")+"/"),bt(gt,K,ct,"",function(Tt){return Tt})):gt!=null&&(I(gt)&&(gt=N(gt,ct+(gt.key==null||M&&M.key===gt.key?"":(""+gt.key).replace(ot,"$&/")+"/")+vt)),K.push(gt)),1;vt=0;var $t=it===""?".":it+":";if(k(M))for(var et=0;et<M.length;et++)it=M[et],Mt=$t+rt(it,et),vt+=bt(it,K,ct,Mt,gt);else if(et=v(M),typeof et=="function")for(M=et.call(M),et=0;!(it=M.next()).done;)it=it.value,Mt=$t+rt(it,et++),vt+=bt(it,K,ct,Mt,gt);else if(Mt==="object"){if(typeof M.then=="function")return bt(ft(M),K,ct,it,gt);throw K=String(M),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return vt}function X(M,K,ct){if(M==null)return M;var it=[],gt=0;return bt(M,it,"","",function(Mt){return K.call(ct,Mt,gt++)}),it}function nt(M){if(M._status===-1){var K=M._result;K=K(),K.then(function(ct){(M._status===0||M._status===-1)&&(M._status=1,M._result=ct)},function(ct){(M._status===0||M._status===-1)&&(M._status=2,M._result=ct)}),M._status===-1&&(M._status=0,M._result=K)}if(M._status===1)return M._result.default;throw M._result}var at=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Ct(){}return jt.Children={map:X,forEach:function(M,K,ct){X(M,function(){K.apply(this,arguments)},ct)},count:function(M){var K=0;return X(M,function(){K++}),K},toArray:function(M){return X(M,function(K){return K})||[]},only:function(M){if(!I(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},jt.Component=_,jt.Fragment=e,jt.Profiler=a,jt.PureComponent=T,jt.StrictMode=n,jt.Suspense=f,jt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,jt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return A.H.useMemoCache(M)}},jt.cache=function(M){return function(){return M.apply(null,arguments)}},jt.cloneElement=function(M,K,ct){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var it=S({},M.props),gt=M.key,Mt=void 0;if(K!=null)for(vt in K.ref!==void 0&&(Mt=void 0),K.key!==void 0&&(gt=""+K.key),K)!R.call(K,vt)||vt==="key"||vt==="__self"||vt==="__source"||vt==="ref"&&K.ref===void 0||(it[vt]=K[vt]);var vt=arguments.length-2;if(vt===1)it.children=ct;else if(1<vt){for(var $t=Array(vt),et=0;et<vt;et++)$t[et]=arguments[et+2];it.children=$t}return F(M.type,gt,void 0,void 0,Mt,it)},jt.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},jt.createElement=function(M,K,ct){var it,gt={},Mt=null;if(K!=null)for(it in K.key!==void 0&&(Mt=""+K.key),K)R.call(K,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(gt[it]=K[it]);var vt=arguments.length-2;if(vt===1)gt.children=ct;else if(1<vt){for(var $t=Array(vt),et=0;et<vt;et++)$t[et]=arguments[et+2];gt.children=$t}if(M&&M.defaultProps)for(it in vt=M.defaultProps,vt)gt[it]===void 0&&(gt[it]=vt[it]);return F(M,Mt,void 0,void 0,null,gt)},jt.createRef=function(){return{current:null}},jt.forwardRef=function(M){return{$$typeof:h,render:M}},jt.isValidElement=I,jt.lazy=function(M){return{$$typeof:m,_payload:{_status:-1,_result:M},_init:nt}},jt.memo=function(M,K){return{$$typeof:d,type:M,compare:K===void 0?null:K}},jt.startTransition=function(M){var K=A.T,ct={};A.T=ct;try{var it=M(),gt=A.S;gt!==null&&gt(ct,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(Ct,at)}catch(Mt){at(Mt)}finally{A.T=K}},jt.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},jt.use=function(M){return A.H.use(M)},jt.useActionState=function(M,K,ct){return A.H.useActionState(M,K,ct)},jt.useCallback=function(M,K){return A.H.useCallback(M,K)},jt.useContext=function(M){return A.H.useContext(M)},jt.useDebugValue=function(){},jt.useDeferredValue=function(M,K){return A.H.useDeferredValue(M,K)},jt.useEffect=function(M,K,ct){var it=A.H;if(typeof ct=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return it.useEffect(M,K)},jt.useId=function(){return A.H.useId()},jt.useImperativeHandle=function(M,K,ct){return A.H.useImperativeHandle(M,K,ct)},jt.useInsertionEffect=function(M,K){return A.H.useInsertionEffect(M,K)},jt.useLayoutEffect=function(M,K){return A.H.useLayoutEffect(M,K)},jt.useMemo=function(M,K){return A.H.useMemo(M,K)},jt.useOptimistic=function(M,K){return A.H.useOptimistic(M,K)},jt.useReducer=function(M,K,ct){return A.H.useReducer(M,K,ct)},jt.useRef=function(M){return A.H.useRef(M)},jt.useState=function(M){return A.H.useState(M)},jt.useSyncExternalStore=function(M,K,ct){return A.H.useSyncExternalStore(M,K,ct)},jt.useTransition=function(){return A.H.useTransition()},jt.version="19.1.0",jt}var K1;function lp(){return K1||(K1=1,Hg.exports=hw()),Hg.exports}var U=lp();const ht=Wx(U),fw=lw({__proto__:null,default:ht},[U]);var Ug={exports:{}},El={},Fg={exports:{}},Pg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1;function dw(){return $1||($1=1,function(i){function t(X,nt){var at=X.length;X.push(nt);t:for(;0<at;){var Ct=at-1>>>1,M=X[Ct];if(0<a(M,nt))X[Ct]=nt,X[at]=M,at=Ct;else break t}}function e(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var nt=X[0],at=X.pop();if(at!==nt){X[0]=at;t:for(var Ct=0,M=X.length,K=M>>>1;Ct<K;){var ct=2*(Ct+1)-1,it=X[ct],gt=ct+1,Mt=X[gt];if(0>a(it,at))gt<M&&0>a(Mt,it)?(X[Ct]=Mt,X[gt]=at,Ct=gt):(X[Ct]=it,X[ct]=at,Ct=ct);else if(gt<M&&0>a(Mt,at))X[Ct]=Mt,X[gt]=at,Ct=gt;else break t}}return nt}function a(X,nt){var at=X.sortIndex-nt.sortIndex;return at!==0?at:X.id-nt.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();i.unstable_now=function(){return c.now()-h}}var f=[],d=[],m=1,y=null,v=3,b=!1,S=!1,C=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function k(X){for(var nt=e(d);nt!==null;){if(nt.callback===null)n(d);else if(nt.startTime<=X)n(d),nt.sortIndex=nt.expirationTime,t(f,nt);else break;nt=e(d)}}function A(X){if(C=!1,k(X),!S)if(e(f)!==null)S=!0,R||(R=!0,rt());else{var nt=e(d);nt!==null&&bt(A,nt.startTime-X)}}var R=!1,F=-1,N=5,I=-1;function J(){return _?!0:!(i.unstable_now()-I<N)}function ot(){if(_=!1,R){var X=i.unstable_now();I=X;var nt=!0;try{t:{S=!1,C&&(C=!1,T(F),F=-1),b=!0;var at=v;try{e:{for(k(X),y=e(f);y!==null&&!(y.expirationTime>X&&J());){var Ct=y.callback;if(typeof Ct=="function"){y.callback=null,v=y.priorityLevel;var M=Ct(y.expirationTime<=X);if(X=i.unstable_now(),typeof M=="function"){y.callback=M,k(X),nt=!0;break e}y===e(f)&&n(f),k(X)}else n(f);y=e(f)}if(y!==null)nt=!0;else{var K=e(d);K!==null&&bt(A,K.startTime-X),nt=!1}}break t}finally{y=null,v=at,b=!1}nt=void 0}}finally{nt?rt():R=!1}}}var rt;if(typeof E=="function")rt=function(){E(ot)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,ft=ut.port2;ut.port1.onmessage=ot,rt=function(){ft.postMessage(null)}}else rt=function(){w(ot,0)};function bt(X,nt){F=w(function(){X(i.unstable_now())},nt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(X){switch(v){case 1:case 2:case 3:var nt=3;break;default:nt=v}var at=v;v=nt;try{return X()}finally{v=at}},i.unstable_requestPaint=function(){_=!0},i.unstable_runWithPriority=function(X,nt){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var at=v;v=X;try{return nt()}finally{v=at}},i.unstable_scheduleCallback=function(X,nt,at){var Ct=i.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?Ct+at:Ct):at=Ct,X){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=at+M,X={id:m++,callback:nt,priorityLevel:X,startTime:at,expirationTime:M,sortIndex:-1},at>Ct?(X.sortIndex=at,t(d,X),e(f)===null&&X===e(d)&&(C?(T(F),F=-1):C=!0,bt(A,at-Ct))):(X.sortIndex=M,t(f,X),S||b||(S=!0,R||(R=!0,rt()))),X},i.unstable_shouldYield=J,i.unstable_wrapCallback=function(X){var nt=v;return function(){var at=v;v=nt;try{return X.apply(this,arguments)}finally{v=at}}}}(Pg)),Pg}var Z1;function gw(){return Z1||(Z1=1,Fg.exports=dw()),Fg.exports}var Yg={exports:{}},Je={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J1;function mw(){if(J1)return Je;J1=1;var i=lp();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,d,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:f,containerInfo:d,implementation:m}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Je.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Je.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return o(f,d,null,m)},Je.flushSync=function(f){var d=c.T,m=n.p;try{if(c.T=null,n.p=2,f)return f()}finally{c.T=d,n.p=m,n.d.f()}},Je.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(f,d))},Je.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},Je.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,y=h(m,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?n.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:b}):m==="script"&&n.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Je.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=h(d.as,d.crossOrigin);n.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(f)},Je.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,y=h(m,d.crossOrigin);n.d.L(f,m,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Je.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=h(d.as,d.crossOrigin);n.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(f)},Je.requestFormReset=function(f){n.d.r(f)},Je.unstable_batchedUpdates=function(f,d){return f(d)},Je.useFormState=function(f,d,m){return c.H.useFormState(f,d,m)},Je.useFormStatus=function(){return c.H.useHostTransitionStatus()},Je.version="19.1.0",Je}var tb;function Qx(){if(tb)return Yg.exports;tb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Yg.exports=mw(),Yg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function pw(){if(eb)return El;eb=1;var i=gw(),t=lp(),e=Qx();function n(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function c(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(n(188))}function f(s){var r=s.alternate;if(!r){if(r=o(s),r===null)throw Error(n(188));return r!==s?null:s}for(var l=s,u=r;;){var g=l.return;if(g===null)break;var p=g.alternate;if(p===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===p.child){for(p=g.child;p;){if(p===l)return h(g),s;if(p===u)return h(g),r;p=p.sibling}throw Error(n(188))}if(l.return!==u.return)l=g,u=p;else{for(var x=!1,O=g.child;O;){if(O===l){x=!0,l=g,u=p;break}if(O===u){x=!0,u=g,l=p;break}O=O.sibling}if(!x){for(O=p.child;O;){if(O===l){x=!0,l=p,u=g;break}if(O===u){x=!0,u=p,l=g;break}O=O.sibling}if(!x)throw Error(n(189))}}if(l.alternate!==u)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?s:r}function d(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=d(s),r!==null)return r;s=s.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),E=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),ot=Symbol.iterator;function rt(s){return s===null||typeof s!="object"?null:(s=ot&&s[ot]||s["@@iterator"],typeof s=="function"?s:null)}var ut=Symbol.for("react.client.reference");function ft(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ut?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case _:return"Profiler";case C:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList";case I:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case E:return(s.displayName||"Context")+".Provider";case T:return(s._context.displayName||"Context")+".Consumer";case k:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case F:return r=s.displayName||null,r!==null?r:ft(s.type)||"Memo";case N:r=s._payload,s=s._init;try{return ft(s(r))}catch{}}return null}var bt=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at={pending:!1,data:null,method:null,action:null},Ct=[],M=-1;function K(s){return{current:s}}function ct(s){0>M||(s.current=Ct[M],Ct[M]=null,M--)}function it(s,r){M++,Ct[M]=s.current,s.current=r}var gt=K(null),Mt=K(null),vt=K(null),$t=K(null);function et(s,r){switch(it(vt,r),it(Mt,s),it(gt,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?x1(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=x1(r),s=S1(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ct(gt),it(gt,s)}function Tt(){ct(gt),ct(Mt),ct(vt)}function Ht(s){s.memoizedState!==null&&it($t,s);var r=gt.current,l=S1(r,s.type);r!==l&&(it(Mt,s),it(gt,l))}function ye(s){Mt.current===s&&(ct(gt),ct(Mt)),$t.current===s&&(ct($t),Sl._currentValue=at)}var le=Object.prototype.hasOwnProperty,is=i.unstable_scheduleCallback,Gs=i.unstable_cancelCallback,vi=i.unstable_shouldYield,aa=i.unstable_requestPaint,Re=i.unstable_now,Ss=i.unstable_getCurrentPriorityLevel,bi=i.unstable_ImmediatePriority,mr=i.unstable_UserBlockingPriority,xi=i.unstable_NormalPriority,Tc=i.unstable_LowPriority,pr=i.unstable_IdlePriority,Si=i.log,Is=i.unstable_setDisableYieldValue,_i=null,Qe=null;function rs(s){if(typeof Si=="function"&&Is(s),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(_i,s)}catch{}}var Ke=Math.clz32?Math.clz32:Tf,Cf=Math.log,wc=Math.LN2;function Tf(s){return s>>>=0,s===0?32:31-(Cf(s)/wc|0)|0}var Oc=256,Ec=4194304;function yr(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ac(s,r,l){var u=s.pendingLanes;if(u===0)return 0;var g=0,p=s.suspendedLanes,x=s.pingedLanes;s=s.warmLanes;var O=u&134217727;return O!==0?(u=O&~p,u!==0?g=yr(u):(x&=O,x!==0?g=yr(x):l||(l=O&~s,l!==0&&(g=yr(l))))):(O=u&~p,O!==0?g=yr(O):x!==0?g=yr(x):l||(l=u&~s,l!==0&&(g=yr(l)))),g===0?0:r!==0&&r!==g&&(r&p)===0&&(p=g&-g,l=r&-r,p>=l||p===32&&(l&4194048)!==0)?r:g}function Mo(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Q2(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s0(){var s=Oc;return Oc<<=1,(Oc&4194048)===0&&(Oc=256),s}function i0(){var s=Ec;return Ec<<=1,(Ec&62914560)===0&&(Ec=4194304),s}function wf(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Ro(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function K2(s,r,l,u,g,p){var x=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var O=s.entanglements,D=s.expirationTimes,Y=s.hiddenUpdates;for(l=x&~l;0<l;){var $=31-Ke(l),tt=1<<$;O[$]=0,D[$]=-1;var q=Y[$];if(q!==null)for(Y[$]=null,$=0;$<q.length;$++){var V=q[$];V!==null&&(V.lane&=-536870913)}l&=~tt}u!==0&&r0(s,u,0),p!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=p&~(x&~r))}function r0(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var u=31-Ke(r);s.entangledLanes|=r,s.entanglements[u]=s.entanglements[u]|1073741824|l&4194090}function a0(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var u=31-Ke(l),g=1<<u;g&r|s[u]&r&&(s[u]|=r),l&=~g}}function Of(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ef(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function o0(){var s=nt.p;return s!==0?s:(s=window.event,s===void 0?32:F1(s.type))}function $2(s,r){var l=nt.p;try{return nt.p=s,r()}finally{nt.p=l}}var Ci=Math.random().toString(36).slice(2),$e="__reactFiber$"+Ci,vn="__reactProps$"+Ci,oa="__reactContainer$"+Ci,Af="__reactEvents$"+Ci,Z2="__reactListeners$"+Ci,J2="__reactHandles$"+Ci,l0="__reactResources$"+Ci,ko="__reactMarker$"+Ci;function Df(s){delete s[$e],delete s[vn],delete s[Af],delete s[Z2],delete s[J2]}function la(s){var r=s[$e];if(r)return r;for(var l=s.parentNode;l;){if(r=l[oa]||l[$e]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=w1(s);s!==null;){if(l=s[$e])return l;s=w1(s)}return r}s=l,l=s.parentNode}return null}function ca(s){if(s=s[$e]||s[oa]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function jo(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(n(33))}function ua(s){var r=s[l0];return r||(r=s[l0]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function He(s){s[ko]=!0}var c0=new Set,u0={};function vr(s,r){ha(s,r),ha(s+"Capture",r)}function ha(s,r){for(u0[s]=r,s=0;s<r.length;s++)c0.add(r[s])}var tC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),h0={},f0={};function eC(s){return le.call(f0,s)?!0:le.call(h0,s)?!1:tC.test(s)?f0[s]=!0:(h0[s]=!0,!1)}function Dc(s,r,l){if(eC(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Mc(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function Ws(s,r,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+u)}}var Mf,d0;function fa(s){if(Mf===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Mf=r&&r[1]||"",d0=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mf+s+d0}var Rf=!1;function kf(s,r){if(!s||Rf)return"";Rf=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(V){var q=V}Reflect.construct(s,[],tt)}else{try{tt.call()}catch(V){q=V}s.call(tt.prototype)}}else{try{throw Error()}catch(V){q=V}(tt=s())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(V){if(V&&q&&typeof V.stack=="string")return[V.stack,q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),x=p[0],O=p[1];if(x&&O){var D=x.split(`
`),Y=O.split(`
`);for(g=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;g<Y.length&&!Y[g].includes("DetermineComponentFrameRoot");)g++;if(u===D.length||g===Y.length)for(u=D.length-1,g=Y.length-1;1<=u&&0<=g&&D[u]!==Y[g];)g--;for(;1<=u&&0<=g;u--,g--)if(D[u]!==Y[g]){if(u!==1||g!==1)do if(u--,g--,0>g||D[u]!==Y[g]){var $=`
`+D[u].replace(" at new "," at ");return s.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",s.displayName)),$}while(1<=u&&0<=g);break}}}finally{Rf=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?fa(l):""}function nC(s){switch(s.tag){case 26:case 27:case 5:return fa(s.type);case 16:return fa("Lazy");case 13:return fa("Suspense");case 19:return fa("SuspenseList");case 0:case 15:return kf(s.type,!1);case 11:return kf(s.type.render,!1);case 1:return kf(s.type,!0);case 31:return fa("Activity");default:return""}}function g0(s){try{var r="";do r+=nC(s),s=s.return;while(s);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Xn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function m0(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function sC(s){var r=m0(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),u=""+s[r];if(!s.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,p=l.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return g.call(this)},set:function(x){u=""+x,p.call(this,x)}}),Object.defineProperty(s,r,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(x){u=""+x},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Rc(s){s._valueTracker||(s._valueTracker=sC(s))}function p0(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),u="";return s&&(u=m0(s)?s.checked?"true":"false":s.value),s=u,s!==l?(r.setValue(s),!0):!1}function kc(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var iC=/[\n"\\]/g;function qn(s){return s.replace(iC,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function jf(s,r,l,u,g,p,x,O){s.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.type=x:s.removeAttribute("type"),r!=null?x==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+Xn(r)):s.value!==""+Xn(r)&&(s.value=""+Xn(r)):x!=="submit"&&x!=="reset"||s.removeAttribute("value"),r!=null?Lf(s,x,Xn(r)):l!=null?Lf(s,x,Xn(l)):u!=null&&s.removeAttribute("value"),g==null&&p!=null&&(s.defaultChecked=!!p),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?s.name=""+Xn(O):s.removeAttribute("name")}function y0(s,r,l,u,g,p,x,O){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),r!=null||l!=null){if(!(p!=="submit"&&p!=="reset"||r!=null))return;l=l!=null?""+Xn(l):"",r=r!=null?""+Xn(r):l,O||r===s.value||(s.value=r),s.defaultValue=r}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=O?s.checked:!!u,s.defaultChecked=!!u,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.name=x)}function Lf(s,r,l){r==="number"&&kc(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function da(s,r,l,u){if(s=s.options,r){r={};for(var g=0;g<l.length;g++)r["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=r.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&u&&(s[l].defaultSelected=!0)}else{for(l=""+Xn(l),r=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,u&&(s[g].defaultSelected=!0);return}r!==null||s[g].disabled||(r=s[g])}r!==null&&(r.selected=!0)}}function v0(s,r,l){if(r!=null&&(r=""+Xn(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+Xn(l):""}function b0(s,r,l,u){if(r==null){if(u!=null){if(l!=null)throw Error(n(92));if(bt(u)){if(1<u.length)throw Error(n(93));u=u[0]}l=u}l==null&&(l=""),r=l}l=Xn(r),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u)}function ga(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var rC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function x0(s,r,l){var u=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":u?s.setProperty(r,l):typeof l!="number"||l===0||rC.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function S0(s,r,l){if(r!=null&&typeof r!="object")throw Error(n(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var g in r)u=r[g],r.hasOwnProperty(g)&&l[g]!==u&&x0(s,g,u)}else for(var p in r)r.hasOwnProperty(p)&&x0(s,p,r[p])}function Bf(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jc(s){return oC.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var zf=null;function Nf(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ma=null,pa=null;function _0(s){var r=ca(s);if(r&&(s=r.stateNode)){var l=s[vn]||null;t:switch(s=r.stateNode,r.type){case"input":if(jf(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+qn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var u=l[r];if(u!==s&&u.form===s.form){var g=u[vn]||null;if(!g)throw Error(n(90));jf(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<l.length;r++)u=l[r],u.form===s.form&&p0(u)}break t;case"textarea":v0(s,l.value,l.defaultValue);break t;case"select":r=l.value,r!=null&&da(s,!!l.multiple,r,!1)}}}var Hf=!1;function C0(s,r,l){if(Hf)return s(r,l);Hf=!0;try{var u=s(r);return u}finally{if(Hf=!1,(ma!==null||pa!==null)&&(vu(),ma&&(r=ma,s=pa,pa=ma=null,_0(r),s)))for(r=0;r<s.length;r++)_0(s[r])}}function Lo(s,r){var l=s.stateNode;if(l===null)return null;var u=l[vn]||null;if(u===null)return null;l=u[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break t;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(n(231,r,typeof l));return l}var Qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uf=!1;if(Qs)try{var Bo={};Object.defineProperty(Bo,"passive",{get:function(){Uf=!0}}),window.addEventListener("test",Bo,Bo),window.removeEventListener("test",Bo,Bo)}catch{Uf=!1}var Ti=null,Ff=null,Lc=null;function T0(){if(Lc)return Lc;var s,r=Ff,l=r.length,u,g="value"in Ti?Ti.value:Ti.textContent,p=g.length;for(s=0;s<l&&r[s]===g[s];s++);var x=l-s;for(u=1;u<=x&&r[l-u]===g[p-u];u++);return Lc=g.slice(s,1<u?1-u:void 0)}function Bc(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function zc(){return!0}function w0(){return!1}function bn(s){function r(l,u,g,p,x){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=p,this.target=x,this.currentTarget=null;for(var O in s)s.hasOwnProperty(O)&&(l=s[O],this[O]=l?l(p):p[O]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?zc:w0,this.isPropagationStopped=w0,this}return m(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=zc)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=zc)},persist:function(){},isPersistent:zc}),r}var br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nc=bn(br),zo=m({},br,{view:0,detail:0}),lC=bn(zo),Pf,Yf,No,Hc=m({},zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qf,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==No&&(No&&s.type==="mousemove"?(Pf=s.screenX-No.screenX,Yf=s.screenY-No.screenY):Yf=Pf=0,No=s),Pf)},movementY:function(s){return"movementY"in s?s.movementY:Yf}}),O0=bn(Hc),cC=m({},Hc,{dataTransfer:0}),uC=bn(cC),hC=m({},zo,{relatedTarget:0}),Xf=bn(hC),fC=m({},br,{animationName:0,elapsedTime:0,pseudoElement:0}),dC=bn(fC),gC=m({},br,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),mC=bn(gC),pC=m({},br,{data:0}),E0=bn(pC),yC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xC(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=bC[s])?!!r[s]:!1}function qf(){return xC}var SC=m({},zo,{key:function(s){if(s.key){var r=yC[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Bc(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?vC[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qf,charCode:function(s){return s.type==="keypress"?Bc(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Bc(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),_C=bn(SC),CC=m({},Hc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A0=bn(CC),TC=m({},zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qf}),wC=bn(TC),OC=m({},br,{propertyName:0,elapsedTime:0,pseudoElement:0}),EC=bn(OC),AC=m({},Hc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),DC=bn(AC),MC=m({},br,{newState:0,oldState:0}),RC=bn(MC),kC=[9,13,27,32],Vf=Qs&&"CompositionEvent"in window,Ho=null;Qs&&"documentMode"in document&&(Ho=document.documentMode);var jC=Qs&&"TextEvent"in window&&!Ho,D0=Qs&&(!Vf||Ho&&8<Ho&&11>=Ho),M0=" ",R0=!1;function k0(s,r){switch(s){case"keyup":return kC.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j0(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ya=!1;function LC(s,r){switch(s){case"compositionend":return j0(r);case"keypress":return r.which!==32?null:(R0=!0,M0);case"textInput":return s=r.data,s===M0&&R0?null:s;default:return null}}function BC(s,r){if(ya)return s==="compositionend"||!Vf&&k0(s,r)?(s=T0(),Lc=Ff=Ti=null,ya=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return D0&&r.locale!=="ko"?null:r.data;default:return null}}var zC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function L0(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!zC[s.type]:r==="textarea"}function B0(s,r,l,u){ma?pa?pa.push(u):pa=[u]:ma=u,r=Tu(r,"onChange"),0<r.length&&(l=new Nc("onChange","change",null,l,u),s.push({event:l,listeners:r}))}var Uo=null,Fo=null;function NC(s){m1(s,0)}function Uc(s){var r=jo(s);if(p0(r))return s}function z0(s,r){if(s==="change")return r}var N0=!1;if(Qs){var Gf;if(Qs){var If="oninput"in document;if(!If){var H0=document.createElement("div");H0.setAttribute("oninput","return;"),If=typeof H0.oninput=="function"}Gf=If}else Gf=!1;N0=Gf&&(!document.documentMode||9<document.documentMode)}function U0(){Uo&&(Uo.detachEvent("onpropertychange",F0),Fo=Uo=null)}function F0(s){if(s.propertyName==="value"&&Uc(Fo)){var r=[];B0(r,Fo,s,Nf(s)),C0(NC,r)}}function HC(s,r,l){s==="focusin"?(U0(),Uo=r,Fo=l,Uo.attachEvent("onpropertychange",F0)):s==="focusout"&&U0()}function UC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Uc(Fo)}function FC(s,r){if(s==="click")return Uc(r)}function PC(s,r){if(s==="input"||s==="change")return Uc(r)}function YC(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Dn=typeof Object.is=="function"?Object.is:YC;function Po(s,r){if(Dn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),u=Object.keys(r);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!le.call(r,g)||!Dn(s[g],r[g]))return!1}return!0}function P0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Y0(s,r){var l=P0(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=r&&u>=r)return{node:l,offset:r-s};s=u}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=P0(l)}}function X0(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?X0(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function q0(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=kc(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=kc(s.document)}return r}function Wf(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var XC=Qs&&"documentMode"in document&&11>=document.documentMode,va=null,Qf=null,Yo=null,Kf=!1;function V0(s,r,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Kf||va==null||va!==kc(u)||(u=va,"selectionStart"in u&&Wf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Yo&&Po(Yo,u)||(Yo=u,u=Tu(Qf,"onSelect"),0<u.length&&(r=new Nc("onSelect","select",null,r,l),s.push({event:r,listeners:u}),r.target=va)))}function xr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var ba={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionrun:xr("Transition","TransitionRun"),transitionstart:xr("Transition","TransitionStart"),transitioncancel:xr("Transition","TransitionCancel"),transitionend:xr("Transition","TransitionEnd")},$f={},G0={};Qs&&(G0=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function Sr(s){if($f[s])return $f[s];if(!ba[s])return s;var r=ba[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in G0)return $f[s]=r[l];return s}var I0=Sr("animationend"),W0=Sr("animationiteration"),Q0=Sr("animationstart"),qC=Sr("transitionrun"),VC=Sr("transitionstart"),GC=Sr("transitioncancel"),K0=Sr("transitionend"),$0=new Map,Zf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zf.push("scrollEnd");function as(s,r){$0.set(s,r),vr(r,[s])}var Z0=new WeakMap;function Vn(s,r){if(typeof s=="object"&&s!==null){var l=Z0.get(s);return l!==void 0?l:(r={value:s,source:r,stack:g0(r)},Z0.set(s,r),r)}return{value:s,source:r,stack:g0(r)}}var Gn=[],xa=0,Jf=0;function Fc(){for(var s=xa,r=Jf=xa=0;r<s;){var l=Gn[r];Gn[r++]=null;var u=Gn[r];Gn[r++]=null;var g=Gn[r];Gn[r++]=null;var p=Gn[r];if(Gn[r++]=null,u!==null&&g!==null){var x=u.pending;x===null?g.next=g:(g.next=x.next,x.next=g),u.pending=g}p!==0&&J0(l,g,p)}}function Pc(s,r,l,u){Gn[xa++]=s,Gn[xa++]=r,Gn[xa++]=l,Gn[xa++]=u,Jf|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function td(s,r,l,u){return Pc(s,r,l,u),Yc(s)}function Sa(s,r){return Pc(s,null,null,r),Yc(s)}function J0(s,r,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var g=!1,p=s.return;p!==null;)p.childLanes|=l,u=p.alternate,u!==null&&(u.childLanes|=l),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(g=!0)),s=p,p=p.return;return s.tag===3?(p=s.stateNode,g&&r!==null&&(g=31-Ke(l),s=p.hiddenUpdates,u=s[g],u===null?s[g]=[r]:u.push(r),r.lane=l|536870912),p):null}function Yc(s){if(50<dl)throw dl=0,ag=null,Error(n(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var _a={};function IC(s,r,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(s,r,l,u){return new IC(s,r,l,u)}function ed(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ks(s,r){var l=s.alternate;return l===null?(l=Mn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function ty(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Xc(s,r,l,u,g,p){var x=0;if(u=s,typeof s=="function")ed(s)&&(x=1);else if(typeof s=="string")x=QT(s,l,gt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case I:return s=Mn(31,l,r,g),s.elementType=I,s.lanes=p,s;case S:return _r(l.children,g,p,r);case C:x=8,g|=24;break;case _:return s=Mn(12,l,r,g|2),s.elementType=_,s.lanes=p,s;case A:return s=Mn(13,l,r,g),s.elementType=A,s.lanes=p,s;case R:return s=Mn(19,l,r,g),s.elementType=R,s.lanes=p,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case w:case E:x=10;break t;case T:x=9;break t;case k:x=11;break t;case F:x=14;break t;case N:x=16,u=null;break t}x=29,l=Error(n(130,s===null?"null":typeof s,"")),u=null}return r=Mn(x,l,r,g),r.elementType=s,r.type=u,r.lanes=p,r}function _r(s,r,l,u){return s=Mn(7,s,u,r),s.lanes=l,s}function nd(s,r,l){return s=Mn(6,s,null,r),s.lanes=l,s}function sd(s,r,l){return r=Mn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var Ca=[],Ta=0,qc=null,Vc=0,In=[],Wn=0,Cr=null,$s=1,Zs="";function Tr(s,r){Ca[Ta++]=Vc,Ca[Ta++]=qc,qc=s,Vc=r}function ey(s,r,l){In[Wn++]=$s,In[Wn++]=Zs,In[Wn++]=Cr,Cr=s;var u=$s;s=Zs;var g=32-Ke(u)-1;u&=~(1<<g),l+=1;var p=32-Ke(r)+g;if(30<p){var x=g-g%5;p=(u&(1<<x)-1).toString(32),u>>=x,g-=x,$s=1<<32-Ke(r)+g|l<<g|u,Zs=p+s}else $s=1<<p|l<<g|u,Zs=s}function id(s){s.return!==null&&(Tr(s,1),ey(s,1,0))}function rd(s){for(;s===qc;)qc=Ca[--Ta],Ca[Ta]=null,Vc=Ca[--Ta],Ca[Ta]=null;for(;s===Cr;)Cr=In[--Wn],In[Wn]=null,Zs=In[--Wn],In[Wn]=null,$s=In[--Wn],In[Wn]=null}var an=null,ve=null,Gt=!1,wr=null,_s=!1,ad=Error(n(519));function Or(s){var r=Error(n(418,""));throw Vo(Vn(r,s)),ad}function ny(s){var r=s.stateNode,l=s.type,u=s.memoizedProps;switch(r[$e]=s,r[vn]=u,l){case"dialog":Ft("cancel",r),Ft("close",r);break;case"iframe":case"object":case"embed":Ft("load",r);break;case"video":case"audio":for(l=0;l<ml.length;l++)Ft(ml[l],r);break;case"source":Ft("error",r);break;case"img":case"image":case"link":Ft("error",r),Ft("load",r);break;case"details":Ft("toggle",r);break;case"input":Ft("invalid",r),y0(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Rc(r);break;case"select":Ft("invalid",r);break;case"textarea":Ft("invalid",r),b0(r,u.value,u.defaultValue,u.children),Rc(r)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||u.suppressHydrationWarning===!0||b1(r.textContent,l)?(u.popover!=null&&(Ft("beforetoggle",r),Ft("toggle",r)),u.onScroll!=null&&Ft("scroll",r),u.onScrollEnd!=null&&Ft("scrollend",r),u.onClick!=null&&(r.onclick=wu),r=!0):r=!1,r||Or(s)}function sy(s){for(an=s.return;an;)switch(an.tag){case 5:case 13:_s=!1;return;case 27:case 3:_s=!0;return;default:an=an.return}}function Xo(s){if(s!==an)return!1;if(!Gt)return sy(s),Gt=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||_g(s.type,s.memoizedProps)),l=!l),l&&ve&&Or(s),sy(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));t:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(r===0){ve=ls(s.nextSibling);break t}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++;s=s.nextSibling}ve=null}}else r===27?(r=ve,Fi(s.type)?(s=Og,Og=null,ve=s):ve=r):ve=an?ls(s.stateNode.nextSibling):null;return!0}function qo(){ve=an=null,Gt=!1}function iy(){var s=wr;return s!==null&&(_n===null?_n=s:_n.push.apply(_n,s),wr=null),s}function Vo(s){wr===null?wr=[s]:wr.push(s)}var od=K(null),Er=null,Js=null;function wi(s,r,l){it(od,r._currentValue),r._currentValue=l}function ti(s){s._currentValue=od.current,ct(od)}function ld(s,r,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),s===l)break;s=s.return}}function cd(s,r,l,u){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var p=g.dependencies;if(p!==null){var x=g.child;p=p.firstContext;t:for(;p!==null;){var O=p;p=g;for(var D=0;D<r.length;D++)if(O.context===r[D]){p.lanes|=l,O=p.alternate,O!==null&&(O.lanes|=l),ld(p.return,l,s),u||(x=null);break t}p=O.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(n(341));x.lanes|=l,p=x.alternate,p!==null&&(p.lanes|=l),ld(x,l,s),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===s){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function Go(s,r,l,u){s=null;for(var g=r,p=!1;g!==null;){if(!p){if((g.flags&524288)!==0)p=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(n(387));if(x=x.memoizedProps,x!==null){var O=g.type;Dn(g.pendingProps.value,x.value)||(s!==null?s.push(O):s=[O])}}else if(g===$t.current){if(x=g.alternate,x===null)throw Error(n(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Sl):s=[Sl])}g=g.return}s!==null&&cd(r,s,l,u),r.flags|=262144}function Gc(s){for(s=s.firstContext;s!==null;){if(!Dn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ar(s){Er=s,Js=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ze(s){return ry(Er,s)}function Ic(s,r){return Er===null&&Ar(s),ry(s,r)}function ry(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Js===null){if(s===null)throw Error(n(308));Js=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Js=Js.next=r;return l}var WC=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},QC=i.unstable_scheduleCallback,KC=i.unstable_NormalPriority,ke={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ud(){return{controller:new WC,data:new Map,refCount:0}}function Io(s){s.refCount--,s.refCount===0&&QC(KC,function(){s.controller.abort()})}var Wo=null,hd=0,wa=0,Oa=null;function $C(s,r){if(Wo===null){var l=Wo=[];hd=0,wa=dg(),Oa={status:"pending",value:void 0,then:function(u){l.push(u)}}}return hd++,r.then(ay,ay),r}function ay(){if(--hd===0&&Wo!==null){Oa!==null&&(Oa.status="fulfilled");var s=Wo;Wo=null,wa=0,Oa=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function ZC(s,r){var l=[],u={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return s.then(function(){u.status="fulfilled",u.value=r;for(var g=0;g<l.length;g++)(0,l[g])(r)},function(g){for(u.status="rejected",u.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),u}var oy=X.S;X.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&$C(s,r),oy!==null&&oy(s,r)};var Dr=K(null);function fd(){var s=Dr.current;return s!==null?s:oe.pooledCache}function Wc(s,r){r===null?it(Dr,Dr.current):it(Dr,r.pool)}function ly(){var s=fd();return s===null?null:{parent:ke._currentValue,pool:s}}var Qo=Error(n(460)),cy=Error(n(474)),Qc=Error(n(542)),dd={then:function(){}};function uy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Kc(){}function hy(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Kc,Kc),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,dy(s),s;default:if(typeof r.status=="string")r.then(Kc,Kc);else{if(s=oe,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=r,s.status="pending",s.then(function(u){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=u}},function(u){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,dy(s),s}throw Ko=r,Qo}}var Ko=null;function fy(){if(Ko===null)throw Error(n(459));var s=Ko;return Ko=null,s}function dy(s){if(s===Qo||s===Qc)throw Error(n(483))}var Oi=!1;function gd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function md(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ei(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ai(s,r,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Zt&2)!==0){var g=u.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),u.pending=r,r=Yc(s),J0(s,null,l),r}return Pc(s,u,r,l),Yc(s)}function $o(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var u=r.lanes;u&=s.pendingLanes,l|=u,r.lanes=l,a0(s,l)}}function pd(s,r){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};p===null?g=p=x:p=p.next=x,l=l.next}while(l!==null);p===null?g=p=r:p=p.next=r}else g=p=r;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var yd=!1;function Zo(){if(yd){var s=Oa;if(s!==null)throw s}}function Jo(s,r,l,u){yd=!1;var g=s.updateQueue;Oi=!1;var p=g.firstBaseUpdate,x=g.lastBaseUpdate,O=g.shared.pending;if(O!==null){g.shared.pending=null;var D=O,Y=D.next;D.next=null,x===null?p=Y:x.next=Y,x=D;var $=s.alternate;$!==null&&($=$.updateQueue,O=$.lastBaseUpdate,O!==x&&(O===null?$.firstBaseUpdate=Y:O.next=Y,$.lastBaseUpdate=D))}if(p!==null){var tt=g.baseState;x=0,$=Y=D=null,O=p;do{var q=O.lane&-536870913,V=q!==O.lane;if(V?(Xt&q)===q:(u&q)===q){q!==0&&q===wa&&(yd=!0),$!==null&&($=$.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});t:{var Ot=s,_t=O;q=r;var se=l;switch(_t.tag){case 1:if(Ot=_t.payload,typeof Ot=="function"){tt=Ot.call(se,tt,q);break t}tt=Ot;break t;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=_t.payload,q=typeof Ot=="function"?Ot.call(se,tt,q):Ot,q==null)break t;tt=m({},tt,q);break t;case 2:Oi=!0}}q=O.callback,q!==null&&(s.flags|=64,V&&(s.flags|=8192),V=g.callbacks,V===null?g.callbacks=[q]:V.push(q))}else V={lane:q,tag:O.tag,payload:O.payload,callback:O.callback,next:null},$===null?(Y=$=V,D=tt):$=$.next=V,x|=q;if(O=O.next,O===null){if(O=g.shared.pending,O===null)break;V=O,O=V.next,V.next=null,g.lastBaseUpdate=V,g.shared.pending=null}}while(!0);$===null&&(D=tt),g.baseState=D,g.firstBaseUpdate=Y,g.lastBaseUpdate=$,p===null&&(g.shared.lanes=0),zi|=x,s.lanes=x,s.memoizedState=tt}}function gy(s,r){if(typeof s!="function")throw Error(n(191,s));s.call(r)}function my(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)gy(l[s],r)}var Ea=K(null),$c=K(0);function py(s,r){s=oi,it($c,s),it(Ea,r),oi=s|r.baseLanes}function vd(){it($c,oi),it(Ea,Ea.current)}function bd(){oi=$c.current,ct(Ea),ct($c)}var Di=0,Lt=null,ee=null,Ee=null,Zc=!1,Aa=!1,Mr=!1,Jc=0,tl=0,Da=null,JC=0;function _e(){throw Error(n(321))}function xd(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!Dn(s[l],r[l]))return!1;return!0}function Sd(s,r,l,u,g,p){return Di=p,Lt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=s===null||s.memoizedState===null?Jy:tv,Mr=!1,p=l(u,g),Mr=!1,Aa&&(p=vy(r,l,u,g)),yy(s),p}function yy(s){X.H=ru;var r=ee!==null&&ee.next!==null;if(Di=0,Ee=ee=Lt=null,Zc=!1,tl=0,Da=null,r)throw Error(n(300));s===null||Ue||(s=s.dependencies,s!==null&&Gc(s)&&(Ue=!0))}function vy(s,r,l,u){Lt=s;var g=0;do{if(Aa&&(Da=null),tl=0,Aa=!1,25<=g)throw Error(n(301));if(g+=1,Ee=ee=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}X.H=aT,p=r(l,u)}while(Aa);return p}function tT(){var s=X.H,r=s.useState()[0];return r=typeof r.then=="function"?el(r):r,s=s.useState()[0],(ee!==null?ee.memoizedState:null)!==s&&(Lt.flags|=1024),r}function _d(){var s=Jc!==0;return Jc=0,s}function Cd(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function Td(s){if(Zc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Zc=!1}Di=0,Ee=ee=Lt=null,Aa=!1,tl=Jc=0,Da=null}function xn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?Lt.memoizedState=Ee=s:Ee=Ee.next=s,Ee}function Ae(){if(ee===null){var s=Lt.alternate;s=s!==null?s.memoizedState:null}else s=ee.next;var r=Ee===null?Lt.memoizedState:Ee.next;if(r!==null)Ee=r,ee=s;else{if(s===null)throw Lt.alternate===null?Error(n(467)):Error(n(310));ee=s,s={memoizedState:ee.memoizedState,baseState:ee.baseState,baseQueue:ee.baseQueue,queue:ee.queue,next:null},Ee===null?Lt.memoizedState=Ee=s:Ee=Ee.next=s}return Ee}function wd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function el(s){var r=tl;return tl+=1,Da===null&&(Da=[]),s=hy(Da,s,r),r=Lt,(Ee===null?r.memoizedState:Ee.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?Jy:tv),s}function tu(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return el(s);if(s.$$typeof===E)return Ze(s)}throw Error(n(438,String(s)))}function Od(s){var r=null,l=Lt.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var u=Lt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=wd(),Lt.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),u=0;u<s;u++)l[u]=J;return r.index++,l}function ei(s,r){return typeof r=="function"?r(s):r}function eu(s){var r=Ae();return Ed(r,ee,s)}function Ed(s,r,l){var u=s.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=l;var g=s.baseQueue,p=u.pending;if(p!==null){if(g!==null){var x=g.next;g.next=p.next,p.next=x}r.baseQueue=g=p,u.pending=null}if(p=s.baseState,g===null)s.memoizedState=p;else{r=g.next;var O=x=null,D=null,Y=r,$=!1;do{var tt=Y.lane&-536870913;if(tt!==Y.lane?(Xt&tt)===tt:(Di&tt)===tt){var q=Y.revertLane;if(q===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),tt===wa&&($=!0);else if((Di&q)===q){Y=Y.next,q===wa&&($=!0);continue}else tt={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},D===null?(O=D=tt,x=p):D=D.next=tt,Lt.lanes|=q,zi|=q;tt=Y.action,Mr&&l(p,tt),p=Y.hasEagerState?Y.eagerState:l(p,tt)}else q={lane:tt,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},D===null?(O=D=q,x=p):D=D.next=q,Lt.lanes|=tt,zi|=tt;Y=Y.next}while(Y!==null&&Y!==r);if(D===null?x=p:D.next=O,!Dn(p,s.memoizedState)&&(Ue=!0,$&&(l=Oa,l!==null)))throw l;s.memoizedState=p,s.baseState=x,s.baseQueue=D,u.lastRenderedState=p}return g===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Ad(s){var r=Ae(),l=r.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=s;var u=l.dispatch,g=l.pending,p=r.memoizedState;if(g!==null){l.pending=null;var x=g=g.next;do p=s(p,x.action),x=x.next;while(x!==g);Dn(p,r.memoizedState)||(Ue=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),l.lastRenderedState=p}return[p,u]}function by(s,r,l){var u=Lt,g=Ae(),p=Gt;if(p){if(l===void 0)throw Error(n(407));l=l()}else l=r();var x=!Dn((ee||g).memoizedState,l);x&&(g.memoizedState=l,Ue=!0),g=g.queue;var O=_y.bind(null,u,g,s);if(nl(2048,8,O,[s]),g.getSnapshot!==r||x||Ee!==null&&Ee.memoizedState.tag&1){if(u.flags|=2048,Ma(9,nu(),Sy.bind(null,u,g,l,r),null),oe===null)throw Error(n(349));p||(Di&124)!==0||xy(u,r,l)}return l}function xy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Lt.updateQueue,r===null?(r=wd(),Lt.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function Sy(s,r,l,u){r.value=l,r.getSnapshot=u,Cy(r)&&Ty(s)}function _y(s,r,l){return l(function(){Cy(r)&&Ty(s)})}function Cy(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!Dn(s,l)}catch{return!0}}function Ty(s){var r=Sa(s,2);r!==null&&Bn(r,s,2)}function Dd(s){var r=xn();if(typeof s=="function"){var l=s;if(s=l(),Mr){rs(!0);try{l()}finally{rs(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:s},r}function wy(s,r,l,u){return s.baseState=l,Ed(s,ee,typeof u=="function"?u:ei)}function eT(s,r,l,u,g){if(iu(s))throw Error(n(485));if(s=r.action,s!==null){var p={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){p.listeners.push(x)}};X.T!==null?l(!0):p.isTransition=!1,u(p),l=r.pending,l===null?(p.next=r.pending=p,Oy(r,p)):(p.next=l.next,r.pending=l.next=p)}}function Oy(s,r){var l=r.action,u=r.payload,g=s.state;if(r.isTransition){var p=X.T,x={};X.T=x;try{var O=l(g,u),D=X.S;D!==null&&D(x,O),Ey(s,r,O)}catch(Y){Md(s,r,Y)}finally{X.T=p}}else try{p=l(g,u),Ey(s,r,p)}catch(Y){Md(s,r,Y)}}function Ey(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){Ay(s,r,u)},function(u){return Md(s,r,u)}):Ay(s,r,l)}function Ay(s,r,l){r.status="fulfilled",r.value=l,Dy(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,Oy(s,l)))}function Md(s,r,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=l,Dy(r),r=r.next;while(r!==u)}s.action=null}function Dy(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function My(s,r){return r}function Ry(s,r){if(Gt){var l=oe.formState;if(l!==null){t:{var u=Lt;if(Gt){if(ve){e:{for(var g=ve,p=_s;g.nodeType!==8;){if(!p){g=null;break e}if(g=ls(g.nextSibling),g===null){g=null;break e}}p=g.data,g=p==="F!"||p==="F"?g:null}if(g){ve=ls(g.nextSibling),u=g.data==="F!";break t}}Or(u)}u=!1}u&&(r=l[0])}}return l=xn(),l.memoizedState=l.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:My,lastRenderedState:r},l.queue=u,l=Ky.bind(null,Lt,u),u.dispatch=l,u=Dd(!1),p=Bd.bind(null,Lt,!1,u.queue),u=xn(),g={state:r,dispatch:null,action:s,pending:null},u.queue=g,l=eT.bind(null,Lt,g,p,l),g.dispatch=l,u.memoizedState=s,[r,l,!1]}function ky(s){var r=Ae();return jy(r,ee,s)}function jy(s,r,l){if(r=Ed(s,r,My)[0],s=eu(ei)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=el(r)}catch(x){throw x===Qo?Qc:x}else u=r;r=Ae();var g=r.queue,p=g.dispatch;return l!==r.memoizedState&&(Lt.flags|=2048,Ma(9,nu(),nT.bind(null,g,l),null)),[u,p,s]}function nT(s,r){s.action=r}function Ly(s){var r=Ae(),l=ee;if(l!==null)return jy(r,l,s);Ae(),r=r.memoizedState,l=Ae();var u=l.queue.dispatch;return l.memoizedState=s,[r,u,!1]}function Ma(s,r,l,u){return s={tag:s,create:l,deps:u,inst:r,next:null},r=Lt.updateQueue,r===null&&(r=wd(),Lt.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,r.lastEffect=s),s}function nu(){return{destroy:void 0,resource:void 0}}function By(){return Ae().memoizedState}function su(s,r,l,u){var g=xn();u=u===void 0?null:u,Lt.flags|=s,g.memoizedState=Ma(1|r,nu(),l,u)}function nl(s,r,l,u){var g=Ae();u=u===void 0?null:u;var p=g.memoizedState.inst;ee!==null&&u!==null&&xd(u,ee.memoizedState.deps)?g.memoizedState=Ma(r,p,l,u):(Lt.flags|=s,g.memoizedState=Ma(1|r,p,l,u))}function zy(s,r){su(8390656,8,s,r)}function Ny(s,r){nl(2048,8,s,r)}function Hy(s,r){return nl(4,2,s,r)}function Uy(s,r){return nl(4,4,s,r)}function Fy(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Py(s,r,l){l=l!=null?l.concat([s]):null,nl(4,4,Fy.bind(null,r,s),l)}function Rd(){}function Yy(s,r){var l=Ae();r=r===void 0?null:r;var u=l.memoizedState;return r!==null&&xd(r,u[1])?u[0]:(l.memoizedState=[s,r],s)}function Xy(s,r){var l=Ae();r=r===void 0?null:r;var u=l.memoizedState;if(r!==null&&xd(r,u[1]))return u[0];if(u=s(),Mr){rs(!0);try{s()}finally{rs(!1)}}return l.memoizedState=[u,r],u}function kd(s,r,l){return l===void 0||(Di&1073741824)!==0?s.memoizedState=r:(s.memoizedState=l,s=Gv(),Lt.lanes|=s,zi|=s,l)}function qy(s,r,l,u){return Dn(l,r)?l:Ea.current!==null?(s=kd(s,l,u),Dn(s,r)||(Ue=!0),s):(Di&42)===0?(Ue=!0,s.memoizedState=l):(s=Gv(),Lt.lanes|=s,zi|=s,r)}function Vy(s,r,l,u,g){var p=nt.p;nt.p=p!==0&&8>p?p:8;var x=X.T,O={};X.T=O,Bd(s,!1,r,l);try{var D=g(),Y=X.S;if(Y!==null&&Y(O,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var $=ZC(D,u);sl(s,r,$,Ln(s))}else sl(s,r,u,Ln(s))}catch(tt){sl(s,r,{then:function(){},status:"rejected",reason:tt},Ln())}finally{nt.p=p,X.T=x}}function sT(){}function jd(s,r,l,u){if(s.tag!==5)throw Error(n(476));var g=Gy(s).queue;Vy(s,g,r,at,l===null?sT:function(){return Iy(s),l(u)})}function Gy(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:at,baseState:at,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:at},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function Iy(s){var r=Gy(s).next.queue;sl(s,r,{},Ln())}function Ld(){return Ze(Sl)}function Wy(){return Ae().memoizedState}function Qy(){return Ae().memoizedState}function iT(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=Ln();s=Ei(l);var u=Ai(r,s,l);u!==null&&(Bn(u,r,l),$o(u,r,l)),r={cache:ud()},s.payload=r;return}r=r.return}}function rT(s,r,l){var u=Ln();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},iu(s)?$y(r,l):(l=td(s,r,l,u),l!==null&&(Bn(l,s,u),Zy(l,r,u)))}function Ky(s,r,l){var u=Ln();sl(s,r,l,u)}function sl(s,r,l,u){var g={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(iu(s))$y(r,g);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var x=r.lastRenderedState,O=p(x,l);if(g.hasEagerState=!0,g.eagerState=O,Dn(O,x))return Pc(s,r,g,0),oe===null&&Fc(),!1}catch{}finally{}if(l=td(s,r,g,u),l!==null)return Bn(l,s,u),Zy(l,r,u),!0}return!1}function Bd(s,r,l,u){if(u={lane:2,revertLane:dg(),action:u,hasEagerState:!1,eagerState:null,next:null},iu(s)){if(r)throw Error(n(479))}else r=td(s,l,u,2),r!==null&&Bn(r,s,2)}function iu(s){var r=s.alternate;return s===Lt||r!==null&&r===Lt}function $y(s,r){Aa=Zc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function Zy(s,r,l){if((l&4194048)!==0){var u=r.lanes;u&=s.pendingLanes,l|=u,r.lanes=l,a0(s,l)}}var ru={readContext:Ze,use:tu,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e,useHostTransitionStatus:_e,useFormState:_e,useActionState:_e,useOptimistic:_e,useMemoCache:_e,useCacheRefresh:_e},Jy={readContext:Ze,use:tu,useCallback:function(s,r){return xn().memoizedState=[s,r===void 0?null:r],s},useContext:Ze,useEffect:zy,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,su(4194308,4,Fy.bind(null,r,s),l)},useLayoutEffect:function(s,r){return su(4194308,4,s,r)},useInsertionEffect:function(s,r){su(4,2,s,r)},useMemo:function(s,r){var l=xn();r=r===void 0?null:r;var u=s();if(Mr){rs(!0);try{s()}finally{rs(!1)}}return l.memoizedState=[u,r],u},useReducer:function(s,r,l){var u=xn();if(l!==void 0){var g=l(r);if(Mr){rs(!0);try{l(r)}finally{rs(!1)}}}else g=r;return u.memoizedState=u.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},u.queue=s,s=s.dispatch=rT.bind(null,Lt,s),[u.memoizedState,s]},useRef:function(s){var r=xn();return s={current:s},r.memoizedState=s},useState:function(s){s=Dd(s);var r=s.queue,l=Ky.bind(null,Lt,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Rd,useDeferredValue:function(s,r){var l=xn();return kd(l,s,r)},useTransition:function(){var s=Dd(!1);return s=Vy.bind(null,Lt,s.queue,!0,!1),xn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var u=Lt,g=xn();if(Gt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=r(),oe===null)throw Error(n(349));(Xt&124)!==0||xy(u,r,l)}g.memoizedState=l;var p={value:l,getSnapshot:r};return g.queue=p,zy(_y.bind(null,u,p,s),[s]),u.flags|=2048,Ma(9,nu(),Sy.bind(null,u,p,l,r),null),l},useId:function(){var s=xn(),r=oe.identifierPrefix;if(Gt){var l=Zs,u=$s;l=(u&~(1<<32-Ke(u)-1)).toString(32)+l,r="«"+r+"R"+l,l=Jc++,0<l&&(r+="H"+l.toString(32)),r+="»"}else l=JC++,r="«"+r+"r"+l.toString(32)+"»";return s.memoizedState=r},useHostTransitionStatus:Ld,useFormState:Ry,useActionState:Ry,useOptimistic:function(s){var r=xn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Bd.bind(null,Lt,!0,l),l.dispatch=r,[s,r]},useMemoCache:Od,useCacheRefresh:function(){return xn().memoizedState=iT.bind(null,Lt)}},tv={readContext:Ze,use:tu,useCallback:Yy,useContext:Ze,useEffect:Ny,useImperativeHandle:Py,useInsertionEffect:Hy,useLayoutEffect:Uy,useMemo:Xy,useReducer:eu,useRef:By,useState:function(){return eu(ei)},useDebugValue:Rd,useDeferredValue:function(s,r){var l=Ae();return qy(l,ee.memoizedState,s,r)},useTransition:function(){var s=eu(ei)[0],r=Ae().memoizedState;return[typeof s=="boolean"?s:el(s),r]},useSyncExternalStore:by,useId:Wy,useHostTransitionStatus:Ld,useFormState:ky,useActionState:ky,useOptimistic:function(s,r){var l=Ae();return wy(l,ee,s,r)},useMemoCache:Od,useCacheRefresh:Qy},aT={readContext:Ze,use:tu,useCallback:Yy,useContext:Ze,useEffect:Ny,useImperativeHandle:Py,useInsertionEffect:Hy,useLayoutEffect:Uy,useMemo:Xy,useReducer:Ad,useRef:By,useState:function(){return Ad(ei)},useDebugValue:Rd,useDeferredValue:function(s,r){var l=Ae();return ee===null?kd(l,s,r):qy(l,ee.memoizedState,s,r)},useTransition:function(){var s=Ad(ei)[0],r=Ae().memoizedState;return[typeof s=="boolean"?s:el(s),r]},useSyncExternalStore:by,useId:Wy,useHostTransitionStatus:Ld,useFormState:Ly,useActionState:Ly,useOptimistic:function(s,r){var l=Ae();return ee!==null?wy(l,ee,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Od,useCacheRefresh:Qy},Ra=null,il=0;function au(s){var r=il;return il+=1,Ra===null&&(Ra=[]),hy(Ra,s,r)}function rl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function ou(s,r){throw r.$$typeof===y?Error(n(525)):(s=Object.prototype.toString.call(r),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function ev(s){var r=s._init;return r(s._payload)}function nv(s){function r(H,L){if(s){var P=H.deletions;P===null?(H.deletions=[L],H.flags|=16):P.push(L)}}function l(H,L){if(!s)return null;for(;L!==null;)r(H,L),L=L.sibling;return null}function u(H){for(var L=new Map;H!==null;)H.key!==null?L.set(H.key,H):L.set(H.index,H),H=H.sibling;return L}function g(H,L){return H=Ks(H,L),H.index=0,H.sibling=null,H}function p(H,L,P){return H.index=P,s?(P=H.alternate,P!==null?(P=P.index,P<L?(H.flags|=67108866,L):P):(H.flags|=67108866,L)):(H.flags|=1048576,L)}function x(H){return s&&H.alternate===null&&(H.flags|=67108866),H}function O(H,L,P,Z){return L===null||L.tag!==6?(L=nd(P,H.mode,Z),L.return=H,L):(L=g(L,P),L.return=H,L)}function D(H,L,P,Z){var pt=P.type;return pt===S?$(H,L,P.props.children,Z,P.key):L!==null&&(L.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===N&&ev(pt)===L.type)?(L=g(L,P.props),rl(L,P),L.return=H,L):(L=Xc(P.type,P.key,P.props,null,H.mode,Z),rl(L,P),L.return=H,L)}function Y(H,L,P,Z){return L===null||L.tag!==4||L.stateNode.containerInfo!==P.containerInfo||L.stateNode.implementation!==P.implementation?(L=sd(P,H.mode,Z),L.return=H,L):(L=g(L,P.children||[]),L.return=H,L)}function $(H,L,P,Z,pt){return L===null||L.tag!==7?(L=_r(P,H.mode,Z,pt),L.return=H,L):(L=g(L,P),L.return=H,L)}function tt(H,L,P){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=nd(""+L,H.mode,P),L.return=H,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case v:return P=Xc(L.type,L.key,L.props,null,H.mode,P),rl(P,L),P.return=H,P;case b:return L=sd(L,H.mode,P),L.return=H,L;case N:var Z=L._init;return L=Z(L._payload),tt(H,L,P)}if(bt(L)||rt(L))return L=_r(L,H.mode,P,null),L.return=H,L;if(typeof L.then=="function")return tt(H,au(L),P);if(L.$$typeof===E)return tt(H,Ic(H,L),P);ou(H,L)}return null}function q(H,L,P,Z){var pt=L!==null?L.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return pt!==null?null:O(H,L,""+P,Z);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case v:return P.key===pt?D(H,L,P,Z):null;case b:return P.key===pt?Y(H,L,P,Z):null;case N:return pt=P._init,P=pt(P._payload),q(H,L,P,Z)}if(bt(P)||rt(P))return pt!==null?null:$(H,L,P,Z,null);if(typeof P.then=="function")return q(H,L,au(P),Z);if(P.$$typeof===E)return q(H,L,Ic(H,P),Z);ou(H,P)}return null}function V(H,L,P,Z,pt){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return H=H.get(P)||null,O(L,H,""+Z,pt);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case v:return H=H.get(Z.key===null?P:Z.key)||null,D(L,H,Z,pt);case b:return H=H.get(Z.key===null?P:Z.key)||null,Y(L,H,Z,pt);case N:var zt=Z._init;return Z=zt(Z._payload),V(H,L,P,Z,pt)}if(bt(Z)||rt(Z))return H=H.get(P)||null,$(L,H,Z,pt,null);if(typeof Z.then=="function")return V(H,L,P,au(Z),pt);if(Z.$$typeof===E)return V(H,L,P,Ic(L,Z),pt);ou(L,Z)}return null}function Ot(H,L,P,Z){for(var pt=null,zt=null,xt=L,wt=L=0,Pe=null;xt!==null&&wt<P.length;wt++){xt.index>wt?(Pe=xt,xt=null):Pe=xt.sibling;var Vt=q(H,xt,P[wt],Z);if(Vt===null){xt===null&&(xt=Pe);break}s&&xt&&Vt.alternate===null&&r(H,xt),L=p(Vt,L,wt),zt===null?pt=Vt:zt.sibling=Vt,zt=Vt,xt=Pe}if(wt===P.length)return l(H,xt),Gt&&Tr(H,wt),pt;if(xt===null){for(;wt<P.length;wt++)xt=tt(H,P[wt],Z),xt!==null&&(L=p(xt,L,wt),zt===null?pt=xt:zt.sibling=xt,zt=xt);return Gt&&Tr(H,wt),pt}for(xt=u(xt);wt<P.length;wt++)Pe=V(xt,H,wt,P[wt],Z),Pe!==null&&(s&&Pe.alternate!==null&&xt.delete(Pe.key===null?wt:Pe.key),L=p(Pe,L,wt),zt===null?pt=Pe:zt.sibling=Pe,zt=Pe);return s&&xt.forEach(function(Vi){return r(H,Vi)}),Gt&&Tr(H,wt),pt}function _t(H,L,P,Z){if(P==null)throw Error(n(151));for(var pt=null,zt=null,xt=L,wt=L=0,Pe=null,Vt=P.next();xt!==null&&!Vt.done;wt++,Vt=P.next()){xt.index>wt?(Pe=xt,xt=null):Pe=xt.sibling;var Vi=q(H,xt,Vt.value,Z);if(Vi===null){xt===null&&(xt=Pe);break}s&&xt&&Vi.alternate===null&&r(H,xt),L=p(Vi,L,wt),zt===null?pt=Vi:zt.sibling=Vi,zt=Vi,xt=Pe}if(Vt.done)return l(H,xt),Gt&&Tr(H,wt),pt;if(xt===null){for(;!Vt.done;wt++,Vt=P.next())Vt=tt(H,Vt.value,Z),Vt!==null&&(L=p(Vt,L,wt),zt===null?pt=Vt:zt.sibling=Vt,zt=Vt);return Gt&&Tr(H,wt),pt}for(xt=u(xt);!Vt.done;wt++,Vt=P.next())Vt=V(xt,H,wt,Vt.value,Z),Vt!==null&&(s&&Vt.alternate!==null&&xt.delete(Vt.key===null?wt:Vt.key),L=p(Vt,L,wt),zt===null?pt=Vt:zt.sibling=Vt,zt=Vt);return s&&xt.forEach(function(ow){return r(H,ow)}),Gt&&Tr(H,wt),pt}function se(H,L,P,Z){if(typeof P=="object"&&P!==null&&P.type===S&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case v:t:{for(var pt=P.key;L!==null;){if(L.key===pt){if(pt=P.type,pt===S){if(L.tag===7){l(H,L.sibling),Z=g(L,P.props.children),Z.return=H,H=Z;break t}}else if(L.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===N&&ev(pt)===L.type){l(H,L.sibling),Z=g(L,P.props),rl(Z,P),Z.return=H,H=Z;break t}l(H,L);break}else r(H,L);L=L.sibling}P.type===S?(Z=_r(P.props.children,H.mode,Z,P.key),Z.return=H,H=Z):(Z=Xc(P.type,P.key,P.props,null,H.mode,Z),rl(Z,P),Z.return=H,H=Z)}return x(H);case b:t:{for(pt=P.key;L!==null;){if(L.key===pt)if(L.tag===4&&L.stateNode.containerInfo===P.containerInfo&&L.stateNode.implementation===P.implementation){l(H,L.sibling),Z=g(L,P.children||[]),Z.return=H,H=Z;break t}else{l(H,L);break}else r(H,L);L=L.sibling}Z=sd(P,H.mode,Z),Z.return=H,H=Z}return x(H);case N:return pt=P._init,P=pt(P._payload),se(H,L,P,Z)}if(bt(P))return Ot(H,L,P,Z);if(rt(P)){if(pt=rt(P),typeof pt!="function")throw Error(n(150));return P=pt.call(P),_t(H,L,P,Z)}if(typeof P.then=="function")return se(H,L,au(P),Z);if(P.$$typeof===E)return se(H,L,Ic(H,P),Z);ou(H,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,L!==null&&L.tag===6?(l(H,L.sibling),Z=g(L,P),Z.return=H,H=Z):(l(H,L),Z=nd(P,H.mode,Z),Z.return=H,H=Z),x(H)):l(H,L)}return function(H,L,P,Z){try{il=0;var pt=se(H,L,P,Z);return Ra=null,pt}catch(xt){if(xt===Qo||xt===Qc)throw xt;var zt=Mn(29,xt,null,H.mode);return zt.lanes=Z,zt.return=H,zt}finally{}}}var ka=nv(!0),sv=nv(!1),Qn=K(null),Cs=null;function Mi(s){var r=s.alternate;it(je,je.current&1),it(Qn,s),Cs===null&&(r===null||Ea.current!==null||r.memoizedState!==null)&&(Cs=s)}function iv(s){if(s.tag===22){if(it(je,je.current),it(Qn,s),Cs===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(Cs=s)}}else Ri()}function Ri(){it(je,je.current),it(Qn,Qn.current)}function ni(s){ct(Qn),Cs===s&&(Cs=null),ct(je)}var je=K(0);function lu(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||wg(l)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function zd(s,r,l,u){r=s.memoizedState,l=l(u,r),l=l==null?r:m({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Nd={enqueueSetState:function(s,r,l){s=s._reactInternals;var u=Ln(),g=Ei(u);g.payload=r,l!=null&&(g.callback=l),r=Ai(s,g,u),r!==null&&(Bn(r,s,u),$o(r,s,u))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var u=Ln(),g=Ei(u);g.tag=1,g.payload=r,l!=null&&(g.callback=l),r=Ai(s,g,u),r!==null&&(Bn(r,s,u),$o(r,s,u))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=Ln(),u=Ei(l);u.tag=2,r!=null&&(u.callback=r),r=Ai(s,u,l),r!==null&&(Bn(r,s,l),$o(r,s,l))}};function rv(s,r,l,u,g,p,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,p,x):r.prototype&&r.prototype.isPureReactComponent?!Po(l,u)||!Po(g,p):!0}function av(s,r,l,u){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,u),r.state!==s&&Nd.enqueueReplaceState(r,r.state,null)}function Rr(s,r){var l=r;if("ref"in r){l={};for(var u in r)u!=="ref"&&(l[u]=r[u])}if(s=s.defaultProps){l===r&&(l=m({},l));for(var g in s)l[g]===void 0&&(l[g]=s[g])}return l}var cu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function ov(s){cu(s)}function lv(s){console.error(s)}function cv(s){cu(s)}function uu(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function uv(s,r,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Hd(s,r,l){return l=Ei(l),l.tag=3,l.payload={element:null},l.callback=function(){uu(s,r)},l}function hv(s){return s=Ei(s),s.tag=3,s}function fv(s,r,l,u){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var p=u.value;s.payload=function(){return g(p)},s.callback=function(){uv(r,l,u)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(s.callback=function(){uv(r,l,u),typeof g!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var O=u.stack;this.componentDidCatch(u.value,{componentStack:O!==null?O:""})})}function oT(s,r,l,u,g){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=l.alternate,r!==null&&Go(r,l,g,!0),l=Qn.current,l!==null){switch(l.tag){case 13:return Cs===null?lg():l.alternate===null&&be===0&&(be=3),l.flags&=-257,l.flags|=65536,l.lanes=g,u===dd?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([u]):r.add(u),ug(s,u,g)),!1;case 22:return l.flags|=65536,u===dd?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([u]):l.add(u)),ug(s,u,g)),!1}throw Error(n(435,l.tag))}return ug(s,u,g),lg(),!1}if(Gt)return r=Qn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,u!==ad&&(s=Error(n(422),{cause:u}),Vo(Vn(s,l)))):(u!==ad&&(r=Error(n(423),{cause:u}),Vo(Vn(r,l))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,u=Vn(u,l),g=Hd(s.stateNode,u,g),pd(s,g),be!==4&&(be=2)),!1;var p=Error(n(520),{cause:u});if(p=Vn(p,l),fl===null?fl=[p]:fl.push(p),be!==4&&(be=2),r===null)return!0;u=Vn(u,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=g&-g,l.lanes|=s,s=Hd(l.stateNode,u,s),pd(l,s),!1;case 1:if(r=l.type,p=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ni===null||!Ni.has(p))))return l.flags|=65536,g&=-g,l.lanes|=g,g=hv(g),fv(g,s,l,u),pd(l,g),!1}l=l.return}while(l!==null);return!1}var dv=Error(n(461)),Ue=!1;function Xe(s,r,l,u){r.child=s===null?sv(r,null,l,u):ka(r,s.child,l,u)}function gv(s,r,l,u,g){l=l.render;var p=r.ref;if("ref"in u){var x={};for(var O in u)O!=="ref"&&(x[O]=u[O])}else x=u;return Ar(r),u=Sd(s,r,l,x,p,g),O=_d(),s!==null&&!Ue?(Cd(s,r,g),si(s,r,g)):(Gt&&O&&id(r),r.flags|=1,Xe(s,r,u,g),r.child)}function mv(s,r,l,u,g){if(s===null){var p=l.type;return typeof p=="function"&&!ed(p)&&p.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=p,pv(s,r,p,u,g)):(s=Xc(l.type,null,u,r,r.mode,g),s.ref=r.ref,s.return=r,r.child=s)}if(p=s.child,!Gd(s,g)){var x=p.memoizedProps;if(l=l.compare,l=l!==null?l:Po,l(x,u)&&s.ref===r.ref)return si(s,r,g)}return r.flags|=1,s=Ks(p,u),s.ref=r.ref,s.return=r,r.child=s}function pv(s,r,l,u,g){if(s!==null){var p=s.memoizedProps;if(Po(p,u)&&s.ref===r.ref)if(Ue=!1,r.pendingProps=u=p,Gd(s,g))(s.flags&131072)!==0&&(Ue=!0);else return r.lanes=s.lanes,si(s,r,g)}return Ud(s,r,l,u,g)}function yv(s,r,l){var u=r.pendingProps,g=u.children,p=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=p!==null?p.baseLanes|l:l,s!==null){for(g=r.child=s.child,p=0;g!==null;)p=p|g.lanes|g.childLanes,g=g.sibling;r.childLanes=p&~u}else r.childLanes=0,r.child=null;return vv(s,r,u,l)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Wc(r,p!==null?p.cachePool:null),p!==null?py(r,p):vd(),iv(r);else return r.lanes=r.childLanes=536870912,vv(s,r,p!==null?p.baseLanes|l:l,l)}else p!==null?(Wc(r,p.cachePool),py(r,p),Ri(),r.memoizedState=null):(s!==null&&Wc(r,null),vd(),Ri());return Xe(s,r,g,l),r.child}function vv(s,r,l,u){var g=fd();return g=g===null?null:{parent:ke._currentValue,pool:g},r.memoizedState={baseLanes:l,cachePool:g},s!==null&&Wc(r,null),vd(),iv(r),s!==null&&Go(s,r,u,!0),null}function hu(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function Ud(s,r,l,u,g){return Ar(r),l=Sd(s,r,l,u,void 0,g),u=_d(),s!==null&&!Ue?(Cd(s,r,g),si(s,r,g)):(Gt&&u&&id(r),r.flags|=1,Xe(s,r,l,g),r.child)}function bv(s,r,l,u,g,p){return Ar(r),r.updateQueue=null,l=vy(r,u,l,g),yy(s),u=_d(),s!==null&&!Ue?(Cd(s,r,p),si(s,r,p)):(Gt&&u&&id(r),r.flags|=1,Xe(s,r,l,p),r.child)}function xv(s,r,l,u,g){if(Ar(r),r.stateNode===null){var p=_a,x=l.contextType;typeof x=="object"&&x!==null&&(p=Ze(x)),p=new l(u,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Nd,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=u,p.state=r.memoizedState,p.refs={},gd(r),x=l.contextType,p.context=typeof x=="object"&&x!==null?Ze(x):_a,p.state=r.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(zd(r,l,x,u),p.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(x=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),x!==p.state&&Nd.enqueueReplaceState(p,p.state,null),Jo(r,u,p,g),Zo(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(s===null){p=r.stateNode;var O=r.memoizedProps,D=Rr(l,O);p.props=D;var Y=p.context,$=l.contextType;x=_a,typeof $=="object"&&$!==null&&(x=Ze($));var tt=l.getDerivedStateFromProps;$=typeof tt=="function"||typeof p.getSnapshotBeforeUpdate=="function",O=r.pendingProps!==O,$||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(O||Y!==x)&&av(r,p,u,x),Oi=!1;var q=r.memoizedState;p.state=q,Jo(r,u,p,g),Zo(),Y=r.memoizedState,O||q!==Y||Oi?(typeof tt=="function"&&(zd(r,l,tt,u),Y=r.memoizedState),(D=Oi||rv(r,l,D,u,q,Y,x))?($||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=Y),p.props=u,p.state=Y,p.context=x,u=D):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{p=r.stateNode,md(s,r),x=r.memoizedProps,$=Rr(l,x),p.props=$,tt=r.pendingProps,q=p.context,Y=l.contextType,D=_a,typeof Y=="object"&&Y!==null&&(D=Ze(Y)),O=l.getDerivedStateFromProps,(Y=typeof O=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x!==tt||q!==D)&&av(r,p,u,D),Oi=!1,q=r.memoizedState,p.state=q,Jo(r,u,p,g),Zo();var V=r.memoizedState;x!==tt||q!==V||Oi||s!==null&&s.dependencies!==null&&Gc(s.dependencies)?(typeof O=="function"&&(zd(r,l,O,u),V=r.memoizedState),($=Oi||rv(r,l,$,u,q,V,D)||s!==null&&s.dependencies!==null&&Gc(s.dependencies))?(Y||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,V,D),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,V,D)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||x===s.memoizedProps&&q===s.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&q===s.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=V),p.props=u,p.state=V,p.context=D,u=$):(typeof p.componentDidUpdate!="function"||x===s.memoizedProps&&q===s.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&q===s.memoizedState||(r.flags|=1024),u=!1)}return p=u,hu(s,r),u=(r.flags&128)!==0,p||u?(p=r.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,s!==null&&u?(r.child=ka(r,s.child,null,g),r.child=ka(r,null,l,g)):Xe(s,r,l,g),r.memoizedState=p.state,s=r.child):s=si(s,r,g),s}function Sv(s,r,l,u){return qo(),r.flags|=256,Xe(s,r,l,u),r.child}var Fd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pd(s){return{baseLanes:s,cachePool:ly()}}function Yd(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Kn),s}function _v(s,r,l){var u=r.pendingProps,g=!1,p=(r.flags&128)!==0,x;if((x=p)||(x=s!==null&&s.memoizedState===null?!1:(je.current&2)!==0),x&&(g=!0,r.flags&=-129),x=(r.flags&32)!==0,r.flags&=-33,s===null){if(Gt){if(g?Mi(r):Ri(),Gt){var O=ve,D;if(D=O){t:{for(D=O,O=_s;D.nodeType!==8;){if(!O){O=null;break t}if(D=ls(D.nextSibling),D===null){O=null;break t}}O=D}O!==null?(r.memoizedState={dehydrated:O,treeContext:Cr!==null?{id:$s,overflow:Zs}:null,retryLane:536870912,hydrationErrors:null},D=Mn(18,null,null,0),D.stateNode=O,D.return=r,r.child=D,an=r,ve=null,D=!0):D=!1}D||Or(r)}if(O=r.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return wg(O)?r.lanes=32:r.lanes=536870912,null;ni(r)}return O=u.children,u=u.fallback,g?(Ri(),g=r.mode,O=fu({mode:"hidden",children:O},g),u=_r(u,g,l,null),O.return=r,u.return=r,O.sibling=u,r.child=O,g=r.child,g.memoizedState=Pd(l),g.childLanes=Yd(s,x,l),r.memoizedState=Fd,u):(Mi(r),Xd(r,O))}if(D=s.memoizedState,D!==null&&(O=D.dehydrated,O!==null)){if(p)r.flags&256?(Mi(r),r.flags&=-257,r=qd(s,r,l)):r.memoizedState!==null?(Ri(),r.child=s.child,r.flags|=128,r=null):(Ri(),g=u.fallback,O=r.mode,u=fu({mode:"visible",children:u.children},O),g=_r(g,O,l,null),g.flags|=2,u.return=r,g.return=r,u.sibling=g,r.child=u,ka(r,s.child,null,l),u=r.child,u.memoizedState=Pd(l),u.childLanes=Yd(s,x,l),r.memoizedState=Fd,r=g);else if(Mi(r),wg(O)){if(x=O.nextSibling&&O.nextSibling.dataset,x)var Y=x.dgst;x=Y,u=Error(n(419)),u.stack="",u.digest=x,Vo({value:u,source:null,stack:null}),r=qd(s,r,l)}else if(Ue||Go(s,r,l,!1),x=(l&s.childLanes)!==0,Ue||x){if(x=oe,x!==null&&(u=l&-l,u=(u&42)!==0?1:Of(u),u=(u&(x.suspendedLanes|l))!==0?0:u,u!==0&&u!==D.retryLane))throw D.retryLane=u,Sa(s,u),Bn(x,s,u),dv;O.data==="$?"||lg(),r=qd(s,r,l)}else O.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=D.treeContext,ve=ls(O.nextSibling),an=r,Gt=!0,wr=null,_s=!1,s!==null&&(In[Wn++]=$s,In[Wn++]=Zs,In[Wn++]=Cr,$s=s.id,Zs=s.overflow,Cr=r),r=Xd(r,u.children),r.flags|=4096);return r}return g?(Ri(),g=u.fallback,O=r.mode,D=s.child,Y=D.sibling,u=Ks(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,Y!==null?g=Ks(Y,g):(g=_r(g,O,l,null),g.flags|=2),g.return=r,u.return=r,u.sibling=g,r.child=u,u=g,g=r.child,O=s.child.memoizedState,O===null?O=Pd(l):(D=O.cachePool,D!==null?(Y=ke._currentValue,D=D.parent!==Y?{parent:Y,pool:Y}:D):D=ly(),O={baseLanes:O.baseLanes|l,cachePool:D}),g.memoizedState=O,g.childLanes=Yd(s,x,l),r.memoizedState=Fd,u):(Mi(r),l=s.child,s=l.sibling,l=Ks(l,{mode:"visible",children:u.children}),l.return=r,l.sibling=null,s!==null&&(x=r.deletions,x===null?(r.deletions=[s],r.flags|=16):x.push(s)),r.child=l,r.memoizedState=null,l)}function Xd(s,r){return r=fu({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function fu(s,r){return s=Mn(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function qd(s,r,l){return ka(r,s.child,null,l),s=Xd(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function Cv(s,r,l){s.lanes|=r;var u=s.alternate;u!==null&&(u.lanes|=r),ld(s.return,r,l)}function Vd(s,r,l,u,g){var p=s.memoizedState;p===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=l,p.tailMode=g)}function Tv(s,r,l){var u=r.pendingProps,g=u.revealOrder,p=u.tail;if(Xe(s,r,u.children,l),u=je.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Cv(s,l,r);else if(s.tag===19)Cv(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(it(je,u),g){case"forwards":for(l=r.child,g=null;l!==null;)s=l.alternate,s!==null&&lu(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=r.child,r.child=null):(g=l.sibling,l.sibling=null),Vd(r,!1,g,l,p);break;case"backwards":for(l=null,g=r.child,r.child=null;g!==null;){if(s=g.alternate,s!==null&&lu(s)===null){r.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}Vd(r,!0,l,null,p);break;case"together":Vd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function si(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),zi|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Go(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(n(153));if(r.child!==null){for(s=r.child,l=Ks(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Ks(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function Gd(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Gc(s)))}function lT(s,r,l){switch(r.tag){case 3:et(r,r.stateNode.containerInfo),wi(r,ke,s.memoizedState.cache),qo();break;case 27:case 5:Ht(r);break;case 4:et(r,r.stateNode.containerInfo);break;case 10:wi(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Mi(r),r.flags|=128,null):(l&r.child.childLanes)!==0?_v(s,r,l):(Mi(r),s=si(s,r,l),s!==null?s.sibling:null);Mi(r);break;case 19:var g=(s.flags&128)!==0;if(u=(l&r.childLanes)!==0,u||(Go(s,r,l,!1),u=(l&r.childLanes)!==0),g){if(u)return Tv(s,r,l);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),it(je,je.current),u)break;return null;case 22:case 23:return r.lanes=0,yv(s,r,l);case 24:wi(r,ke,s.memoizedState.cache)}return si(s,r,l)}function wv(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Ue=!0;else{if(!Gd(s,l)&&(r.flags&128)===0)return Ue=!1,lT(s,r,l);Ue=(s.flags&131072)!==0}else Ue=!1,Gt&&(r.flags&1048576)!==0&&ey(r,Vc,r.index);switch(r.lanes=0,r.tag){case 16:t:{s=r.pendingProps;var u=r.elementType,g=u._init;if(u=g(u._payload),r.type=u,typeof u=="function")ed(u)?(s=Rr(u,s),r.tag=1,r=xv(null,r,u,s,l)):(r.tag=0,r=Ud(null,r,u,s,l));else{if(u!=null){if(g=u.$$typeof,g===k){r.tag=11,r=gv(null,r,u,s,l);break t}else if(g===F){r.tag=14,r=mv(null,r,u,s,l);break t}}throw r=ft(u)||u,Error(n(306,r,""))}}return r;case 0:return Ud(s,r,r.type,r.pendingProps,l);case 1:return u=r.type,g=Rr(u,r.pendingProps),xv(s,r,u,g,l);case 3:t:{if(et(r,r.stateNode.containerInfo),s===null)throw Error(n(387));u=r.pendingProps;var p=r.memoizedState;g=p.element,md(s,r),Jo(r,u,null,l);var x=r.memoizedState;if(u=x.cache,wi(r,ke,u),u!==p.cache&&cd(r,[ke],l,!0),Zo(),u=x.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:x.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=Sv(s,r,u,l);break t}else if(u!==g){g=Vn(Error(n(424)),r),Vo(g),r=Sv(s,r,u,l);break t}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ve=ls(s.firstChild),an=r,Gt=!0,wr=null,_s=!0,l=sv(r,null,u,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(qo(),u===g){r=si(s,r,l);break t}Xe(s,r,u,l)}r=r.child}return r;case 26:return hu(s,r),s===null?(l=D1(r.type,null,r.pendingProps,null))?r.memoizedState=l:Gt||(l=r.type,s=r.pendingProps,u=Ou(vt.current).createElement(l),u[$e]=r,u[vn]=s,Ve(u,l,s),He(u),r.stateNode=u):r.memoizedState=D1(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Ht(r),s===null&&Gt&&(u=r.stateNode=O1(r.type,r.pendingProps,vt.current),an=r,_s=!0,g=ve,Fi(r.type)?(Og=g,ve=ls(u.firstChild)):ve=g),Xe(s,r,r.pendingProps.children,l),hu(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Gt&&((g=u=ve)&&(u=zT(u,r.type,r.pendingProps,_s),u!==null?(r.stateNode=u,an=r,ve=ls(u.firstChild),_s=!1,g=!0):g=!1),g||Or(r)),Ht(r),g=r.type,p=r.pendingProps,x=s!==null?s.memoizedProps:null,u=p.children,_g(g,p)?u=null:x!==null&&_g(g,x)&&(r.flags|=32),r.memoizedState!==null&&(g=Sd(s,r,tT,null,null,l),Sl._currentValue=g),hu(s,r),Xe(s,r,u,l),r.child;case 6:return s===null&&Gt&&((s=l=ve)&&(l=NT(l,r.pendingProps,_s),l!==null?(r.stateNode=l,an=r,ve=null,s=!0):s=!1),s||Or(r)),null;case 13:return _v(s,r,l);case 4:return et(r,r.stateNode.containerInfo),u=r.pendingProps,s===null?r.child=ka(r,null,u,l):Xe(s,r,u,l),r.child;case 11:return gv(s,r,r.type,r.pendingProps,l);case 7:return Xe(s,r,r.pendingProps,l),r.child;case 8:return Xe(s,r,r.pendingProps.children,l),r.child;case 12:return Xe(s,r,r.pendingProps.children,l),r.child;case 10:return u=r.pendingProps,wi(r,r.type,u.value),Xe(s,r,u.children,l),r.child;case 9:return g=r.type._context,u=r.pendingProps.children,Ar(r),g=Ze(g),u=u(g),r.flags|=1,Xe(s,r,u,l),r.child;case 14:return mv(s,r,r.type,r.pendingProps,l);case 15:return pv(s,r,r.type,r.pendingProps,l);case 19:return Tv(s,r,l);case 31:return u=r.pendingProps,l=r.mode,u={mode:u.mode,children:u.children},s===null?(l=fu(u,l),l.ref=r.ref,r.child=l,l.return=r,r=l):(l=Ks(s.child,u),l.ref=r.ref,r.child=l,l.return=r,r=l),r;case 22:return yv(s,r,l);case 24:return Ar(r),u=Ze(ke),s===null?(g=fd(),g===null&&(g=oe,p=ud(),g.pooledCache=p,p.refCount++,p!==null&&(g.pooledCacheLanes|=l),g=p),r.memoizedState={parent:u,cache:g},gd(r),wi(r,ke,g)):((s.lanes&l)!==0&&(md(s,r),Jo(r,null,null,l),Zo()),g=s.memoizedState,p=r.memoizedState,g.parent!==u?(g={parent:u,cache:u},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),wi(r,ke,u)):(u=p.cache,wi(r,ke,u),u!==g.cache&&cd(r,[ke],l,!0))),Xe(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function ii(s){s.flags|=4}function Ov(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!L1(r)){if(r=Qn.current,r!==null&&((Xt&4194048)===Xt?Cs!==null:(Xt&62914560)!==Xt&&(Xt&536870912)===0||r!==Cs))throw Ko=dd,cy;s.flags|=8192}}function du(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?i0():536870912,s.lanes|=r,za|=r)}function al(s,r){if(!Gt)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function me(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(r)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=u,s.childLanes=l,r}function cT(s,r,l){var u=r.pendingProps;switch(rd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return me(r),null;case 1:return me(r),null;case 3:return l=r.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),ti(ke),Tt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Xo(r)?ii(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,iy())),me(r),null;case 26:return l=r.memoizedState,s===null?(ii(r),l!==null?(me(r),Ov(r,l)):(me(r),r.flags&=-16777217)):l?l!==s.memoizedState?(ii(r),me(r),Ov(r,l)):(me(r),r.flags&=-16777217):(s.memoizedProps!==u&&ii(r),me(r),r.flags&=-16777217),null;case 27:ye(r),l=vt.current;var g=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==u&&ii(r);else{if(!u){if(r.stateNode===null)throw Error(n(166));return me(r),null}s=gt.current,Xo(r)?ny(r):(s=O1(g,u,l),r.stateNode=s,ii(r))}return me(r),null;case 5:if(ye(r),l=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==u&&ii(r);else{if(!u){if(r.stateNode===null)throw Error(n(166));return me(r),null}if(s=gt.current,Xo(r))ny(r);else{switch(g=Ou(vt.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?g.createElement(l,{is:u.is}):g.createElement(l)}}s[$e]=r,s[vn]=u;t:for(g=r.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===r)break t;for(;g.sibling===null;){if(g.return===null||g.return===r)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}r.stateNode=s;t:switch(Ve(s,l,u),l){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&ii(r)}}return me(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==u&&ii(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(s=vt.current,Xo(r)){if(s=r.stateNode,l=r.memoizedProps,u=null,g=an,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}s[$e]=r,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||b1(s.nodeValue,l)),s||Or(r)}else s=Ou(s).createTextNode(u),s[$e]=r,r.stateNode=s}return me(r),null;case 13:if(u=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Xo(r),u!==null&&u.dehydrated!==null){if(s===null){if(!g)throw Error(n(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[$e]=r}else qo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;me(r),g=!1}else g=iy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(ni(r),r):(ni(r),null)}if(ni(r),(r.flags&128)!==0)return r.lanes=l,r;if(l=u!==null,s=s!==null&&s.memoizedState!==null,l){u=r.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==g&&(u.flags|=2048)}return l!==s&&l&&(r.child.flags|=8192),du(r,r.updateQueue),me(r),null;case 4:return Tt(),s===null&&yg(r.stateNode.containerInfo),me(r),null;case 10:return ti(r.type),me(r),null;case 19:if(ct(je),g=r.memoizedState,g===null)return me(r),null;if(u=(r.flags&128)!==0,p=g.rendering,p===null)if(u)al(g,!1);else{if(be!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(p=lu(s),p!==null){for(r.flags|=128,al(g,!1),s=p.updateQueue,r.updateQueue=s,du(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)ty(l,s),l=l.sibling;return it(je,je.current&1|2),r.child}s=s.sibling}g.tail!==null&&Re()>pu&&(r.flags|=128,u=!0,al(g,!1),r.lanes=4194304)}else{if(!u)if(s=lu(p),s!==null){if(r.flags|=128,u=!0,s=s.updateQueue,r.updateQueue=s,du(r,s),al(g,!0),g.tail===null&&g.tailMode==="hidden"&&!p.alternate&&!Gt)return me(r),null}else 2*Re()-g.renderingStartTime>pu&&l!==536870912&&(r.flags|=128,u=!0,al(g,!1),r.lanes=4194304);g.isBackwards?(p.sibling=r.child,r.child=p):(s=g.last,s!==null?s.sibling=p:r.child=p,g.last=p)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=Re(),r.sibling=null,s=je.current,it(je,u?s&1|2:s&1),r):(me(r),null);case 22:case 23:return ni(r),bd(),u=r.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(l&536870912)!==0&&(r.flags&128)===0&&(me(r),r.subtreeFlags&6&&(r.flags|=8192)):me(r),l=r.updateQueue,l!==null&&du(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==l&&(r.flags|=2048),s!==null&&ct(Dr),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ti(ke),me(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function uT(s,r){switch(rd(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return ti(ke),Tt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return ye(r),null;case 13:if(ni(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(n(340));qo()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ct(je),null;case 4:return Tt(),null;case 10:return ti(r.type),null;case 22:case 23:return ni(r),bd(),s!==null&&ct(Dr),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return ti(ke),null;case 25:return null;default:return null}}function Ev(s,r){switch(rd(r),r.tag){case 3:ti(ke),Tt();break;case 26:case 27:case 5:ye(r);break;case 4:Tt();break;case 13:ni(r);break;case 19:ct(je);break;case 10:ti(r.type);break;case 22:case 23:ni(r),bd(),s!==null&&ct(Dr);break;case 24:ti(ke)}}function ol(s,r){try{var l=r.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var g=u.next;l=g;do{if((l.tag&s)===s){u=void 0;var p=l.create,x=l.inst;u=p(),x.destroy=u}l=l.next}while(l!==g)}}catch(O){re(r,r.return,O)}}function ki(s,r,l){try{var u=r.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var p=g.next;u=p;do{if((u.tag&s)===s){var x=u.inst,O=x.destroy;if(O!==void 0){x.destroy=void 0,g=r;var D=l,Y=O;try{Y()}catch($){re(g,D,$)}}}u=u.next}while(u!==p)}}catch($){re(r,r.return,$)}}function Av(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{my(r,l)}catch(u){re(s,s.return,u)}}}function Dv(s,r,l){l.props=Rr(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){re(s,r,u)}}function ll(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(g){re(s,r,g)}}function Ts(s,r){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(g){re(s,r,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){re(s,r,g)}else l.current=null}function Mv(s){var r=s.type,l=s.memoizedProps,u=s.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break t;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(g){re(s,s.return,g)}}function Id(s,r,l){try{var u=s.stateNode;RT(u,s.type,l,r),u[vn]=r}catch(g){re(s,s.return,g)}}function Rv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Fi(s.type)||s.tag===4}function Wd(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Rv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Fi(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Qd(s,r,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=wu));else if(u!==4&&(u===27&&Fi(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(Qd(s,r,l),s=s.sibling;s!==null;)Qd(s,r,l),s=s.sibling}function gu(s,r,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(u!==4&&(u===27&&Fi(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(gu(s,r,l),s=s.sibling;s!==null;)gu(s,r,l),s=s.sibling}function kv(s){var r=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);Ve(r,u,l),r[$e]=s,r[vn]=l}catch(p){re(s,s.return,p)}}var ri=!1,Ce=!1,Kd=!1,jv=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function hT(s,r){if(s=s.containerInfo,xg=ku,s=q0(s),Wf(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break t}var x=0,O=-1,D=-1,Y=0,$=0,tt=s,q=null;e:for(;;){for(var V;tt!==l||g!==0&&tt.nodeType!==3||(O=x+g),tt!==p||u!==0&&tt.nodeType!==3||(D=x+u),tt.nodeType===3&&(x+=tt.nodeValue.length),(V=tt.firstChild)!==null;)q=tt,tt=V;for(;;){if(tt===s)break e;if(q===l&&++Y===g&&(O=x),q===p&&++$===u&&(D=x),(V=tt.nextSibling)!==null)break;tt=q,q=tt.parentNode}tt=V}l=O===-1||D===-1?null:{start:O,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(Sg={focusedElem:s,selectionRange:l},ku=!1,Fe=r;Fe!==null;)if(r=Fe,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,Fe=s;else for(;Fe!==null;){switch(r=Fe,p=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,l=r,g=p.memoizedProps,p=p.memoizedState,u=l.stateNode;try{var Ot=Rr(l.type,g,l.elementType===l.type);s=u.getSnapshotBeforeUpdate(Ot,p),u.__reactInternalSnapshotBeforeUpdate=s}catch(_t){re(l,l.return,_t)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)Tg(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Tg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=r.sibling,s!==null){s.return=r.return,Fe=s;break}Fe=r.return}}function Lv(s,r,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:ji(s,l),u&4&&ol(5,l);break;case 1:if(ji(s,l),u&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(x){re(l,l.return,x)}else{var g=Rr(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(g,r,s.__reactInternalSnapshotBeforeUpdate)}catch(x){re(l,l.return,x)}}u&64&&Av(l),u&512&&ll(l,l.return);break;case 3:if(ji(s,l),u&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{my(s,r)}catch(x){re(l,l.return,x)}}break;case 27:r===null&&u&4&&kv(l);case 26:case 5:ji(s,l),r===null&&u&4&&Mv(l),u&512&&ll(l,l.return);break;case 12:ji(s,l);break;case 13:ji(s,l),u&4&&Nv(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=xT.bind(null,l),HT(s,l))));break;case 22:if(u=l.memoizedState!==null||ri,!u){r=r!==null&&r.memoizedState!==null||Ce,g=ri;var p=Ce;ri=u,(Ce=r)&&!p?Li(s,l,(l.subtreeFlags&8772)!==0):ji(s,l),ri=g,Ce=p}break;case 30:break;default:ji(s,l)}}function Bv(s){var r=s.alternate;r!==null&&(s.alternate=null,Bv(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Df(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var fe=null,Sn=!1;function ai(s,r,l){for(l=l.child;l!==null;)zv(s,r,l),l=l.sibling}function zv(s,r,l){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(_i,l)}catch{}switch(l.tag){case 26:Ce||Ts(l,r),ai(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ce||Ts(l,r);var u=fe,g=Sn;Fi(l.type)&&(fe=l.stateNode,Sn=!1),ai(s,r,l),yl(l.stateNode),fe=u,Sn=g;break;case 5:Ce||Ts(l,r);case 6:if(u=fe,g=Sn,fe=null,ai(s,r,l),fe=u,Sn=g,fe!==null)if(Sn)try{(fe.nodeType===9?fe.body:fe.nodeName==="HTML"?fe.ownerDocument.body:fe).removeChild(l.stateNode)}catch(p){re(l,r,p)}else try{fe.removeChild(l.stateNode)}catch(p){re(l,r,p)}break;case 18:fe!==null&&(Sn?(s=fe,T1(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),wl(s)):T1(fe,l.stateNode));break;case 4:u=fe,g=Sn,fe=l.stateNode.containerInfo,Sn=!0,ai(s,r,l),fe=u,Sn=g;break;case 0:case 11:case 14:case 15:Ce||ki(2,l,r),Ce||ki(4,l,r),ai(s,r,l);break;case 1:Ce||(Ts(l,r),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Dv(l,r,u)),ai(s,r,l);break;case 21:ai(s,r,l);break;case 22:Ce=(u=Ce)||l.memoizedState!==null,ai(s,r,l),Ce=u;break;default:ai(s,r,l)}}function Nv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{wl(s)}catch(l){re(r,r.return,l)}}function fT(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new jv),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new jv),r;default:throw Error(n(435,s.tag))}}function $d(s,r){var l=fT(s);r.forEach(function(u){var g=ST.bind(null,s,u);l.has(u)||(l.add(u),u.then(g,g))})}function Rn(s,r){var l=r.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u],p=s,x=r,O=x;t:for(;O!==null;){switch(O.tag){case 27:if(Fi(O.type)){fe=O.stateNode,Sn=!1;break t}break;case 5:fe=O.stateNode,Sn=!1;break t;case 3:case 4:fe=O.stateNode.containerInfo,Sn=!0;break t}O=O.return}if(fe===null)throw Error(n(160));zv(p,x,g),fe=null,Sn=!1,p=g.alternate,p!==null&&(p.return=null),g.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Hv(r,s),r=r.sibling}var os=null;function Hv(s,r){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Rn(r,s),kn(s),u&4&&(ki(3,s,s.return),ol(3,s),ki(5,s,s.return));break;case 1:Rn(r,s),kn(s),u&512&&(Ce||l===null||Ts(l,l.return)),u&64&&ri&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var g=os;if(Rn(r,s),kn(s),u&512&&(Ce||l===null||Ts(l,l.return)),u&4){var p=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){t:{u=s.type,l=s.memoizedProps,g=g.ownerDocument||g;e:switch(u){case"title":p=g.getElementsByTagName("title")[0],(!p||p[ko]||p[$e]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=g.createElement(u),g.head.insertBefore(p,g.querySelector("head > title"))),Ve(p,u,l),p[$e]=s,He(p),u=p;break t;case"link":var x=k1("link","href",g).get(u+(l.href||""));if(x){for(var O=0;O<x.length;O++)if(p=x[O],p.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&p.getAttribute("rel")===(l.rel==null?null:l.rel)&&p.getAttribute("title")===(l.title==null?null:l.title)&&p.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(O,1);break e}}p=g.createElement(u),Ve(p,u,l),g.head.appendChild(p);break;case"meta":if(x=k1("meta","content",g).get(u+(l.content||""))){for(O=0;O<x.length;O++)if(p=x[O],p.getAttribute("content")===(l.content==null?null:""+l.content)&&p.getAttribute("name")===(l.name==null?null:l.name)&&p.getAttribute("property")===(l.property==null?null:l.property)&&p.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&p.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(O,1);break e}}p=g.createElement(u),Ve(p,u,l),g.head.appendChild(p);break;default:throw Error(n(468,u))}p[$e]=s,He(p),u=p}s.stateNode=u}else j1(g,s.type,s.stateNode);else s.stateNode=R1(g,u,s.memoizedProps);else p!==u?(p===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):p.count--,u===null?j1(g,s.type,s.stateNode):R1(g,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Id(s,s.memoizedProps,l.memoizedProps)}break;case 27:Rn(r,s),kn(s),u&512&&(Ce||l===null||Ts(l,l.return)),l!==null&&u&4&&Id(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Rn(r,s),kn(s),u&512&&(Ce||l===null||Ts(l,l.return)),s.flags&32){g=s.stateNode;try{ga(g,"")}catch(V){re(s,s.return,V)}}u&4&&s.stateNode!=null&&(g=s.memoizedProps,Id(s,g,l!==null?l.memoizedProps:g)),u&1024&&(Kd=!0);break;case 6:if(Rn(r,s),kn(s),u&4){if(s.stateNode===null)throw Error(n(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(V){re(s,s.return,V)}}break;case 3:if(Du=null,g=os,os=Eu(r.containerInfo),Rn(r,s),os=g,kn(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{wl(r.containerInfo)}catch(V){re(s,s.return,V)}Kd&&(Kd=!1,Uv(s));break;case 4:u=os,os=Eu(s.stateNode.containerInfo),Rn(r,s),kn(s),os=u;break;case 12:Rn(r,s),kn(s);break;case 13:Rn(r,s),kn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(sg=Re()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,$d(s,u)));break;case 22:g=s.memoizedState!==null;var D=l!==null&&l.memoizedState!==null,Y=ri,$=Ce;if(ri=Y||g,Ce=$||D,Rn(r,s),Ce=$,ri=Y,kn(s),u&8192)t:for(r=s.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(l===null||D||ri||Ce||kr(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){D=l=r;try{if(p=D.stateNode,g)x=p.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{O=D.stateNode;var tt=D.memoizedProps.style,q=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;O.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(V){re(D,D.return,V)}}}else if(r.tag===6){if(l===null){D=r;try{D.stateNode.nodeValue=g?"":D.memoizedProps}catch(V){re(D,D.return,V)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,$d(s,l))));break;case 19:Rn(r,s),kn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,$d(s,u)));break;case 30:break;case 21:break;default:Rn(r,s),kn(s)}}function kn(s){var r=s.flags;if(r&2){try{for(var l,u=s.return;u!==null;){if(Rv(u)){l=u;break}u=u.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var g=l.stateNode,p=Wd(s);gu(s,p,g);break;case 5:var x=l.stateNode;l.flags&32&&(ga(x,""),l.flags&=-33);var O=Wd(s);gu(s,O,x);break;case 3:case 4:var D=l.stateNode.containerInfo,Y=Wd(s);Qd(s,Y,D);break;default:throw Error(n(161))}}catch($){re(s,s.return,$)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function Uv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;Uv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function ji(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Lv(s,r.alternate,r),r=r.sibling}function kr(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:ki(4,r,r.return),kr(r);break;case 1:Ts(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Dv(r,r.return,l),kr(r);break;case 27:yl(r.stateNode);case 26:case 5:Ts(r,r.return),kr(r);break;case 22:r.memoizedState===null&&kr(r);break;case 30:kr(r);break;default:kr(r)}s=s.sibling}}function Li(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,g=s,p=r,x=p.flags;switch(p.tag){case 0:case 11:case 15:Li(g,p,l),ol(4,p);break;case 1:if(Li(g,p,l),u=p,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Y){re(u,u.return,Y)}if(u=p,g=u.updateQueue,g!==null){var O=u.stateNode;try{var D=g.shared.hiddenCallbacks;if(D!==null)for(g.shared.hiddenCallbacks=null,g=0;g<D.length;g++)gy(D[g],O)}catch(Y){re(u,u.return,Y)}}l&&x&64&&Av(p),ll(p,p.return);break;case 27:kv(p);case 26:case 5:Li(g,p,l),l&&u===null&&x&4&&Mv(p),ll(p,p.return);break;case 12:Li(g,p,l);break;case 13:Li(g,p,l),l&&x&4&&Nv(g,p);break;case 22:p.memoizedState===null&&Li(g,p,l),ll(p,p.return);break;case 30:break;default:Li(g,p,l)}r=r.sibling}}function Zd(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Io(l))}function Jd(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Io(s))}function ws(s,r,l,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Fv(s,r,l,u),r=r.sibling}function Fv(s,r,l,u){var g=r.flags;switch(r.tag){case 0:case 11:case 15:ws(s,r,l,u),g&2048&&ol(9,r);break;case 1:ws(s,r,l,u);break;case 3:ws(s,r,l,u),g&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Io(s)));break;case 12:if(g&2048){ws(s,r,l,u),s=r.stateNode;try{var p=r.memoizedProps,x=p.id,O=p.onPostCommit;typeof O=="function"&&O(x,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(D){re(r,r.return,D)}}else ws(s,r,l,u);break;case 13:ws(s,r,l,u);break;case 23:break;case 22:p=r.stateNode,x=r.alternate,r.memoizedState!==null?p._visibility&2?ws(s,r,l,u):cl(s,r):p._visibility&2?ws(s,r,l,u):(p._visibility|=2,ja(s,r,l,u,(r.subtreeFlags&10256)!==0)),g&2048&&Zd(x,r);break;case 24:ws(s,r,l,u),g&2048&&Jd(r.alternate,r);break;default:ws(s,r,l,u)}}function ja(s,r,l,u,g){for(g=g&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var p=s,x=r,O=l,D=u,Y=x.flags;switch(x.tag){case 0:case 11:case 15:ja(p,x,O,D,g),ol(8,x);break;case 23:break;case 22:var $=x.stateNode;x.memoizedState!==null?$._visibility&2?ja(p,x,O,D,g):cl(p,x):($._visibility|=2,ja(p,x,O,D,g)),g&&Y&2048&&Zd(x.alternate,x);break;case 24:ja(p,x,O,D,g),g&&Y&2048&&Jd(x.alternate,x);break;default:ja(p,x,O,D,g)}r=r.sibling}}function cl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,u=r,g=u.flags;switch(u.tag){case 22:cl(l,u),g&2048&&Zd(u.alternate,u);break;case 24:cl(l,u),g&2048&&Jd(u.alternate,u);break;default:cl(l,u)}r=r.sibling}}var ul=8192;function La(s){if(s.subtreeFlags&ul)for(s=s.child;s!==null;)Pv(s),s=s.sibling}function Pv(s){switch(s.tag){case 26:La(s),s.flags&ul&&s.memoizedState!==null&&$T(os,s.memoizedState,s.memoizedProps);break;case 5:La(s);break;case 3:case 4:var r=os;os=Eu(s.stateNode.containerInfo),La(s),os=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=ul,ul=16777216,La(s),ul=r):La(s));break;default:La(s)}}function Yv(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function hl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];Fe=u,qv(u,s)}Yv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Xv(s),s=s.sibling}function Xv(s){switch(s.tag){case 0:case 11:case 15:hl(s),s.flags&2048&&ki(9,s,s.return);break;case 3:hl(s);break;case 12:hl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,mu(s)):hl(s);break;default:hl(s)}}function mu(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];Fe=u,qv(u,s)}Yv(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:ki(8,r,r.return),mu(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,mu(r));break;default:mu(r)}s=s.sibling}}function qv(s,r){for(;Fe!==null;){var l=Fe;switch(l.tag){case 0:case 11:case 15:ki(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Io(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Fe=u;else t:for(l=s;Fe!==null;){u=Fe;var g=u.sibling,p=u.return;if(Bv(u),u===l){Fe=null;break t}if(g!==null){g.return=p,Fe=g;break t}Fe=p}}}var dT={getCacheForType:function(s){var r=Ze(ke),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l}},gT=typeof WeakMap=="function"?WeakMap:Map,Zt=0,oe=null,Ut=null,Xt=0,Jt=0,jn=null,Bi=!1,Ba=!1,tg=!1,oi=0,be=0,zi=0,jr=0,eg=0,Kn=0,za=0,fl=null,_n=null,ng=!1,sg=0,pu=1/0,yu=null,Ni=null,qe=0,Hi=null,Na=null,Ha=0,ig=0,rg=null,Vv=null,dl=0,ag=null;function Ln(){if((Zt&2)!==0&&Xt!==0)return Xt&-Xt;if(X.T!==null){var s=wa;return s!==0?s:dg()}return o0()}function Gv(){Kn===0&&(Kn=(Xt&536870912)===0||Gt?s0():536870912);var s=Qn.current;return s!==null&&(s.flags|=32),Kn}function Bn(s,r,l){(s===oe&&(Jt===2||Jt===9)||s.cancelPendingCommit!==null)&&(Ua(s,0),Ui(s,Xt,Kn,!1)),Ro(s,l),((Zt&2)===0||s!==oe)&&(s===oe&&((Zt&2)===0&&(jr|=l),be===4&&Ui(s,Xt,Kn,!1)),Os(s))}function Iv(s,r,l){if((Zt&6)!==0)throw Error(n(327));var u=!l&&(r&124)===0&&(r&s.expiredLanes)===0||Mo(s,r),g=u?yT(s,r):cg(s,r,!0),p=u;do{if(g===0){Ba&&!u&&Ui(s,r,0,!1);break}else{if(l=s.current.alternate,p&&!mT(l)){g=cg(s,r,!1),p=!1;continue}if(g===2){if(p=r,s.errorRecoveryDisabledLanes&p)var x=0;else x=s.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){r=x;t:{var O=s;g=fl;var D=O.current.memoizedState.isDehydrated;if(D&&(Ua(O,x).flags|=256),x=cg(O,x,!1),x!==2){if(tg&&!D){O.errorRecoveryDisabledLanes|=p,jr|=p,g=4;break t}p=_n,_n=g,p!==null&&(_n===null?_n=p:_n.push.apply(_n,p))}g=x}if(p=!1,g!==2)continue}}if(g===1){Ua(s,0),Ui(s,r,0,!0);break}t:{switch(u=s,p=g,p){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:Ui(u,r,Kn,!Bi);break t;case 2:_n=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(g=sg+300-Re(),10<g)){if(Ui(u,r,Kn,!Bi),Ac(u,0,!0)!==0)break t;u.timeoutHandle=_1(Wv.bind(null,u,l,_n,yu,ng,r,Kn,jr,za,Bi,p,2,-0,0),g);break t}Wv(u,l,_n,yu,ng,r,Kn,jr,za,Bi,p,0,-0,0)}}break}while(!0);Os(s)}function Wv(s,r,l,u,g,p,x,O,D,Y,$,tt,q,V){if(s.timeoutHandle=-1,tt=r.subtreeFlags,(tt&8192||(tt&16785408)===16785408)&&(xl={stylesheets:null,count:0,unsuspend:KT},Pv(r),tt=ZT(),tt!==null)){s.cancelPendingCommit=tt(e1.bind(null,s,r,p,l,u,g,x,O,D,$,1,q,V)),Ui(s,p,x,!Y);return}e1(s,r,p,l,u,g,x,O,D)}function mT(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var g=l[u],p=g.getSnapshot;g=g.value;try{if(!Dn(p(),g))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ui(s,r,l,u){r&=~eg,r&=~jr,s.suspendedLanes|=r,s.pingedLanes&=~r,u&&(s.warmLanes|=r),u=s.expirationTimes;for(var g=r;0<g;){var p=31-Ke(g),x=1<<p;u[p]=-1,g&=~x}l!==0&&r0(s,l,r)}function vu(){return(Zt&6)===0?(gl(0),!1):!0}function og(){if(Ut!==null){if(Jt===0)var s=Ut.return;else s=Ut,Js=Er=null,Td(s),Ra=null,il=0,s=Ut;for(;s!==null;)Ev(s.alternate,s),s=s.return;Ut=null}}function Ua(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,jT(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),og(),oe=s,Ut=l=Ks(s.current,null),Xt=r,Jt=0,jn=null,Bi=!1,Ba=Mo(s,r),tg=!1,za=Kn=eg=jr=zi=be=0,_n=fl=null,ng=!1,(r&8)!==0&&(r|=r&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=r;0<u;){var g=31-Ke(u),p=1<<g;r|=s[g],u&=~p}return oi=r,Fc(),l}function Qv(s,r){Lt=null,X.H=ru,r===Qo||r===Qc?(r=fy(),Jt=3):r===cy?(r=fy(),Jt=4):Jt=r===dv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,jn=r,Ut===null&&(be=1,uu(s,Vn(r,s.current)))}function Kv(){var s=X.H;return X.H=ru,s===null?ru:s}function $v(){var s=X.A;return X.A=dT,s}function lg(){be=4,Bi||(Xt&4194048)!==Xt&&Qn.current!==null||(Ba=!0),(zi&134217727)===0&&(jr&134217727)===0||oe===null||Ui(oe,Xt,Kn,!1)}function cg(s,r,l){var u=Zt;Zt|=2;var g=Kv(),p=$v();(oe!==s||Xt!==r)&&(yu=null,Ua(s,r)),r=!1;var x=be;t:do try{if(Jt!==0&&Ut!==null){var O=Ut,D=jn;switch(Jt){case 8:og(),x=6;break t;case 3:case 2:case 9:case 6:Qn.current===null&&(r=!0);var Y=Jt;if(Jt=0,jn=null,Fa(s,O,D,Y),l&&Ba){x=0;break t}break;default:Y=Jt,Jt=0,jn=null,Fa(s,O,D,Y)}}pT(),x=be;break}catch($){Qv(s,$)}while(!0);return r&&s.shellSuspendCounter++,Js=Er=null,Zt=u,X.H=g,X.A=p,Ut===null&&(oe=null,Xt=0,Fc()),x}function pT(){for(;Ut!==null;)Zv(Ut)}function yT(s,r){var l=Zt;Zt|=2;var u=Kv(),g=$v();oe!==s||Xt!==r?(yu=null,pu=Re()+500,Ua(s,r)):Ba=Mo(s,r);t:do try{if(Jt!==0&&Ut!==null){r=Ut;var p=jn;e:switch(Jt){case 1:Jt=0,jn=null,Fa(s,r,p,1);break;case 2:case 9:if(uy(p)){Jt=0,jn=null,Jv(r);break}r=function(){Jt!==2&&Jt!==9||oe!==s||(Jt=7),Os(s)},p.then(r,r);break t;case 3:Jt=7;break t;case 4:Jt=5;break t;case 7:uy(p)?(Jt=0,jn=null,Jv(r)):(Jt=0,jn=null,Fa(s,r,p,7));break;case 5:var x=null;switch(Ut.tag){case 26:x=Ut.memoizedState;case 5:case 27:var O=Ut;if(!x||L1(x)){Jt=0,jn=null;var D=O.sibling;if(D!==null)Ut=D;else{var Y=O.return;Y!==null?(Ut=Y,bu(Y)):Ut=null}break e}}Jt=0,jn=null,Fa(s,r,p,5);break;case 6:Jt=0,jn=null,Fa(s,r,p,6);break;case 8:og(),be=6;break t;default:throw Error(n(462))}}vT();break}catch($){Qv(s,$)}while(!0);return Js=Er=null,X.H=u,X.A=g,Zt=l,Ut!==null?0:(oe=null,Xt=0,Fc(),be)}function vT(){for(;Ut!==null&&!vi();)Zv(Ut)}function Zv(s){var r=wv(s.alternate,s,oi);s.memoizedProps=s.pendingProps,r===null?bu(s):Ut=r}function Jv(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=bv(l,r,r.pendingProps,r.type,void 0,Xt);break;case 11:r=bv(l,r,r.pendingProps,r.type.render,r.ref,Xt);break;case 5:Td(r);default:Ev(l,r),r=Ut=ty(r,oi),r=wv(l,r,oi)}s.memoizedProps=s.pendingProps,r===null?bu(s):Ut=r}function Fa(s,r,l,u){Js=Er=null,Td(r),Ra=null,il=0;var g=r.return;try{if(oT(s,g,r,l,Xt)){be=1,uu(s,Vn(l,s.current)),Ut=null;return}}catch(p){if(g!==null)throw Ut=g,p;be=1,uu(s,Vn(l,s.current)),Ut=null;return}r.flags&32768?(Gt||u===1?s=!0:Ba||(Xt&536870912)!==0?s=!1:(Bi=s=!0,(u===2||u===9||u===3||u===6)&&(u=Qn.current,u!==null&&u.tag===13&&(u.flags|=16384))),t1(r,s)):bu(r)}function bu(s){var r=s;do{if((r.flags&32768)!==0){t1(r,Bi);return}s=r.return;var l=cT(r.alternate,r,oi);if(l!==null){Ut=l;return}if(r=r.sibling,r!==null){Ut=r;return}Ut=r=s}while(r!==null);be===0&&(be=5)}function t1(s,r){do{var l=uT(s.alternate,s);if(l!==null){l.flags&=32767,Ut=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Ut=s;return}Ut=s=l}while(s!==null);be=6,Ut=null}function e1(s,r,l,u,g,p,x,O,D){s.cancelPendingCommit=null;do xu();while(qe!==0);if((Zt&6)!==0)throw Error(n(327));if(r!==null){if(r===s.current)throw Error(n(177));if(p=r.lanes|r.childLanes,p|=Jf,K2(s,l,p,x,O,D),s===oe&&(Ut=oe=null,Xt=0),Na=r,Hi=s,Ha=l,ig=p,rg=g,Vv=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,_T(xi,function(){return a1(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,g=nt.p,nt.p=2,x=Zt,Zt|=4;try{hT(s,r,l)}finally{Zt=x,nt.p=g,X.T=u}}qe=1,n1(),s1(),i1()}}function n1(){if(qe===1){qe=0;var s=Hi,r=Na,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var u=nt.p;nt.p=2;var g=Zt;Zt|=4;try{Hv(r,s);var p=Sg,x=q0(s.containerInfo),O=p.focusedElem,D=p.selectionRange;if(x!==O&&O&&O.ownerDocument&&X0(O.ownerDocument.documentElement,O)){if(D!==null&&Wf(O)){var Y=D.start,$=D.end;if($===void 0&&($=Y),"selectionStart"in O)O.selectionStart=Y,O.selectionEnd=Math.min($,O.value.length);else{var tt=O.ownerDocument||document,q=tt&&tt.defaultView||window;if(q.getSelection){var V=q.getSelection(),Ot=O.textContent.length,_t=Math.min(D.start,Ot),se=D.end===void 0?_t:Math.min(D.end,Ot);!V.extend&&_t>se&&(x=se,se=_t,_t=x);var H=Y0(O,_t),L=Y0(O,se);if(H&&L&&(V.rangeCount!==1||V.anchorNode!==H.node||V.anchorOffset!==H.offset||V.focusNode!==L.node||V.focusOffset!==L.offset)){var P=tt.createRange();P.setStart(H.node,H.offset),V.removeAllRanges(),_t>se?(V.addRange(P),V.extend(L.node,L.offset)):(P.setEnd(L.node,L.offset),V.addRange(P))}}}}for(tt=[],V=O;V=V.parentNode;)V.nodeType===1&&tt.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<tt.length;O++){var Z=tt[O];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}ku=!!xg,Sg=xg=null}finally{Zt=g,nt.p=u,X.T=l}}s.current=r,qe=2}}function s1(){if(qe===2){qe=0;var s=Hi,r=Na,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var u=nt.p;nt.p=2;var g=Zt;Zt|=4;try{Lv(s,r.alternate,r)}finally{Zt=g,nt.p=u,X.T=l}}qe=3}}function i1(){if(qe===4||qe===3){qe=0,aa();var s=Hi,r=Na,l=Ha,u=Vv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?qe=5:(qe=0,Na=Hi=null,r1(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Ni=null),Ef(l),r=r.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(_i,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=X.T,g=nt.p,nt.p=2,X.T=null;try{for(var p=s.onRecoverableError,x=0;x<u.length;x++){var O=u[x];p(O.value,{componentStack:O.stack})}}finally{X.T=r,nt.p=g}}(Ha&3)!==0&&xu(),Os(s),g=s.pendingLanes,(l&4194090)!==0&&(g&42)!==0?s===ag?dl++:(dl=0,ag=s):dl=0,gl(0)}}function r1(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Io(r)))}function xu(s){return n1(),s1(),i1(),a1()}function a1(){if(qe!==5)return!1;var s=Hi,r=ig;ig=0;var l=Ef(Ha),u=X.T,g=nt.p;try{nt.p=32>l?32:l,X.T=null,l=rg,rg=null;var p=Hi,x=Ha;if(qe=0,Na=Hi=null,Ha=0,(Zt&6)!==0)throw Error(n(331));var O=Zt;if(Zt|=4,Xv(p.current),Fv(p,p.current,x,l),Zt=O,gl(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(_i,p)}catch{}return!0}finally{nt.p=g,X.T=u,r1(s,r)}}function o1(s,r,l){r=Vn(l,r),r=Hd(s.stateNode,r,2),s=Ai(s,r,2),s!==null&&(Ro(s,2),Os(s))}function re(s,r,l){if(s.tag===3)o1(s,s,l);else for(;r!==null;){if(r.tag===3){o1(r,s,l);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ni===null||!Ni.has(u))){s=Vn(l,s),l=hv(2),u=Ai(r,l,2),u!==null&&(fv(l,u,r,s),Ro(u,2),Os(u));break}}r=r.return}}function ug(s,r,l){var u=s.pingCache;if(u===null){u=s.pingCache=new gT;var g=new Set;u.set(r,g)}else g=u.get(r),g===void 0&&(g=new Set,u.set(r,g));g.has(l)||(tg=!0,g.add(l),s=bT.bind(null,s,r,l),r.then(s,s))}function bT(s,r,l){var u=s.pingCache;u!==null&&u.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,oe===s&&(Xt&l)===l&&(be===4||be===3&&(Xt&62914560)===Xt&&300>Re()-sg?(Zt&2)===0&&Ua(s,0):eg|=l,za===Xt&&(za=0)),Os(s)}function l1(s,r){r===0&&(r=i0()),s=Sa(s,r),s!==null&&(Ro(s,r),Os(s))}function xT(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),l1(s,l)}function ST(s,r){var l=0;switch(s.tag){case 13:var u=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(r),l1(s,l)}function _T(s,r){return is(s,r)}var Su=null,Pa=null,hg=!1,_u=!1,fg=!1,Lr=0;function Os(s){s!==Pa&&s.next===null&&(Pa===null?Su=Pa=s:Pa=Pa.next=s),_u=!0,hg||(hg=!0,TT())}function gl(s,r){if(!fg&&_u){fg=!0;do for(var l=!1,u=Su;u!==null;){if(s!==0){var g=u.pendingLanes;if(g===0)var p=0;else{var x=u.suspendedLanes,O=u.pingedLanes;p=(1<<31-Ke(42|s)+1)-1,p&=g&~(x&~O),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(l=!0,f1(u,p))}else p=Xt,p=Ac(u,u===oe?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Mo(u,p)||(l=!0,f1(u,p));u=u.next}while(l);fg=!1}}function CT(){c1()}function c1(){_u=hg=!1;var s=0;Lr!==0&&(kT()&&(s=Lr),Lr=0);for(var r=Re(),l=null,u=Su;u!==null;){var g=u.next,p=u1(u,r);p===0?(u.next=null,l===null?Su=g:l.next=g,g===null&&(Pa=l)):(l=u,(s!==0||(p&3)!==0)&&(_u=!0)),u=g}gl(s)}function u1(s,r){for(var l=s.suspendedLanes,u=s.pingedLanes,g=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var x=31-Ke(p),O=1<<x,D=g[x];D===-1?((O&l)===0||(O&u)!==0)&&(g[x]=Q2(O,r)):D<=r&&(s.expiredLanes|=O),p&=~O}if(r=oe,l=Xt,l=Ac(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===r&&(Jt===2||Jt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Gs(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Mo(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(u!==null&&Gs(u),Ef(l)){case 2:case 8:l=mr;break;case 32:l=xi;break;case 268435456:l=pr;break;default:l=xi}return u=h1.bind(null,s),l=is(l,u),s.callbackPriority=r,s.callbackNode=l,r}return u!==null&&u!==null&&Gs(u),s.callbackPriority=2,s.callbackNode=null,2}function h1(s,r){if(qe!==0&&qe!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(xu()&&s.callbackNode!==l)return null;var u=Xt;return u=Ac(s,s===oe?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(Iv(s,u,r),u1(s,Re()),s.callbackNode!=null&&s.callbackNode===l?h1.bind(null,s):null)}function f1(s,r){if(xu())return null;Iv(s,r,!0)}function TT(){LT(function(){(Zt&6)!==0?is(bi,CT):c1()})}function dg(){return Lr===0&&(Lr=s0()),Lr}function d1(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:jc(""+s)}function g1(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function wT(s,r,l,u,g){if(r==="submit"&&l&&l.stateNode===g){var p=d1((g[vn]||null).action),x=u.submitter;x&&(r=(r=x[vn]||null)?d1(r.formAction):x.getAttribute("formAction"),r!==null&&(p=r,x=null));var O=new Nc("action","action",null,u,g);s.push({event:O,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Lr!==0){var D=x?g1(g,x):new FormData(g);jd(l,{pending:!0,data:D,method:g.method,action:p},null,D)}}else typeof p=="function"&&(O.preventDefault(),D=x?g1(g,x):new FormData(g),jd(l,{pending:!0,data:D,method:g.method,action:p},p,D))},currentTarget:g}]})}}for(var gg=0;gg<Zf.length;gg++){var mg=Zf[gg],OT=mg.toLowerCase(),ET=mg[0].toUpperCase()+mg.slice(1);as(OT,"on"+ET)}as(I0,"onAnimationEnd"),as(W0,"onAnimationIteration"),as(Q0,"onAnimationStart"),as("dblclick","onDoubleClick"),as("focusin","onFocus"),as("focusout","onBlur"),as(qC,"onTransitionRun"),as(VC,"onTransitionStart"),as(GC,"onTransitionCancel"),as(K0,"onTransitionEnd"),ha("onMouseEnter",["mouseout","mouseover"]),ha("onMouseLeave",["mouseout","mouseover"]),ha("onPointerEnter",["pointerout","pointerover"]),ha("onPointerLeave",["pointerout","pointerover"]),vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vr("onBeforeInput",["compositionend","keypress","textInput","paste"]),vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ml));function m1(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],g=u.event;u=u.listeners;t:{var p=void 0;if(r)for(var x=u.length-1;0<=x;x--){var O=u[x],D=O.instance,Y=O.currentTarget;if(O=O.listener,D!==p&&g.isPropagationStopped())break t;p=O,g.currentTarget=Y;try{p(g)}catch($){cu($)}g.currentTarget=null,p=D}else for(x=0;x<u.length;x++){if(O=u[x],D=O.instance,Y=O.currentTarget,O=O.listener,D!==p&&g.isPropagationStopped())break t;p=O,g.currentTarget=Y;try{p(g)}catch($){cu($)}g.currentTarget=null,p=D}}}}function Ft(s,r){var l=r[Af];l===void 0&&(l=r[Af]=new Set);var u=s+"__bubble";l.has(u)||(p1(r,s,2,!1),l.add(u))}function pg(s,r,l){var u=0;r&&(u|=4),p1(l,s,u,r)}var Cu="_reactListening"+Math.random().toString(36).slice(2);function yg(s){if(!s[Cu]){s[Cu]=!0,c0.forEach(function(l){l!=="selectionchange"&&(AT.has(l)||pg(l,!1,s),pg(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Cu]||(r[Cu]=!0,pg("selectionchange",!1,r))}}function p1(s,r,l,u){switch(F1(r)){case 2:var g=ew;break;case 8:g=nw;break;default:g=Rg}l=g.bind(null,r,l,s),g=void 0,!Uf||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),u?g!==void 0?s.addEventListener(r,l,{capture:!0,passive:g}):s.addEventListener(r,l,!0):g!==void 0?s.addEventListener(r,l,{passive:g}):s.addEventListener(r,l,!1)}function vg(s,r,l,u,g){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)t:for(;;){if(u===null)return;var x=u.tag;if(x===3||x===4){var O=u.stateNode.containerInfo;if(O===g)break;if(x===4)for(x=u.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;O!==null;){if(x=la(O),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){u=p=x;continue t}O=O.parentNode}}u=u.return}C0(function(){var Y=p,$=Nf(l),tt=[];t:{var q=$0.get(s);if(q!==void 0){var V=Nc,Ot=s;switch(s){case"keypress":if(Bc(l)===0)break t;case"keydown":case"keyup":V=_C;break;case"focusin":Ot="focus",V=Xf;break;case"focusout":Ot="blur",V=Xf;break;case"beforeblur":case"afterblur":V=Xf;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=O0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=uC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=wC;break;case I0:case W0:case Q0:V=dC;break;case K0:V=EC;break;case"scroll":case"scrollend":V=lC;break;case"wheel":V=DC;break;case"copy":case"cut":case"paste":V=mC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=A0;break;case"toggle":case"beforetoggle":V=RC}var _t=(r&4)!==0,se=!_t&&(s==="scroll"||s==="scrollend"),H=_t?q!==null?q+"Capture":null:q;_t=[];for(var L=Y,P;L!==null;){var Z=L;if(P=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||P===null||H===null||(Z=Lo(L,H),Z!=null&&_t.push(pl(L,Z,P))),se)break;L=L.return}0<_t.length&&(q=new V(q,Ot,null,l,$),tt.push({event:q,listeners:_t}))}}if((r&7)===0){t:{if(q=s==="mouseover"||s==="pointerover",V=s==="mouseout"||s==="pointerout",q&&l!==zf&&(Ot=l.relatedTarget||l.fromElement)&&(la(Ot)||Ot[oa]))break t;if((V||q)&&(q=$.window===$?$:(q=$.ownerDocument)?q.defaultView||q.parentWindow:window,V?(Ot=l.relatedTarget||l.toElement,V=Y,Ot=Ot?la(Ot):null,Ot!==null&&(se=o(Ot),_t=Ot.tag,Ot!==se||_t!==5&&_t!==27&&_t!==6)&&(Ot=null)):(V=null,Ot=Y),V!==Ot)){if(_t=O0,Z="onMouseLeave",H="onMouseEnter",L="mouse",(s==="pointerout"||s==="pointerover")&&(_t=A0,Z="onPointerLeave",H="onPointerEnter",L="pointer"),se=V==null?q:jo(V),P=Ot==null?q:jo(Ot),q=new _t(Z,L+"leave",V,l,$),q.target=se,q.relatedTarget=P,Z=null,la($)===Y&&(_t=new _t(H,L+"enter",Ot,l,$),_t.target=P,_t.relatedTarget=se,Z=_t),se=Z,V&&Ot)e:{for(_t=V,H=Ot,L=0,P=_t;P;P=Ya(P))L++;for(P=0,Z=H;Z;Z=Ya(Z))P++;for(;0<L-P;)_t=Ya(_t),L--;for(;0<P-L;)H=Ya(H),P--;for(;L--;){if(_t===H||H!==null&&_t===H.alternate)break e;_t=Ya(_t),H=Ya(H)}_t=null}else _t=null;V!==null&&y1(tt,q,V,_t,!1),Ot!==null&&se!==null&&y1(tt,se,Ot,_t,!0)}}t:{if(q=Y?jo(Y):window,V=q.nodeName&&q.nodeName.toLowerCase(),V==="select"||V==="input"&&q.type==="file")var pt=z0;else if(L0(q))if(N0)pt=PC;else{pt=UC;var zt=HC}else V=q.nodeName,!V||V.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?Y&&Bf(Y.elementType)&&(pt=z0):pt=FC;if(pt&&(pt=pt(s,Y))){B0(tt,pt,l,$);break t}zt&&zt(s,q,Y),s==="focusout"&&Y&&q.type==="number"&&Y.memoizedProps.value!=null&&Lf(q,"number",q.value)}switch(zt=Y?jo(Y):window,s){case"focusin":(L0(zt)||zt.contentEditable==="true")&&(va=zt,Qf=Y,Yo=null);break;case"focusout":Yo=Qf=va=null;break;case"mousedown":Kf=!0;break;case"contextmenu":case"mouseup":case"dragend":Kf=!1,V0(tt,l,$);break;case"selectionchange":if(XC)break;case"keydown":case"keyup":V0(tt,l,$)}var xt;if(Vf)t:{switch(s){case"compositionstart":var wt="onCompositionStart";break t;case"compositionend":wt="onCompositionEnd";break t;case"compositionupdate":wt="onCompositionUpdate";break t}wt=void 0}else ya?k0(s,l)&&(wt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(wt="onCompositionStart");wt&&(D0&&l.locale!=="ko"&&(ya||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&ya&&(xt=T0()):(Ti=$,Ff="value"in Ti?Ti.value:Ti.textContent,ya=!0)),zt=Tu(Y,wt),0<zt.length&&(wt=new E0(wt,s,null,l,$),tt.push({event:wt,listeners:zt}),xt?wt.data=xt:(xt=j0(l),xt!==null&&(wt.data=xt)))),(xt=jC?LC(s,l):BC(s,l))&&(wt=Tu(Y,"onBeforeInput"),0<wt.length&&(zt=new E0("onBeforeInput","beforeinput",null,l,$),tt.push({event:zt,listeners:wt}),zt.data=xt)),wT(tt,s,Y,l,$)}m1(tt,r)})}function pl(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Tu(s,r){for(var l=r+"Capture",u=[];s!==null;){var g=s,p=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||p===null||(g=Lo(s,l),g!=null&&u.unshift(pl(s,g,p)),g=Lo(s,r),g!=null&&u.push(pl(s,g,p))),s.tag===3)return u;s=s.return}return[]}function Ya(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function y1(s,r,l,u,g){for(var p=r._reactName,x=[];l!==null&&l!==u;){var O=l,D=O.alternate,Y=O.stateNode;if(O=O.tag,D!==null&&D===u)break;O!==5&&O!==26&&O!==27||Y===null||(D=Y,g?(Y=Lo(l,p),Y!=null&&x.unshift(pl(l,Y,D))):g||(Y=Lo(l,p),Y!=null&&x.push(pl(l,Y,D)))),l=l.return}x.length!==0&&s.push({event:r,listeners:x})}var DT=/\r\n?/g,MT=/\u0000|\uFFFD/g;function v1(s){return(typeof s=="string"?s:""+s).replace(DT,`
`).replace(MT,"")}function b1(s,r){return r=v1(r),v1(s)===r}function wu(){}function ne(s,r,l,u,g,p){switch(l){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||ga(s,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&ga(s,""+u);break;case"className":Mc(s,"class",u);break;case"tabIndex":Mc(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Mc(s,l,u);break;case"style":S0(s,u,p);break;case"data":if(r!=="object"){Mc(s,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=jc(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(l==="formAction"?(r!=="input"&&ne(s,r,"name",g.name,g,null),ne(s,r,"formEncType",g.formEncType,g,null),ne(s,r,"formMethod",g.formMethod,g,null),ne(s,r,"formTarget",g.formTarget,g,null)):(ne(s,r,"encType",g.encType,g,null),ne(s,r,"method",g.method,g,null),ne(s,r,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=jc(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=wu);break;case"onScroll":u!=null&&Ft("scroll",s);break;case"onScrollEnd":u!=null&&Ft("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(n(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=jc(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":Ft("beforetoggle",s),Ft("toggle",s),Dc(s,"popover",u);break;case"xlinkActuate":Ws(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ws(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ws(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ws(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ws(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ws(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ws(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ws(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ws(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Dc(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=aC.get(l)||l,Dc(s,l,u))}}function bg(s,r,l,u,g,p){switch(l){case"style":S0(s,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(n(60));s.innerHTML=l}}break;case"children":typeof u=="string"?ga(s,u):(typeof u=="number"||typeof u=="bigint")&&ga(s,""+u);break;case"onScroll":u!=null&&Ft("scroll",s);break;case"onScrollEnd":u!=null&&Ft("scrollend",s);break;case"onClick":u!=null&&(s.onclick=wu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!u0.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),r=l.slice(2,g?l.length-7:void 0),p=s[vn]||null,p=p!=null?p[l]:null,typeof p=="function"&&s.removeEventListener(r,p,g),typeof u=="function")){typeof p!="function"&&p!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,u,g);break t}l in s?s[l]=u:u===!0?s.setAttribute(l,""):Dc(s,l,u)}}}function Ve(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ft("error",s),Ft("load",s);var u=!1,g=!1,p;for(p in l)if(l.hasOwnProperty(p)){var x=l[p];if(x!=null)switch(p){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:ne(s,r,p,x,l,null)}}g&&ne(s,r,"srcSet",l.srcSet,l,null),u&&ne(s,r,"src",l.src,l,null);return;case"input":Ft("invalid",s);var O=p=x=g=null,D=null,Y=null;for(u in l)if(l.hasOwnProperty(u)){var $=l[u];if($!=null)switch(u){case"name":g=$;break;case"type":x=$;break;case"checked":D=$;break;case"defaultChecked":Y=$;break;case"value":p=$;break;case"defaultValue":O=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(n(137,r));break;default:ne(s,r,u,$,l,null)}}y0(s,p,O,D,Y,x,g,!1),Rc(s);return;case"select":Ft("invalid",s),u=x=p=null;for(g in l)if(l.hasOwnProperty(g)&&(O=l[g],O!=null))switch(g){case"value":p=O;break;case"defaultValue":x=O;break;case"multiple":u=O;default:ne(s,r,g,O,l,null)}r=p,l=x,s.multiple=!!u,r!=null?da(s,!!u,r,!1):l!=null&&da(s,!!u,l,!0);return;case"textarea":Ft("invalid",s),p=g=u=null;for(x in l)if(l.hasOwnProperty(x)&&(O=l[x],O!=null))switch(x){case"value":u=O;break;case"defaultValue":g=O;break;case"children":p=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(n(91));break;default:ne(s,r,x,O,l,null)}b0(s,u,g,p),Rc(s);return;case"option":for(D in l)if(l.hasOwnProperty(D)&&(u=l[D],u!=null))switch(D){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ne(s,r,D,u,l,null)}return;case"dialog":Ft("beforetoggle",s),Ft("toggle",s),Ft("cancel",s),Ft("close",s);break;case"iframe":case"object":Ft("load",s);break;case"video":case"audio":for(u=0;u<ml.length;u++)Ft(ml[u],s);break;case"image":Ft("error",s),Ft("load",s);break;case"details":Ft("toggle",s);break;case"embed":case"source":case"link":Ft("error",s),Ft("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(u=l[Y],u!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:ne(s,r,Y,u,l,null)}return;default:if(Bf(r)){for($ in l)l.hasOwnProperty($)&&(u=l[$],u!==void 0&&bg(s,r,$,u,l,void 0));return}}for(O in l)l.hasOwnProperty(O)&&(u=l[O],u!=null&&ne(s,r,O,u,l,null))}function RT(s,r,l,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,p=null,x=null,O=null,D=null,Y=null,$=null;for(V in l){var tt=l[V];if(l.hasOwnProperty(V)&&tt!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":D=tt;default:u.hasOwnProperty(V)||ne(s,r,V,null,u,tt)}}for(var q in u){var V=u[q];if(tt=l[q],u.hasOwnProperty(q)&&(V!=null||tt!=null))switch(q){case"type":p=V;break;case"name":g=V;break;case"checked":Y=V;break;case"defaultChecked":$=V;break;case"value":x=V;break;case"defaultValue":O=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(n(137,r));break;default:V!==tt&&ne(s,r,q,V,u,tt)}}jf(s,x,O,D,Y,$,p,g);return;case"select":V=x=O=q=null;for(p in l)if(D=l[p],l.hasOwnProperty(p)&&D!=null)switch(p){case"value":break;case"multiple":V=D;default:u.hasOwnProperty(p)||ne(s,r,p,null,u,D)}for(g in u)if(p=u[g],D=l[g],u.hasOwnProperty(g)&&(p!=null||D!=null))switch(g){case"value":q=p;break;case"defaultValue":O=p;break;case"multiple":x=p;default:p!==D&&ne(s,r,g,p,u,D)}r=O,l=x,u=V,q!=null?da(s,!!l,q,!1):!!u!=!!l&&(r!=null?da(s,!!l,r,!0):da(s,!!l,l?[]:"",!1));return;case"textarea":V=q=null;for(O in l)if(g=l[O],l.hasOwnProperty(O)&&g!=null&&!u.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:ne(s,r,O,null,u,g)}for(x in u)if(g=u[x],p=l[x],u.hasOwnProperty(x)&&(g!=null||p!=null))switch(x){case"value":q=g;break;case"defaultValue":V=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==p&&ne(s,r,x,g,u,p)}v0(s,q,V);return;case"option":for(var Ot in l)if(q=l[Ot],l.hasOwnProperty(Ot)&&q!=null&&!u.hasOwnProperty(Ot))switch(Ot){case"selected":s.selected=!1;break;default:ne(s,r,Ot,null,u,q)}for(D in u)if(q=u[D],V=l[D],u.hasOwnProperty(D)&&q!==V&&(q!=null||V!=null))switch(D){case"selected":s.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:ne(s,r,D,q,u,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _t in l)q=l[_t],l.hasOwnProperty(_t)&&q!=null&&!u.hasOwnProperty(_t)&&ne(s,r,_t,null,u,q);for(Y in u)if(q=u[Y],V=l[Y],u.hasOwnProperty(Y)&&q!==V&&(q!=null||V!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(137,r));break;default:ne(s,r,Y,q,u,V)}return;default:if(Bf(r)){for(var se in l)q=l[se],l.hasOwnProperty(se)&&q!==void 0&&!u.hasOwnProperty(se)&&bg(s,r,se,void 0,u,q);for($ in u)q=u[$],V=l[$],!u.hasOwnProperty($)||q===V||q===void 0&&V===void 0||bg(s,r,$,q,u,V);return}}for(var H in l)q=l[H],l.hasOwnProperty(H)&&q!=null&&!u.hasOwnProperty(H)&&ne(s,r,H,null,u,q);for(tt in u)q=u[tt],V=l[tt],!u.hasOwnProperty(tt)||q===V||q==null&&V==null||ne(s,r,tt,q,u,V)}var xg=null,Sg=null;function Ou(s){return s.nodeType===9?s:s.ownerDocument}function x1(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function S1(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function _g(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Cg=null;function kT(){var s=window.event;return s&&s.type==="popstate"?s===Cg?!1:(Cg=s,!0):(Cg=null,!1)}var _1=typeof setTimeout=="function"?setTimeout:void 0,jT=typeof clearTimeout=="function"?clearTimeout:void 0,C1=typeof Promise=="function"?Promise:void 0,LT=typeof queueMicrotask=="function"?queueMicrotask:typeof C1<"u"?function(s){return C1.resolve(null).then(s).catch(BT)}:_1;function BT(s){setTimeout(function(){throw s})}function Fi(s){return s==="head"}function T1(s,r){var l=r,u=0,g=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(0<u&&8>u){l=u;var x=s.ownerDocument;if(l&1&&yl(x.documentElement),l&2&&yl(x.body),l&4)for(l=x.head,yl(l),x=l.firstChild;x;){var O=x.nextSibling,D=x.nodeName;x[ko]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=O}}if(g===0){s.removeChild(p),wl(r);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:u=l.charCodeAt(0)-48;else u=0;l=p}while(l);wl(r)}function Tg(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Tg(l),Df(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function zT(s,r,l,u){for(;s.nodeType===1;){var g=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[ko])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var p=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=ls(s.nextSibling),s===null)break}return null}function NT(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ls(s.nextSibling),s===null))return null;return s}function wg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function HT(s,r){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")r();else{var u=function(){r(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function ls(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var Og=null;function w1(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return s;r--}else l==="/$"&&r++}s=s.previousSibling}return null}function O1(s,r,l){switch(r=Ou(l),s){case"html":if(s=r.documentElement,!s)throw Error(n(452));return s;case"head":if(s=r.head,!s)throw Error(n(453));return s;case"body":if(s=r.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function yl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Df(s)}var $n=new Map,E1=new Set;function Eu(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var li=nt.d;nt.d={f:UT,r:FT,D:PT,C:YT,L:XT,m:qT,X:GT,S:VT,M:IT};function UT(){var s=li.f(),r=vu();return s||r}function FT(s){var r=ca(s);r!==null&&r.tag===5&&r.type==="form"?Iy(r):li.r(s)}var Xa=typeof document>"u"?null:document;function A1(s,r,l){var u=Xa;if(u&&typeof r=="string"&&r){var g=qn(r);g='link[rel="'+s+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),E1.has(g)||(E1.add(g),s={rel:s,crossOrigin:l,href:r},u.querySelector(g)===null&&(r=u.createElement("link"),Ve(r,"link",s),He(r),u.head.appendChild(r)))}}function PT(s){li.D(s),A1("dns-prefetch",s,null)}function YT(s,r){li.C(s,r),A1("preconnect",s,r)}function XT(s,r,l){li.L(s,r,l);var u=Xa;if(u&&s&&r){var g='link[rel="preload"][as="'+qn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+qn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+qn(l.imageSizes)+'"]')):g+='[href="'+qn(s)+'"]';var p=g;switch(r){case"style":p=qa(s);break;case"script":p=Va(s)}$n.has(p)||(s=m({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),$n.set(p,s),u.querySelector(g)!==null||r==="style"&&u.querySelector(vl(p))||r==="script"&&u.querySelector(bl(p))||(r=u.createElement("link"),Ve(r,"link",s),He(r),u.head.appendChild(r)))}}function qT(s,r){li.m(s,r);var l=Xa;if(l&&s){var u=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+qn(u)+'"][href="'+qn(s)+'"]',p=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Va(s)}if(!$n.has(p)&&(s=m({rel:"modulepreload",href:s},r),$n.set(p,s),l.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(bl(p)))return}u=l.createElement("link"),Ve(u,"link",s),He(u),l.head.appendChild(u)}}}function VT(s,r,l){li.S(s,r,l);var u=Xa;if(u&&s){var g=ua(u).hoistableStyles,p=qa(s);r=r||"default";var x=g.get(p);if(!x){var O={loading:0,preload:null};if(x=u.querySelector(vl(p)))O.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":r},l),(l=$n.get(p))&&Eg(s,l);var D=x=u.createElement("link");He(D),Ve(D,"link",s),D._p=new Promise(function(Y,$){D.onload=Y,D.onerror=$}),D.addEventListener("load",function(){O.loading|=1}),D.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Au(x,r,u)}x={type:"stylesheet",instance:x,count:1,state:O},g.set(p,x)}}}function GT(s,r){li.X(s,r);var l=Xa;if(l&&s){var u=ua(l).hoistableScripts,g=Va(s),p=u.get(g);p||(p=l.querySelector(bl(g)),p||(s=m({src:s,async:!0},r),(r=$n.get(g))&&Ag(s,r),p=l.createElement("script"),He(p),Ve(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(g,p))}}function IT(s,r){li.M(s,r);var l=Xa;if(l&&s){var u=ua(l).hoistableScripts,g=Va(s),p=u.get(g);p||(p=l.querySelector(bl(g)),p||(s=m({src:s,async:!0,type:"module"},r),(r=$n.get(g))&&Ag(s,r),p=l.createElement("script"),He(p),Ve(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(g,p))}}function D1(s,r,l,u){var g=(g=vt.current)?Eu(g):null;if(!g)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=qa(l.href),l=ua(g).hoistableStyles,u=l.get(r),u||(u={type:"style",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=qa(l.href);var p=ua(g).hoistableStyles,x=p.get(s);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,x),(p=g.querySelector(vl(s)))&&!p._p&&(x.instance=p,x.state.loading=5),$n.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},$n.set(s,l),p||WT(g,s,l,x.state))),r&&u===null)throw Error(n(528,""));return x}if(r&&u!==null)throw Error(n(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Va(l),l=ua(g).hoistableScripts,u=l.get(r),u||(u={type:"script",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function qa(s){return'href="'+qn(s)+'"'}function vl(s){return'link[rel="stylesheet"]['+s+"]"}function M1(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function WT(s,r,l,u){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=s.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Ve(r,"link",l),He(r),s.head.appendChild(r))}function Va(s){return'[src="'+qn(s)+'"]'}function bl(s){return"script[async]"+s}function R1(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var u=s.querySelector('style[data-href~="'+qn(l.href)+'"]');if(u)return r.instance=u,He(u),u;var g=m({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),He(u),Ve(u,"style",g),Au(u,l.precedence,s),r.instance=u;case"stylesheet":g=qa(l.href);var p=s.querySelector(vl(g));if(p)return r.state.loading|=4,r.instance=p,He(p),p;u=M1(l),(g=$n.get(g))&&Eg(u,g),p=(s.ownerDocument||s).createElement("link"),He(p);var x=p;return x._p=new Promise(function(O,D){x.onload=O,x.onerror=D}),Ve(p,"link",u),r.state.loading|=4,Au(p,l.precedence,s),r.instance=p;case"script":return p=Va(l.src),(g=s.querySelector(bl(p)))?(r.instance=g,He(g),g):(u=l,(g=$n.get(p))&&(u=m({},l),Ag(u,g)),s=s.ownerDocument||s,g=s.createElement("script"),He(g),Ve(g,"link",u),s.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Au(u,l.precedence,s));return r.instance}function Au(s,r,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,p=g,x=0;x<u.length;x++){var O=u[x];if(O.dataset.precedence===r)p=O;else if(p!==g)break}p?p.parentNode.insertBefore(s,p.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function Eg(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Ag(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Du=null;function k1(s,r,l){if(Du===null){var u=new Map,g=Du=new Map;g.set(l,u)}else g=Du,u=g.get(l),u||(u=new Map,g.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),g=0;g<l.length;g++){var p=l[g];if(!(p[ko]||p[$e]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var x=p.getAttribute(r)||"";x=s+x;var O=u.get(x);O?O.push(p):u.set(x,[p])}}return u}function j1(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function QT(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function L1(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var xl=null;function KT(){}function $T(s,r,l){if(xl===null)throw Error(n(475));var u=xl;if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=qa(l.href),p=s.querySelector(vl(g));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=Mu.bind(u),s.then(u,u)),r.state.loading|=4,r.instance=p,He(p);return}p=s.ownerDocument||s,l=M1(l),(g=$n.get(g))&&Eg(l,g),p=p.createElement("link"),He(p);var x=p;x._p=new Promise(function(O,D){x.onload=O,x.onerror=D}),Ve(p,"link",l),r.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=Mu.bind(u),s.addEventListener("load",r),s.addEventListener("error",r))}}function ZT(){if(xl===null)throw Error(n(475));var s=xl;return s.stylesheets&&s.count===0&&Dg(s,s.stylesheets),0<s.count?function(r){var l=setTimeout(function(){if(s.stylesheets&&Dg(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Mu(){if(this.count--,this.count===0){if(this.stylesheets)Dg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ru=null;function Dg(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ru=new Map,r.forEach(JT,s),Ru=null,Mu.call(s))}function JT(s,r){if(!(r.state.loading&4)){var l=Ru.get(s);if(l)var u=l.get(null);else{l=new Map,Ru.set(s,l);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<g.length;p++){var x=g[p];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),u=x)}u&&l.set(null,u)}g=r.instance,x=g.getAttribute("data-precedence"),p=l.get(x)||u,p===u&&l.set(null,g),l.set(x,g),this.count++,u=Mu.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),p?p.parentNode.insertBefore(g,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),r.state.loading|=4}}var Sl={$$typeof:E,Provider:null,Consumer:null,_currentValue:at,_currentValue2:at,_threadCount:0};function tw(s,r,l,u,g,p,x,O){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wf(0),this.hiddenUpdates=wf(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=p,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function B1(s,r,l,u,g,p,x,O,D,Y,$,tt){return s=new tw(s,r,l,x,O,D,Y,tt),r=1,p===!0&&(r|=24),p=Mn(3,null,null,r),s.current=p,p.stateNode=s,r=ud(),r.refCount++,s.pooledCache=r,r.refCount++,p.memoizedState={element:u,isDehydrated:l,cache:r},gd(p),s}function z1(s){return s?(s=_a,s):_a}function N1(s,r,l,u,g,p){g=z1(g),u.context===null?u.context=g:u.pendingContext=g,u=Ei(r),u.payload={element:l},p=p===void 0?null:p,p!==null&&(u.callback=p),l=Ai(s,u,r),l!==null&&(Bn(l,s,r),$o(l,s,r))}function H1(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Mg(s,r){H1(s,r),(s=s.alternate)&&H1(s,r)}function U1(s){if(s.tag===13){var r=Sa(s,67108864);r!==null&&Bn(r,s,67108864),Mg(s,67108864)}}var ku=!0;function ew(s,r,l,u){var g=X.T;X.T=null;var p=nt.p;try{nt.p=2,Rg(s,r,l,u)}finally{nt.p=p,X.T=g}}function nw(s,r,l,u){var g=X.T;X.T=null;var p=nt.p;try{nt.p=8,Rg(s,r,l,u)}finally{nt.p=p,X.T=g}}function Rg(s,r,l,u){if(ku){var g=kg(u);if(g===null)vg(s,r,u,ju,l),P1(s,u);else if(iw(g,s,r,l,u))u.stopPropagation();else if(P1(s,u),r&4&&-1<sw.indexOf(s)){for(;g!==null;){var p=ca(g);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var x=yr(p.pendingLanes);if(x!==0){var O=p;for(O.pendingLanes|=2,O.entangledLanes|=2;x;){var D=1<<31-Ke(x);O.entanglements[1]|=D,x&=~D}Os(p),(Zt&6)===0&&(pu=Re()+500,gl(0))}}break;case 13:O=Sa(p,2),O!==null&&Bn(O,p,2),vu(),Mg(p,2)}if(p=kg(u),p===null&&vg(s,r,u,ju,l),p===g)break;g=p}g!==null&&u.stopPropagation()}else vg(s,r,u,null,l)}}function kg(s){return s=Nf(s),jg(s)}var ju=null;function jg(s){if(ju=null,s=la(s),s!==null){var r=o(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=c(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return ju=s,null}function F1(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ss()){case bi:return 2;case mr:return 8;case xi:case Tc:return 32;case pr:return 268435456;default:return 32}default:return 32}}var Lg=!1,Pi=null,Yi=null,Xi=null,_l=new Map,Cl=new Map,qi=[],sw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function P1(s,r){switch(s){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":_l.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cl.delete(r.pointerId)}}function Tl(s,r,l,u,g,p){return s===null||s.nativeEvent!==p?(s={blockedOn:r,domEventName:l,eventSystemFlags:u,nativeEvent:p,targetContainers:[g]},r!==null&&(r=ca(r),r!==null&&U1(r)),s):(s.eventSystemFlags|=u,r=s.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),s)}function iw(s,r,l,u,g){switch(r){case"focusin":return Pi=Tl(Pi,s,r,l,u,g),!0;case"dragenter":return Yi=Tl(Yi,s,r,l,u,g),!0;case"mouseover":return Xi=Tl(Xi,s,r,l,u,g),!0;case"pointerover":var p=g.pointerId;return _l.set(p,Tl(_l.get(p)||null,s,r,l,u,g)),!0;case"gotpointercapture":return p=g.pointerId,Cl.set(p,Tl(Cl.get(p)||null,s,r,l,u,g)),!0}return!1}function Y1(s){var r=la(s.target);if(r!==null){var l=o(r);if(l!==null){if(r=l.tag,r===13){if(r=c(l),r!==null){s.blockedOn=r,$2(s.priority,function(){if(l.tag===13){var u=Ln();u=Of(u);var g=Sa(l,u);g!==null&&Bn(g,l,u),Mg(l,u)}});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Lu(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=kg(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);zf=u,l.target.dispatchEvent(u),zf=null}else return r=ca(l),r!==null&&U1(r),s.blockedOn=l,!1;r.shift()}return!0}function X1(s,r,l){Lu(s)&&l.delete(r)}function rw(){Lg=!1,Pi!==null&&Lu(Pi)&&(Pi=null),Yi!==null&&Lu(Yi)&&(Yi=null),Xi!==null&&Lu(Xi)&&(Xi=null),_l.forEach(X1),Cl.forEach(X1)}function Bu(s,r){s.blockedOn===r&&(s.blockedOn=null,Lg||(Lg=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,rw)))}var zu=null;function q1(s){zu!==s&&(zu=s,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){zu===s&&(zu=null);for(var r=0;r<s.length;r+=3){var l=s[r],u=s[r+1],g=s[r+2];if(typeof u!="function"){if(jg(u||l)===null)continue;break}var p=ca(l);p!==null&&(s.splice(r,3),r-=3,jd(p,{pending:!0,data:g,method:l.method,action:u},u,g))}}))}function wl(s){function r(D){return Bu(D,s)}Pi!==null&&Bu(Pi,s),Yi!==null&&Bu(Yi,s),Xi!==null&&Bu(Xi,s),_l.forEach(r),Cl.forEach(r);for(var l=0;l<qi.length;l++){var u=qi[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<qi.length&&(l=qi[0],l.blockedOn===null);)Y1(l),l.blockedOn===null&&qi.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var g=l[u],p=l[u+1],x=g[vn]||null;if(typeof p=="function")x||q1(l);else if(x){var O=null;if(p&&p.hasAttribute("formAction")){if(g=p,x=p[vn]||null)O=x.formAction;else if(jg(g)!==null)continue}else O=x.action;typeof O=="function"?l[u+1]=O:(l.splice(u,3),u-=3),q1(l)}}}function Bg(s){this._internalRoot=s}Nu.prototype.render=Bg.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(n(409));var l=r.current,u=Ln();N1(l,u,s,r,null,null)},Nu.prototype.unmount=Bg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;N1(s.current,2,null,s,null,null),vu(),r[oa]=null}};function Nu(s){this._internalRoot=s}Nu.prototype.unstable_scheduleHydration=function(s){if(s){var r=o0();s={blockedOn:null,target:s,priority:r};for(var l=0;l<qi.length&&r!==0&&r<qi[l].priority;l++);qi.splice(l,0,s),l===0&&Y1(s)}};var V1=t.version;if(V1!=="19.1.0")throw Error(n(527,V1,"19.1.0"));nt.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=f(r),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var aw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{_i=Hu.inject(aw),Qe=Hu}catch{}}return El.createRoot=function(s,r){if(!a(s))throw Error(n(299));var l=!1,u="",g=ov,p=lv,x=cv,O=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(O=r.unstable_transitionCallbacks)),r=B1(s,1,!1,null,null,l,u,g,p,x,O,null),s[oa]=r.current,yg(s),new Bg(r)},El.hydrateRoot=function(s,r,l){if(!a(s))throw Error(n(299));var u=!1,g="",p=ov,x=lv,O=cv,D=null,Y=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(O=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(D=l.unstable_transitionCallbacks),l.formState!==void 0&&(Y=l.formState)),r=B1(s,1,!0,r,l??null,u,g,p,x,O,D,Y),r.context=z1(null),l=r.current,u=Ln(),u=Of(u),g=Ei(u),g.callback=null,Ai(l,g,u),l=u,r.current.lanes=l,Ro(r,l),Os(r),s[oa]=r.current,yg(s),new Nu(r)},El.version="19.1.0",El}var nb;function yw(){if(nb)return Ug.exports;nb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Ug.exports=pw(),Ug.exports}var vw=yw();const sb=i=>{let t;const e=new Set,n=(d,m)=>{const y=typeof d=="function"?d(t):d;if(!Object.is(y,t)){const v=t;t=m??(typeof y!="object"||y===null)?y:Object.assign({},t,y),e.forEach(b=>b(t,v))}},a=()=>t,h={setState:n,getState:a,getInitialState:()=>f,subscribe:d=>(e.add(d),()=>e.delete(d))},f=t=i(n,a,h);return h},bw=i=>i?sb(i):sb,xw=i=>i;function Sw(i,t=xw){const e=ht.useSyncExternalStore(i.subscribe,()=>t(i.getState()),()=>t(i.getInitialState()));return ht.useDebugValue(e),e}const ib=i=>{const t=bw(i),e=n=>Sw(t,n);return Object.assign(e,t),e},cp=i=>i?ib(i):ib,ze=cp(i=>({canvas:null,selectedImageSet:new Set,answerUid:[],choiceList:[],hasSelection:!1,setCanvas:t=>i({canvas:t}),setSelectedImageSet:t=>i({selectedImageSet:t}),setAnswerUid:t=>i({answerUid:t}),setChoiceList:t=>i({choiceList:t}),setHasSelection:t=>i({hasSelection:t})})),_w=i=>U.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M16 6V5.2C16 4.0799 16 3.51984 15.782 3.09202C15.5903 2.71569 15.2843 2.40973 14.908 2.21799C14.4802 2 13.9201 2 12.8 2H11.2C10.0799 2 9.51984 2 9.09202 2.21799C8.71569 2.40973 8.40973 2.71569 8.21799 3.09202C8 3.51984 8 4.0799 8 5.2V6M10 11.5V16.5M14 11.5V16.5M3 6H21M19 6V17.2C19 18.8802 19 19.7202 18.673 20.362C18.3854 20.9265 17.9265 21.3854 17.362 21.673C16.7202 22 15.8802 22 14.2 22H9.8C8.11984 22 7.27976 22 6.63803 21.673C6.07354 21.3854 5.6146 20.9265 5.32698 20.362C5 19.7202 5 18.8802 5 17.2V6",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));function rb(i,t){if(typeof i=="function")return i(t);i!=null&&(i.current=t)}function Kx(...i){return t=>{let e=!1;const n=i.map(a=>{const o=rb(a,t);return!e&&typeof o=="function"&&(e=!0),o});if(e)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():rb(i[a],null)}}}}function up(...i){return U.useCallback(Kx(...i),i)}function Cw(i,t=[]){let e=[];function n(o,c){const h=U.createContext(c),f=e.length;e=[...e,c];const d=y=>{var w;const{scope:v,children:b,...S}=y,C=((w=v==null?void 0:v[i])==null?void 0:w[f])||h,_=U.useMemo(()=>S,Object.values(S));return Q.jsx(C.Provider,{value:_,children:b})};d.displayName=o+"Provider";function m(y,v){var C;const b=((C=v==null?void 0:v[i])==null?void 0:C[f])||h,S=U.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[d,m]}const a=()=>{const o=e.map(c=>U.createContext(c));return function(h){const f=(h==null?void 0:h[i])||o;return U.useMemo(()=>({[`__scope${i}`]:{...h,[i]:f}}),[h,f])}};return a.scopeName=i,[n,Tw(a,...t)]}function Tw(...i){const t=i[0];if(i.length===1)return t;const e=()=>{const n=i.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const c=n.reduce((h,{useScope:f,scopeName:d})=>{const y=f(o)[`__scope${d}`];return{...h,...y}},{});return U.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return e.scopeName=t.scopeName,e}function ab(i,t,{checkForDefaultPrevented:e=!0}={}){return function(a){if(i==null||i(a),e===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}var _h=globalThis!=null&&globalThis.document?U.useLayoutEffect:()=>{},ww=fw[" useInsertionEffect ".trim().toString()]||_h;function Ow({prop:i,defaultProp:t,onChange:e=()=>{},caller:n}){const[a,o,c]=Ew({defaultProp:t,onChange:e}),h=i!==void 0,f=h?i:a;{const m=U.useRef(i!==void 0);U.useEffect(()=>{const y=m.current;y!==h&&console.warn(`${n} is changing from ${y?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=h},[h,n])}const d=U.useCallback(m=>{var y;if(h){const v=Aw(m)?m(i):m;v!==i&&((y=c.current)==null||y.call(c,v))}else o(m)},[h,i,o,c]);return[f,d]}function Ew({defaultProp:i,onChange:t}){const[e,n]=U.useState(i),a=U.useRef(e),o=U.useRef(t);return ww(()=>{o.current=t},[t]),U.useEffect(()=>{var c;a.current!==e&&((c=o.current)==null||c.call(o,e),a.current=e)},[e,a]),[e,n,o]}function Aw(i){return typeof i=="function"}function Dw(i){const t=U.useRef({value:i,previous:i});return U.useMemo(()=>(t.current.value!==i&&(t.current.previous=t.current.value,t.current.value=i),t.current.previous),[i])}function Mw(i){const[t,e]=U.useState(void 0);return _h(()=>{if(i){e({width:i.offsetWidth,height:i.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let c,h;if("borderBoxSize"in o){const f=o.borderBoxSize,d=Array.isArray(f)?f[0]:f;c=d.inlineSize,h=d.blockSize}else c=i.offsetWidth,h=i.offsetHeight;e({width:c,height:h})});return n.observe(i,{box:"border-box"}),()=>n.unobserve(i)}else e(void 0)},[i]),t}function Rw(i,t){return U.useReducer((e,n)=>t[e][n]??e,i)}var $x=i=>{const{present:t,children:e}=i,n=kw(t),a=typeof e=="function"?e({present:n.isPresent}):U.Children.only(e),o=up(n.ref,jw(a));return typeof e=="function"||n.isPresent?U.cloneElement(a,{ref:o}):null};$x.displayName="Presence";function kw(i){const[t,e]=U.useState(),n=U.useRef(null),a=U.useRef(i),o=U.useRef("none"),c=i?"mounted":"unmounted",[h,f]=Rw(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return U.useEffect(()=>{const d=Fu(n.current);o.current=h==="mounted"?d:"none"},[h]),_h(()=>{const d=n.current,m=a.current;if(m!==i){const v=o.current,b=Fu(d);i?f("MOUNT"):b==="none"||(d==null?void 0:d.display)==="none"?f("UNMOUNT"):f(m&&v!==b?"ANIMATION_OUT":"UNMOUNT"),a.current=i}},[i,f]),_h(()=>{if(t){let d;const m=t.ownerDocument.defaultView??window,y=b=>{const C=Fu(n.current).includes(b.animationName);if(b.target===t&&C&&(f("ANIMATION_END"),!a.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",d=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},v=b=>{b.target===t&&(o.current=Fu(n.current))};return t.addEventListener("animationstart",v),t.addEventListener("animationcancel",y),t.addEventListener("animationend",y),()=>{m.clearTimeout(d),t.removeEventListener("animationstart",v),t.removeEventListener("animationcancel",y),t.removeEventListener("animationend",y)}}else f("ANIMATION_END")},[t,f]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:U.useCallback(d=>{n.current=d?getComputedStyle(d):null,e(d)},[])}}function Fu(i){return(i==null?void 0:i.animationName)||"none"}function jw(i){var n,a;let t=(n=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:n.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?i.ref:(t=(a=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:a.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?i.props.ref:i.props.ref||i.ref)}var Zx=Qx();const Lw=Wx(Zx);function Bw(i){const t=zw(i),e=U.forwardRef((n,a)=>{const{children:o,...c}=n,h=U.Children.toArray(o),f=h.find(Hw);if(f){const d=f.props.children,m=h.map(y=>y===f?U.Children.count(d)>1?U.Children.only(null):U.isValidElement(d)?d.props.children:null:y);return Q.jsx(t,{...c,ref:a,children:U.isValidElement(d)?U.cloneElement(d,void 0,m):null})}return Q.jsx(t,{...c,ref:a,children:o})});return e.displayName=`${i}.Slot`,e}function zw(i){const t=U.forwardRef((e,n)=>{const{children:a,...o}=e;if(U.isValidElement(a)){const c=Fw(a),h=Uw(o,a.props);return a.type!==U.Fragment&&(h.ref=n?Kx(n,c):c),U.cloneElement(a,h)}return U.Children.count(a)>1?U.Children.only(null):null});return t.displayName=`${i}.SlotClone`,t}var Nw=Symbol("radix.slottable");function Hw(i){return U.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===Nw}function Uw(i,t){const e={...t};for(const n in t){const a=i[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?e[n]=(...h)=>{const f=o(...h);return a(...h),f}:a&&(e[n]=a):n==="style"?e[n]={...a,...o}:n==="className"&&(e[n]=[a,o].filter(Boolean).join(" "))}return{...i,...e}}function Fw(i){var n,a;let t=(n=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:n.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?i.ref:(t=(a=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:a.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?i.props.ref:i.props.ref||i.ref)}var Pw=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],hp=Pw.reduce((i,t)=>{const e=Bw(`Primitive.${t}`),n=U.forwardRef((a,o)=>{const{asChild:c,...h}=a,f=c?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Q.jsx(f,{...h,ref:o})});return n.displayName=`Primitive.${t}`,{...i,[t]:n}},{}),Gh="Checkbox",[Yw,NR]=Cw(Gh),[Xw,fp]=Yw(Gh);function qw(i){const{__scopeCheckbox:t,checked:e,children:n,defaultChecked:a,disabled:o,form:c,name:h,onCheckedChange:f,required:d,value:m="on",internal_do_not_use_render:y}=i,[v,b]=Ow({prop:e,defaultProp:a??!1,onChange:f,caller:Gh}),[S,C]=U.useState(null),[_,w]=U.useState(null),T=U.useRef(!1),E=S?!!c||!!S.closest("form"):!0,k={checked:v,disabled:o,setChecked:b,control:S,setControl:C,name:h,form:c,value:m,hasConsumerStoppedPropagationRef:T,required:d,defaultChecked:rr(a)?!1:a,isFormControl:E,bubbleInput:_,setBubbleInput:w};return Q.jsx(Xw,{scope:t,...k,children:Vw(y)?y(k):n})}var Jx="CheckboxTrigger",tS=U.forwardRef(({__scopeCheckbox:i,onKeyDown:t,onClick:e,...n},a)=>{const{control:o,value:c,disabled:h,checked:f,required:d,setControl:m,setChecked:y,hasConsumerStoppedPropagationRef:v,isFormControl:b,bubbleInput:S}=fp(Jx,i),C=up(a,m),_=U.useRef(f);return U.useEffect(()=>{const w=o==null?void 0:o.form;if(w){const T=()=>y(_.current);return w.addEventListener("reset",T),()=>w.removeEventListener("reset",T)}},[o,y]),Q.jsx(hp.button,{type:"button",role:"checkbox","aria-checked":rr(f)?"mixed":f,"aria-required":d,"data-state":aS(f),"data-disabled":h?"":void 0,disabled:h,value:c,...n,ref:C,onKeyDown:ab(t,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:ab(e,w=>{y(T=>rr(T)?!0:!T),S&&b&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})})});tS.displayName=Jx;var eS=U.forwardRef((i,t)=>{const{__scopeCheckbox:e,name:n,checked:a,defaultChecked:o,required:c,disabled:h,value:f,onCheckedChange:d,form:m,...y}=i;return Q.jsx(qw,{__scopeCheckbox:e,checked:a,defaultChecked:o,disabled:h,required:c,onCheckedChange:d,name:n,form:m,value:f,internal_do_not_use_render:({isFormControl:v})=>Q.jsxs(Q.Fragment,{children:[Q.jsx(tS,{...y,ref:t,__scopeCheckbox:e}),v&&Q.jsx(rS,{__scopeCheckbox:e})]})})});eS.displayName=Gh;var nS="CheckboxIndicator",sS=U.forwardRef((i,t)=>{const{__scopeCheckbox:e,forceMount:n,...a}=i,o=fp(nS,e);return Q.jsx($x,{present:n||rr(o.checked)||o.checked===!0,children:Q.jsx(hp.span,{"data-state":aS(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...i.style}})})});sS.displayName=nS;var iS="CheckboxBubbleInput",rS=U.forwardRef(({__scopeCheckbox:i,...t},e)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:c,required:h,disabled:f,name:d,value:m,form:y,bubbleInput:v,setBubbleInput:b}=fp(iS,i),S=up(e,b),C=Dw(o),_=Mw(n);U.useEffect(()=>{const T=v;if(!T)return;const E=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(E,"checked").set,R=!a.current;if(C!==o&&A){const F=new Event("click",{bubbles:R});T.indeterminate=rr(o),A.call(T,rr(o)?!1:o),T.dispatchEvent(F)}},[v,C,o,a]);const w=U.useRef(rr(o)?!1:o);return Q.jsx(hp.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??w.current,required:h,disabled:f,name:d,value:m,form:y,...t,tabIndex:-1,ref:S,style:{...t.style,..._,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});rS.displayName=iS;function Vw(i){return typeof i=="function"}function rr(i){return i==="indeterminate"}function aS(i){return rr(i)?"indeterminate":i?"checked":"unchecked"}/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Iw=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),ob=i=>{const t=Iw(i);return t.charAt(0).toUpperCase()+t.slice(1)},oS=(...i)=>i.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),Ww=i=>{for(const t in i)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=U.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:c,...h},f)=>U.createElement("svg",{ref:f,...Qw,width:t,height:t,stroke:i,strokeWidth:n?Number(e)*24/Number(t):e,className:oS("lucide",a),...!o&&!Ww(h)&&{"aria-hidden":"true"},...h},[...c.map(([d,m])=>U.createElement(d,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=(i,t)=>{const e=U.forwardRef(({className:n,...a},o)=>U.createElement(Kw,{ref:o,iconNode:t,className:oS(`lucide-${Gw(ob(i))}`,`lucide-${i}`,n),...a}));return e.displayName=ob(i),e};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Jw=$w("check",Zw);function lS(i){var t,e,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var a=i.length;for(t=0;t<a;t++)i[t]&&(e=lS(i[t]))&&(n&&(n+=" "),n+=e)}else for(e in i)i[e]&&(n&&(n+=" "),n+=e);return n}function Ns(){for(var i,t,e=0,n="",a=arguments.length;e<a;e++)(i=arguments[e])&&(t=lS(i))&&(n&&(n+=" "),n+=t);return n}function tO({className:i,...t}){const e=Ns("peer","border-input","size-4","shrink-0","rounded-[4px]","border","shadow-xs","transition-shadow","outline-none","dark:bg-input/30","data-[state=checked]:bg-blue-500","data-[state=checked]:text-primary-foreground","dark:data-[state=checked]:bg-primary","focus-visible:border-ring","focus-visible:ring-ring/50","focus-visible:ring-[3px]","aria-invalid:ring-destructive/20","aria-invalid:border-destructive","dark:aria-invalid:ring-destructive/40","disabled:cursor-not-allowed","disabled:opacity-50",i);return Q.jsx(eS,{"data-slot":"checkbox",className:e,...t,children:Q.jsx(sS,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:Q.jsx(Jw,{className:"size-5"})})})}function eO({choiceNumber:i,choiceUid:t,choiceImage:e,handleDeleteClick:n}){const a=ze(f=>f.answerUid),o=ze(f=>f.setAnswerUid),c=a.includes(t),h=()=>{if(c){o(a.filter(f=>f!==t));return}o([...a,t])};return Q.jsxs("div",{className:"choice-card h-50 flex flex-col items-center relative rounded-xl bg-white p-4 shadow-md has-[[aria-checked=true]]:bg-blue-50",children:[Q.jsxs("div",{className:"flex justify-between w-full",children:[Q.jsx("label",{className:"w-8 h-8 p-2 flex items-center justify-center rounded-md s text-white bg-[#87bdfa]",children:i}),Q.jsx("button",{type:"button","aria-label":"정답카드 삭제 버튼",className:"aspect-square p-2 bg-white",onClick:()=>n(t),children:Q.jsx(_w,{width:18,height:18})})]}),Q.jsx("div",{className:"flex items-center justify-center rounded-lg h-full p-1 overflow-hidden",children:Q.jsx("img",{src:e,alt:"보기 이미지",className:"w-full h-full object-fill"})}),Q.jsxs("div",{className:"flex justify-center items-center mt-2 has-[[aria-checked=true]]:text-[#0075E2]",children:[Q.jsx(tO,{className:"w-6 h-6",checked:c,onCheckedChange:h}),Q.jsx("span",{className:"ml-2 text-lg",children:"정답 선택"})]})]})}const nO={small:"w-24 text-base",medium:"w-36 h-10! text-xl",large:"w-full text-xl"};function Gl({text:i,disabled:t,size:e="medium",borderColor:n,bgColor:a="linear-gradient(135deg, #667eea, #594ba2)",textColor:o="text-white",onClick:c}){const h=Ns("h-12","px-2","py-4","transition-all duration-200",nO[e],n?`border ${n}`:"border-none",t?"text-gray-400 cursor-not-allowed pointer-events-none":`${o} cursor-pointer hover:scale-105 active:scale-95`),f=()=>t?{background:"#e5e7eb"}:{background:a};return Q.jsx("button",{type:"button","aria-label":i,className:h,style:f(),disabled:t,onClick:t?void 0:c,children:i})}function sO(){const i=ze(c=>c.canvas),t=ze(c=>c.choiceList),e=ze(c=>c.setChoiceList),n=ze(c=>c.hasSelection),a=()=>{if(!i)return;const c=i.getActiveObjects();if(!c)return;const h=[...t];c.forEach(f=>{const d=f.get("uid");if(h.some(y=>y.uid===d))return;const m=f.toDataURL();h.push({imageUrl:m,uid:d})}),e(h)},o=c=>{const h=t.filter(f=>f.uid!==c);e(h)};return Q.jsxs("div",{className:"choice-list h-full flex flex-col gap-2 p-4 rounded-2xl relative pb-14",children:[Q.jsx("h2",{className:"text-xl font-bold flex-shrink-0",children:"선택지 목록"}),Q.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:Q.jsx("div",{className:"h-full overflow-y-auto",children:Q.jsx("div",{className:"grid grid-cols-2 gap-4 p-4",children:t.map((c,h)=>Q.jsx(eO,{choiceNumber:h+1,choiceUid:c.uid,choiceImage:c.imageUrl,handleDeleteClick:o},c.uid))})})}),Q.jsx("div",{className:"absolute left-0 bottom-4 w-full px-8",children:Q.jsx(Gl,{text:"선택지 추가",size:"large",disabled:!n,onClick:a})})]})}const dp=Object.freeze({CARD_BACKGROUND:"#f7f8fd",CANVAS_BACKGROUND:"#ffffff"}),Al=Object.freeze({DELETE:"Delete",UNDO:"z",REDO:"z",GROUP:"g",UNGROUP:"g"}),iO=Object.freeze({ADD:"add",DELETE:"delete",GROUP:"group",UNGROUP:"ungroup"});function B(i,t,e){return(t=function(n){var a=function(o,c){if(typeof o!="object"||!o)return o;var h=o[Symbol.toPrimitive];if(h!==void 0){var f=h.call(o,c);if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(o)}(n,"string");return typeof a=="symbol"?a:a+""}(t))in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function lb(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),e.push.apply(e,n)}return e}function j(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?lb(Object(e),!0).forEach(function(n){B(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):lb(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function ge(i,t){if(i==null)return{};var e,n,a=function(c,h){if(c==null)return{};var f={};for(var d in c)if({}.hasOwnProperty.call(c,d)){if(h.indexOf(d)>=0)continue;f[d]=c[d]}return f}(i,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(n=0;n<o.length;n++)e=o[n],t.indexOf(e)>=0||{}.propertyIsEnumerable.call(i,e)&&(a[e]=i[e])}return a}function qs(i,t){return t||(t=i.slice(0)),Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(t)}}))}class cb{constructor(){B(this,"browserShadowBlurConstant",1),B(this,"DPI",96),B(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),B(this,"perfLimitSizeTotal",2097152),B(this,"maxCacheSideLimit",4096),B(this,"minCacheSideLimit",256),B(this,"disableStyleCopyPaste",!1),B(this,"enableGLFiltering",!0),B(this,"textureSize",4096),B(this,"forceGLPutImageData",!1),B(this,"cachesBoundsOfCurve",!1),B(this,"fontPaths",{}),B(this,"NUM_FRACTION_DIGITS",4)}}const It=new class extends cb{constructor(i){super(),this.configure(i)}configure(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,i)}addFonts(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=j(j({},this.fontPaths),i)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(i=>{delete this.fontPaths[i]})}clearFonts(){this.fontPaths={}}restoreDefaults(i){const t=new cb,e=(i==null?void 0:i.reduce((n,a)=>(n[a]=t[a],n),{}))||t;this.configure(e)}},di=function(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return console[i]("fabric",...e)};let Bs=class extends Error{constructor(t,e){super("fabric: ".concat(t),e)}};class gp extends Bs{constructor(t){super("".concat(t," 'options.signal' is in 'aborted' state"))}}class rO{}class aO extends rO{testPrecision(t,e){const n="precision ".concat(e,` float;
void main(){}`),a=t.createShader(t.FRAGMENT_SHADER);return!!a&&(t.shaderSource(a,n),t.compileShader(a),!!t.getShaderParameter(a,t.COMPILE_STATUS))}queryWebGL(t){const e=t.getContext("webgl");e&&(this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(e,n)),e.getExtension("WEBGL_lose_context").loseContext(),di("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const oO={};let ub;const Fs=()=>ub||(ub={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new aO,dispose(){},copyPasteData:oO}),So=()=>Fs().document,hc=()=>Fs().window,cS=()=>{var i;return Math.max((i=It.devicePixelRatio)!==null&&i!==void 0?i:hc().devicePixelRatio,1)},Ul=new class{constructor(){B(this,"charWidthsCache",{}),B(this,"boundsOfCurveCache",{})}getFontCache(i){let{fontFamily:t,fontStyle:e,fontWeight:n}=i;t=t.toLowerCase(),this.charWidthsCache[t]||(this.charWidthsCache[t]={});const a=this.charWidthsCache[t],o="".concat(e.toLowerCase(),"_").concat((n+"").toLowerCase());return a[o]||(a[o]={}),a[o]}clearFontCache(i){(i=(i||"").toLowerCase())?this.charWidthsCache[i]&&delete this.charWidthsCache[i]:this.charWidthsCache={}}limitDimsByArea(i){const{perfLimitSizeTotal:t}=It,e=Math.sqrt(t*i);return[Math.floor(e),Math.floor(t/e)]}},gm="6.6.7";function Wr(){}const cr=Math.PI/2,gi=2*Math.PI,mp=Math.PI/180,mn=Object.freeze([1,0,0,1,0,0]),pp=16,Gi=.4477152502,Rt="center",Qt="left",On="top",mm="bottom",Te="right",dn="none",yp=/\r?\n/,uS="moving",Ih="scaling",hS="rotating",vp="rotate",fS="skewing",Il="resizing",lO="modifyPoly",cO="modifyPath",Ch="changed",Wh="scale",pn="scaleX",Fn="scaleY",_o="skewX",Co="skewY",Me="fill",gn="stroke",Th="modified",Ga="json",Xg="svg",dt=new class{constructor(){this[Ga]=new Map,this[Xg]=new Map}has(i){return this[Ga].has(i)}getClass(i){const t=this[Ga].get(i);if(!t)throw new Bs("No class registered for ".concat(i));return t}setClass(i,t){t?this[Ga].set(t,i):(this[Ga].set(i.type,i),this[Ga].set(i.type.toLowerCase(),i))}getSVGClass(i){return this[Xg].get(i)}setSVGClass(i,t){this[Xg].set(t??i.type.toLowerCase(),i)}},wh=new class extends Array{remove(i){const t=this.indexOf(i);t>-1&&this.splice(t,1)}cancelAll(){const i=this.splice(0);return i.forEach(t=>t.abort()),i}cancelByCanvas(i){if(!i)return[];const t=this.filter(e=>{var n;return e.target===i||typeof e.target=="object"&&((n=e.target)===null||n===void 0?void 0:n.canvas)===i});return t.forEach(e=>e.abort()),t}cancelByTarget(i){if(!i)return[];const t=this.filter(e=>e.target===i);return t.forEach(e=>e.abort()),t}};let uO=class{constructor(){B(this,"__eventListeners",{})}on(t,e){if(this.__eventListeners||(this.__eventListeners={}),typeof t=="object")return Object.entries(t).forEach(n=>{let[a,o]=n;this.on(a,o)}),()=>this.off(t);if(e){const n=t;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(e),()=>this.off(n,e)}return()=>!1}once(t,e){if(typeof t=="object"){const n=[];return Object.entries(t).forEach(a=>{let[o,c]=a;n.push(this.once(o,c))}),()=>n.forEach(a=>a())}if(e){const n=this.on(t,function(){for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];e.call(this,...o),n()});return n}return()=>!1}_removeEventListener(t,e){if(this.__eventListeners[t])if(e){const n=this.__eventListeners[t],a=n.indexOf(e);a>-1&&n.splice(a,1)}else this.__eventListeners[t]=[]}off(t,e){if(this.__eventListeners)if(t===void 0)for(const n in this.__eventListeners)this._removeEventListener(n);else typeof t=="object"?Object.entries(t).forEach(n=>{let[a,o]=n;this._removeEventListener(a,o)}):this._removeEventListener(t,e)}fire(t,e){var n;if(!this.__eventListeners)return;const a=(n=this.__eventListeners[t])===null||n===void 0?void 0:n.concat();if(a)for(let o=0;o<a.length;o++)a[o].call(this,e||{})}};const Br=(i,t)=>{const e=i.indexOf(t);return e!==-1&&i.splice(e,1),i},ys=i=>{if(i===0)return 1;switch(Math.abs(i)/cr){case 1:case 3:return 0;case 2:return-1}return Math.cos(i)},vs=i=>{if(i===0)return 0;const t=i/cr,e=Math.sign(i);switch(t){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(i)};let G=class on{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof t=="object"?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}add(t){return new on(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new on(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new on(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new on(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new on(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new on(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new on(this.x/t.x,this.y/t.y)}scalarDivide(t){return new on(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return e=Math.max(Math.min(1,e),0),new on(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}distanceFrom(t){const e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}midPointFrom(t){return this.lerp(t)}min(t){return new on(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new on(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n}clone(){return new on(this.x,this.y)}rotate(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bp;const n=vs(t),a=ys(t),o=this.subtract(e);return new on(o.x*a-o.y*n,o.x*n+o.y*a).add(e)}transform(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new on(t[0]*this.x+t[2]*this.y+(e?0:t[4]),t[1]*this.x+t[3]*this.y+(e?0:t[5]))}};const bp=new G(0,0),gh=i=>!!i&&Array.isArray(i._objects);function dS(i){class t extends i{constructor(){super(...arguments),B(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];const c=this._objects.push(...a);return a.forEach(h=>this._onObjectAdded(h)),c}insertAt(n){for(var a=arguments.length,o=new Array(a>1?a-1:0),c=1;c<a;c++)o[c-1]=arguments[c];return this._objects.splice(n,0,...o),o.forEach(h=>this._onObjectAdded(h)),this._objects.length}remove(){const n=this._objects,a=[];for(var o=arguments.length,c=new Array(o),h=0;h<o;h++)c[h]=arguments[h];return c.forEach(f=>{const d=n.indexOf(f);d!==-1&&(n.splice(d,1),a.push(f),this._onObjectRemoved(f))}),a}forEachObject(n){this.getObjects().forEach((a,o,c)=>n(a,o,c))}getObjects(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.length===0?[...this._objects]:this._objects.filter(c=>c.isType(...a))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,a){return!!this._objects.includes(n)||!!a&&this._objects.some(o=>o instanceof t&&o.contains(n,!0))}complexity(){return this._objects.reduce((n,a)=>n+=a.complexity?a.complexity():0,0)}sendObjectToBack(n){return!(!n||n===this._objects[0])&&(Br(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!(!n||n===this._objects[this._objects.length-1])&&(Br(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,a){if(!n)return!1;const o=this._objects.indexOf(n);if(o!==0){const c=this.findNewLowerIndex(n,o,a);return Br(this._objects,n),this._objects.splice(c,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,a){if(!n)return!1;const o=this._objects.indexOf(n);if(o!==this._objects.length-1){const c=this.findNewUpperIndex(n,o,a);return Br(this._objects,n),this._objects.splice(c,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,a){return n!==this._objects[a]&&(Br(this._objects,n),this._objects.splice(a,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,a,o){let c;if(o){c=a;for(let h=a-1;h>=0;--h)if(n.isOverlapping(this._objects[h])){c=h;break}}else c=a-1;return c}findNewUpperIndex(n,a,o){let c;if(o){c=a;for(let h=a+1;h<this._objects.length;++h)if(n.isOverlapping(this._objects[h])){c=h;break}}else c=a+1;return c}collectObjects(n){let{left:a,top:o,width:c,height:h}=n,{includeIntersecting:f=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const d=[],m=new G(a,o),y=m.add(new G(c,h));for(let v=this._objects.length-1;v>=0;v--){const b=this._objects[v];b.selectable&&b.visible&&(f&&b.intersectsWithRect(m,y)||b.isContainedWithinRect(m,y)||f&&b.containsPoint(m)||f&&b.containsPoint(y))&&d.push(b)}return d}}return t}let gS=class extends uO{_setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const e in t)this.set(e,t[e])}_setObject(t){for(const e in t)this._set(e,t[e])}set(t,e){return typeof t=="object"?this._setObject(t):this._set(t,e),this}_set(t,e){this[t]=e}toggle(t){const e=this.get(t);return typeof e=="boolean"&&this.set(t,!e),this}get(t){return this[t]}};function Fl(i){return hc().requestAnimationFrame(i)}function mS(i){return hc().cancelAnimationFrame(i)}let hO=0;const ur=()=>hO++,Ps=()=>{const i=So().createElement("canvas");if(!i||i.getContext===void 0)throw new Bs("Failed to create `canvas` element");return i},pS=()=>So().createElement("img"),Pn=i=>{const t=Ps();return t.width=i.width,t.height=i.height,t},xp=(i,t,e)=>i.toDataURL("image/".concat(t),e),Sp=(i,t,e)=>new Promise((n,a)=>{i.toBlob(n,"image/".concat(t),e)}),Se=i=>i*mp,Ys=i=>i/mp,yS=i=>i.every((t,e)=>t===mn[e]),nn=(i,t,e)=>new G(i).transform(t,e),wn=i=>{const t=1/(i[0]*i[3]-i[1]*i[2]),e=[t*i[3],-t*i[1],-t*i[2],t*i[0],0,0],{x:n,y:a}=new G(i[4],i[5]).transform(e,!0);return e[4]=-n,e[5]=-a,e},we=(i,t,e)=>[i[0]*t[0]+i[2]*t[1],i[1]*t[0]+i[3]*t[1],i[0]*t[2]+i[2]*t[3],i[1]*t[2]+i[3]*t[3],e?0:i[0]*t[4]+i[2]*t[5]+i[4],e?0:i[1]*t[4]+i[3]*t[5]+i[5]],Qh=(i,t)=>i.reduceRight((e,n)=>n&&e?we(n,e,t):n||e,void 0)||mn.concat(),vS=i=>{let[t,e]=i;return Math.atan2(e,t)},$r=i=>{const t=vS(i),e=Math.pow(i[0],2)+Math.pow(i[1],2),n=Math.sqrt(e),a=(i[0]*i[3]-i[2]*i[1])/n,o=Math.atan2(i[0]*i[2]+i[1]*i[3],e);return{angle:Ys(t),scaleX:n,scaleY:a,skewX:Ys(o),skewY:0,translateX:i[4]||0,translateY:i[5]||0}},To=function(i){return[1,0,0,1,i,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function na(){let{angle:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:t=0,y:e=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=Se(i),a=ys(n),o=vs(n);return[a,o,-o,a,t?t-(a*t-o*e):0,e?e-(o*t+a*e):0]}const Kh=function(i){return[i,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,0,0]},bS=i=>Math.tan(Se(i)),_p=i=>[1,0,bS(i),1,0,0],Cp=i=>[1,bS(i),0,1,0,0],fc=i=>{let{scaleX:t=1,scaleY:e=1,flipX:n=!1,flipY:a=!1,skewX:o=0,skewY:c=0}=i,h=Kh(n?-t:t,a?-e:e);return o&&(h=we(h,_p(o),!0)),c&&(h=we(h,Cp(c),!0)),h},xS=i=>{const{translateX:t=0,translateY:e=0,angle:n=0}=i;let a=To(t,e);n&&(a=we(a,na({angle:n})));const o=fc(i);return yS(o)||(a=we(a,o)),a},Pl=function(i){let{signal:t,crossOrigin:e=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,a){if(t&&t.aborted)return a(new gp("loadImage"));const o=pS();let c;t&&(c=function(f){o.src="",a(f)},t.addEventListener("abort",c,{once:!0}));const h=function(){o.onload=o.onerror=null,c&&(t==null||t.removeEventListener("abort",c)),n(o)};i?(o.onload=h,o.onerror=function(){c&&(t==null||t.removeEventListener("abort",c)),a(new Bs("Error loading ".concat(o.src)))},e&&(o.crossOrigin=e),o.src=i):h()})},yo=function(i){let{signal:t,reviver:e=Wr}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,a)=>{const o=[];t&&t.addEventListener("abort",a,{once:!0}),Promise.all(i.map(c=>dt.getClass(c.type).fromObject(c,{signal:t}).then(h=>(e(c,h),o.push(h),h)))).then(n).catch(c=>{o.forEach(h=>{h.dispose&&h.dispose()}),a(c)}).finally(()=>{t&&t.removeEventListener("abort",a)})})},dc=function(i){let{signal:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((e,n)=>{const a=[];t&&t.addEventListener("abort",n,{once:!0});const o=Object.values(i).map(h=>h&&h.type&&dt.has(h.type)?yo([h],{signal:t}).then(f=>{let[d]=f;return a.push(d),d}):h),c=Object.keys(i);Promise.all(o).then(h=>h.reduce((f,d,m)=>(f[c[m]]=d,f),{})).then(e).catch(h=>{a.forEach(f=>{f.dispose&&f.dispose()}),n(h)}).finally(()=>{t&&t.removeEventListener("abort",n)})})},sa=function(i){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((t,e)=>(e in i&&(t[e]=i[e]),t),{})},Tp=(i,t)=>Object.keys(i).reduce((e,n)=>(t(i[n],n,i)&&(e[n]=i[n]),e),{}),ce=(i,t)=>parseFloat(Number(i).toFixed(t)),vo=i=>"matrix("+i.map(t=>ce(t,It.NUM_FRACTION_DIGITS)).join(" ")+")",es=i=>!!i&&i.toLive!==void 0,hb=i=>!!i&&typeof i.toObject=="function",fb=i=>!!i&&i.offsetX!==void 0&&"source"in i,zr=i=>!!i&&"multiSelectionStacking"in i;function SS(i){const t=i&&gs(i);let e=0,n=0;if(!i||!t)return{left:e,top:n};let a=i;const o=t.documentElement,c=t.body||{scrollLeft:0,scrollTop:0};for(;a&&(a.parentNode||a.host)&&(a=a.parentNode||a.host,a===t?(e=c.scrollLeft||o.scrollLeft||0,n=c.scrollTop||o.scrollTop||0):(e+=a.scrollLeft||0,n+=a.scrollTop||0),a.nodeType!==1||a.style.position!=="fixed"););return{left:e,top:n}}const gs=i=>i.ownerDocument||null,_S=i=>{var t;return((t=i.ownerDocument)===null||t===void 0?void 0:t.defaultView)||null},CS=function(i,t,e){let{width:n,height:a}=e,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;i.width=n,i.height=a,o>1&&(i.setAttribute("width",(n*o).toString()),i.setAttribute("height",(a*o).toString()),t.scale(o,o))},pm=(i,t)=>{let{width:e,height:n}=t;e&&(i.style.width=typeof e=="number"?"".concat(e,"px"):e),n&&(i.style.height=typeof n=="number"?"".concat(n,"px"):n)};function db(i){return i.onselectstart!==void 0&&(i.onselectstart=()=>!1),i.style.userSelect=dn,i}let TS=class{constructor(t){B(this,"_originalCanvasStyle",void 0),B(this,"lower",void 0);const e=this.createLowerCanvas(t);this.lower={el:e,ctx:e.getContext("2d")}}createLowerCanvas(t){const e=(n=t)&&n.getContext!==void 0?t:t&&So().getElementById(t)||Ps();var n;if(e.hasAttribute("data-fabric"))throw new Bs("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=e.style.cssText,e.setAttribute("data-fabric","main"),e.classList.add("lower-canvas"),e}cleanupDOM(t){let{width:e,height:n}=t;const{el:a}=this.lower;a.classList.remove("lower-canvas"),a.removeAttribute("data-fabric"),a.setAttribute("width","".concat(e)),a.setAttribute("height","".concat(n)),a.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,e){const{el:n,ctx:a}=this.lower;CS(n,a,t,e)}setCSSDimensions(t){pm(this.lower.el,t)}calcOffset(){return function(t){var e;const n=t&&gs(t),a={left:0,top:0};if(!n)return a;const o=((e=_S(t))===null||e===void 0?void 0:e.getComputedStyle(t,null))||{};a.left+=parseInt(o.borderLeftWidth,10)||0,a.top+=parseInt(o.borderTopWidth,10)||0,a.left+=parseInt(o.paddingLeft,10)||0,a.top+=parseInt(o.paddingTop,10)||0;let c={left:0,top:0};const h=n.documentElement;t.getBoundingClientRect!==void 0&&(c=t.getBoundingClientRect());const f=SS(t);return{left:c.left+f.left-(h.clientLeft||0)+a.left,top:c.top+f.top-(h.clientTop||0)+a.top}}(this.lower.el)}dispose(){Fs().dispose(this.lower.el),delete this.lower}};const fO={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...mn]};let wp=class wS extends dS(gS){get lowerCanvasEl(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.el}get contextContainer(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.ctx}static getDefaults(){return wS.ownDefaults}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(e),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new TS(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];const o=super.insertAt(t,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),o}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(di("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?cS():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t,e){return this.setDimensions({width:t},e)}setHeight(t,e){return this.setDimensions({height:t},e)}_setDimensionsImpl(t){let{cssOnly:e=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e){const a=j({width:this.width,height:this.height},t);this.elements.setDimensions(a,this.getRetinaScaling()),this.hasLostContext=!0,this.width=a.width,this.height=a.height}n||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t,e){this._setDimensionsImpl(t,e),e&&e.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){this.viewportTransform=t,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,e){const n=t,a=[...this.viewportTransform],o=nn(t,wn(a));a[0]=e,a[3]=e;const c=nn(o,a);a[4]+=n.x-c.x,a[5]+=n.y-c.y,this.setViewportTransform(a)}setZoom(t){this.zoomToPoint(new G(0,0),t)}absolutePan(t){const e=[...this.viewportTransform];return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)}relativePan(t){return this.absolutePan(new G(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Fl(()=>this.renderAndReset()))}calcViewportBoundaries(){const t=this.width,e=this.height,n=wn(this.viewportTransform),a=nn({x:0,y:0},n),o=nn({x:t,y:e},n),c=a.min(o),h=a.max(o);return this.vptCoords={tl:c,tr:new G(h.x,c.y),bl:new G(c.x,h.y),br:h}}cancelRequestedRender(){this.nextRenderHandle&&(mS(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,e){if(this.destroyed)return;const n=this.viewportTransform,a=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(t,e),t.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(t),a&&(a._set("canvas",this),a.shouldCache(),a._transformDone=!0,a.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,a)),this._renderOverlay(t),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,e){const n=this.viewportTransform;t.save(),t.transform(...n),t.globalCompositeOperation="destination-in",e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_renderObjects(t,e){for(let n=0,a=e.length;n<a;++n)e[n]&&e[n].render(t)}_renderBackgroundOrOverlay(t,e){const n=this["".concat(e,"Color")],a=this["".concat(e,"Image")],o=this.viewportTransform,c=this["".concat(e,"Vpt")];if(!n&&!a)return;const h=es(n);if(n){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=h?n.toLive(t):n,c&&t.transform(...o),h){t.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const f=n.gradientTransform||n.patternTransform;f&&t.transform(...f)}t.fill(),t.restore()}if(a){t.save();const{skipOffscreen:f}=this;this.skipOffscreen=c,c&&t.transform(...o),a.render(t),this.skipOffscreen=f,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new G(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new G(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new G(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new G(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new G(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return nn(this.getCenterPoint(),wn(this.viewportTransform))}_centerObject(t,e){t.setXY(e,Rt,Rt),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,e){const n=this.clipPath,a=n&&!n.excludeFromExport?this._toObject(n,t,e):null;return j(j(j({version:gm},sa(this,e)),{},{objects:this._objects.filter(o=>!o.excludeFromExport).map(o=>this._toObject(o,t,e))},this.__serializeBgOverlay(t,e)),a?{clipPath:a}:null)}_toObject(t,e,n){let a;this.includeDefaultValues||(a=t.includeDefaultValues,t.includeDefaultValues=!1);const o=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=!!a),o}__serializeBgOverlay(t,e){const n={},a=this.backgroundImage,o=this.overlayImage,c=this.backgroundColor,h=this.overlayColor;return es(c)?c.excludeFromExport||(n.background=c.toObject(e)):c&&(n.background=c),es(h)?h.excludeFromExport||(n.overlay=h.toObject(e)):h&&(n.overlay=h),a&&!a.excludeFromExport&&(n.backgroundImage=this._toObject(a,t,e)),o&&!o.excludeFromExport&&(n.overlayImage=this._toObject(o,t,e)),n}toSVG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t.reviver=e;const n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",e),this._setSVGObjects(n,e),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",e),n.push("</svg>"),n.join("")}_setSVGPreamble(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(t,e){const n=e.width||"".concat(this.width),a=e.height||"".concat(this.height),o=It.NUM_FRACTION_DIGITS,c=e.viewBox;let h;if(c)h='viewBox="'.concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height,'" ');else if(this.svgViewportTransformation){const f=this.viewportTransform;h='viewBox="'.concat(ce(-f[4]/f[0],o)," ").concat(ce(-f[5]/f[3],o)," ").concat(ce(this.width/f[0],o)," ").concat(ce(this.height/f[3],o),'" ')}else h='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',a,'" ',h,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",gm,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),`</defs>
`)}createSVGClipPathMarkup(t){const e=this.clipPath;return e?(e.clipPathId="CLIPPATH_".concat(ur()),'<clipPath id="'.concat(e.clipPathId,`" >
`).concat(e.toClipPathSVG(t.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(t=>{const e=this["".concat(t,"Color")];if(es(e)){const n=this["".concat(t,"Vpt")],a=this.viewportTransform,o={isType:()=>!1,width:this.width/(n?a[0]:1),height:this.height/(n?a[3]:1)};return e.toSVG(o,{additionalTransform:n?vo(a):""})}}).join("")}createSVGFontFacesMarkup(){const t=[],e={},n=It.fontPaths;this._objects.forEach(function o(c){t.push(c),gh(c)&&c._objects.forEach(o)}),t.forEach(o=>{if(!(c=o)||typeof c._renderText!="function")return;var c;const{styles:h,fontFamily:f}=o;!e[f]&&n[f]&&(e[f]=!0,h&&Object.values(h).forEach(d=>{Object.values(d).forEach(m=>{let{fontFamily:y=""}=m;!e[y]&&n[y]&&(e[y]=!0)})}))});const a=Object.keys(e).map(o=>`		@font-face {
			font-family: '`.concat(o,`';
			src: url('`).concat(n[o],`');
		}
`)).join("");return a?`	<style type="text/css"><![CDATA[
`.concat(a,`]]></style>
`):""}_setSVGObjects(t,e){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(t,n,e)})}_setSVGObject(t,e,n){t.push(e.toSVG(n))}_setSVGBgOverlayImage(t,e,n){const a=this[e];a&&!a.excludeFromExport&&a.toSVG&&t.push(a.toSVG(n))}_setSVGBgOverlayColor(t,e){const n=this["".concat(e,"Color")];if(n)if(es(n)){const a=n.repeat||"",o=this.width,c=this.height,h=this["".concat(e,"Vpt")]?vo(wn(this.viewportTransform)):"";t.push('<rect transform="'.concat(h," translate(").concat(o/2,",").concat(c/2,')" x="').concat(n.offsetX-o/2,'" y="').concat(n.offsetY-c/2,'" width="').concat(a!=="repeat-y"&&a!=="no-repeat"||!fb(n)?o:n.source.width,'" height="').concat(a!=="repeat-x"&&a!=="no-repeat"||!fb(n)?c:n.source.height,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(t,e){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return Promise.reject(new Bs("`json` is undefined"));const a=typeof t=="string"?JSON.parse(t):t,{objects:o=[],backgroundImage:c,background:h,overlayImage:f,overlay:d,clipPath:m}=a,y=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([yo(o,{reviver:e,signal:n}),dc({backgroundImage:c,backgroundColor:h,overlayImage:f,overlayColor:d,clipPath:m},{signal:n})]).then(v=>{let[b,S]=v;return this.clear(),this.add(...b),this.set(a),this.set(S),this.renderOnAddRemove=y,this})}clone(t){const e=this.toObject(t);return this.cloneWithoutData().loadFromJSON(e)}cloneWithoutData(){const t=Pn(this);return new this.constructor(t)}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:n=1,multiplier:a=1,enableRetinaScaling:o=!1}=t,c=a*(o?this.getRetinaScaling():1);return xp(this.toCanvasElement(c,t),e,n)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:n=1,multiplier:a=1,enableRetinaScaling:o=!1}=t,c=a*(o?this.getRetinaScaling():1);return Sp(this.toCanvasElement(c,t),e,n)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:e,height:n,left:a,top:o,filter:c}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const h=(e||this.width)*t,f=(n||this.height)*t,d=this.getZoom(),m=this.width,y=this.height,v=this.skipControlsDrawing,b=d*t,S=this.viewportTransform,C=[b,0,0,b,(S[4]-(a||0))*t,(S[5]-(o||0))*t],_=this.enableRetinaScaling,w=Pn({width:h,height:f}),T=c?this._objects.filter(E=>c(E)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=C,this.width=h,this.height=f,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(w.getContext("2d"),T),this.viewportTransform=S,this.width=m,this.height=y,this.calcViewportBoundaries(),this.enableRetinaScaling=_,this.skipControlsDrawing=v,w}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),wh.cancelByCanvas(this),this.disposed=!0,new Promise((t,e)=>{const n=()=>{this.destroy(),t(!0)};n.kill=e,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(t=>t.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}};B(wp,"ownDefaults",fO);const dO=["touchstart","touchmove","touchend"],OS=i=>{const t=SS(i.target),e=function(n){const a=n.changedTouches;return a&&a[0]?a[0]:n}(i);return new G(e.clientX+t.left,e.clientY+t.top)},Oh=i=>dO.includes(i.type)||i.pointerType==="touch",gb=i=>{i.preventDefault(),i.stopPropagation()},Hs=i=>{let t=0,e=0,n=0,a=0;for(let o=0,c=i.length;o<c;o++){const{x:h,y:f}=i[o];(h>n||!o)&&(n=h),(h<t||!o)&&(t=h),(f>a||!o)&&(a=f),(f<e||!o)&&(e=f)}return{left:t,top:e,width:n-t,height:a-e}},gO=["translateX","translateY","scaleX","scaleY"],ES=(i,t)=>bo(i,we(t,i.calcOwnMatrix())),bo=(i,t)=>{const e=$r(t),{translateX:n,translateY:a,scaleX:o,scaleY:c}=e,h=ge(e,gO),f=new G(n,a);i.flipX=!1,i.flipY=!1,Object.assign(i,h),i.set({scaleX:o,scaleY:c}),i.setPositionByOrigin(f,Rt,Rt)},AS=i=>{i.scaleX=1,i.scaleY=1,i.skewX=0,i.skewY=0,i.flipX=!1,i.flipY=!1,i.rotate(0)},Op=i=>({scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,angle:i.angle,left:i.left,flipX:i.flipX,flipY:i.flipY,top:i.top}),$h=(i,t,e)=>{const n=i/2,a=t/2,o=[new G(-n,-a),new G(n,-a),new G(-n,a),new G(n,a)].map(h=>h.transform(e)),c=Hs(o);return new G(c.width,c.height)},gc=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mn;return we(wn(arguments.length>1&&arguments[1]!==void 0?arguments[1]:mn),i)},Qr=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mn,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mn;return i.transform(gc(t,e))},DS=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mn,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mn;return i.transform(gc(t,e),!0)},ym=(i,t,e)=>{const n=gc(t,e);return bo(i,we(n,i.calcOwnMatrix())),n},MS=(i,t)=>{var e;const{transform:{target:n}}=t;(e=n.canvas)===null||e===void 0||e.fire("object:".concat(i),j(j({},t),{},{target:n})),n.fire(i,t)},mO={left:-.5,top:-.5,center:0,bottom:.5,right:.5},De=i=>typeof i=="string"?mO[i]:i-.5,Eh="not-allowed";function RS(i){return De(i.originX)===De(Rt)&&De(i.originY)===De(Rt)}function mb(i){return .5-De(i)}const ps=(i,t)=>i[t],kS=(i,t,e,n)=>({e:i,transform:t,pointer:new G(e,n)});function jS(i,t){const e=i.getTotalAngle()+Ys(Math.atan2(t.y,t.x))+360;return Math.round(e%360/45)}function Ep(i,t,e,n,a){var o;let{target:c,corner:h}=i;const f=c.controls[h],d=((o=c.canvas)===null||o===void 0?void 0:o.getZoom())||1,m=c.padding/d,y=function(v,b,S,C){const _=v.getRelativeCenterPoint(),w=S!==void 0&&C!==void 0?v.translateToGivenOrigin(_,Rt,Rt,S,C):new G(v.left,v.top);return(v.angle?b.rotate(-Se(v.angle),_):b).subtract(w)}(c,new G(n,a),t,e);return y.x>=m&&(y.x-=m),y.x<=-m&&(y.x+=m),y.y>=m&&(y.y-=m),y.y<=m&&(y.y+=m),y.x-=f.offsetX,y.y-=f.offsetY,y}const pO=(i,t,e,n)=>{const{target:a,offsetX:o,offsetY:c}=t,h=e-o,f=n-c,d=!ps(a,"lockMovementX")&&a.left!==h,m=!ps(a,"lockMovementY")&&a.top!==f;return d&&a.set(Qt,h),m&&a.set(On,f),(d||m)&&MS(uS,kS(i,t,e,n)),d||m},pb={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},qg=(i,t,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+(t-i)*(2/3-e)*6:i),yb=(i,t,e,n)=>{i/=255,t/=255,e/=255;const a=Math.max(i,t,e),o=Math.min(i,t,e);let c,h;const f=(a+o)/2;if(a===o)c=h=0;else{const d=a-o;switch(h=f>.5?d/(2-a-o):d/(a+o),a){case i:c=(t-e)/d+(t<e?6:0);break;case t:c=(e-i)/d+2;break;case e:c=(i-t)/d+4}c/=6}return[Math.round(360*c),Math.round(100*h),Math.round(100*f),n]},vb=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(i)/(i.endsWith("%")?100:1)},Pu=i=>Math.min(Math.round(i),255).toString(16).toUpperCase().padStart(2,"0"),bb=i=>{let[t,e,n,a=1]=i;const o=Math.round(.3*t+.59*e+.11*n);return[o,o,o,a]};let Yn=class tn{constructor(t){if(B(this,"isUnrecognised",!1),t)if(t instanceof tn)this.setSource([...t._source]);else if(Array.isArray(t)){const[e,n,a,o=1]=t;this.setSource([e,n,a,o])}else this.setSource(this._tryParsingColor(t));else this.setSource([0,0,0,1])}_tryParsingColor(t){return(t=t.toLowerCase())in pb&&(t=pb[t]),t==="transparent"?[255,255,255,0]:tn.sourceFromHex(t)||tn.sourceFromRgb(t)||tn.sourceFromHsl(t)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,e,n]=this.getSource();return"rgb(".concat(t,",").concat(e,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,e,n]=yb(...this.getSource());return"hsl(".concat(t,",").concat(e,"%,").concat(n,"%)")}toHsla(){const[t,e,n,a]=yb(...this.getSource());return"hsla(".concat(t,",").concat(e,"%,").concat(n,"%,").concat(a,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,e,n,a]=this.getSource();return"".concat(Pu(t)).concat(Pu(e)).concat(Pu(n)).concat(Pu(Math.round(255*a)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(bb(this.getSource())),this}toBlackWhite(t){const[e,,,n]=bb(this.getSource()),a=e<(t||127)?0:255;return this.setSource([a,a,a,n]),this}overlayWith(t){t instanceof tn||(t=new tn(t));const e=this.getSource(),n=t.getSource(),[a,o,c]=e.map((h,f)=>Math.round(.5*h+.5*n[f]));return this.setSource([a,o,c,e[3]]),this}static fromRgb(t){return tn.fromRgba(t)}static fromRgba(t){return new tn(tn.sourceFromRgb(t))}static sourceFromRgb(t){const e=t.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(e){const[n,a,o]=e.slice(1,4).map(c=>{const h=parseFloat(c);return c.endsWith("%")?Math.round(2.55*h):h});return[n,a,o,vb(e[4])]}}static fromHsl(t){return tn.fromHsla(t)}static fromHsla(t){return new tn(tn.sourceFromHsl(t))}static sourceFromHsl(t){const e=t.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!e)return;const n=(tn.parseAngletoDegrees(e[1])%360+360)%360/360,a=parseFloat(e[2])/100,o=parseFloat(e[3])/100;let c,h,f;if(a===0)c=h=f=o;else{const d=o<=.5?o*(a+1):o+a-o*a,m=2*o-d;c=qg(m,d,n+1/3),h=qg(m,d,n),f=qg(m,d,n-1/3)}return[Math.round(255*c),Math.round(255*h),Math.round(255*f),vb(e[4])]}static fromHex(t){return new tn(tn.sourceFromHex(t))}static sourceFromHex(t){if(t.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const e=t.slice(t.indexOf("#")+1);let n;n=e.length<=4?e.split("").map(f=>f+f):e.match(/.{2}/g);const[a,o,c,h=255]=n.map(f=>parseInt(f,16));return[a,o,c,h/255]}}static parseAngletoDegrees(t){const e=t.toLowerCase(),n=parseFloat(e);return e.includes("rad")?Ys(n):e.includes("turn")?360*n:n}};const un=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pp;const e=/\D{0,2}$/.exec(i),n=parseFloat(i),a=It.DPI;switch(e==null?void 0:e[0]){case"mm":return n*a/25.4;case"cm":return n*a/2.54;case"in":return n*a;case"pt":return n*a/72;case"pc":return n*a/72*12;case"em":return n*t;default:return n}},Ap=i=>{const[t,e]=i.trim().split(" "),[n,a]=(o=t)&&o!==dn?[o.slice(1,4),o.slice(5,8)]:o===dn?[o,o]:["Mid","Mid"];var o;return{meetOrSlice:e||"meet",alignX:n,alignY:a}},Wl=function(i,t){let e,n,a=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(t)if(t.toLive)e="url(#SVGID_".concat(t.id,")");else{const o=new Yn(t),c=o.getAlpha();e=o.toRgb(),c!==1&&(n=c.toString())}else e="none";return a?"".concat(i,": ").concat(e,"; ").concat(n?"".concat(i,"-opacity: ").concat(n,"; "):""):"".concat(i,'="').concat(e,'" ').concat(n?"".concat(i,'-opacity="').concat(n,'" '):"")};let LS=class{getSvgStyles(t){const e=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",a=this.strokeDashArray?this.strokeDashArray.join(" "):dn,o=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",h=this.strokeLineJoin?this.strokeLineJoin:"miter",f=this.strokeMiterLimit?this.strokeMiterLimit:"4",d=this.opacity!==void 0?this.opacity:"1",m=this.visible?"":" visibility: hidden;",y=t?"":this.getSvgFilter(),v=Wl(Me,this.fill);return[Wl(gn,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",a,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",h,"; ","stroke-miterlimit: ",f,"; ",v,"fill-rule: ",e,"; ","opacity: ",d,";",y,m].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=t?this.calcTransformMatrix():this.calcOwnMatrix(),a='transform="'.concat(vo(n));return"".concat(a).concat(e,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:e,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),o=t.indexOf("COMMON_PARTS");return t[o]=a,e?e(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:e,reviver:n,withShadow:a,additionalTransform:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=e?"":'style="'.concat(this.getSvgStyles(),'" '),h=a?'style="'.concat(this.getSvgFilter(),'" '):"",f=this.clipPath,d=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",m=f&&f.absolutePositioned,y=this.stroke,v=this.fill,b=this.shadow,S=[],C=t.indexOf("COMMON_PARTS");let _;f&&(f.clipPathId="CLIPPATH_".concat(ur()),_='<clipPath id="'.concat(f.clipPathId,`" >
`).concat(f.toClipPathSVG(n),`</clipPath>
`)),m&&S.push("<g ",h,this.getSvgCommons(),` >
`),S.push("<g ",this.getSvgTransform(!1),m?"":h+this.getSvgCommons(),` >
`);const w=[c,d,e?"":this.addPaintOrder()," ",o?'transform="'.concat(o,'" '):""].join("");return t[C]=w,es(v)&&S.push(v.toSVG(this)),es(y)&&S.push(y.toSVG(this)),b&&S.push(b.toSVG(this)),f&&S.push(_),S.push(t.join("")),S.push(`</g>
`),m&&S.push(`</g>
`),n?n(S.join("")):S.join("")}addPaintOrder(){return this.paintFirst!==Me?' paint-order="'.concat(this.paintFirst,'" '):""}};function Zh(i){return new RegExp("^("+i.join("|")+")\\b","i")}var xb,Sb,_b;const ms=String.raw(xb||(xb=qs(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),Vg=String.raw(Sb||(Sb=qs(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),vm="http://www.w3.org/2000/svg",yO=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+ms+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+ms+"))?\\s+(.*)"),vO={cx:Qt,x:Qt,r:"radius",cy:On,y:On,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Gg="font-size",Ig="clip-path",bO=Zh(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),xO=Zh(["symbol","image","marker","pattern","view","svg"]),Cb=Zh(["symbol","g","a","svg","clipPath","defs"]),Tb=new RegExp(String.raw(_b||(_b=qs(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),ms,Vg,ms,Vg,ms,Vg,ms)),SO=new G(1,0),BS=new G,Dp=(i,t)=>i.rotate(t),Ah=(i,t)=>new G(t).subtract(i),Dh=i=>i.distanceFrom(BS),Mh=(i,t)=>Math.atan2(to(i,t),NS(i,t)),zS=i=>Mh(SO,i),Jh=i=>i.eq(BS)?i:i.scalarDivide(Dh(i)),Mp=function(i){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Jh(new G(-i.y,i.x).scalarMultiply(t?1:-1))},to=(i,t)=>i.x*t.y-i.y*t.x,NS=(i,t)=>i.x*t.x+i.y*t.y,bm=(i,t,e)=>{if(i.eq(t)||i.eq(e))return!0;const n=to(t,e),a=to(t,i),o=to(e,i);return n>=0?a>=0&&o<=0:!(a<=0&&o>=0)},wb="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Ob=new RegExp("(?:\\s|^)"+wb+wb+"("+ms+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Us{constructor(t){const e=typeof t=="string"?Us.parseShadow(t):t;Object.assign(this,Us.ownDefaults,e),this.id=ur()}static parseShadow(t){const e=t.trim(),[,n=0,a=0,o=0]=(Ob.exec(e)||[]).map(c=>parseFloat(c)||0);return{color:(e.replace(Ob,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:a,blur:o}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const e=Dp(new G(this.offsetX,this.offsetY),Se(-t.angle)),n=new Yn(this.color);let a=40,o=40;return t.width&&t.height&&(a=100*ce((Math.abs(e.x)+this.blur)/t.width,It.NUM_FRACTION_DIGITS)+20,o=100*ce((Math.abs(e.y)+this.blur)/t.height,It.NUM_FRACTION_DIGITS)+20),t.flipX&&(e.x*=-1),t.flipY&&(e.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(o,'%" height="').concat(100+2*o,'%" x="-').concat(a,'%" width="').concat(100+2*a,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(ce(this.blur?this.blur/2:0,It.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(ce(e.x,It.NUM_FRACTION_DIGITS),'" dy="').concat(ce(e.y,It.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},e=Us.ownDefaults;return this.includeDefaultValues?t:Tp(t,(n,a)=>n!==e[a])}static async fromObject(t){return new this(t)}}B(Us,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),B(Us,"type","shadow"),dt.setClass(Us,"shadow");const Zr=(i,t,e)=>Math.max(i,Math.min(t,e)),_O=[On,Qt,pn,Fn,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",_o,Co],pi=[Me,gn,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],CO={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Qt,originY:On,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Me,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},Wg=(i,t,e,n)=>(i<Math.abs(t)?(i=t,n=e/4):n=t===0&&i===0?e/gi*Math.asin(1):e/gi*Math.asin(t/i),{a:i,c:t,p:e,s:n}),Eb=(i,t,e,n,a)=>i*Math.pow(2,10*(n-=1))*Math.sin((n*a-t)*gi/e),HS=(i,t,e,n)=>-e*Math.cos(i/n*cr)+e+t,xm=(i,t,e,n)=>(i/=n)<1/2.75?e*(7.5625*i*i)+t:i<2/2.75?e*(7.5625*(i-=1.5/2.75)*i+.75)+t:i<2.5/2.75?e*(7.5625*(i-=2.25/2.75)*i+.9375)+t:e*(7.5625*(i-=2.625/2.75)*i+.984375)+t,Ab=(i,t,e,n)=>e-xm(n-i,0,e,n)+t;var TO=Object.freeze({__proto__:null,defaultEasing:HS,easeInBack:function(i,t,e,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*(i/=n)*i*((a+1)*i-a)+t},easeInBounce:Ab,easeInCirc:(i,t,e,n)=>-e*(Math.sqrt(1-(i/=n)*i)-1)+t,easeInCubic:(i,t,e,n)=>e*(i/n)**3+t,easeInElastic:(i,t,e,n)=>{const a=e;let o=0;if(i===0)return t;if((i/=n)===1)return t+e;o||(o=.3*n);const{a:c,s:h,p:f}=Wg(a,e,o,1.70158);return-Eb(c,h,f,i,n)+t},easeInExpo:(i,t,e,n)=>i===0?t:e*2**(10*(i/n-1))+t,easeInOutBack:function(i,t,e,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return(i/=n/2)<1?e/2*(i*i*((1+(a*=1.525))*i-a))+t:e/2*((i-=2)*i*((1+(a*=1.525))*i+a)+2)+t},easeInOutBounce:(i,t,e,n)=>i<n/2?.5*Ab(2*i,0,e,n)+t:.5*xm(2*i-n,0,e,n)+.5*e+t,easeInOutCirc:(i,t,e,n)=>(i/=n/2)<1?-e/2*(Math.sqrt(1-i**2)-1)+t:e/2*(Math.sqrt(1-(i-=2)*i)+1)+t,easeInOutCubic:(i,t,e,n)=>(i/=n/2)<1?e/2*i**3+t:e/2*((i-2)**3+2)+t,easeInOutElastic:(i,t,e,n)=>{const a=e;let o=0;if(i===0)return t;if((i/=n/2)===2)return t+e;o||(o=n*(.3*1.5));const{a:c,s:h,p:f,c:d}=Wg(a,e,o,1.70158);return i<1?-.5*Eb(c,h,f,i,n)+t:c*Math.pow(2,-10*(i-=1))*Math.sin((i*n-h)*gi/f)*.5+d+t},easeInOutExpo:(i,t,e,n)=>i===0?t:i===n?t+e:(i/=n/2)<1?e/2*2**(10*(i-1))+t:e/2*-(2**(-10*--i)+2)+t,easeInOutQuad:(i,t,e,n)=>(i/=n/2)<1?e/2*i**2+t:-e/2*(--i*(i-2)-1)+t,easeInOutQuart:(i,t,e,n)=>(i/=n/2)<1?e/2*i**4+t:-e/2*((i-=2)*i**3-2)+t,easeInOutQuint:(i,t,e,n)=>(i/=n/2)<1?e/2*i**5+t:e/2*((i-2)**5+2)+t,easeInOutSine:(i,t,e,n)=>-e/2*(Math.cos(Math.PI*i/n)-1)+t,easeInQuad:(i,t,e,n)=>e*(i/=n)*i+t,easeInQuart:(i,t,e,n)=>e*(i/=n)*i**3+t,easeInQuint:(i,t,e,n)=>e*(i/n)**5+t,easeInSine:(i,t,e,n)=>-e*Math.cos(i/n*cr)+e+t,easeOutBack:function(i,t,e,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*((i=i/n-1)*i*((a+1)*i+a)+1)+t},easeOutBounce:xm,easeOutCirc:(i,t,e,n)=>e*Math.sqrt(1-(i=i/n-1)*i)+t,easeOutCubic:(i,t,e,n)=>e*((i/n-1)**3+1)+t,easeOutElastic:(i,t,e,n)=>{const a=e;let o=0;if(i===0)return t;if((i/=n)===1)return t+e;o||(o=.3*n);const{a:c,s:h,p:f,c:d}=Wg(a,e,o,1.70158);return c*2**(-10*i)*Math.sin((i*n-h)*gi/f)+d+t},easeOutExpo:(i,t,e,n)=>i===n?t+e:e*-(2**(-10*i/n)+1)+t,easeOutQuad:(i,t,e,n)=>-e*(i/=n)*(i-2)+t,easeOutQuart:(i,t,e,n)=>-e*((i=i/n-1)*i**3-1)+t,easeOutQuint:(i,t,e,n)=>e*((i/n-1)**5+1)+t,easeOutSine:(i,t,e,n)=>e*Math.sin(i/n*cr)+t});const wO=()=>!1;class Rp{constructor(t){let{startValue:e,byValue:n,duration:a=500,delay:o=0,easing:c=HS,onStart:h=Wr,onChange:f=Wr,onComplete:d=Wr,abort:m=wO,target:y}=t;B(this,"_state","pending"),B(this,"durationProgress",0),B(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=a,this.delay=o,this.easing=c,this._onStart=h,this._onChange=f,this._onComplete=d,this._abort=m,this.target=y,this.startValue=e,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const t=e=>{this._state==="pending"&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Fl(t),this.delay):Fl(t)}tick(t){const e=(t||+new Date)-this.startTime,n=Math.min(e,this.duration);this.durationProgress=n/this.duration;const{value:a,valueProgress:o}=this.calculate(n);this.value=Object.freeze(a),this.valueProgress=o,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):e>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Fl(this.tick)))}register(){wh.push(this)}unregister(){wh.remove(this)}abort(){this._state="aborted",this.unregister()}}const OO=["startValue","endValue"];class EO extends Rp{constructor(t){let{startValue:e=0,endValue:n=100}=t;super(j(j({},ge(t,OO)),{},{startValue:e,byValue:n-e}))}calculate(t){const e=this.easing(t,this.startValue,this.byValue,this.duration);return{value:e,valueProgress:Math.abs((e-this.startValue)/this.byValue)}}}const AO=["startValue","endValue"];class DO extends Rp{constructor(t){let{startValue:e=[0],endValue:n=[100]}=t;super(j(j({},ge(t,AO)),{},{startValue:e,byValue:n.map((a,o)=>a-e[o])}))}calculate(t){const e=this.startValue.map((n,a)=>this.easing(t,n,this.byValue[a],this.duration,a));return{value:e,valueProgress:Math.abs((e[0]-this.startValue[0])/this.byValue[0])}}}const MO=["startValue","endValue","easing","onChange","onComplete","abort"],RO=(i,t,e,n)=>t+e*(1-Math.cos(i/n*cr)),Qg=i=>i&&((t,e,n)=>i(new Yn(t).toRgba(),e,n));class kO extends Rp{constructor(t){let{startValue:e,endValue:n,easing:a=RO,onChange:o,onComplete:c,abort:h}=t,f=ge(t,MO);const d=new Yn(e).getSource(),m=new Yn(n).getSource();super(j(j({},f),{},{startValue:d,byValue:m.map((y,v)=>y-d[v]),easing:a,onChange:Qg(o),onComplete:Qg(c),abort:Qg(h)}))}calculate(t){const[e,n,a,o]=this.startValue.map((h,f)=>this.easing(t,h,this.byValue[f],this.duration,f)),c=[...[e,n,a].map(Math.round),Zr(0,o,1)];return{value:c,valueProgress:c.map((h,f)=>this.byValue[f]!==0?Math.abs((h-this.startValue[f])/this.byValue[f]):0).find(h=>h!==0)||0}}}function kp(i){const t=(e=>Array.isArray(e.startValue)||Array.isArray(e.endValue))(i)?new DO(i):new EO(i);return t.start(),t}function US(i){const t=new kO(i);return t.start(),t}class pe{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some(e=>e.eq(t))}append(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.points=this.points.concat(e.filter(a=>!this.includes(a))),this}static isPointContained(t,e,n){let a=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(e.eq(n))return t.eq(e);if(e.x===n.x)return t.x===e.x&&(a||t.y>=Math.min(e.y,n.y)&&t.y<=Math.max(e.y,n.y));if(e.y===n.y)return t.y===e.y&&(a||t.x>=Math.min(e.x,n.x)&&t.x<=Math.max(e.x,n.x));{const o=Ah(e,n),c=Ah(e,t).divide(o);return a?Math.abs(c.x)===Math.abs(c.y):c.x===c.y&&c.x>=0&&c.x<=1}}static isPointInPolygon(t,e){const n=new G(t).setX(Math.min(t.x-1,...e.map(o=>o.x)));let a=0;for(let o=0;o<e.length;o++){const c=this.intersectSegmentSegment(e[o],e[(o+1)%e.length],t,n);if(c.includes(t))return!0;a+=+(c.status==="Intersection")}return a%2==1}static intersectLineLine(t,e,n,a){let o=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],c=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const h=e.x-t.x,f=e.y-t.y,d=a.x-n.x,m=a.y-n.y,y=t.x-n.x,v=t.y-n.y,b=d*v-m*y,S=h*v-f*y,C=m*h-d*f;if(C!==0){const _=b/C,w=S/C;return(o||0<=_&&_<=1)&&(c||0<=w&&w<=1)?new pe("Intersection").append(new G(t.x+_*h,t.y+_*f)):new pe}if(b===0||S===0){const _=o||c||pe.isPointContained(t,n,a)||pe.isPointContained(e,n,a)||pe.isPointContained(n,t,e)||pe.isPointContained(a,t,e);return new pe(_?"Coincident":void 0)}return new pe("Parallel")}static intersectSegmentLine(t,e,n,a){return pe.intersectLineLine(t,e,n,a,!1,!0)}static intersectSegmentSegment(t,e,n,a){return pe.intersectLineLine(t,e,n,a,!1,!1)}static intersectLinePolygon(t,e,n){let a=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const o=new pe,c=n.length;for(let h,f,d,m=0;m<c;m++){if(h=n[m],f=n[(m+1)%c],d=pe.intersectLineLine(t,e,h,f,a,!1),d.status==="Coincident")return d;o.append(...d.points)}return o.points.length>0&&(o.status="Intersection"),o}static intersectSegmentPolygon(t,e,n){return pe.intersectLinePolygon(t,e,n,!1)}static intersectPolygonPolygon(t,e){const n=new pe,a=t.length,o=[];for(let c=0;c<a;c++){const h=t[c],f=t[(c+1)%a],d=pe.intersectSegmentPolygon(h,f,e);d.status==="Coincident"?(o.push(d),n.append(h,f)):n.append(...d.points)}return o.length>0&&o.length===t.length?new pe("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(t,e,n){const a=e.min(n),o=e.max(n),c=new G(o.x,a.y),h=new G(a.x,o.y);return pe.intersectPolygonPolygon(t,[a,c,o,h])}}class jO extends gS{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?nn(t,this.group.calcTransformMatrix()):t}setXY(t,e,n){this.group&&(t=nn(t,wn(this.group.calcTransformMatrix()))),this.setRelativeXY(t,e,n)}getRelativeXY(){return new G(this.left,this.top)}setRelativeXY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(t,e,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:t,tr:e,br:n,bl:a}=this.aCoords||(this.aCoords=this.calcACoords()),o=[t,e,n,a];if(this.group){const c=this.group.calcTransformMatrix();return o.map(h=>nn(h,c))}return o}intersectsWithRect(t,e){return pe.intersectPolygonRectangle(this.getCoords(),t,e).status==="Intersection"}intersectsWithObject(t){const e=pe.intersectPolygonPolygon(this.getCoords(),t.getCoords());return e.status==="Intersection"||e.status==="Coincident"||t.isContainedWithinObject(this)||this.isContainedWithinObject(t)}isContainedWithinObject(t){return this.getCoords().every(e=>t.containsPoint(e))}isContainedWithinRect(t,e){const{left:n,top:a,width:o,height:c}=this.getBoundingRect();return n>=t.x&&n+o<=e.x&&a>=t.y&&a+c<=e.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t){return pe.isPointInPolygon(t,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return!!this.getCoords().some(n=>n.x<=e.x&&n.x>=t.x&&n.y<=e.y&&n.y>=t.y)||!!this.intersectsWithRect(t,e)||this.containsPoint(t.midPointFrom(e))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return this.intersectsWithRect(t,e)?!0:this.getCoords().every(n=>(n.x>=e.x||n.x<=t.x)&&(n.y>=e.y||n.y<=t.y))&&this.containsPoint(t.midPointFrom(e))}getBoundingRect(){return Hs(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set(pn,t),this._set(Fn,t),this.setCoords()}scaleToWidth(t){const e=this.getBoundingRect().width/this.getScaledWidth();return this.scale(t/this.width/e)}scaleToHeight(t){const e=this.getBoundingRect().height/this.getScaledHeight();return this.scale(t/this.height/e)}getCanvasRetinaScaling(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?Ys(vS(this.calcTransformMatrix())):this.angle}getViewportTransform(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.viewportTransform)||mn.concat()}calcACoords(){const t=na({angle:this.angle}),{x:e,y:n}=this.getRelativeCenterPoint(),a=To(e,n),o=we(a,t),c=this._getTransformedDimensions(),h=c.x/2,f=c.y/2;return{tl:nn({x:-h,y:-f},o),tr:nn({x:h,y:-f},o),bl:nn({x:-h,y:f},o),br:nn({x:h,y:f},o)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=[];return!t&&this.group&&(e=this.group.transformMatrixKey(t)),e.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,De(this.originX),De(this.originY)),e}calcTransformMatrix(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.calcOwnMatrix();if(t||!this.group)return e;const n=this.transformMatrixKey(t),a=this.matrixCache;return a&&a.key.every((o,c)=>o===n[c])?a.value:(this.group&&(e=we(this.group.calcTransformMatrix(!1),e)),this.matrixCache={key:n,value:e},e)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),e=this.ownMatrixCache;if(e&&e.key===t)return e.value;const n=this.getRelativeCenterPoint(),a={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},o=xS(a);return this.ownMatrixCache={key:t,value:o},o}_getNonTransformedDimensions(){return new G(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=j({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),n=e.strokeWidth;let a=n,o=0;this.strokeUniform&&(a=0,o=n);const c=e.width+a,h=e.height+a;let f;return f=e.skewX===0&&e.skewY===0?new G(c*e.scaleX,h*e.scaleY):$h(c,h,fc(e)),f.scalarAdd(o)}translateToGivenOrigin(t,e,n,a,o){let c=t.x,h=t.y;const f=De(a)-De(e),d=De(o)-De(n);if(f||d){const m=this._getTransformedDimensions();c+=f*m.x,h+=d*m.y}return new G(c,h)}translateToCenterPoint(t,e,n){if(e===Rt&&n===Rt)return t;const a=this.translateToGivenOrigin(t,e,n,Rt,Rt);return this.angle?a.rotate(Se(this.angle),t):a}translateToOriginPoint(t,e,n){const a=this.translateToGivenOrigin(t,Rt,Rt,e,n);return this.angle?a.rotate(Se(this.angle),t):a}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?nn(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new G(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,e){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,e)}setPositionByOrigin(t,e,n){const a=this.translateToCenterPoint(t,e,n),o=this.translateToOriginPoint(a,this.originX,this.originY);this.set({left:o.x,top:o.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Qt,On)}}const LO=["type"],BO=["extraParam"];let ci=class mh extends jO{static getDefaults(){return mh.ownDefaults}get type(){const t=this.constructor.type;return t==="FabricObject"?"object":t.toLowerCase()}set type(t){di("warn","Setting type has no effect",t)}constructor(t){super(),B(this,"_cacheContext",null),Object.assign(this,mh.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=Ps(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const e=t.width,n=t.height,a=It.maxCacheSideLimit,o=It.minCacheSideLimit;if(e<=a&&n<=a&&e*n<=It.perfLimitSizeTotal)return e<o&&(t.width=o),n<o&&(t.height=o),t;const c=e/n,[h,f]=Ul.limitDimsByArea(c),d=Zr(o,h,a),m=Zr(o,f,a);return e>d&&(t.zoomX/=e/d,t.width=d,t.capped=!0),n>m&&(t.zoomY/=n/m,t.height=m,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),e=this._getTransformedDimensions({skewX:0,skewY:0}),n=e.x*t.x/this.scaleX,a=e.y*t.y/this.scaleY;return{width:Math.ceil(n+2),height:Math.ceil(a+2),zoomX:t.x,zoomY:t.y,x:n,y:a}}_updateCacheCanvas(){const t=this._cacheCanvas,e=this._cacheContext,{width:n,height:a,zoomX:o,zoomY:c,x:h,y:f}=this._limitCacheSize(this._getCacheCanvasDimensions()),d=n!==t.width||a!==t.height,m=this.zoomX!==o||this.zoomY!==c;if(!t||!e)return!1;if(d||m){n!==t.width||a!==t.height?(t.width=n,t.height=a):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height));const y=h/2,v=f/2;return this.cacheTranslationX=Math.round(t.width/2-y)+y,this.cacheTranslationY=Math.round(t.height/2-v)+v,e.translate(this.cacheTranslationX,this.cacheTranslationY),e.scale(o,c),this.zoomX=o,this.zoomY=c,!0}return!1}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(t)}transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,n=this.calcTransformMatrix(!e);t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new G(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=$r(this.calcTransformMatrix());return new G(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const e=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return t.scalarMultiply(e*n)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t===0?1e-4:t}_set(t,e){t!==pn&&t!==Fn||(e=this._constrainScale(e)),t===pn&&e<0?(this.flipX=!this.flipX,e*=-1):t==="scaleY"&&e<0?(this.flipY=!this.flipY,e*=-1):t!=="shadow"||!e||e instanceof Us||(e=new Us(e));const n=this[t]!==e;return this[t]=e,n&&this.constructor.cacheProperties.includes(t)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(t))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t,!1,{}),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){if(t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:e,zoomY:n,cacheTranslationX:a,cacheTranslationY:o}=this,{width:c,height:h}=this._cacheCanvas;this.drawObject(this._cacheContext,t.forClipping,{zoomX:e,zoomY:n,cacheTranslationX:a,cacheTranslationY:o,width:c,height:h,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===gn&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(t,e,n){t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",t.setTransform(1,0,0,1,0,0),t.drawImage(n,0,0),t.restore()}drawObject(t,e,n){const a=this.fill,o=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath,n),this.fill=a,this.stroke=o}createClipPathLayer(t,e){const n=Pn(e),a=n.getContext("2d");if(a.translate(e.cacheTranslationX,e.cacheTranslationY),a.scale(e.zoomX,e.zoomY),t._cacheCanvas=n,e.parentClipPaths.forEach(o=>{o.transform(a)}),e.parentClipPaths.push(t),t.absolutePositioned){const o=wn(this.calcTransformMatrix());a.transform(o[0],o[1],o[2],o[3],o[4],o[5])}return t.transform(a),t.drawObject(a,!0,e),n}_drawClipPath(t,e,n){if(!e)return;e._transformDone=!0;const a=this.createClipPathLayer(e,n);this.drawClipPathOnCache(t,e,a)}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const e=this._cacheCanvas,n=this._cacheContext;return!(!e||!n||t||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(e&&n&&!t&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),n.restore()),!0)}_renderBackground(t){if(!this.backgroundColor)return;const e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,e){const n=e.stroke;n&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,es(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(t,n):(t.strokeStyle=n.toLive(t),this._applyPatternGradientTransform(t,n)):t.strokeStyle=e.stroke)}_setFillStyles(t,e){let{fill:n}=e;n&&(es(n)?(t.fillStyle=n.toLive(t),this._applyPatternGradientTransform(t,n)):t.fillStyle=n)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,e){e&&e.length!==0&&t.setLineDash(e)}_setShadow(t){if(!this.shadow)return;const e=this.shadow,n=this.canvas,a=this.getCanvasRetinaScaling(),[o,,,c]=(n==null?void 0:n.viewportTransform)||mn,h=o*a,f=c*a,d=e.nonScaling?new G(1,1):this.getObjectScaling();t.shadowColor=e.color,t.shadowBlur=e.blur*It.browserShadowBlurConstant*(h+f)*(d.x+d.y)/4,t.shadowOffsetX=e.offsetX*h*d.x,t.shadowOffsetY=e.offsetY*f*d.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,e){if(!es(e))return{offsetX:0,offsetY:0};const n=e.gradientTransform||e.patternTransform,a=-this.width/2+e.offsetX||0,o=-this.height/2+e.offsetY||0;return e.gradientUnits==="percentage"?t.transform(this.width,0,0,this.height,a,o):t.transform(1,0,0,1,a,o),n&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:a,offsetY:o}}_renderPaintInOrder(t){this.paintFirst===gn?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),this.fillRule==="evenodd"?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const e=this.getObjectScaling();t.scale(1/e.x,1/e.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,e){var n;const a=this._limitCacheSize(this._getCacheCanvasDimensions()),o=this.getCanvasRetinaScaling(),c=a.x/this.scaleX/o,h=a.y/this.scaleY/o,f=Pn({width:Math.ceil(c),height:Math.ceil(h)}),d=f.getContext("2d");d&&(d.beginPath(),d.moveTo(0,0),d.lineTo(c,0),d.lineTo(c,h),d.lineTo(0,h),d.closePath(),d.translate(c/2,h/2),d.scale(a.zoomX/this.scaleX/o,a.zoomY/this.scaleY/o),this._applyPatternGradientTransform(d,e),d.fillStyle=e.toLive(t),d.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(o*this.scaleX/a.zoomX,o*this.scaleY/a.zoomY),t.strokeStyle=(n=d.createPattern(f,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new G(this.left+this.width/2,this.top+this.height/2)}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}cloneAsImage(t){const e=this.toCanvasElement(t);return new(dt.getClass("image"))(e)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=Op(this),n=this.group,a=this.shadow,o=Math.abs,c=t.enableRetinaScaling?cS():1,h=(t.multiplier||1)*c,f=t.canvasProvider||(T=>new wp(T,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,t.withoutTransform&&AS(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&ym(this,this.getViewportTransform()),this.setCoords();const d=Ps(),m=this.getBoundingRect(),y=this.shadow,v=new G;if(y){const T=y.blur,E=y.nonScaling?new G(1,1):this.getObjectScaling();v.x=2*Math.round(o(y.offsetX)+T)*o(E.x),v.y=2*Math.round(o(y.offsetY)+T)*o(E.y)}const b=m.width+v.x,S=m.height+v.y;d.width=Math.ceil(b),d.height=Math.ceil(S);const C=f(d);t.format==="jpeg"&&(C.backgroundColor="#fff"),this.setPositionByOrigin(new G(C.width/2,C.height/2),Rt,Rt);const _=this.canvas;C._objects=[this],this.set("canvas",C),this.setCoords();const w=C.toCanvasElement(h||1,t);return this.set("canvas",_),this.shadow=a,n&&(this.group=n),this.set(e),this.setCoords(),C._objects=[],C.destroy(),w}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return xp(this.toCanvasElement(t),t.format||"png",t.quality||1)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Sp(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.includes(this.constructor.type)||e.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:e,originX:n,originY:a}=this;if(e){const{x:o,y:c}=this.getRelativeCenterPoint();this.originX=Rt,this.originY=Rt,this.left=o,this.top=c}if(this.set("angle",t),e){const{x:o,y:c}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,a);this.left=o,this.top=c,this.originX=n,this.originY=a}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){wh.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Fs().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(t,e){return Object.entries(t).reduce((n,a)=>{let[o,c]=a;return n[o]=this._animate(o,c,e),n},{})}_animate(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=t.split("."),o=this.constructor.colorProperties.includes(a[a.length-1]),{abort:c,startValue:h,onChange:f,onComplete:d}=n,m=j(j({},n),{},{target:this,startValue:h??a.reduce((y,v)=>y[v],this),endValue:e,abort:c==null?void 0:c.bind(this),onChange:(y,v,b)=>{a.reduce((S,C,_)=>(_===a.length-1&&(S[C]=y),S[C]),this),f&&f(y,v,b)},onComplete:(y,v,b)=>{this.setCoords(),d&&d(y,v,b)}});return o?US(m):kp(m)}isDescendantOf(t){const{parent:e,group:n}=this;return e===t||n===t||!!e&&e.isDescendantOf(t)||!!n&&n!==e&&n.isDescendantOf(t)}getAncestors(){const t=[];let e=this;do e=e.parent,e&&t.push(e);while(e);return t}findCommonAncestors(t){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const e=this.getAncestors(),n=t.getAncestors();if(e.length===0&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[t,...n.slice(0,n.length-1)],common:[this]};for(let a,o=0;o<e.length;o++){if(a=e[o],a===t)return{fork:[this,...e.slice(0,o)],otherFork:[],common:e.slice(o)};for(let c=0;c<n.length;c++){if(this===n[c])return{fork:[],otherFork:[t,...n.slice(0,c)],common:[this,...e]};if(a===n[c])return{fork:[this,...e.slice(0,o)],otherFork:[t,...n.slice(0,c)],common:e.slice(o)}}}return{fork:[this,...e],otherFork:[t,...n],common:[]}}hasCommonAncestors(t){const e=this.findCommonAncestors(t);return e&&!!e.common.length}isInFrontOf(t){if(this===t)return;const e=this.findCommonAncestors(t);if(e.fork.includes(t))return!0;if(e.otherFork.includes(this))return!1;const n=e.common[0]||this.canvas;if(!n)return;const a=e.fork.pop(),o=e.otherFork.pop(),c=n._objects.indexOf(a),h=n._objects.indexOf(o);return c>-1&&c>h}toObject(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(mh.customProperties,this.constructor.customProperties||[]);let e;const n=It.NUM_FRACTION_DIGITS,{clipPath:a,fill:o,stroke:c,shadow:h,strokeDashArray:f,left:d,top:m,originX:y,originY:v,width:b,height:S,strokeWidth:C,strokeLineCap:_,strokeDashOffset:w,strokeLineJoin:T,strokeUniform:E,strokeMiterLimit:k,scaleX:A,scaleY:R,angle:F,flipX:N,flipY:I,opacity:J,visible:ot,backgroundColor:rt,fillRule:ut,paintFirst:ft,globalCompositeOperation:bt,skewX:X,skewY:nt}=this;a&&!a.excludeFromExport&&(e=a.toObject(t.concat("inverted","absolutePositioned")));const at=M=>ce(M,n),Ct=j(j({},sa(this,t)),{},{type:this.constructor.type,version:gm,originX:y,originY:v,left:at(d),top:at(m),width:at(b),height:at(S),fill:hb(o)?o.toObject():o,stroke:hb(c)?c.toObject():c,strokeWidth:at(C),strokeDashArray:f&&f.concat(),strokeLineCap:_,strokeDashOffset:w,strokeLineJoin:T,strokeUniform:E,strokeMiterLimit:at(k),scaleX:at(A),scaleY:at(R),angle:at(F),flipX:N,flipY:I,opacity:at(J),shadow:h&&h.toObject(),visible:ot,backgroundColor:rt,fillRule:ut,paintFirst:ft,globalCompositeOperation:bt,skewX:at(X),skewY:at(nt)},e?{clipPath:e}:null);return this.includeDefaultValues?Ct:this._removeDefaultValues(Ct)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const e=this.constructor.getDefaults(),n=Object.keys(e).length>0?e:Object.getPrototypeOf(this);return Tp(t,(a,o)=>{if(o===Qt||o===On||o==="type")return!0;const c=n[o];return a!==c&&!(Array.isArray(a)&&Array.isArray(c)&&a.length===0&&c.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(t){let e=ge(t,LO),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:a}=n,o=ge(n,BO);return dc(e,o).then(c=>a?(delete c[a],new this(e[a],c)):new this(c))}static fromObject(t,e){return this._fromObject(t,e)}};B(ci,"stateProperties",_O),B(ci,"cacheProperties",pi),B(ci,"ownDefaults",CO),B(ci,"type","FabricObject"),B(ci,"colorProperties",[Me,gn,"backgroundColor"]),B(ci,"customProperties",[]),dt.setClass(ci),dt.setClass(ci,"object");const wo=(i,t,e)=>(n,a,o,c)=>{const h=t(n,a,o,c);return h&&MS(i,j(j({},kS(n,a,o,c)),e)),h};function Oo(i){return(t,e,n,a)=>{const{target:o,originX:c,originY:h}=e,f=o.getRelativeCenterPoint(),d=o.translateToOriginPoint(f,c,h),m=i(t,e,n,a);return o.setPositionByOrigin(d,e.originX,e.originY),m}}const Db=wo(Il,Oo((i,t,e,n)=>{const a=Ep(t,t.originX,t.originY,e,n);if(De(t.originX)===De(Rt)||De(t.originX)===De(Te)&&a.x<0||De(t.originX)===De(Qt)&&a.x>0){const{target:o}=t,c=o.strokeWidth/(o.strokeUniform?o.scaleX:1),h=RS(t)?2:1,f=o.width,d=Math.abs(a.x*h/o.scaleX)-c;return o.set("width",Math.max(d,1)),f!==o.width}return!1}));function zO(i,t,e,n,a){n=n||{};const o=this.sizeX||n.cornerSize||a.cornerSize,c=this.sizeY||n.cornerSize||a.cornerSize,h=n.transparentCorners!==void 0?n.transparentCorners:a.transparentCorners,f=h?gn:Me,d=!h&&(n.cornerStrokeColor||a.cornerStrokeColor);let m,y=t,v=e;i.save(),i.fillStyle=n.cornerColor||a.cornerColor||"",i.strokeStyle=n.cornerStrokeColor||a.cornerStrokeColor||"",o>c?(m=o,i.scale(1,c/o),v=e*o/c):c>o?(m=c,i.scale(o/c,1),y=t*c/o):m=o,i.beginPath(),i.arc(y,v,m/2,0,gi,!1),i[f](),d&&i.stroke(),i.restore()}function NO(i,t,e,n,a){n=n||{};const o=this.sizeX||n.cornerSize||a.cornerSize,c=this.sizeY||n.cornerSize||a.cornerSize,h=n.transparentCorners!==void 0?n.transparentCorners:a.transparentCorners,f=h?gn:Me,d=!h&&(n.cornerStrokeColor||a.cornerStrokeColor),m=o/2,y=c/2;i.save(),i.fillStyle=n.cornerColor||a.cornerColor||"",i.strokeStyle=n.cornerStrokeColor||a.cornerStrokeColor||"",i.translate(t,e);const v=a.getTotalAngle();i.rotate(Se(v)),i["".concat(f,"Rect")](-m,-y,o,c),d&&i.strokeRect(-m,-y,o,c),i.restore()}class us{constructor(t){B(this,"visible",!0),B(this,"actionName",Wh),B(this,"angle",0),B(this,"x",0),B(this,"y",0),B(this,"offsetX",0),B(this,"offsetY",0),B(this,"sizeX",0),B(this,"sizeY",0),B(this,"touchSizeX",0),B(this,"touchSizeY",0),B(this,"cursorStyle","crosshair"),B(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,e,n,a){var o;let{tl:c,tr:h,br:f,bl:d}=a;return((o=e.canvas)===null||o===void 0?void 0:o.getActiveObject())===e&&e.isControlVisible(t)&&pe.isPointInPolygon(n,[c,h,f,d])}getActionHandler(t,e,n){return this.actionHandler}getMouseDownHandler(t,e,n){return this.mouseDownHandler}getMouseUpHandler(t,e,n){return this.mouseUpHandler}cursorStyleHandler(t,e,n){return e.cursorStyle}getActionName(t,e,n){return e.actionName}getVisibility(t,e){var n,a;return(n=(a=t._controlsVisibility)===null||a===void 0?void 0:a[e])!==null&&n!==void 0?n:this.visible}setVisibility(t,e,n){this.visible=t}positionHandler(t,e,n,a){return new G(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(e)}calcCornerCoords(t,e,n,a,o,c){const h=Qh([To(n,a),na({angle:t}),Kh((o?this.touchSizeX:this.sizeX)||e,(o?this.touchSizeY:this.sizeY)||e)]);return{tl:new G(-.5,-.5).transform(h),tr:new G(.5,-.5).transform(h),br:new G(.5,.5).transform(h),bl:new G(-.5,.5).transform(h)}}render(t,e,n,a,o){((a=a||{}).cornerStyle||o.cornerStyle)==="circle"?zO.call(this,t,e,n,a,o):NO.call(this,t,e,n,a,o)}}const HO=(i,t,e)=>e.lockRotation?Eh:t.cursorStyle,UO=wo(hS,Oo((i,t,e,n)=>{let{target:a,ex:o,ey:c,theta:h,originX:f,originY:d}=t;const m=a.translateToOriginPoint(a.getRelativeCenterPoint(),f,d);if(ps(a,"lockRotation"))return!1;const y=Math.atan2(c-m.y,o-m.x),v=Math.atan2(n-m.y,e-m.x);let b=Ys(v-y+h);if(a.snapAngle&&a.snapAngle>0){const C=a.snapAngle,_=a.snapThreshold||C,w=Math.ceil(b/C)*C,T=Math.floor(b/C)*C;Math.abs(b-T)<_?b=T:Math.abs(b-w)<_&&(b=w)}b<0&&(b=360+b),b%=360;const S=a.angle!==b;return a.angle=b,S}));function FS(i,t){const e=t.canvas,n=i[e.uniScaleKey];return e.uniformScaling&&!n||!e.uniformScaling&&n}function PS(i,t,e){const n=ps(i,"lockScalingX"),a=ps(i,"lockScalingY");if(n&&a||!t&&(n||a)&&e||n&&t==="x"||a&&t==="y")return!0;const{width:o,height:c,strokeWidth:h}=i;return o===0&&h===0&&t!=="y"||c===0&&h===0&&t!=="x"}const FO=["e","se","s","sw","w","nw","n","ne","e"],jl=(i,t,e)=>{const n=FS(i,e);if(PS(e,t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"",n))return Eh;const a=jS(e,t);return"".concat(FO[a],"-resize")};function jp(i,t,e,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o=t.target,c=a.by,h=FS(i,o);let f,d,m,y,v,b;if(PS(o,c,h))return!1;if(t.gestureScale)d=t.scaleX*t.gestureScale,m=t.scaleY*t.gestureScale;else{if(f=Ep(t,t.originX,t.originY,e,n),v=c!=="y"?Math.sign(f.x||t.signX||1):1,b=c!=="x"?Math.sign(f.y||t.signY||1):1,t.signX||(t.signX=v),t.signY||(t.signY=b),ps(o,"lockScalingFlip")&&(t.signX!==v||t.signY!==b))return!1;if(y=o._getTransformedDimensions(),h&&!c){const _=Math.abs(f.x)+Math.abs(f.y),{original:w}=t,T=_/(Math.abs(y.x*w.scaleX/o.scaleX)+Math.abs(y.y*w.scaleY/o.scaleY));d=w.scaleX*T,m=w.scaleY*T}else d=Math.abs(f.x*o.scaleX/y.x),m=Math.abs(f.y*o.scaleY/y.y);RS(t)&&(d*=2,m*=2),t.signX!==v&&c!=="y"&&(t.originX=mb(t.originX),d*=-1,t.signX=v),t.signY!==b&&c!=="x"&&(t.originY=mb(t.originY),m*=-1,t.signY=b)}const S=o.scaleX,C=o.scaleY;return c?(c==="x"&&o.set(pn,d),c==="y"&&o.set(Fn,m)):(!ps(o,"lockScalingX")&&o.set(pn,d),!ps(o,"lockScalingY")&&o.set(Fn,m)),S!==o.scaleX||C!==o.scaleY}const Yu=wo(Ih,Oo((i,t,e,n)=>jp(i,t,e,n))),PO=wo(Ih,Oo((i,t,e,n)=>jp(i,t,e,n,{by:"x"}))),YO=wo(Ih,Oo((i,t,e,n)=>jp(i,t,e,n,{by:"y"}))),XO=["target","ex","ey","skewingSide"],Kg={x:{counterAxis:"y",scale:pn,skew:_o,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Fn,skew:Co,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},qO=["ns","nesw","ew","nwse"],VO=(i,t,e)=>{if(t.x!==0&&ps(e,"lockSkewingY")||t.y!==0&&ps(e,"lockSkewingX"))return Eh;const n=jS(e,t)%4;return"".concat(qO[n],"-resize")};function YS(i,t,e,n,a){const{target:o}=e,{counterAxis:c,origin:h,lockSkewing:f,skew:d,flip:m}=Kg[i];if(ps(o,f))return!1;const{origin:y,flip:v}=Kg[c],b=De(e[y])*(o[v]?-1:1),S=-Math.sign(b)*(o[m]?-1:1),C=.5*-((o[d]===0&&Ep(e,Rt,Rt,n,a)[i]>0||o[d]>0?1:-1)*S)+.5;return wo(fS,Oo((w,T,E,k)=>function(A,R,F){let{target:N,ex:I,ey:J,skewingSide:ot}=R,rt=ge(R,XO);const{skew:ut}=Kg[A],ft=F.subtract(new G(I,J)).divide(new G(N.scaleX,N.scaleY))[A],bt=N[ut],X=rt[ut],nt=Math.tan(Se(X)),at=A==="y"?N._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:N._getTransformedDimensions({scaleX:1,scaleY:1}).y,Ct=2*ft*ot/Math.max(at,1)+nt,M=Ys(Math.atan(Ct));N.set(ut,M);const K=bt!==N[ut];if(K&&A==="y"){const{skewX:ct,scaleX:it}=N,gt=N._getTransformedDimensions({skewY:bt}),Mt=N._getTransformedDimensions(),vt=ct!==0?gt.x/Mt.x:1;vt!==1&&N.set(pn,vt*it)}return K}(i,T,new G(E,k))))(t,j(j({},e),{},{[h]:C,skewingSide:S}),n,a)}const GO=(i,t,e,n)=>YS("x",i,t,e,n),IO=(i,t,e,n)=>YS("y",i,t,e,n);function tf(i,t){return i[t.canvas.altActionKey]}const Xu=(i,t,e)=>{const n=tf(i,e);return t.x===0?n?_o:Fn:t.y===0?n?Co:pn:""},Ka=(i,t,e)=>tf(i,e)?VO(0,t,e):jl(i,t,e),Mb=(i,t,e,n)=>tf(i,t.target)?IO(i,t,e,n):PO(i,t,e,n),Rb=(i,t,e,n)=>tf(i,t.target)?GO(i,t,e,n):YO(i,t,e,n),XS=()=>({ml:new us({x:-.5,y:0,cursorStyleHandler:Ka,actionHandler:Mb,getActionName:Xu}),mr:new us({x:.5,y:0,cursorStyleHandler:Ka,actionHandler:Mb,getActionName:Xu}),mb:new us({x:0,y:.5,cursorStyleHandler:Ka,actionHandler:Rb,getActionName:Xu}),mt:new us({x:0,y:-.5,cursorStyleHandler:Ka,actionHandler:Rb,getActionName:Xu}),tl:new us({x:-.5,y:-.5,cursorStyleHandler:jl,actionHandler:Yu}),tr:new us({x:.5,y:-.5,cursorStyleHandler:jl,actionHandler:Yu}),bl:new us({x:-.5,y:.5,cursorStyleHandler:jl,actionHandler:Yu}),br:new us({x:.5,y:.5,cursorStyleHandler:jl,actionHandler:Yu}),mtr:new us({x:0,y:-.5,actionHandler:UO,cursorStyleHandler:HO,offsetY:-40,withConnection:!0,actionName:vp})}),WO=()=>({mr:new us({x:.5,y:0,actionHandler:Db,cursorStyleHandler:Ka,actionName:Il}),ml:new us({x:-.5,y:0,actionHandler:Db,cursorStyleHandler:Ka,actionName:Il})}),QO=()=>j(j({},XS()),WO());class Ql extends ci{static getDefaults(){return j(j({},super.getDefaults()),Ql.ownDefaults)}constructor(t){super(),Object.assign(this,this.constructor.createControls(),Ql.ownDefaults),this.setOptions(t)}static createControls(){return{controls:XS()}}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const e=t._currentTransform,n=e.target,a=e.action;if(this===n&&a&&a.startsWith(Wh))return!1}return super._updateCacheCanvas()}getActiveControl(){const t=this.__corner;return t?{key:t,control:this.controls[t],coord:this.oCoords[t]}:void 0}findControl(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let a=n.length-1;a>=0;a--){const[o,c]=n[a],h=this.controls[o];if(h.shouldActivate(o,this,t,e?c.touchCorner:c.corner))return this.__corner=o,{key:o,control:h,coord:this.oCoords[o]}}}calcOCoords(){const t=this.getViewportTransform(),e=this.getCenterPoint(),n=To(e.x,e.y),a=na({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),o=we(n,a),c=we(t,o),h=we(c,[1/t[0],0,0,1/t[3],0,0]),f=this.group?$r(this.calcTransformMatrix()):void 0;f&&(f.scaleX=Math.abs(f.scaleX),f.scaleY=Math.abs(f.scaleY));const d=this._calculateCurrentDimensions(f),m={};return this.forEachControl((y,v)=>{const b=y.positionHandler(d,h,this,y);m[v]=Object.assign(b,this._calcCornerCoords(y,b))}),m}_calcCornerCoords(t,e){const n=this.getTotalAngle();return{corner:t.calcCornerCoords(n,this.cornerSize,e.x,e.y,!1,this),touchCorner:t.calcCornerCoords(n,this.touchCornerSize,e.x,e.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(t){for(const e in this.controls)t(this.controls[e],e,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const e=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),a=this.getViewportTransform();t.translate(e.x,e.y),t.scale(1/a[0],1/a[3]),t.rotate(Se(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-n.x/2,-n.y/2,n.x,n.y),t.restore()}strokeBorders(t,e){t.strokeRect(-e.x/2,-e.y/2,e.x,e.y)}_drawBorders(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=j({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);t.save(),t.strokeStyle=a.borderColor,this._setLineDash(t,a.borderDashArray),this.strokeBorders(t,e),a.hasControls&&this.drawControlsConnectingLines(t,e),t.restore()}_renderControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:a}=this,o=j({hasBorders:n,hasControls:a},e),c=this.getViewportTransform(),h=o.hasBorders,f=o.hasControls,d=we(c,this.calcTransformMatrix()),m=$r(d);t.save(),t.translate(m.translateX,m.translateY),t.lineWidth=this.borderScaleFactor,this.group===this.parent&&(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(m.angle-=180),t.rotate(Se(this.group?m.angle:this.angle)),h&&this.drawBorders(t,m,e),f&&this.drawControls(t,e),t.restore()}drawBorders(t,e,n){let a;if(n&&n.forActiveSelection||this.group){const o=$h(this.width,this.height,fc(e)),c=this.isStrokeAccountedForInDimensions()?bp:(this.strokeUniform?new G().scalarAdd(this.canvas?this.canvas.getZoom():1):new G(e.scaleX,e.scaleY)).scalarMultiply(this.strokeWidth);a=o.add(c).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else a=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,a,n)}drawControlsConnectingLines(t,e){let n=!1;t.beginPath(),this.forEachControl((a,o)=>{a.withConnection&&a.getVisibility(this,o)&&(n=!0,t.moveTo(a.x*e.x,a.y*e.y),t.lineTo(a.x*e.x+a.offsetX,a.y*e.y+a.offsetY))}),n&&t.stroke()}drawControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:a,cornerDashArray:o,cornerColor:c}=this,h=j({cornerStrokeColor:a,cornerDashArray:o,cornerColor:c},e);t.setTransform(n,0,0,n,0,0),t.strokeStyle=t.fillStyle=h.cornerColor,this.transparentCorners||(t.strokeStyle=h.cornerStrokeColor),this._setLineDash(t,h.cornerDashArray),this.forEachControl((f,d)=>{if(f.getVisibility(this,d)){const m=this.oCoords[d];f.render(t,m.x,m.y,h,this)}}),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,e){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e}setControlsVisibility(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(t).forEach(e=>{let[n,a]=e;return this.setControlVisible(n,a)})}clearContextTop(t){if(!this.canvas)return;const e=this.canvas.contextTop;if(!e)return;const n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(e);const a=this.width+4,o=this.height+4;return e.clearRect(-a/2,-o/2,a,o),t||e.restore(),e}onDeselect(t){return!1}onSelect(t){return!1}shouldStartDragging(t){return!1}onDragStart(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}function qS(i,t){return t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(i.prototype,n,Object.getOwnPropertyDescriptor(e.prototype,n)||Object.create(null))})}),i}B(Ql,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class We extends Ql{}qS(We,[LS]),dt.setClass(We),dt.setClass(We,"object");const VS=(i,t,e,n)=>{const a=2*(n=Math.round(n))+1,{data:o}=i.getImageData(t-n,e-n,a,a);for(let c=3;c<o.length;c+=4)if(o[c]>0)return!1;return!0};class GS{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new G(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new G(1/this.options.scaleX,1/this.options.scaleY):new G(1,1)}createSideVector(t,e){const n=Ah(t,e);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(t,e,n){return this.applySkew(t.add(this.calcOrthogonalProjection(t,e,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(t){const e=new G(t);return e.y+=e.x*Math.tan(Se(this.options.skewY)),e.x+=e.y*Math.tan(Se(this.options.skewX)),e}scaleUnitVector(t,e){return t.multiply(this.strokeUniformScalar).scalarMultiply(e)}}const KO=new G;class eo extends GS{static getOrthogonalRotationFactor(t,e){const n=e?Mh(t,e):zS(t);return Math.abs(n)<cr?-1:1}constructor(t,e,n,a){super(a),B(this,"AB",void 0),B(this,"AC",void 0),B(this,"alpha",void 0),B(this,"bisector",void 0),this.A=new G(t),this.B=new G(e),this.C=new G(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Mh(this.AB,this.AC),this.bisector=Jh(Dp(this.AB.eq(KO)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const a=this.createSideVector(t,e),o=Mp(a),c=eo.getOrthogonalRotationFactor(o,this.bisector);return this.scaleUnitVector(o,n*c)}projectBevel(){const t=[];return(this.alpha%gi==0?[this.B]:[this.B,this.C]).forEach(e=>{t.push(this.projectOrthogonally(this.A,e)),t.push(this.projectOrthogonally(this.A,e,-this.strokeProjectionMagnitude))}),t}projectMiter(){const t=[],e=Math.abs(this.alpha),n=1/Math.sin(e/2),a=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),o=this.options.strokeUniform?Dh(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Dh(a)/this.strokeProjectionMagnitude<=o&&t.push(this.applySkew(this.A.add(a))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,e){const n=[],a=new G(eo.getOrthogonalRotationFactor(this.bisector),eo.getOrthogonalRotationFactor(new G(this.bisector.y,this.bisector.x)));return[new G(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(a),new G(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(a)].forEach(o=>{bm(o,t,e)&&n.push(this.A.add(o))}),n}projectRoundWithSkew(t,e){const n=[],{skewX:a,skewY:o,scaleX:c,scaleY:h,strokeUniform:f}=this.options,d=new G(Math.tan(Se(a)),Math.tan(Se(o))),m=this.strokeProjectionMagnitude,y=f?m/h/Math.sqrt(1/h**2+1/c**2*d.y**2):m/Math.sqrt(1+d.y**2),v=new G(Math.sqrt(Math.max(m**2-y**2,0)),y),b=f?m/Math.sqrt(1+d.x**2*(1/h)**2/(1/c+1/c*d.x*d.y)**2):m/Math.sqrt(1+d.x**2/(1+d.x*d.y)**2),S=new G(b,Math.sqrt(Math.max(m**2-b**2,0)));return[S,S.scalarMultiply(-1),v,v.scalarMultiply(-1)].map(C=>this.applySkew(f?C.multiply(this.strokeUniformScalar):C)).forEach(C=>{bm(C,t,e)&&n.push(this.applySkew(this.A).add(C))}),n}projectRound(){const t=[];t.push(...this.projectBevel());const e=this.alpha%gi==0,n=this.applySkew(this.A),a=t[e?0:2].subtract(n),o=t[e?1:0].subtract(n),c=e?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),h=to(a,c)>0,f=h?a:o,d=h?o:a;return this.isSkewed()?t.push(...this.projectRoundWithSkew(f,d)):t.push(...this.projectRoundNoSkew(f,d)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector}))}}class kb extends GS{constructor(t,e,n){super(n),this.A=new G(t),this.T=new G(e)}calcOrthogonalProjection(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const a=this.createSideVector(t,e);return this.scaleUnitVector(Mp(a),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const e=new G(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(e)),this.applySkew(this.A.subtract(e)))}else t.push(...new eo(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const e=new G(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(e),this.A.subtract(e))}else{const e=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(Jh(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),a=this.A.add(n);t.push(a.add(e),a.subtract(e))}return t.map(e=>this.applySkew(e))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t}))}}const IS=function(i,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const n=[];if(i.length===0)return n;const a=i.reduce((o,c)=>(o[o.length-1].eq(c)||o.push(new G(c)),o),[new G(i[0])]);if(a.length===1)e=!0;else if(!e){const o=a[0],c=((h,f)=>{for(let d=h.length-1;d>=0;d--)if(f(h[d],d,h))return d;return-1})(a,h=>!h.eq(o));a.splice(c+1)}return a.forEach((o,c,h)=>{let f,d;c===0?(d=h[1],f=e?o:h[h.length-1]):c===h.length-1?(f=h[c-1],d=e?o:h[0]):(f=h[c-1],d=h[c+1]),e&&h.length===1?n.push(...new kb(o,o,t).project()):!e||c!==0&&c!==h.length-1?n.push(...new eo(o,f,d,t).project()):n.push(...new kb(o,c===0?d:f,t).project())}),n},Lp=i=>{const t={};return Object.keys(i).forEach(e=>{t[e]={},Object.keys(i[e]).forEach(n=>{t[e][n]=j({},i[e][n])})}),t},WS=i=>i.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Dl;const ef=i=>{if(Dl||Dl||(Dl="Intl"in hc()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Dl){const t=Dl.segment(i);return Array.from(t).map(e=>{let{segment:n}=e;return n})}return $O(i)},$O=i=>{const t=[];for(let e,n=0;n<i.length;n++)(e=ZO(i,n))!==!1&&t.push(e);return t},ZO=(i,t)=>{const e=i.charCodeAt(t);if(isNaN(e))return"";if(e<55296||e>57343)return i.charAt(t);if(55296<=e&&e<=56319){if(i.length<=t+1)throw"High surrogate without following low surrogate";const a=i.charCodeAt(t+1);if(56320>a||a>57343)throw"High surrogate without following low surrogate";return i.charAt(t)+i.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";const n=i.charCodeAt(t-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1};var JO=Object.freeze({__proto__:null,capitalize:function(i){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return"".concat(i.charAt(0).toUpperCase()).concat(t?i.slice(1):i.slice(1).toLowerCase())},escapeXml:WS,graphemeSplit:ef});const nf=function(i,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return i.fill!==t.fill||i.stroke!==t.stroke||i.strokeWidth!==t.strokeWidth||i.fontSize!==t.fontSize||i.fontFamily!==t.fontFamily||i.fontWeight!==t.fontWeight||i.fontStyle!==t.fontStyle||i.textBackgroundColor!==t.textBackgroundColor||i.deltaY!==t.deltaY||e&&(i.overline!==t.overline||i.underline!==t.underline||i.linethrough!==t.linethrough)},QS=(i,t)=>{const e=t.split(`
`),n=[];let a=-1,o={};i=Lp(i);for(let c=0;c<e.length;c++){const h=ef(e[c]);if(i[c])for(let f=0;f<h.length;f++){a++;const d=i[c][f];d&&Object.keys(d).length>0&&(nf(o,d,!0)?n.push({start:a,end:a+1,style:d}):n[n.length-1].end++),o=d||{}}else a+=h.length,o={}}return n},KS=(i,t)=>{if(!Array.isArray(i))return Lp(i);const e=t.split(yp),n={};let a=-1,o=0;for(let c=0;c<e.length;c++){const h=ef(e[c]);for(let f=0;f<h.length;f++)a++,i[o]&&i[o].start<=a&&a<i[o].end&&(n[c]=n[c]||{},n[c][f]=j({},i[o].style),a===i[o].end-1&&o++)}return n},hr=["display","transform",Me,"fill-opacity","fill-rule","opacity",gn,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function jb(i,t){const e=i.nodeName,n=i.getAttribute("class"),a=i.getAttribute("id"),o="(?![a-zA-Z\\-]+)";let c;if(c=new RegExp("^"+e,"i"),t=t.replace(c,""),a&&t.length&&(c=new RegExp("#"+a+o,"i"),t=t.replace(c,"")),n&&t.length){const h=n.split(" ");for(let f=h.length;f--;)c=new RegExp("\\."+h[f]+o,"i"),t=t.replace(c,"")}return t.length===0}function tE(i,t){let e=!0;const n=jb(i,t.pop());return n&&t.length&&(e=function(a,o){let c,h=!0;for(;a.parentElement&&a.parentElement.nodeType===1&&o.length;)h&&(c=o.pop()),h=jb(a=a.parentElement,c);return o.length===0}(i,t)),n&&e&&t.length===0}const eE=i=>{var t;return(t=vO[i])!==null&&t!==void 0?t:i},nE=new RegExp("(".concat(ms,")"),"gi"),sE=i=>i.replace(nE," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Lb,Bb,zb,Nb,Hb,Ub,Fb;const hn="(".concat(ms,")"),iE=String.raw(Lb||(Lb=qs(["(skewX)(",")"],["(skewX)\\(","\\)"])),hn),rE=String.raw(Bb||(Bb=qs(["(skewY)(",")"],["(skewY)\\(","\\)"])),hn),aE=String.raw(zb||(zb=qs(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),hn,hn,hn),oE=String.raw(Nb||(Nb=qs(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),hn,hn),lE=String.raw(Hb||(Hb=qs(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),hn,hn),cE=String.raw(Ub||(Ub=qs(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),hn,hn,hn,hn,hn,hn),Bp="(?:".concat(cE,"|").concat(lE,"|").concat(aE,"|").concat(oE,"|").concat(iE,"|").concat(rE,")"),uE="(?:".concat(Bp,"*)"),hE=String.raw(Fb||(Fb=qs(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),uE),fE=new RegExp(hE),dE=new RegExp(Bp),gE=new RegExp(Bp,"g");function Rh(i){const t=[];if(!(i=sE(i).replace(/\s*([()])\s*/gi,"$1"))||i&&!fE.test(i))return[...mn];for(const e of i.matchAll(gE)){const n=dE.exec(e[0]);if(!n)continue;let a=mn;const o=n.filter(S=>!!S),[,c,...h]=o,[f,d,m,y,v,b]=h.map(S=>parseFloat(S));switch(c){case"translate":a=To(f,d);break;case vp:a=na({angle:f},{x:d,y:m});break;case Wh:a=Kh(f,d);break;case _o:a=_p(f);break;case Co:a=Cp(f);break;case"matrix":a=[f,d,m,y,v,b]}t.push(a)}return Qh(t)}function mE(i,t,e,n){const a=Array.isArray(t);let o,c=t;if(i!==Me&&i!==gn||t!==dn){if(i==="strokeUniform")return t==="non-scaling-stroke";if(i==="strokeDashArray")c=t===dn?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(i==="transformMatrix")c=e&&e.transformMatrix?we(e.transformMatrix,Rh(t)):Rh(t);else if(i==="visible")c=t!==dn&&t!=="hidden",e&&e.visible===!1&&(c=!1);else if(i==="opacity")c=parseFloat(t),e&&e.opacity!==void 0&&(c*=e.opacity);else if(i==="textAnchor")c=t==="start"?Qt:t==="end"?Te:Rt;else if(i==="charSpacing")o=un(t,n)/n*1e3;else if(i==="paintFirst"){const h=t.indexOf(Me),f=t.indexOf(gn);c=Me,(h>-1&&f>-1&&f<h||h===-1&&f>-1)&&(c=gn)}else{if(i==="href"||i==="xlink:href"||i==="font"||i==="id")return t;if(i==="imageSmoothing")return t==="optimizeQuality";o=a?t.map(un):un(t,n)}}else c="";return!a&&isNaN(o)?c:o}function pE(i,t){const e=i.match(yO);if(!e)return;const n=e[1],a=e[3],o=e[4],c=e[5],h=e[6];n&&(t.fontStyle=n),a&&(t.fontWeight=isNaN(parseFloat(a))?a:parseFloat(a)),o&&(t.fontSize=un(o)),h&&(t.fontFamily=h),c&&(t.lineHeight=c==="normal"?1:c)}function Sm(i,t){i.replace(/;\s*$/,"").split(";").forEach(e=>{if(!e)return;const[n,a]=e.split(":");t[n.trim().toLowerCase()]=a.trim()})}function yE(i){const t={},e=i.getAttribute("style");return e&&(typeof e=="string"?Sm(e,t):function(n,a){Object.entries(n).forEach(o=>{let[c,h]=o;h!==void 0&&(a[c.toLowerCase()]=h)})}(e,t)),t}const vE={stroke:"strokeOpacity",fill:"fillOpacity"};function yi(i,t,e){if(!i)return{};let n,a={},o=pp;i.parentNode&&Cb.test(i.parentNode.nodeName)&&(a=yi(i.parentElement,t,e),a.fontSize&&(n=o=un(a.fontSize)));const c=j(j(j({},t.reduce((d,m)=>{const y=i.getAttribute(m);return y&&(d[m]=y),d},{})),function(d){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y={};for(const v in m)tE(d,v.split(" "))&&(y=j(j({},y),m[v]));return y}(i,e)),yE(i));c[Ig]&&i.setAttribute(Ig,c[Ig]),c[Gg]&&(n=un(c[Gg],o),c[Gg]="".concat(n));const h={};for(const d in c){const m=eE(d),y=mE(m,c[d],a,n);h[m]=y}h&&h.font&&pE(h.font,h);const f=j(j({},a),h);return Cb.test(i.nodeName)?f:function(d){const m=We.getDefaults();return Object.entries(vE).forEach(y=>{let[v,b]=y;if(d[b]===void 0||d[v]==="")return;if(d[v]===void 0){if(!m[v])return;d[v]=m[v]}if(d[v].indexOf("url(")===0)return;const S=new Yn(d[v]);d[v]=S.setAlpha(ce(S.getAlpha()*d[b],2)).toRgba()}),d}(f)}const bE=["left","top","width","height","visible"],$S=["rx","ry"];class ts extends We{static getDefaults(){return j(j({},super.getDefaults()),ts.ownDefaults)}constructor(t){super(),Object.assign(this,ts.ownDefaults),this.setOptions(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:n}=this,a=-e/2,o=-n/2,c=this.rx?Math.min(this.rx,e/2):0,h=this.ry?Math.min(this.ry,n/2):0,f=c!==0||h!==0;t.beginPath(),t.moveTo(a+c,o),t.lineTo(a+e-c,o),f&&t.bezierCurveTo(a+e-Gi*c,o,a+e,o+Gi*h,a+e,o+h),t.lineTo(a+e,o+n-h),f&&t.bezierCurveTo(a+e,o+n-Gi*h,a+e-Gi*c,o+n,a+e-c,o+n),t.lineTo(a+c,o+n),f&&t.bezierCurveTo(a+Gi*c,o+n,a,o+n-Gi*h,a,o+n-h),t.lineTo(a,o+h),f&&t.bezierCurveTo(a,o+Gi*h,a+Gi*c,o,a+c,o),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...$S,...t])}_toSVG(){const{width:t,height:e,rx:n,ry:a}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-e/2,'" rx="').concat(n,'" ry="').concat(a,'" width="').concat(t,'" height="').concat(e,`" />
`)]}static async fromElement(t,e,n){const a=yi(t,this.ATTRIBUTE_NAMES,n),{left:o=0,top:c=0,width:h=0,height:f=0,visible:d=!0}=a,m=ge(a,bE);return new this(j(j(j({},e),m),{},{left:o,top:c,width:h,height:f,visible:!!(d&&h&&f)}))}}B(ts,"type","Rect"),B(ts,"cacheProperties",[...pi,...$S]),B(ts,"ownDefaults",{rx:0,ry:0}),B(ts,"ATTRIBUTE_NAMES",[...hr,"x","y","rx","ry","width","height"]),dt.setClass(ts),dt.setSVGClass(ts);const fi="initialization",kh="added",zp="removed",jh="imperative",ZS=(i,t)=>{const{strokeUniform:e,strokeWidth:n,width:a,height:o,group:c}=t,h=c&&c!==i?gc(c.calcTransformMatrix(),i.calcTransformMatrix()):null,f=h?t.getRelativeCenterPoint().transform(h):t.getRelativeCenterPoint(),d=!t.isStrokeAccountedForInDimensions(),m=e&&d?DS(new G(n,n),void 0,i.calcTransformMatrix()):bp,y=!e&&d?n:0,v=$h(a+y,o+y,Qh([h,t.calcOwnMatrix()],!0)).add(m).scalarDivide(2);return[f.subtract(v),f.add(v)]};let sf=class{calcLayoutResult(t,e){if(this.shouldPerformLayout(t))return this.calcBoundingBox(e,t)}shouldPerformLayout(t){let{type:e,prevStrategy:n,strategy:a}=t;return e===fi||e===jh||!!n&&a!==n}shouldLayoutClipPath(t){let{type:e,target:{clipPath:n}}=t;return e!==fi&&n&&!n.absolutePositioned}getInitialSize(t,e){return e.size}calcBoundingBox(t,e){const{type:n,target:a}=e;if(n===jh&&e.overrides)return e.overrides;if(t.length===0)return;const{left:o,top:c,width:h,height:f}=Hs(t.map(y=>ZS(a,y)).reduce((y,v)=>y.concat(v),[])),d=new G(h,f),m=new G(o,c).add(d.scalarDivide(2));if(n===fi){const y=this.getInitialSize(e,{size:d,center:m});return{center:m,relativeCorrection:new G(0,0),size:y}}return{center:m.transform(a.calcOwnMatrix()),size:d}}};B(sf,"type","strategy");let _m=class extends sf{shouldPerformLayout(t){return!0}};B(_m,"type","fit-content"),dt.setClass(_m);const xE=["strategy"],SE=["target","strategy","bubbles","prevStrategy"],JS="layoutManager";let Kl=class{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new _m;B(this,"strategy",void 0),this.strategy=t,this._subscriptions=new Map}performLayout(t){const e=j(j({bubbles:!0,strategy:this.strategy},t),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(e);const n=this.getLayoutResult(e);n&&this.commitLayout(e,n),this.onAfterLayout(e,n),this._prevLayoutStrategy=e.strategy}attachHandlers(t,e){const{target:n}=e;return[Th,uS,Il,hS,Ih,fS,Ch,lO,cO].map(a=>t.on(a,o=>this.performLayout(a===Th?{type:"object_modified",trigger:a,e:o,target:n}:{type:"object_modifying",trigger:a,e:o,target:n})))}subscribe(t,e){this.unsubscribe(t,e);const n=this.attachHandlers(t,e);this._subscriptions.set(t,n)}unsubscribe(t,e){(this._subscriptions.get(t)||[]).forEach(n=>n()),this._subscriptions.delete(t)}unsubscribeTargets(t){t.targets.forEach(e=>this.unsubscribe(e,t))}subscribeTargets(t){t.targets.forEach(e=>this.subscribe(e,t))}onBeforeLayout(t){const{target:e,type:n}=t,{canvas:a}=e;if(n===fi||n===kh?this.subscribeTargets(t):n===zp&&this.unsubscribeTargets(t),e.fire("layout:before",{context:t}),a&&a.fire("object:layout:before",{target:e,context:t}),n===jh&&t.deep){const o=ge(t,xE);e.forEachObject(c=>c.layoutManager&&c.layoutManager.performLayout(j(j({},o),{},{bubbles:!1,target:c})))}}getLayoutResult(t){const{target:e,strategy:n,type:a}=t,o=n.calcLayoutResult(t,e.getObjects());if(!o)return;const c=a===fi?new G:e.getRelativeCenterPoint(),{center:h,correction:f=new G,relativeCorrection:d=new G}=o,m=c.subtract(h).add(f).transform(a===fi?mn:wn(e.calcOwnMatrix()),!0).add(d);return{result:o,prevCenter:c,nextCenter:h,offset:m}}commitLayout(t,e){const{target:n}=t,{result:{size:a},nextCenter:o}=e;var c,h;n.set({width:a.x,height:a.y}),this.layoutObjects(t,e),t.type===fi?n.set({left:(c=t.x)!==null&&c!==void 0?c:o.x+a.x*De(n.originX),top:(h=t.y)!==null&&h!==void 0?h:o.y+a.y*De(n.originY)}):(n.setPositionByOrigin(o,Rt,Rt),n.setCoords(),n.set("dirty",!0))}layoutObjects(t,e){const{target:n}=t;n.forEachObject(a=>{a.group===n&&this.layoutObject(t,e,a)}),t.strategy.shouldLayoutClipPath(t)&&this.layoutObject(t,e,n.clipPath)}layoutObject(t,e,n){let{offset:a}=e;n.set({left:n.left+a.x,top:n.top+a.y})}onAfterLayout(t,e){const{target:n,strategy:a,bubbles:o,prevStrategy:c}=t,h=ge(t,SE),{canvas:f}=n;n.fire("layout:after",{context:t,result:e}),f&&f.fire("object:layout:after",{context:t,result:e,target:n});const d=n.parent;o&&d!=null&&d.layoutManager&&((h.path||(h.path=[])).push(n),d.layoutManager.performLayout(j(j({},h),{},{target:d}))),n.set("dirty",!0)}dispose(){const{_subscriptions:t}=this;t.forEach(e=>e.forEach(n=>n())),t.clear()}toObject(){return{type:JS,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}};dt.setClass(Kl,JS);const _E=["type","objects","layoutManager"];class CE extends Kl{performLayout(){}}let ar=class Cm extends dS(We){static getDefaults(){return j(j({},super.getDefaults()),Cm.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),B(this,"_activeObjects",[]),B(this,"__objectSelectionTracker",void 0),B(this,"__objectSelectionDisposer",void 0),Object.assign(this,Cm.ownDefaults),this.setOptions(e),this.groupInit(t,e)}groupInit(t,e){var n;this._objects=[...t],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(a=>{this.enterGroup(a,!1)}),this.layoutManager=(n=e.layoutManager)!==null&&n!==void 0?n:new Kl,this.layoutManager.performLayout({type:fi,target:this,targets:[...t],x:e.left,y:e.top})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(di("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(t)===-1||(di("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(t){return t.filter((e,n,a)=>this.canEnterGroup(e)&&a.indexOf(e)===n)}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const a=this._filterObjectsBeforeEnteringGroup(e),o=super.add(...a);return this._onAfterObjectsChange(kh,a),o}insertAt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];const o=this._filterObjectsBeforeEnteringGroup(n),c=super.insertAt(t,...o);return this._onAfterObjectsChange(kh,o),c}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange(zp,t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,e){this.exitGroup(t,e),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,e){this.layoutManager.performLayout({type:t,targets:e,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,e){const n=this[t];return super._set(t,e),t==="canvas"&&n!==e&&(this._objects||[]).forEach(a=>{a._set(t,e)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(t,e){let{target:n}=e;const a=this._activeObjects;if(t)a.push(n),this._set("dirty",!0);else if(a.length>0){const o=a.indexOf(n);o>-1&&(a.splice(o,1),this._set("dirty",!0))}}_watchObject(t,e){t&&this._watchObject(!1,e),t?(e.on("selected",this.__objectSelectionTracker),e.on("deselected",this.__objectSelectionDisposer)):(e.off("selected",this.__objectSelectionTracker),e.off("deselected",this.__objectSelectionDisposer))}enterGroup(t,e){t.group&&t.group.remove(t),t._set("parent",this),this._enterGroup(t,e)}_enterGroup(t,e){e&&bo(t,we(wn(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this._watchObject(!0,t);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===t||t.isDescendantOf(n))&&this._activeObjects.push(t)}exitGroup(t,e){this._exitGroup(t,e),t._set("parent",void 0),t._set("canvas",void 0)}_exitGroup(t,e){t._set("group",void 0),e||(bo(t,we(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const n=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const t=We.prototype.shouldCache.call(this);if(t){for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1}return t}willDrawShadow(){if(super.willDrawShadow())return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(t,e,n){this._renderBackground(t);for(let o=0;o<this._objects.length;o++){var a;const c=this._objects[o];(a=this.canvas)!==null&&a!==void 0&&a.preserveObjectStacking&&c.group!==this?(t.save(),t.transform(...wn(this.calcTransformMatrix())),c.render(t),t.restore()):c.group===this&&c.render(t)}this._drawClipPath(t,this.clipPath,n)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(t=>t.setCoords())}triggerLayout(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(j({target:this,type:jh},t))}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}__serializeObjects(t,e){const n=this.includeDefaultValues;return this._objects.filter(function(a){return!a.excludeFromExport}).map(function(a){const o=a.includeDefaultValues;a.includeDefaultValues=n;const c=a[t||"toObject"](e);return a.includeDefaultValues=o,c})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.layoutManager.toObject();return j(j(j({},super.toObject(["subTargetCheck","interactive",...t])),e.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:e}:{}),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(t=>{this._watchObject(!1,t),t.dispose()}),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const e=ts.prototype._toSVG.call(this),n=e.indexOf("COMMON_PARTS");e[n]='for="group" ';const a=e.join("");return t?t(a):a}_toSVG(t){const e=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(t);n&&e.push("		",n);for(let a=0;a<this._objects.length;a++)e.push("		",this._objects[a].toSVG(t));return e.push(`</g>
`),e}getSvgStyles(){const t=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")}toClipPathSVG(t){const e=[],n=this._createSVGBgRect(t);n&&e.push("	",n);for(let a=0;a<this._objects.length;a++)e.push("	",this._objects[a].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}static fromObject(t,e){let{type:n,objects:a=[],layoutManager:o}=t,c=ge(t,_E);return Promise.all([yo(a,e),dc(c,e)]).then(h=>{let[f,d]=h;const m=new this(f,j(j(j({},c),d),{},{layoutManager:new CE}));if(o){const y=dt.getClass(o.type),v=dt.getClass(o.strategy);m.layoutManager=new y(new v)}else m.layoutManager=new Kl;return m.layoutManager.subscribeTargets({type:fi,target:m,targets:m.getObjects()}),m.setCoords(),m})}};B(ar,"type","Group"),B(ar,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),dt.setClass(ar);const t_=(i,t)=>Math.min(t.width/i.width,t.height/i.height),e_=(i,t)=>Math.max(t.width/i.width,t.height/i.height),Tm="\\s*,?\\s*",Ml="".concat(Tm,"(").concat(ms,")"),TE="".concat(Ml).concat(Ml).concat(Ml).concat(Tm,"([01])").concat(Tm,"([01])").concat(Ml).concat(Ml),wE={m:"l",M:"L"},OE=(i,t,e,n,a,o,c,h,f,d,m)=>{const y=ys(i),v=vs(i),b=ys(t),S=vs(t),C=e*a*b-n*o*S+c,_=n*a*b+e*o*S+h;return["C",d+f*(-e*a*v-n*o*y),m+f*(-n*a*v+e*o*y),C+f*(e*a*S+n*o*b),_+f*(n*a*S-e*o*b),C,_]},Pb=(i,t,e,n)=>{const a=Math.atan2(t,i),o=Math.atan2(n,e);return o>=a?o-a:2*Math.PI-(a-o)};function wm(i,t,e,n,a,o,c,h){let f;if(It.cachesBoundsOfCurve&&(f=[...arguments].join(),Ul.boundsOfCurveCache[f]))return Ul.boundsOfCurveCache[f];const d=Math.sqrt,m=Math.abs,y=[],v=[[0,0],[0,0]];let b=6*i-12*e+6*a,S=-3*i+9*e-9*a+3*c,C=3*e-3*i;for(let k=0;k<2;++k){if(k>0&&(b=6*t-12*n+6*o,S=-3*t+9*n-9*o+3*h,C=3*n-3*t),m(S)<1e-12){if(m(b)<1e-12)continue;const I=-C/b;0<I&&I<1&&y.push(I);continue}const A=b*b-4*C*S;if(A<0)continue;const R=d(A),F=(-b+R)/(2*S);0<F&&F<1&&y.push(F);const N=(-b-R)/(2*S);0<N&&N<1&&y.push(N)}let _=y.length;const w=_,T=s_(i,t,e,n,a,o,c,h);for(;_--;){const{x:k,y:A}=T(y[_]);v[0][_]=k,v[1][_]=A}v[0][w]=i,v[1][w]=t,v[0][w+1]=c,v[1][w+1]=h;const E=[new G(Math.min(...v[0]),Math.min(...v[1])),new G(Math.max(...v[0]),Math.max(...v[1]))];return It.cachesBoundsOfCurve&&(Ul.boundsOfCurveCache[f]=E),E}const EE=(i,t,e)=>{let[n,a,o,c,h,f,d,m]=e;const y=((v,b,S,C,_,w,T)=>{if(S===0||C===0)return[];let E=0,k=0,A=0;const R=Math.PI,F=T*mp,N=vs(F),I=ys(F),J=.5*(-I*v-N*b),ot=.5*(-I*b+N*v),rt=S**2,ut=C**2,ft=ot**2,bt=J**2,X=rt*ut-rt*ft-ut*bt;let nt=Math.abs(S),at=Math.abs(C);if(X<0){const Ht=Math.sqrt(1-X/(rt*ut));nt*=Ht,at*=Ht}else A=(_===w?-1:1)*Math.sqrt(X/(rt*ft+ut*bt));const Ct=A*nt*ot/at,M=-A*at*J/nt,K=I*Ct-N*M+.5*v,ct=N*Ct+I*M+.5*b;let it=Pb(1,0,(J-Ct)/nt,(ot-M)/at),gt=Pb((J-Ct)/nt,(ot-M)/at,(-J-Ct)/nt,(-ot-M)/at);w===0&&gt>0?gt-=2*R:w===1&&gt<0&&(gt+=2*R);const Mt=Math.ceil(Math.abs(gt/R*2)),vt=[],$t=gt/Mt,et=8/3*Math.sin($t/4)*Math.sin($t/4)/Math.sin($t/2);let Tt=it+$t;for(let Ht=0;Ht<Mt;Ht++)vt[Ht]=OE(it,Tt,I,N,nt,at,K,ct,et,E,k),E=vt[Ht][5],k=vt[Ht][6],it=Tt,Tt+=$t;return vt})(d-i,m-t,a,o,h,f,c);for(let v=0,b=y.length;v<b;v++)y[v][1]+=i,y[v][2]+=t,y[v][3]+=i,y[v][4]+=t,y[v][5]+=i,y[v][6]+=t;return y},n_=i=>{let t=0,e=0,n=0,a=0;const o=[];let c,h=0,f=0;for(const d of i){const m=[...d];let y;switch(m[0]){case"l":m[1]+=t,m[2]+=e;case"L":t=m[1],e=m[2],y=["L",t,e];break;case"h":m[1]+=t;case"H":t=m[1],y=["L",t,e];break;case"v":m[1]+=e;case"V":e=m[1],y=["L",t,e];break;case"m":m[1]+=t,m[2]+=e;case"M":t=m[1],e=m[2],n=m[1],a=m[2],y=["M",t,e];break;case"c":m[1]+=t,m[2]+=e,m[3]+=t,m[4]+=e,m[5]+=t,m[6]+=e;case"C":h=m[3],f=m[4],t=m[5],e=m[6],y=["C",m[1],m[2],h,f,t,e];break;case"s":m[1]+=t,m[2]+=e,m[3]+=t,m[4]+=e;case"S":c==="C"?(h=2*t-h,f=2*e-f):(h=t,f=e),t=m[3],e=m[4],y=["C",h,f,m[1],m[2],t,e],h=y[3],f=y[4];break;case"q":m[1]+=t,m[2]+=e,m[3]+=t,m[4]+=e;case"Q":h=m[1],f=m[2],t=m[3],e=m[4],y=["Q",h,f,t,e];break;case"t":m[1]+=t,m[2]+=e;case"T":c==="Q"?(h=2*t-h,f=2*e-f):(h=t,f=e),t=m[1],e=m[2],y=["Q",h,f,t,e];break;case"a":m[6]+=t,m[7]+=e;case"A":EE(t,e,m).forEach(v=>o.push(v)),t=m[6],e=m[7];break;case"z":case"Z":t=n,e=a,y=["Z"]}y?(o.push(y),c=y[0]):c=""}return o},Lh=(i,t,e,n)=>Math.sqrt((e-i)**2+(n-t)**2),s_=(i,t,e,n,a,o,c,h)=>f=>{const d=f**3,m=(b=>3*b**2*(1-b))(f),y=(b=>3*b*(1-b)**2)(f),v=(b=>(1-b)**3)(f);return new G(c*d+a*m+e*y+i*v,h*d+o*m+n*y+t*v)},i_=i=>i**2,r_=i=>2*i*(1-i),a_=i=>(1-i)**2,AE=(i,t,e,n,a,o,c,h)=>f=>{const d=i_(f),m=r_(f),y=a_(f),v=3*(y*(e-i)+m*(a-e)+d*(c-a)),b=3*(y*(n-t)+m*(o-n)+d*(h-o));return Math.atan2(b,v)},DE=(i,t,e,n,a,o)=>c=>{const h=i_(c),f=r_(c),d=a_(c);return new G(a*h+e*f+i*d,o*h+n*f+t*d)},ME=(i,t,e,n,a,o)=>c=>{const h=1-c,f=2*(h*(e-i)+c*(a-e)),d=2*(h*(n-t)+c*(o-n));return Math.atan2(d,f)},Yb=(i,t,e)=>{let n=new G(t,e),a=0;for(let o=1;o<=100;o+=1){const c=i(o/100);a+=Lh(n.x,n.y,c.x,c.y),n=c}return a},RE=(i,t)=>{let e,n=0,a=0,o={x:i.x,y:i.y},c=j({},o),h=.01,f=0;const d=i.iterator,m=i.angleFinder;for(;a<t&&h>1e-4;)c=d(n),f=n,e=Lh(o.x,o.y,c.x,c.y),e+a>t?(n-=h,h/=2):(o=c,n+=h,a+=e);return j(j({},c),{},{angle:m(f)})},Np=i=>{let t,e,n=0,a=0,o=0,c=0,h=0;const f=[];for(const d of i){const m={x:a,y:o,command:d[0],length:0};switch(d[0]){case"M":e=m,e.x=c=a=d[1],e.y=h=o=d[2];break;case"L":e=m,e.length=Lh(a,o,d[1],d[2]),a=d[1],o=d[2];break;case"C":t=s_(a,o,d[1],d[2],d[3],d[4],d[5],d[6]),e=m,e.iterator=t,e.angleFinder=AE(a,o,d[1],d[2],d[3],d[4],d[5],d[6]),e.length=Yb(t,a,o),a=d[5],o=d[6];break;case"Q":t=DE(a,o,d[1],d[2],d[3],d[4]),e=m,e.iterator=t,e.angleFinder=ME(a,o,d[1],d[2],d[3],d[4]),e.length=Yb(t,a,o),a=d[3],o=d[4];break;case"Z":e=m,e.destX=c,e.destY=h,e.length=Lh(a,o,c,h),a=c,o=h}n+=e.length,f.push(e)}return f.push({length:n,x:a,y:o}),f},o_=function(i,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Np(i),n=0;for(;t-e[n].length>0&&n<e.length-2;)t-=e[n].length,n++;const a=e[n],o=t/a.length,c=i[n];switch(a.command){case"M":return{x:a.x,y:a.y,angle:0};case"Z":return j(j({},new G(a.x,a.y).lerp(new G(a.destX,a.destY),o)),{},{angle:Math.atan2(a.destY-a.y,a.destX-a.x)});case"L":return j(j({},new G(a.x,a.y).lerp(new G(c[1],c[2]),o)),{},{angle:Math.atan2(c[2]-a.y,c[1]-a.x)});case"C":case"Q":return RE(a,t)}},kE=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Xb=new RegExp(TE,"g"),jE=new RegExp(ms,"gi"),LE={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l_=i=>{var t;const e=[],n=(t=i.match(kE))!==null&&t!==void 0?t:[];for(const a of n){const o=a[0];if(o==="z"||o==="Z"){e.push([o]);continue}const c=LE[o.toLowerCase()];let h=[];if(o==="a"||o==="A"){Xb.lastIndex=0;for(let f=null;f=Xb.exec(a);)h.push(...f.slice(1))}else h=a.match(jE)||[];for(let f=0;f<h.length;f+=c){const d=new Array(c),m=wE[o];d[0]=f>0&&m?m:o;for(let y=0;y<c;y++)d[y+1]=parseFloat(h[f+y]);e.push(d)}}return e},BE=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=new G(i[0]),n=new G(i[1]),a=1,o=0;const c=[],h=i.length,f=h>2;let d;for(f&&(a=i[2].x<n.x?-1:i[2].x===n.x?0:1,o=i[2].y<n.y?-1:i[2].y===n.y?0:1),c.push(["M",e.x-a*t,e.y-o*t]),d=1;d<h;d++){if(!e.eq(n)){const m=e.midPointFrom(n);c.push(["Q",e.x,e.y,m.x,m.y])}e=i[d],d+1<i.length&&(n=i[d+1])}return f&&(a=e.x>i[d-2].x?1:e.x===i[d-2].x?0:-1,o=e.y>i[d-2].y?1:e.y===i[d-2].y?0:-1),c.push(["L",e.x+a*t,e.y+o*t]),c},c_=(i,t)=>i.map(e=>e.map((n,a)=>a===0||t===void 0?n:ce(n,t)).join(" ")).join(" ");function Bh(i,t){const e=i.style;e&&t&&(typeof t=="string"?e.cssText+=";"+t:Object.entries(t).forEach(n=>{let[a,o]=n;return e.setProperty(a,o)}))}const zE=(i,t)=>Math.floor(Math.random()*(t-i+1))+i;function u_(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e=t.onComplete||Wr,n=new(hc()).XMLHttpRequest,a=t.signal,o=function(){n.abort()},c=function(){a&&a.removeEventListener("abort",o),n.onerror=n.ontimeout=Wr};if(a&&a.aborted)throw new gp("request");return a&&a.addEventListener("abort",o,{once:!0}),n.onreadystatechange=function(){n.readyState===4&&(c(),e(n),n.onreadystatechange=Wr)},n.onerror=n.ontimeout=c,n.open("get",i,!0),n.send(),n}const ph=(i,t)=>{let e=i._findCenterFromElement();i.transformMatrix&&((n=>{if(n.transformMatrix){const{scaleX:a,scaleY:o,angle:c,skewX:h}=$r(n.transformMatrix);n.flipX=!1,n.flipY=!1,n.set(pn,a),n.set(Fn,o),n.angle=c,n.skewX=h,n.skewY=0}})(i),e=e.transform(i.transformMatrix)),delete i.transformMatrix,t&&(i.scaleX*=t.scaleX,i.scaleY*=t.scaleY,i.cropX=t.cropX,i.cropY=t.cropY,e.x+=t.offsetLeft,e.y+=t.offsetTop,i.width=t.width,i.height=t.height),i.setPositionByOrigin(e,Rt,Rt)};var NE=Object.freeze({__proto__:null,addTransformToObject:ES,animate:kp,animateColor:US,applyTransformToObject:bo,calcAngleBetweenVectors:Mh,calcDimensionsMatrix:fc,calcPlaneChangeMatrix:gc,calcVectorRotation:zS,cancelAnimFrame:mS,capValue:Zr,composeMatrix:xS,copyCanvasElement:i=>{var t;const e=Pn(i);return(t=e.getContext("2d"))===null||t===void 0||t.drawImage(i,0,0),e},cos:ys,createCanvasElement:Ps,createImage:pS,createRotateMatrix:na,createScaleMatrix:Kh,createSkewXMatrix:_p,createSkewYMatrix:Cp,createTranslateMatrix:To,createVector:Ah,crossProduct:to,degreesToRadians:Se,dotProduct:NS,ease:TO,enlivenObjectEnlivables:dc,enlivenObjects:yo,findScaleToCover:e_,findScaleToFit:t_,getBoundsOfCurve:wm,getOrthonormalVector:Mp,getPathSegmentsInfo:Np,getPointOnPath:o_,getPointer:OS,getRandomInt:zE,getRegularPolygonPath:(i,t)=>{const e=2*Math.PI/i;let n=-cr;i%2==0&&(n+=e/2);const a=new Array(i+1);for(let o=0;o<i;o++){const c=o*e+n,{x:h,y:f}=new G(ys(c),vs(c)).scalarMultiply(t);a[o]=[o===0?"M":"L",h,f]}return a[i]=["Z"],a},getSmoothPathFromPoints:BE,getSvgAttributes:i=>{const t=["instantiated_by_use","style","id","class"];switch(i){case"linearGradient":return t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return t.concat(["offset","stop-color","stop-opacity"])}return t},getUnitVector:Jh,groupSVGElements:(i,t)=>i&&i.length===1?i[0]:new ar(i,t),hasStyleChanged:nf,invertTransform:wn,isBetweenVectors:bm,isIdentityMatrix:yS,isTouchEvent:Oh,isTransparent:VS,joinPath:c_,loadImage:Pl,magnitude:Dh,makeBoundingBoxFromPoints:Hs,makePathSimpler:n_,matrixToSVG:vo,mergeClipPaths:(i,t)=>{var e;let n=i,a=t;n.inverted&&!a.inverted&&(n=t,a=i),ym(a,(e=a.group)===null||e===void 0?void 0:e.calcTransformMatrix(),n.calcTransformMatrix());const o=n.inverted&&a.inverted;return o&&(n.inverted=a.inverted=!1),new ar([n],{clipPath:a,inverted:o})},multiplyTransformMatrices:we,multiplyTransformMatrixArray:Qh,parsePath:l_,parsePreserveAspectRatioAttribute:Ap,parseUnit:un,pick:sa,projectStrokeOnPoints:IS,qrDecompose:$r,radiansToDegrees:Ys,removeFromArray:Br,removeTransformFromObject:(i,t)=>{const e=wn(t),n=we(e,i.calcOwnMatrix());bo(i,n)},removeTransformMatrixForSvgParsing:ph,request:u_,requestAnimFrame:Fl,resetObjectTransform:AS,rotatePoint:(i,t,e)=>i.rotate(e,t),rotateVector:Dp,saveObjectTransform:Op,sendObjectToPlane:ym,sendPointToPlane:Qr,sendVectorToPlane:DS,setStyle:Bh,sin:vs,sizeAfterTransform:$h,string:JO,stylesFromArray:KS,stylesToArray:QS,toBlob:Sp,toDataURL:xp,toFixed:ce,transformPath:(i,t,e)=>(e&&(t=we(t,[1,0,0,1,-e.x,-e.y])),i.map(n=>{const a=[...n];for(let o=1;o<n.length-1;o+=2){const{x:c,y:h}=nn({x:n[o],y:n[o+1]},t);a[o]=c,a[o+1]=h}return a})),transformPoint:nn});let HE=class extends TS{constructor(t){let{allowTouchScrolling:e=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t),B(this,"upper",void 0),B(this,"container",void 0);const{el:a}=this.lower,o=this.createUpperCanvas();this.upper={el:o,ctx:o.getContext("2d")},this.applyCanvasStyle(a,{allowTouchScrolling:e}),this.applyCanvasStyle(o,{allowTouchScrolling:e,styles:{position:"absolute",left:"0",top:"0"}});const c=this.createContainerElement();c.classList.add(n),a.parentNode&&a.parentNode.replaceChild(c,a),c.append(a,o),this.container=c}createUpperCanvas(){const{el:t}=this.lower,e=Ps();return e.className=t.className,e.classList.remove("lower-canvas"),e.classList.add("upper-canvas"),e.setAttribute("data-fabric","top"),e.style.cssText=t.style.cssText,e.setAttribute("draggable","true"),e}createContainerElement(){const t=So().createElement("div");return t.setAttribute("data-fabric","wrapper"),Bh(t,{position:"relative"}),db(t),t}applyCanvasStyle(t,e){const{styles:n,allowTouchScrolling:a}=e;Bh(t,j(j({},n),{},{"touch-action":a?"manipulation":dn})),db(t)}setDimensions(t,e){super.setDimensions(t,e);const{el:n,ctx:a}=this.upper;CS(n,a,t,e)}setCSSDimensions(t){super.setCSSDimensions(t),pm(this.upper.el,t),pm(this.container,t)}cleanupDOM(t){const e=this.container,{el:n}=this.lower,{el:a}=this.upper;super.cleanupDOM(t),e.removeChild(a),e.removeChild(n),e.parentNode&&e.parentNode.replaceChild(n,e)}dispose(){super.dispose(),Fs().dispose(this.upper.el),delete this.upper,delete this.container}},h_=class f_ extends wp{constructor(){super(...arguments),B(this,"targets",[]),B(this,"_hoveredTargets",[]),B(this,"_objectsToRender",void 0),B(this,"_currentTransform",null),B(this,"_groupSelector",null),B(this,"contextTopDirty",!1)}static getDefaults(){return j(j({},super.getDefaults()),f_.ownDefaults)}get upperCanvasEl(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.el}get contextTop(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.ctx}get wrapperEl(){return this.elements.container}initElements(t){this.elements=new HE(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter(e=>!e.group&&e!==t).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const e=this.getRetinaScaling(),n=Math.ceil((2*t+1)*e);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(e,e)}isTargetTransparent(t,e,n){const a=this.targetFindTolerance,o=this.pixelFindContext;this.clearContext(o),o.save(),o.translate(-e+a,-n+a),o.transform(...this.viewportTransform);const c=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(o),t.selectionBackgroundColor=c,o.restore();const h=Math.round(a*this.getRetinaScaling());return VS(o,h,h,h)}_isSelectionKeyPressed(t){const e=this.selectionKey;return!!e&&(Array.isArray(e)?!!e.find(n=>!!n&&t[n]===!0):t[e])}_shouldClearSelection(t,e){const n=this.getActiveObjects(),a=this._activeObject;return!!(!e||e&&a&&n.length>1&&n.indexOf(e)===-1&&a!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&a&&a!==e)}_shouldCenterTransform(t,e,n){if(!t)return;let a;return e===Wh||e===pn||e===Fn||e===Il?a=this.centeredScaling||t.centeredScaling:e===vp&&(a=this.centeredRotation||t.centeredRotation),a?!n:n}_getOriginFromCorner(t,e){const n={x:t.originX,y:t.originY};return e&&(["ml","tl","bl"].includes(e)?n.x=Te:["mr","tr","br"].includes(e)&&(n.x=Qt),["tl","mt","tr"].includes(e)?n.y=mm:["bl","mb","br"].includes(e)&&(n.y=On)),n}_setupCurrentTransform(t,e,n){var a;const o=e.group?Qr(this.getScenePoint(t),void 0,e.group.calcTransformMatrix()):this.getScenePoint(t),{key:c="",control:h}=e.getActiveControl()||{},f=n&&h?(a=h.getActionHandler(t,e,h))===null||a===void 0?void 0:a.bind(h):pO,d=((b,S,C,_)=>{if(!S||!b)return"drag";const w=_.controls[S];return w.getActionName(C,w,_)})(n,c,t,e),m=t[this.centeredKey],y=this._shouldCenterTransform(e,d,m)?{x:Rt,y:Rt}:this._getOriginFromCorner(e,c),v={target:e,action:d,actionHandler:f,actionPerformed:!1,corner:c,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:o.x-e.left,offsetY:o.y-e.top,originX:y.x,originY:y.y,ex:o.x,ey:o.y,lastX:o.x,lastY:o.y,theta:Se(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:m,original:j(j({},Op(e)),{},{originX:y.x,originY:y.y})};this._currentTransform=v,this.fire("before:transform",{e:t,transform:v})}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:e,y:n,deltaX:a,deltaY:o}=this._groupSelector,c=new G(e,n).transform(this.viewportTransform),h=new G(e+a,n+o).transform(this.viewportTransform),f=this.selectionLineWidth/2;let d=Math.min(c.x,h.x),m=Math.min(c.y,h.y),y=Math.max(c.x,h.x),v=Math.max(c.y,h.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(d,m,y-d,v-m)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,d+=f,m+=f,y-=f,v-=f,We.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(d,m,y-d,v-m))}findTarget(t){if(this.skipTargetFind)return;const e=this.getViewportPoint(t),n=this._activeObject,a=this.getActiveObjects();if(this.targets=[],n&&a.length>=1){if(n.findControl(e,Oh(t))||a.length>1&&this.searchPossibleTargets([n],e))return n;if(n===this.searchPossibleTargets([n],e)){if(this.preserveObjectStacking){const o=this.targets;this.targets=[];const c=this.searchPossibleTargets(this._objects,e);return t[this.altSelectionKey]&&c&&c!==n?(this.targets=o,n):c}return n}}return this.searchPossibleTargets(this._objects,e)}_pointIsInObjectSelectionArea(t,e){let n=t.getCoords();const a=this.getZoom(),o=t.padding/a;if(o){const[c,h,f,d]=n,m=Math.atan2(h.y-c.y,h.x-c.x),y=ys(m)*o,v=vs(m)*o,b=y+v,S=y-v;n=[new G(c.x-S,c.y-b),new G(h.x+b,h.y-S),new G(f.x+S,f.y+b),new G(d.x-b,d.y+S)]}return pe.isPointInPolygon(e,n)}_checkTarget(t,e){return!!(t&&t.visible&&t.evented&&this._pointIsInObjectSelectionArea(t,Qr(e,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing||!this.isTargetTransparent(t,e.x,e.y)))}_searchPossibleTargets(t,e){let n=t.length;for(;n--;){const a=t[n];if(this._checkTarget(a,e)){if(gh(a)&&a.subTargetCheck){const o=this._searchPossibleTargets(a._objects,e);o&&this.targets.push(o)}return a}}}searchPossibleTargets(t,e){const n=this._searchPossibleTargets(t,e);if(n&&gh(n)&&n.interactive&&this.targets[0]){const a=this.targets;for(let o=a.length-1;o>0;o--){const c=a[o];if(!gh(c)||!c.interactive)return c}return a[0]}return n}getViewportPoint(t){return this._pointer?this._pointer:this.getPointer(t,!0)}getScenePoint(t){return this._absolutePointer?this._absolutePointer:this.getPointer(t)}getPointer(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=this.upperCanvasEl,a=n.getBoundingClientRect();let o=OS(t),c=a.width||0,h=a.height||0;c&&h||(On in a&&mm in a&&(h=Math.abs(a.top-a.bottom)),Te in a&&Qt in a&&(c=Math.abs(a.right-a.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,e||(o=Qr(o,void 0,this.viewportTransform));const f=this.getRetinaScaling();f!==1&&(o.x/=f,o.y/=f);const d=c===0||h===0?new G(1,1):new G(n.width/c,n.height/h);return o.multiply(d)}_setDimensionsImpl(t,e){this._resetTransformEventData(),super._setDimensionsImpl(t,e),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Ps(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const t=this._activeObject;return zr(t)?t.getObjects():t?[t]:[]}_fireSelectionEvents(t,e){let n=!1,a=!1;const o=this.getActiveObjects(),c=[],h=[];t.forEach(f=>{o.includes(f)||(n=!0,f.fire("deselected",{e,target:f}),h.push(f))}),o.forEach(f=>{t.includes(f)||(n=!0,f.fire("selected",{e,target:f}),c.push(f))}),t.length>0&&o.length>0?(a=!0,n&&this.fire("selection:updated",{e,selected:c,deselected:h})):o.length>0?(a=!0,this.fire("selection:created",{e,selected:c})):t.length>0&&(a=!0,this.fire("selection:cleared",{e,deselected:h})),a&&(this._objectsToRender=void 0)}setActiveObject(t,e){const n=this.getActiveObjects(),a=this._setActiveObject(t,e);return this._fireSelectionEvents(n,e),a}_setActiveObject(t,e){const n=this._activeObject;return n!==t&&!(!this._discardActiveObject(e,t)&&this._activeObject)&&!t.onSelect({e})&&(this._activeObject=t,zr(t)&&n!==t&&t.set("canvas",this),t.setCoords(),!0)}_discardActiveObject(t,e){const n=this._activeObject;return!!n&&!n.onDeselect({e:t,object:e})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(t),zr(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(t){const e=this.getActiveObjects(),n=this.getActiveObject();e.length&&this.fire("before:selection:cleared",{e:t,deselected:[n]});const a=this._discardActiveObject(t);return this._fireSelectionEvents(e,t),a}endCurrentTransform(t){const e=this._currentTransform;this._finalizeCurrentTransform(t),e&&e.target&&(e.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const e=this._currentTransform,n=e.target,a={e:t,target:n,transform:e,action:e.action};n._scaling&&(n._scaling=!1),n.setCoords(),e.actionPerformed&&(this.fire("object:modified",a),n.fire(Th,a))}setViewportTransform(t){super.setViewportTransform(t);const e=this._activeObject;e&&e.setCoords()}destroy(){const t=this._activeObject;zr(t)&&(t.removeAll(),t.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const e=this._activeObject;e&&e._renderControls(t)}_toObject(t,e,n){const a=this._realizeGroupTransformOnObject(t),o=super._toObject(t,e,n);return t.set(a),o}_realizeGroupTransformOnObject(t){const{group:e}=t;if(e&&zr(e)&&this._activeObject===e){const n=sa(t,["angle","flipX","flipY",Qt,pn,Fn,_o,Co,On]);return ES(t,e.calcOwnMatrix()),n}return{}}_setSVGObject(t,e,n){const a=this._realizeGroupTransformOnObject(e);super._setSVGObject(t,e,n),e.set(a)}};B(h_,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});let UE=class{constructor(t){B(this,"targets",[]),B(this,"__disposer",void 0);const e=()=>{const{hiddenTextarea:a}=t.getActiveObject()||{};a&&a.focus()},n=t.upperCanvasEl;n.addEventListener("click",e),this.__disposer=()=>n.removeEventListener("click",e)}exitTextEditing(){this.target=void 0,this.targets.forEach(t=>{t.isEditing&&t.exitEditing()})}add(t){this.targets.push(t)}remove(t){this.unregister(t),Br(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var e;!((e=this.target)===null||e===void 0)&&e.isEditing&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}};const FE=["target","oldTarget","fireCanvas","e"],zn={passive:!1},Ia=(i,t)=>{const e=i.getViewportPoint(t),n=i.getScenePoint(t);return{viewportPoint:e,scenePoint:n,pointer:e,absolutePointer:n}},Ii=function(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return i.addEventListener(...e)},Zn=function(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return i.removeEventListener(...e)},PE={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};let zh=class extends h_{constructor(t){super(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),B(this,"_isClick",void 0),B(this,"textEditingManager",new UE(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(e=>{this[e]=this[e].bind(this)}),this.addOrRemove(Ii,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,e){const n=this.upperCanvasEl,a=this._getEventPrefix();t(_S(n),"resize",this._onResize),t(n,a+"down",this._onMouseDown),t(n,"".concat(a,"move"),this._onMouseMove,zn),t(n,"".concat(a,"out"),this._onMouseOut),t(n,"".concat(a,"enter"),this._onMouseEnter),t(n,"wheel",this._onMouseWheel),t(n,"contextmenu",this._onContextMenu),t(n,"click",this._onClick),t(n,"dblclick",this._onClick),t(n,"dragstart",this._onDragStart),t(n,"dragend",this._onDragEnd),t(n,"dragover",this._onDragOver),t(n,"dragenter",this._onDragEnter),t(n,"dragleave",this._onDragLeave),t(n,"drop",this._onDrop),this.enablePointerEvents||t(n,"touchstart",this._onTouchStart,zn)}removeListeners(){this.addOrRemove(Zn,"remove");const t=this._getEventPrefix(),e=gs(this.upperCanvasEl);Zn(e,"".concat(t,"up"),this._onMouseUp),Zn(e,"touchend",this._onTouchEnd,zn),Zn(e,"".concat(t,"move"),this._onMouseMove,zn),Zn(e,"touchmove",this._onMouseMove,zn),clearTimeout(this._willAddMouseDown)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const e=this._hoveredTarget,n=j({e:t},Ia(this,t));this.fire("mouse:out",j(j({},n),{},{target:e})),this._hoveredTarget=void 0,e&&e.fire("mouseout",j({},n)),this._hoveredTargets.forEach(a=>{this.fire("mouse:out",j(j({},n),{},{target:a})),a&&a.fire("mouseout",j({},n))}),this._hoveredTargets=[]}_onMouseEnter(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",j({e:t},Ia(this,t))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const e=this.getActiveObject();if(e&&e.onDragStart(t)){this._dragSource=e;const n={e:t,target:e};return this.fire("dragstart",n),e.fire("dragstart",n),void Ii(this.upperCanvasEl,"drag",this._onDragProgress)}gb(t)}_renderDragEffects(t,e,n){let a=!1;const o=this._dropTarget;o&&o!==e&&o!==n&&(o.clearContextTop(),a=!0),e==null||e.clearContextTop(),n!==e&&(n==null||n.clearContextTop());const c=this.contextTop;c.save(),c.transform(...this.viewportTransform),e&&(c.save(),e.transform(c),e.renderDragSourceEffect(t),c.restore(),a=!0),n&&(c.save(),n.transform(c),n.renderDropTargetEffect(t),c.restore(),a=!0),c.restore(),a&&(this.contextTopDirty=!0)}_onDragEnd(t){const e=!!t.dataTransfer&&t.dataTransfer.dropEffect!==dn,n=e?this._activeObject:void 0,a={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:e,dropTarget:n};Zn(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",a),this._dragSource&&this._dragSource.fire("dragend",a),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const e={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",e),this._dragSource&&this._dragSource.fire("drag",e)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(t)),targets:[...this.targets]}}_onDragOver(t){const e="dragover",{target:n,targets:a}=this.findDragTargets(t),o=this._dragSource,c={e:t,target:n,subTargets:a,dragSource:o,canDrop:!1,dropTarget:void 0};let h;this.fire(e,c),this._fireEnterLeaveEvents(n,c),n&&(n.canDrop(t)&&(h=n),n.fire(e,c));for(let f=0;f<a.length;f++){const d=a[f];d.canDrop(t)&&(h=d),d.fire(e,c)}this._renderDragEffects(t,o,h),this._dropTarget=h}_onDragEnter(t){const{target:e,targets:n}=this.findDragTargets(t),a={e:t,target:e,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",a),this._fireEnterLeaveEvents(e,a)}_onDragLeave(t){const e={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",e),this._fireEnterLeaveEvents(void 0,e),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:e,targets:n}=this.findDragTargets(t),a=this._basicEventHandler("drop:before",j({e:t,target:e,subTargets:n,dragSource:this._dragSource},Ia(this,t)));a.didDrop=!1,a.dropTarget=void 0,this._basicEventHandler("drop",a),this.fire("drop:after",a)}_onContextMenu(t){const e=this.findTarget(t),n=this.targets||[],a=this._basicEventHandler("contextmenu:before",{e:t,target:e,subTargets:n});return this.stopContextMenu&&gb(t),this._basicEventHandler("contextmenu",a),!1}_onClick(t){const e=t.detail;e>3||e<2||(this._cacheTransformEventData(t),e==2&&t.type==="dblclick"&&this._handleEvent(t,"dblclick"),e==3&&this._handleEvent(t,"tripleclick"),this._resetTransformEventData())}getPointerId(t){const e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return t.isPrimary===!0||t.isPrimary!==!1&&(t.type==="touchend"&&t.touches.length===0||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(t){let e=!this.allowTouchScrolling;const n=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),(this.isDrawingMode||n&&this._target===n)&&(e=!0),e&&t.preventDefault(),this._resetTransformEventData();const a=this.upperCanvasEl,o=this._getEventPrefix(),c=gs(a);Ii(c,"touchend",this._onTouchEnd,zn),e&&Ii(c,"touchmove",this._onMouseMove,zn),Zn(a,"".concat(o,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,n=this._getEventPrefix();Zn(e,"".concat(n,"move"),this._onMouseMove,zn);const a=gs(e);Ii(a,"".concat(n,"up"),this._onMouseUp),Ii(a,"".concat(n,"move"),this._onMouseMove,zn)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),delete this.mainTouchId;const e=this._getEventPrefix(),n=gs(this.upperCanvasEl);Zn(n,"touchend",this._onTouchEnd,zn),Zn(n,"touchmove",this._onMouseMove,zn),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Ii(this.upperCanvasEl,"".concat(e,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const e=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(t)){const a=gs(this.upperCanvasEl);Zn(a,"".concat(n,"up"),this._onMouseUp),Zn(a,"".concat(n,"move"),this._onMouseMove,zn),Ii(e,"".concat(n,"move"),this._onMouseMove,zn)}}_onMouseMove(t){const e=this.getActiveObject();!this.allowTouchScrolling&&(!e||!e.shouldStartDragging(t))&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const e=this.getActiveObject();return!!e!=!!t||e&&t&&e!==t}__onMouseUp(t){var e;this._cacheTransformEventData(t),this._handleEvent(t,"up:before");const n=this._currentTransform,a=this._isClick,o=this._target,{button:c}=t;if(c)return(this.fireMiddleClick&&c===1||this.fireRightClick&&c===2)&&this._handleEvent(t,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);if(!this._isMainEvent(t))return;let h,f,d=!1;if(n&&(this._finalizeCurrentTransform(t),d=n.actionPerformed),!a){const m=o===this._activeObject;this.handleSelection(t),d||(d=this._shouldRender(o)||!m&&o===this._activeObject)}if(o){const m=o.findControl(this.getViewportPoint(t),Oh(t)),{key:y,control:v}=m||{};if(f=y,o.selectable&&o!==this._activeObject&&o.activeOn==="up")this.setActiveObject(o,t),d=!0;else if(v){const b=v.getMouseUpHandler(t,o,v);b&&(h=this.getScenePoint(t),b.call(v,t,n,h.x,h.y))}o.isMoving=!1}if(n&&(n.target!==o||n.corner!==f)){const m=n.target&&n.target.controls[n.corner],y=m&&m.getMouseUpHandler(t,n.target,m);h=h||this.getScenePoint(t),y&&y.call(m,t,n,h.x,h.y)}this._setCursorFromEvent(t,o),this._handleEvent(t,"up"),this._groupSelector=null,this._currentTransform=null,o&&(o.__corner=void 0),d?this.requestRenderAll():a||(e=this._activeObject)!==null&&e!==void 0&&e.isEditing||this.renderTop()}_basicEventHandler(t,e){const{target:n,subTargets:a=[]}=e;this.fire(t,e),n&&n.fire(t,e);for(let o=0;o<a.length;o++)a[o]!==n&&a[o].fire(t,e);return e}_handleEvent(t,e,n){const a=this._target,o=this.targets||[],c=j(j(j({e:t,target:a,subTargets:o},Ia(this,t)),{},{transform:this._currentTransform},e==="up:before"||e==="up"?{isClick:this._isClick,currentTarget:this.findTarget(t),currentSubTargets:this.targets}:{}),e==="down:before"||e==="down"?n:{});this.fire("mouse:".concat(e),c),a&&a.fire("mouse".concat(e),c);for(let h=0;h<o.length;h++)o[h]!==a&&o[h].fire("mouse".concat(e),c)}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const e=this.getScenePoint(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:e}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let e=this._target,n=!!e&&e===this._activeObject;const{button:a}=t;if(a)return(this.fireMiddleClick&&a===1||this.fireRightClick&&a===2)&&this._handleEvent(t,"down",{alreadySelected:n}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._isMainEvent(t)||this._currentTransform)return;let o=this._shouldRender(e),c=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,c=!0,o=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject)){const h=this.getScenePoint(t);this._groupSelector={x:h.x,y:h.y,deltaY:0,deltaX:0}}if(n=!!e&&e===this._activeObject,e){e.selectable&&e.activeOn==="down"&&this.setActiveObject(e,t);const h=e.findControl(this.getViewportPoint(t),Oh(t));if(e===this._activeObject&&(h||!c)){this._setupCurrentTransform(t,e,n);const f=h?h.control:void 0,d=this.getScenePoint(t),m=f&&f.getMouseDownHandler(t,e,f);m&&m.call(f,t,this._currentTransform,d.x,d.y)}}o&&(this._objectsToRender=void 0),this._handleEvent(t,"down",{alreadySelected:n}),o&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getViewportPoint(t),this._absolutePointer=Qr(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}__onMouseMove(t){if(this._isClick=!1,this._cacheTransformEventData(t),this._handleEvent(t,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!this._isMainEvent(t))return;const e=this._groupSelector;if(e){const n=this.getScenePoint(t);e.deltaX=n.x-e.x,e.deltaY=n.y-e.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const n=this.findTarget(t);this._setCursorFromEvent(t,n),this._fireOverOutEvents(t,n)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,e){const n=this._hoveredTarget,a=this._hoveredTargets,o=this.targets,c=Math.max(a.length,o.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:e,oldTarget:n,fireCanvas:!0});for(let h=0;h<c;h++)this.fireSyntheticInOutEvents("mouse",{e:t,target:o[h],oldTarget:a[h]});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,e){const n=this._draggedoverTarget,a=this._hoveredTargets,o=this.targets,c=Math.max(a.length,o.length);this.fireSyntheticInOutEvents("drag",j(j({},e),{},{target:t,oldTarget:n,fireCanvas:!0}));for(let h=0;h<c;h++)this.fireSyntheticInOutEvents("drag",j(j({},e),{},{target:o[h],oldTarget:a[h]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,e){let{target:n,oldTarget:a,fireCanvas:o,e:c}=e,h=ge(e,FE);const{targetIn:f,targetOut:d,canvasIn:m,canvasOut:y}=PE[t],v=a!==n;if(a&&v){const b=j(j({},h),{},{e:c,target:a,nextTarget:n},Ia(this,c));o&&this.fire(y,b),a.fire(d,b)}if(n&&v){const b=j(j({},h),{},{e:c,target:n,previousTarget:a},Ia(this,c));o&&this.fire(m,b),n.fire(f,b)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const e=this.getScenePoint(t),n=this._currentTransform,a=n.target,o=a.group?Qr(e,void 0,a.group.calcTransformMatrix()):e;n.shiftKey=t.shiftKey,n.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,n,o),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,e,n){const{action:a,actionHandler:o,target:c}=e,h=!!o&&o(t,e,n.x,n.y);h&&c.setCoords(),a==="drag"&&h&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||h}_setCursorFromEvent(t,e){if(!e)return void this.setCursor(this.defaultCursor);let n=e.hoverCursor||this.hoverCursor;const a=zr(this._activeObject)?this._activeObject:null,o=(!a||e.group!==a)&&e.findControl(this.getViewportPoint(t));if(o){const c=o.control;this.setCursor(c.cursorStyleHandler(t,c,e))}else e.subTargetCheck&&this.targets.concat().reverse().map(c=>{n=c.hoverCursor||n}),this.setCursor(n)}handleMultiSelection(t,e){const n=this._activeObject,a=zr(n);if(n&&this._isSelectionKeyPressed(t)&&this.selection&&e&&e.selectable&&(n!==e||a)&&(a||!e.isDescendantOf(n)&&!n.isDescendantOf(e))&&!e.onSelect({e:t})&&!n.getActiveControl()){if(a){const o=n.getObjects();if(e===n){const c=this.getViewportPoint(t);if(!(e=this.searchPossibleTargets(o,c)||this.searchPossibleTargets(this._objects,c))||!e.selectable)return!1}e.group===n?(n.remove(e),this._hoveredTarget=e,this._hoveredTargets=[...this.targets],n.size()===1&&this._setActiveObject(n.item(0),t)):(n.multiSelectAdd(e),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(o,t)}else{n.isEditing&&n.exitEditing();const o=new(dt.getClass("ActiveSelection"))([],{canvas:this});o.multiSelectAdd(n,e),this._hoveredTarget=o,this._setActiveObject(o,t),this._fireSelectionEvents([n],t)}return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:e,y:n,deltaX:a,deltaY:o}=this._groupSelector,c=new G(e,n),h=c.add(new G(a,o)),f=c.min(h),d=c.max(h).subtract(f),m=this.collectObjects({left:f.x,top:f.y,width:d.x,height:d.y},{includeIntersecting:!this.selectionFullyContained}),y=c.eq(h)?m[0]?[m[0]]:[]:m.length>1?m.filter(v=>!v.onSelect({e:t})).reverse():m;if(y.length===1)this.setActiveObject(y[0],t);else if(y.length>1){const v=dt.getClass("ActiveSelection");this.setActiveObject(new v(y,{canvas:this}),t)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}};const d_={x1:0,y1:0,x2:0,y2:0},YE=j(j({},d_),{},{r1:0,r2:0}),$a=(i,t)=>isNaN(i)&&typeof t=="number"?t:i,XE=/^(\d+\.\d+)%|(\d+)%$/;function g_(i){return i&&XE.test(i)}function m_(i,t){const e=typeof i=="number"?i:typeof i=="string"?parseFloat(i)/(g_(i)?100:1):NaN;return Zr(0,$a(e,t),1)}const qE=/\s*;\s*/,VE=/\s*:\s*/;function GE(i,t){let e,n;const a=i.getAttribute("style");if(a){const c=a.split(qE);c[c.length-1]===""&&c.pop();for(let h=c.length;h--;){const[f,d]=c[h].split(VE).map(m=>m.trim());f==="stop-color"?e=d:f==="stop-opacity"&&(n=d)}}const o=new Yn(e||i.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:m_(i.getAttribute("offset"),0),color:o.toRgb(),opacity:$a(parseFloat(n||i.getAttribute("stop-opacity")||""),1)*o.getAlpha()*t}}function IE(i,t){const e=[],n=i.getElementsByTagName("stop"),a=m_(t,1);for(let o=n.length;o--;)e.push(GE(n[o],a));return e}function p_(i){return i.nodeName==="linearGradient"||i.nodeName==="LINEARGRADIENT"?"linear":"radial"}function y_(i){return i.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function cs(i,t){return i.getAttribute(t)}function WE(i,t){return function(e,n){let a,{width:o,height:c,gradientUnits:h}=n;return Object.keys(e).reduce((f,d)=>{const m=e[d];return m==="Infinity"?a=1:m==="-Infinity"?a=0:(a=typeof m=="string"?parseFloat(m):m,typeof m=="string"&&g_(m)&&(a*=.01,h==="pixels"&&(d!=="x1"&&d!=="x2"&&d!=="r2"||(a*=o),d!=="y1"&&d!=="y2"||(a*=c)))),f[d]=a,f},{})}(p_(i)==="linear"?function(e){return{x1:cs(e,"x1")||0,y1:cs(e,"y1")||0,x2:cs(e,"x2")||"100%",y2:cs(e,"y2")||0}}(i):function(e){return{x1:cs(e,"fx")||cs(e,"cx")||"50%",y1:cs(e,"fy")||cs(e,"cy")||"50%",r1:0,x2:cs(e,"cx")||"50%",y2:cs(e,"cy")||"50%",r2:cs(e,"r")||"50%"}}(i),j(j({},t),{},{gradientUnits:y_(i)}))}let Ll=class{constructor(t){const{type:e="linear",gradientUnits:n="pixels",coords:a={},colorStops:o=[],offsetX:c=0,offsetY:h=0,gradientTransform:f,id:d}=t||{};Object.assign(this,{type:e,gradientUnits:n,coords:j(j({},e==="radial"?YE:d_),a),colorStops:o,offsetX:c,offsetY:h,gradientTransform:f,id:d?"".concat(d,"_").concat(ur()):ur()})}addColorStop(t){for(const e in t){const n=new Yn(t[e]);this.colorStops.push({offset:parseFloat(e),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(t){return j(j({},sa(this,t)),{},{type:this.type,coords:j({},this.coords),colorStops:this.colorStops.map(e=>j({},e)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(t){let{additionalTransform:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],a=this.gradientTransform?this.gradientTransform.concat():mn.concat(),o=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",c=this.colorStops.map(y=>j({},y)).sort((y,v)=>y.offset-v.offset);let h=-this.offsetX,f=-this.offsetY;var d;o==="objectBoundingBox"?(h/=t.width,f/=t.height):(h+=t.width/2,f+=t.height/2),(d=t)&&typeof d._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(h-=t.pathOffset.x,f-=t.pathOffset.y),a[4]-=h,a[5]-=f;const m=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(o,'"'),'gradientTransform="'.concat(e?e+" ":"").concat(vo(a),'"'),""].join(" ");if(this.type==="linear"){const{x1:y,y1:v,x2:b,y2:S}=this.coords;n.push("<linearGradient ",m,' x1="',y,'" y1="',v,'" x2="',b,'" y2="',S,`">
`)}else if(this.type==="radial"){const{x1:y,y1:v,x2:b,y2:S,r1:C,r2:_}=this.coords,w=C>_;n.push("<radialGradient ",m,' cx="',w?y:b,'" cy="',w?v:S,'" r="',w?C:_,'" fx="',w?b:y,'" fy="',w?S:v,`">
`),w&&(c.reverse(),c.forEach(E=>{E.offset=1-E.offset}));const T=Math.min(C,_);if(T>0){const E=T/Math.max(C,_);c.forEach(k=>{k.offset+=E*(1-k.offset)})}}return c.forEach(y=>{let{color:v,offset:b,opacity:S}=y;n.push("<stop ",'offset="',100*b+"%",'" style="stop-color:',v,S!==void 0?";stop-opacity: "+S:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(t){const{x1:e,y1:n,x2:a,y2:o,r1:c,r2:h}=this.coords,f=this.type==="linear"?t.createLinearGradient(e,n,a,o):t.createRadialGradient(e,n,c,a,o,h);return this.colorStops.forEach(d=>{let{color:m,opacity:y,offset:v}=d;f.addColorStop(v,y!==void 0?new Yn(m).setAlpha(y).toRgba():m)}),f}static async fromObject(t){const{colorStops:e,gradientTransform:n}=t;return new this(j(j({},t),{},{colorStops:e?e.map(a=>j({},a)):void 0,gradientTransform:n?[...n]:void 0}))}static fromElement(t,e,n){const a=y_(t),o=e._findCenterFromElement();return new this(j({id:t.getAttribute("id")||void 0,type:p_(t),coords:WE(t,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:IE(t,n.opacity),gradientUnits:a,gradientTransform:Rh(t.getAttribute("gradientTransform")||"")},a==="pixels"?{offsetX:e.width/2-o.x,offsetY:e.height/2-o.y}:{offsetX:0,offsetY:0}))}};B(Ll,"type","Gradient"),dt.setClass(Ll,"gradient"),dt.setClass(Ll,"linear"),dt.setClass(Ll,"radial");const QE=["type","source","patternTransform"];let $g=class{get type(){return"pattern"}set type(t){di("warn","Setting type has no effect",t)}constructor(t){B(this,"repeat","repeat"),B(this,"offsetX",0),B(this,"offsetY",0),B(this,"crossOrigin",""),this.id=ur(),Object.assign(this,t)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?t.createPattern(this.source,this.repeat):null}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:e,crossOrigin:n}=this;return j(j({},sa(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:e,crossOrigin:n,offsetX:ce(this.offsetX,It.NUM_FRACTION_DIGITS),offsetY:ce(this.offsetY,It.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:e,height:n}=t;const{source:a,repeat:o,id:c}=this,h=$a(this.offsetX/e,0),f=$a(this.offsetY/n,0),d=o==="repeat-y"||o==="no-repeat"?1+Math.abs(h||0):$a(a.width/e,0),m=o==="repeat-x"||o==="no-repeat"?1+Math.abs(f||0):$a(a.height/n,0);return['<pattern id="SVGID_'.concat(c,'" x="').concat(h,'" y="').concat(f,'" width="').concat(d,'" height="').concat(m,'">'),'<image x="0" y="0" width="'.concat(a.width,'" height="').concat(a.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(t,e){let{type:n,source:a,patternTransform:o}=t,c=ge(t,QE);const h=await Pl(a,j(j({},e),{},{crossOrigin:c.crossOrigin}));return new this(j(j({},c),{},{patternTransform:o&&o.slice(0),source:h}))}};B($g,"type","Pattern"),dt.setClass($g),dt.setClass($g,"pattern");const KE=["path","left","top"],$E=["d"];let Rl=class v_ extends We{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:a,top:o}=e,c=ge(e,KE);super(),Object.assign(this,v_.ownDefaults),this.setOptions(c),this._setPath(t||[],!0),typeof a=="number"&&this.set(Qt,a),typeof o=="number"&&this.set(On,o)}_setPath(t,e){this.path=n_(Array.isArray(t)?t:l_(t)),this.setBoundingBox(e)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new G(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){const e=-this.pathOffset.x,n=-this.pathOffset.y;t.beginPath();for(const a of this.path)switch(a[0]){case"L":t.lineTo(a[1]+e,a[2]+n);break;case"M":t.moveTo(a[1]+e,a[2]+n);break;case"C":t.bezierCurveTo(a[1]+e,a[2]+n,a[3]+e,a[4]+n,a[5]+e,a[6]+n);break;case"Q":t.quadraticCurveTo(a[1]+e,a[2]+n,a[3]+e,a[4]+n);break;case"Z":t.closePath()}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject(t)),{},{path:this.path.map(e=>e.slice())})}toDatalessObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.toObject(t);return this.sourcePath&&(delete e.path,e.sourcePath=this.sourcePath),e}_toSVG(){const t=c_(this.path,It.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(t,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const t=It.NUM_FRACTION_DIGITS;return" translate(".concat(ce(-this.pathOffset.x,t),", ").concat(ce(-this.pathOffset.y,t),")")}toClipPathSVG(t){const e=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}toSVG(t){const e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:e,height:n,pathOffset:a}=this._calcDimensions();this.set({width:e,height:n,pathOffset:a}),t&&this.setPositionByOrigin(a,Rt,Rt)}_calcBoundsFromPath(){const t=[];let e=0,n=0,a=0,o=0;for(const c of this.path)switch(c[0]){case"L":a=c[1],o=c[2],t.push({x:e,y:n},{x:a,y:o});break;case"M":a=c[1],o=c[2],e=a,n=o;break;case"C":t.push(...wm(a,o,c[1],c[2],c[3],c[4],c[5],c[6])),a=c[5],o=c[6];break;case"Q":t.push(...wm(a,o,c[1],c[2],c[1],c[2],c[3],c[4])),a=c[3],o=c[4];break;case"Z":a=e,o=n}return Hs(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return j(j({},t),{},{pathOffset:new G(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,e,n){const a=yi(t,this.ATTRIBUTE_NAMES,n),{d:o}=a;return new this(o,j(j(j({},ge(a,$E)),e),{},{left:void 0,top:void 0}))}};B(Rl,"type","Path"),B(Rl,"cacheProperties",[...pi,"path","fillRule"]),B(Rl,"ATTRIBUTE_NAMES",[...hr,"d"]),dt.setClass(Rl),dt.setSVGClass(Rl);const ZE=["left","top","radius"],b_=["radius","startAngle","endAngle","counterClockwise"];class ks extends We{static getDefaults(){return j(j({},super.getDefaults()),ks.ownDefaults)}constructor(t){super(),Object.assign(this,ks.ownDefaults),this.setOptions(t)}_set(t,e){return super._set(t,e),t==="radius"&&this.setRadius(e),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,Se(this.startAngle),Se(this.endAngle),this.counterClockwise),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get(pn)}getRadiusY(){return this.get("radius")*this.get(Fn)}setRadius(t){this.radius=t,this.set({width:2*t,height:2*t})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...b_,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(t===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:e}=this,n=Se(this.startAngle),a=Se(this.endAngle),o=ys(n)*e,c=vs(n)*e,h=ys(a)*e,f=vs(a)*e,d=t>180?1:0,m=this.counterClockwise?0:1;return['<path d="M '.concat(o," ").concat(c," A ").concat(e," ").concat(e," 0 ").concat(d," ").concat(m," ").concat(h," ").concat(f,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(t,e,n){const a=yi(t,this.ATTRIBUTE_NAMES,n),{left:o=0,top:c=0,radius:h=0}=a;return new this(j(j({},ge(a,ZE)),{},{radius:h,left:o-h,top:c-h}))}static fromObject(t){return super._fromObject(t)}}B(ks,"type","Circle"),B(ks,"cacheProperties",[...pi,...b_]),B(ks,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),B(ks,"ATTRIBUTE_NAMES",["cx","cy","r",...hr]),dt.setClass(ks),dt.setSVGClass(ks);const JE=["x1","y1","x2","y2"],tA=["x1","y1","x2","y2"],Om=["x1","x2","y1","y2"];let Qa=class x_ extends We{constructor(){let[t,e,n,a]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,x_.ownDefaults),this.setOptions(o),this.x1=t,this.x2=n,this.y1=e,this.y2=a,this._setWidthHeight();const{left:c,top:h}=o;typeof c=="number"&&this.set(Qt,c),typeof h=="number"&&this.set(On,h)}_setWidthHeight(){const{x1:t,y1:e,x2:n,y2:a}=this;this.width=Math.abs(n-t),this.height=Math.abs(a-e);const{left:o,top:c,width:h,height:f}=Hs([{x:t,y:e},{x:n,y:a}]),d=new G(o+h/2,c+f/2);this.setPositionByOrigin(d,Rt,Rt)}_set(t,e){return super._set(t,e),Om.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;const n=t.strokeStyle;var a;es(this.stroke)?t.strokeStyle=this.stroke.toLive(t):t.strokeStyle=(a=this.stroke)!==null&&a!==void 0?a:t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=n}_findCenterFromElement(){return new G((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:e,y1:n,y2:a,width:o,height:c}=this,h=t<=e?-1:1,f=n<=a?-1:1;return{x1:h*o/2,x2:h*-o/2,y1:f*c/2,y2:f*-c/2}}_toSVG(){const{x1:t,x2:e,y1:n,y2:a}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(n,'" x2="').concat(e,'" y2="').concat(a,`" />
`)]}static async fromElement(t,e,n){const a=yi(t,this.ATTRIBUTE_NAMES,n),{x1:o=0,y1:c=0,x2:h=0,y2:f=0}=a;return new this([o,c,h,f],ge(a,JE))}static fromObject(t){let{x1:e,y1:n,x2:a,y2:o}=t,c=ge(t,tA);return this._fromObject(j(j({},c),{},{points:[e,n,a,o]}),{extraParam:"points"})}};B(Qa,"type","Line"),B(Qa,"cacheProperties",[...pi,...Om]),B(Qa,"ATTRIBUTE_NAMES",hr.concat(Om)),dt.setClass(Qa),dt.setSVGClass(Qa);let Bl=class Em extends We{static getDefaults(){return j(j({},super.getDefaults()),Em.ownDefaults)}constructor(t){super(),Object.assign(this,Em.ownDefaults),this.setOptions(t)}_render(t){const e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(e,",0 ").concat(-e,",").concat(t," ").concat(e),'" />']}};B(Bl,"type","Triangle"),B(Bl,"ownDefaults",{width:100,height:100}),dt.setClass(Bl),dt.setSVGClass(Bl);const S_=["rx","ry"];let Wa=class Am extends We{static getDefaults(){return j(j({},super.getDefaults()),Am.ownDefaults)}constructor(t){super(),Object.assign(this,Am.ownDefaults),this.setOptions(t)}_set(t,e){switch(super._set(t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this}getRx(){return this.get("rx")*this.get(pn)}getRy(){return this.get("ry")*this.get(Fn)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...S_,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,gi,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,e,n){const a=yi(t,this.ATTRIBUTE_NAMES,n);return a.left=(a.left||0)-a.rx,a.top=(a.top||0)-a.ry,new this(a)}};function eA(i){if(!i)return[];const t=i.replace(/,/g," ").trim().split(/\s+/),e=[];for(let n=0;n<t.length;n+=2)e.push({x:parseFloat(t[n]),y:parseFloat(t[n+1])});return e}B(Wa,"type","Ellipse"),B(Wa,"cacheProperties",[...pi,...S_]),B(Wa,"ownDefaults",{rx:0,ry:0}),B(Wa,"ATTRIBUTE_NAMES",[...hr,"cx","cy","rx","ry"]),dt.setClass(Wa),dt.setSVGClass(Wa);const nA=["left","top"],__={exactBoundingBox:!1};let Wi=class Dm extends We{static getDefaults(){return j(j({},super.getDefaults()),Dm.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),B(this,"strokeDiff",void 0),Object.assign(this,Dm.ownDefaults),this.setOptions(e),this.points=t;const{left:n,top:a}=e;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(Qt,n),typeof a=="number"&&this.set(On,a)}isOpen(){return!0}_projectStrokeOnPoints(t){return IS(this.points,t,this.isOpen())}_calcDimensions(t){t=j({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},t||{});const e=this.exactBoundingBox?this._projectStrokeOnPoints(t).map(d=>d.projectedPoint):this.points;if(e.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new G,strokeOffset:new G,strokeDiff:new G};const n=Hs(e),a=fc(j(j({},t),{},{scaleX:1,scaleY:1})),o=Hs(this.points.map(d=>nn(d,a,!0))),c=new G(this.scaleX,this.scaleY);let h=n.left+n.width/2,f=n.top+n.height/2;return this.exactBoundingBox&&(h-=f*Math.tan(Se(this.skewX)),f-=h*Math.tan(Se(this.skewY))),j(j({},n),{},{pathOffset:new G(h,f),strokeOffset:new G(o.left,o.top).subtract(new G(n.left,n.top)).multiply(c),strokeDiff:new G(n.width,n.height).subtract(new G(o.width,o.height)).multiply(c)})}_findCenterFromElement(){const t=Hs(this.points);return new G(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:e,top:n,width:a,height:o,pathOffset:c,strokeOffset:h,strokeDiff:f}=this._calcDimensions();this.set({width:a,height:o,pathOffset:c,strokeOffset:h,strokeDiff:f}),t&&this.setPositionByOrigin(new G(e+a/2,n+o/2),Rt,Rt)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new G(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let c;if(Object.keys(t).some(h=>this.strokeUniform||this.constructor.layoutProperties.includes(h))){var e,n;const{width:h,height:f}=this._calcDimensions(t);c=new G((e=t.width)!==null&&e!==void 0?e:h,(n=t.height)!==null&&n!==void 0?n:f)}else{var a,o;c=new G((a=t.width)!==null&&a!==void 0?a:this.width,(o=t.height)!==null&&o!==void 0?o:this.height)}return c.multiply(new G(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}return super._getTransformedDimensions(t)}_set(t,e){const n=this.initialized&&this[t]!==e,a=super._set(t,e);return this.exactBoundingBox&&n&&((t===pn||t===Fn)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),a}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject(t)),{},{points:this.points.map(e=>{let{x:n,y:a}=e;return{x:n,y:a}})})}_toSVG(){const t=[],e=this.pathOffset.x,n=this.pathOffset.y,a=It.NUM_FRACTION_DIGITS;for(let o=0,c=this.points.length;o<c;o++)t.push(ce(this.points[o].x-e,a),",",ce(this.points[o].y-n,a)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),`" />
`)]}_render(t){const e=this.points.length,n=this.pathOffset.x,a=this.pathOffset.y;if(e&&!isNaN(this.points[e-1].y)){t.beginPath(),t.moveTo(this.points[0].x-n,this.points[0].y-a);for(let o=0;o<e;o++){const c=this.points[o];t.lineTo(c.x-n,c.y-a)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,e,n){return new this(eA(t.getAttribute("points")),j(j({},ge(yi(t,this.ATTRIBUTE_NAMES,n),nA)),e))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}};B(Wi,"ownDefaults",__),B(Wi,"type","Polyline"),B(Wi,"layoutProperties",[_o,Co,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),B(Wi,"cacheProperties",[...pi,"points"]),B(Wi,"ATTRIBUTE_NAMES",[...hr]),dt.setClass(Wi),dt.setSVGClass(Wi);let qu=class extends Wi{isOpen(){return!1}};B(qu,"ownDefaults",__),B(qu,"type","Polygon"),dt.setClass(qu),dt.setSVGClass(qu);const C_=["fontSize","fontWeight","fontFamily","fontStyle"],T_=["underline","overline","linethrough"],w_=[...C_,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],O_=[...w_,...T_,"textBackgroundColor","direction"],sA=[...C_,...T_,gn,"strokeWidth",Me,"deltaY","textBackgroundColor"],iA={_reNewline:yp,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Qt,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Qt,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},Ls="justify",Nh="justify-left",Yl="justify-right",Xl="justify-center";let E_=class extends We{isEmptyStyles(t){if(!this.styles||t!==void 0&&!this.styles[t])return!0;const e=t===void 0?this.styles:{line:this.styles[t]};for(const n in e)for(const a in e[n])for(const o in e[n][a])return!1;return!0}styleHas(t,e){if(!this.styles||e!==void 0&&!this.styles[e])return!1;const n=e===void 0?this.styles:{0:this.styles[e]};for(const a in n)for(const o in n[a])if(n[a][o][t]!==void 0)return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const e=this.styles;let n,a,o=0,c=!0,h=0;for(const f in e){n=0;for(const d in e[f]){const m=e[f][d]||{};o++,m[t]!==void 0?(a?m[t]!==a&&(c=!1):a=m[t],m[t]===this[t]&&delete m[t]):c=!1,Object.keys(m).length!==0?n++:delete e[f][d]}n===0&&delete e[f]}for(let f=0;f<this._textLines.length;f++)h+=this._textLines[f].length;c&&o===h&&(this[t]=a,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const e=this.styles;let n,a,o;for(a in e){for(o in n=e[a],n)delete n[o][t],Object.keys(n[o]).length===0&&delete n[o];Object.keys(n).length===0&&delete e[a]}}_extendStyles(t,e){const{lineIndex:n,charIndex:a}=this.get2DCursorLocation(t);this._getLineStyle(n)||this._setLineStyle(n);const o=Tp(j(j({},this._getStyleDeclaration(n,a)),e),c=>c!==void 0);this._setStyleDeclaration(n,a,o)}getSelectionStyles(t,e,n){const a=[];for(let o=t;o<(e||t);o++)a.push(this.getStyleAtPosition(o,n));return a}getStyleAtPosition(t,e){const{lineIndex:n,charIndex:a}=this.get2DCursorLocation(t);return e?this.getCompleteStyleDeclaration(n,a):this._getStyleDeclaration(n,a)}setSelectionStyles(t,e,n){for(let a=e;a<(n||e);a++)this._extendStyles(a,t);this._forceClearCache=!0}_getStyleDeclaration(t,e){var n;const a=this.styles&&this.styles[t];return a&&(n=a[e])!==null&&n!==void 0?n:{}}getCompleteStyleDeclaration(t,e){return j(j({},sa(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,e))}_setStyleDeclaration(t,e,n){this.styles[t][e]=n}_deleteStyleDeclaration(t,e){delete this.styles[t][e]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}};B(E_,"_styleProperties",sA);const rA=/  +/g,aA=/"/g;function Zg(i,t,e,n,a){return"		".concat(function(o,c){let{left:h,top:f,width:d,height:m}=c,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:It.NUM_FRACTION_DIGITS;const v=Wl(Me,o,!1),[b,S,C,_]=[h,f,d,m].map(w=>ce(w,y));return"<rect ".concat(v,' x="').concat(b,'" y="').concat(S,'" width="').concat(C,'" height="').concat(_,'"></rect>')}(i,{left:t,top:e,width:n,height:a}),`
`)}const oA=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Jg,As=class zl extends E_{static getDefaults(){return j(j({},super.getDefaults()),zl.ownDefaults)}constructor(t,e){super(),B(this,"__charBounds",[]),Object.assign(this,zl.ownDefaults),this.setOptions(e),this.styles||(this.styles={}),this.text=t,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=Np(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Ls)&&this.enlargeSpaces()}enlargeSpaces(){let t,e,n,a,o,c,h;for(let f=0,d=this._textLines.length;f<d;f++)if((this.textAlign===Ls||f!==d-1&&!this.isEndOfWrapping(f))&&(a=0,o=this._textLines[f],e=this.getLineWidth(f),e<this.width&&(h=this.textLines[f].match(this._reSpacesAndTabs)))){n=h.length,t=(this.width-e)/n;for(let m=0;m<=o.length;m++)c=this.__charBounds[f][m],this._reSpaceAndTab.test(o[m])?(c.width+=t,c.kernedWidth+=t,c.left+=a,a+=t):c.left+=a}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,e){const n=e?this._unwrappedTextLines:this._textLines;let a;for(a=0;a<n.length;a++){if(t<=n[a].length)return{lineIndex:a,charIndex:t};t-=n[a].length+this.missingNewlineOffset(a,e)}return{lineIndex:a-1,charIndex:n[a-1].length<t?n[a-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t}_render(t){const e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst===gn?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,e,n){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Rt:t.textBaseline="middle";break;case"ascender":t.textBaseline=On;break;case"descender":t.textBaseline=mm}t.font=this._getFontDeclaration(e,n)}calcTextWidth(){let t=this.getLineWidth(0);for(let e=1,n=this._textLines.length;e<n;e++){const a=this.getLineWidth(e);a>t&&(t=a)}return t}_renderTextLine(t,e,n,a,o,c){this._renderChars(t,e,n,a,o,c)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const e=t.fillStyle,n=this._getLeftOffset();let a=this._getTopOffset();for(let o=0,c=this._textLines.length;o<c;o++){const h=this.getHeightOfLine(o);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",o)){a+=h;continue}const f=this._textLines[o].length,d=this._getLineLeftOffset(o);let m,y,v=0,b=0,S=this.getValueOfPropertyAt(o,0,"textBackgroundColor");for(let C=0;C<f;C++){const _=this.__charBounds[o][C];y=this.getValueOfPropertyAt(o,C,"textBackgroundColor"),this.path?(t.save(),t.translate(_.renderLeft,_.renderTop),t.rotate(_.angle),t.fillStyle=y,y&&t.fillRect(-_.width/2,-h/this.lineHeight*(1-this._fontSizeFraction),_.width,h/this.lineHeight),t.restore()):y!==S?(m=n+d+b,this.direction==="rtl"&&(m=this.width-m-v),t.fillStyle=S,S&&t.fillRect(m,a,v,h/this.lineHeight),b=_.left,v=_.width,S=y):v+=_.kernedWidth}y&&!this.path&&(m=n+d+b,this.direction==="rtl"&&(m=this.width-m-v),t.fillStyle=y,t.fillRect(m,a,v,h/this.lineHeight)),a+=h}t.fillStyle=e,this._removeShadow(t)}_measureChar(t,e,n,a){const o=Ul.getFontCache(e),c=this._getFontDeclaration(e),h=n+t,f=n&&c===this._getFontDeclaration(a),d=e.fontSize/this.CACHE_FONT_SIZE;let m,y,v,b;if(n&&o[n]!==void 0&&(v=o[n]),o[t]!==void 0&&(b=m=o[t]),f&&o[h]!==void 0&&(y=o[h],b=y-v),m===void 0||v===void 0||y===void 0){const S=function(){return Jg||(Jg=Pn({width:0,height:0}).getContext("2d")),Jg}();this._setTextStyles(S,e,!0),m===void 0&&(b=m=S.measureText(t).width,o[t]=m),v===void 0&&f&&n&&(v=S.measureText(n).width,o[n]=v),f&&y===void 0&&(y=S.measureText(h).width,o[h]=y,b=y-v)}return{width:m*d,kernedWidth:b*d}}getHeightOfChar(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")}measureLine(t){const e=this._measureLine(t);return this.charSpacing!==0&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e}_measureLine(t){let e,n,a=0;const o=this.pathSide===Te,c=this.path,h=this._textLines[t],f=h.length,d=new Array(f);this.__charBounds[t]=d;for(let m=0;m<f;m++){const y=h[m];n=this._getGraphemeBox(y,t,m,e),d[m]=n,a+=n.kernedWidth,e=y}if(d[f]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},c&&c.segmentsInfo){let m=0;const y=c.segmentsInfo[c.segmentsInfo.length-1].length;switch(this.textAlign){case Qt:m=o?y-a:0;break;case Rt:m=(y-a)/2;break;case Te:m=o?0:y-a}m+=this.pathStartOffset*(o?-1:1);for(let v=o?f-1:0;o?v>=0:v<f;o?v--:v++)n=d[v],m>y?m%=y:m<0&&(m+=y),this._setGraphemeOnPath(m,n),m+=n.kernedWidth}return{width:a,numOfSpaces:0}}_setGraphemeOnPath(t,e){const n=t+e.kernedWidth/2,a=this.path,o=o_(a.path,n,a.segmentsInfo);e.renderLeft=o.x-a.pathOffset.x,e.renderTop=o.y-a.pathOffset.y,e.angle=o.angle+(this.pathSide===Te?Math.PI:0)}_getGraphemeBox(t,e,n,a,o){const c=this.getCompleteStyleDeclaration(e,n),h=a?this.getCompleteStyleDeclaration(e,n-1):{},f=this._measureChar(t,c,a,h);let d,m=f.kernedWidth,y=f.width;this.charSpacing!==0&&(d=this._getWidthOfCharSpacing(),y+=d,m+=d);const v={width:y,left:0,height:c.fontSize,kernedWidth:m,deltaY:c.deltaY};if(n>0&&!o){const b=this.__charBounds[e][n-1];v.left=b.left+b.width+f.kernedWidth-f.width}return v}getHeightOfLine(t){if(this.__lineHeights[t])return this.__lineHeights[t];let e=this.getHeightOfChar(t,0);for(let n=1,a=this._textLines[t].length;n<a;n++)e=Math.max(this.getHeightOfChar(t,n),e);return this.__lineHeights[t]=e*this.lineHeight*this._fontSizeMult}calcTextHeight(){let t,e=0;for(let n=0,a=this._textLines.length;n<a;n++)t=this.getHeightOfLine(n),e+=n===a-1?t/this.lineHeight:t;return e}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,e){t.save();let n=0;const a=this._getLeftOffset(),o=this._getTopOffset();for(let c=0,h=this._textLines.length;c<h;c++){const f=this.getHeightOfLine(c),d=f/this.lineHeight,m=this._getLineLeftOffset(c);this._renderTextLine(e,t,this._textLines[c],a+m,o+n+d,c),n+=f}t.restore()}_renderTextFill(t){(this.fill||this.styleHas(Me))&&this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,e,n,a,o,c){const h=this.getHeightOfLine(c),f=this.textAlign.includes(Ls),d=this.path,m=!f&&this.charSpacing===0&&this.isEmptyStyles(c)&&!d,y=this.direction==="ltr",v=this.direction==="ltr"?1:-1,b=e.direction;let S,C,_,w,T,E="",k=0;if(e.save(),b!==this.direction&&(e.canvas.setAttribute("dir",y?"ltr":"rtl"),e.direction=y?"ltr":"rtl",e.textAlign=y?Qt:Te),o-=h*this._fontSizeFraction/this.lineHeight,m)return this._renderChar(t,e,c,0,n.join(""),a,o),void e.restore();for(let A=0,R=n.length-1;A<=R;A++)w=A===R||this.charSpacing||d,E+=n[A],_=this.__charBounds[c][A],k===0?(a+=v*(_.kernedWidth-_.width),k+=_.width):k+=_.kernedWidth,f&&!w&&this._reSpaceAndTab.test(n[A])&&(w=!0),w||(S=S||this.getCompleteStyleDeclaration(c,A),C=this.getCompleteStyleDeclaration(c,A+1),w=nf(S,C,!1)),w&&(d?(e.save(),e.translate(_.renderLeft,_.renderTop),e.rotate(_.angle),this._renderChar(t,e,c,A,E,-k/2,0),e.restore()):(T=a,this._renderChar(t,e,c,A,E,T,o)),E="",S=C,a+=v*k,k=0);e.restore()}_applyPatternGradientTransformText(t){const e=this.width+this.strokeWidth,n=this.height+this.strokeWidth,a=Pn({width:e,height:n}),o=a.getContext("2d");return a.width=e,a.height=n,o.beginPath(),o.moveTo(0,0),o.lineTo(e,0),o.lineTo(e,n),o.lineTo(0,n),o.closePath(),o.translate(e/2,n/2),o.fillStyle=t.toLive(o),this._applyPatternGradientTransform(o,t),o.fill(),o.createPattern(a,"no-repeat")}handleFiller(t,e,n){let a,o;return es(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(a=-this.width/2,o=-this.height/2,t.translate(a,o),t[e]=this._applyPatternGradientTransformText(n),{offsetX:a,offsetY:o}):(t[e]=n.toLive(t),this._applyPatternGradientTransform(t,n)):(t[e]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(t,e){let{stroke:n,strokeWidth:a}=e;return t.lineWidth=a,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",n)}_setFillStyles(t,e){let{fill:n}=e;return this.handleFiller(t,"fillStyle",n)}_renderChar(t,e,n,a,o,c,h){const f=this._getStyleDeclaration(n,a),d=this.getCompleteStyleDeclaration(n,a),m=t==="fillText"&&d.fill,y=t==="strokeText"&&d.stroke&&d.strokeWidth;if(y||m){if(e.save(),e.font=this._getFontDeclaration(d),f.textBackgroundColor&&this._removeShadow(e),f.deltaY&&(h+=f.deltaY),m){const v=this._setFillStyles(e,d);e.fillText(o,c-v.offsetX,h-v.offsetY)}if(y){const v=this._setStrokeStyles(e,d);e.strokeText(o,c-v.offsetX,h-v.offsetY)}e.restore()}}setSuperscript(t,e){this._setScript(t,e,this.superscript)}setSubscript(t,e){this._setScript(t,e,this.subscript)}_setScript(t,e,n){const a=this.get2DCursorLocation(t,!0),o=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"fontSize"),c=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"deltaY"),h={fontSize:o*n.size,deltaY:c+o*n.baseline};this.setSelectionStyles(h,t,e)}_getLineLeftOffset(t){const e=this.getLineWidth(t),n=this.width-e,a=this.textAlign,o=this.direction,c=this.isEndOfWrapping(t);let h=0;return a===Ls||a===Xl&&!c||a===Yl&&!c||a===Nh&&!c?0:(a===Rt&&(h=n/2),a===Te&&(h=n),a===Xl&&(h=n/2),a===Yl&&(h=n),o==="rtl"&&(a===Te||a===Ls||a===Yl?h=0:a===Qt||a===Nh?h=-n:a!==Rt&&a!==Xl||(h=-n/2)),h)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(this.__lineWidths[t]!==void 0)return this.__lineWidths[t];const{width:e}=this.measureLine(t);return this.__lineWidths[t]=e,e}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,e,n){var a;return(a=this._getStyleDeclaration(t,e)[n])!==null&&a!==void 0?a:this[n]}_renderTextDecoration(t,e){if(!this[e]&&!this.styleHas(e))return;let n=this._getTopOffset();const a=this._getLeftOffset(),o=this.path,c=this._getWidthOfCharSpacing(),h=this.offsets[e];for(let f=0,d=this._textLines.length;f<d;f++){const m=this.getHeightOfLine(f);if(!this[e]&&!this.styleHas(e,f)){n+=m;continue}const y=this._textLines[f],v=m/this.lineHeight,b=this._getLineLeftOffset(f);let S,C,_=0,w=0,T=this.getValueOfPropertyAt(f,0,e),E=this.getValueOfPropertyAt(f,0,Me);const k=n+v*(1-this._fontSizeFraction);let A=this.getHeightOfChar(f,0),R=this.getValueOfPropertyAt(f,0,"deltaY");for(let N=0,I=y.length;N<I;N++){const J=this.__charBounds[f][N];S=this.getValueOfPropertyAt(f,N,e),C=this.getValueOfPropertyAt(f,N,Me);const ot=this.getHeightOfChar(f,N),rt=this.getValueOfPropertyAt(f,N,"deltaY");if(o&&S&&C)t.save(),t.fillStyle=E,t.translate(J.renderLeft,J.renderTop),t.rotate(J.angle),t.fillRect(-J.kernedWidth/2,h*ot+rt,J.kernedWidth,this.fontSize/15),t.restore();else if((S!==T||C!==E||ot!==A||rt!==R)&&w>0){let ut=a+b+_;this.direction==="rtl"&&(ut=this.width-ut-w),T&&E&&(t.fillStyle=E,t.fillRect(ut,k+h*A+R,w,this.fontSize/15)),_=J.left,w=J.width,T=S,E=C,A=ot,R=rt}else w+=J.kernedWidth}let F=a+b+_;this.direction==="rtl"&&(F=this.width-F-w),t.fillStyle=C,S&&C&&t.fillRect(F,k+h*A+R,w-c,this.fontSize/15),n+=m}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:e=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:a=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;const c=t.includes("'")||t.includes('"')||t.includes(",")||zl.genericFonts.includes(t.toLowerCase())?t:'"'.concat(t,'"');return[e,n,"".concat(o?this.CACHE_FONT_SIZE:a,"px"),c].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return ef(t)}_splitTextIntoLines(t){const e=t.split(this._reNewline),n=new Array(e.length),a=[`
`];let o=[];for(let c=0;c<e.length;c++)n[c]=this.graphemeSplit(e[c]),o=o.concat(n[c],a);return o.pop(),{_unwrappedLines:n,lines:e,graphemeText:o,graphemeLines:n}}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject([...O_,...t])),{},{styles:QS(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,e){const{textLayoutProperties:n}=this.constructor;super.set(t,e);let a=!1,o=!1;if(typeof t=="object")for(const c in t)c==="path"&&this.setPathInfo(),a=a||n.includes(c),o=o||c==="path";else a=n.includes(t),o=t==="path";return o&&this.setPathInfo(),a&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,e,n){const a=yi(t,zl.ATTRIBUTE_NAMES,n),o=j(j({},e),a),{textAnchor:c=Qt,textDecoration:h="",dx:f=0,dy:d=0,top:m=0,left:y=0,fontSize:v=pp,strokeWidth:b=1}=o,S=ge(o,oA),C=new this((t.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),j({left:y+f,top:m+d,underline:h.includes("underline"),overline:h.includes("overline"),linethrough:h.includes("line-through"),strokeWidth:0,fontSize:v},S)),_=C.getScaledHeight()/C.height,w=((C.height+C.strokeWidth)*C.lineHeight-C.height)*_,T=C.getScaledHeight()+w;let E=0;return c===Rt&&(E=C.getScaledWidth()/2),c===Te&&(E=C.getScaledWidth()),C.set({left:C.left-E,top:C.top-(T-C.fontSize*(.07+C._fontSizeFraction))/C.lineHeight,strokeWidth:b}),C}static fromObject(t){return this._fromObject(j(j({},t),{},{styles:KS(t.styles||{},t.text)}),{extraParam:"text"})}};B(As,"textLayoutProperties",w_),B(As,"cacheProperties",[...pi,...O_]),B(As,"ownDefaults",iA),B(As,"type","Text"),B(As,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),B(As,"ATTRIBUTE_NAMES",hr.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),qS(As,[class extends LS{_toSVG(){const i=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(i.textTop,i.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(i){const t=this._createBaseSVGMarkup(this._toSVG(),{reviver:i,noStyle:!0,withShadow:!0}),e=this.path;return e?t+e._createBaseSVGMarkup(e._toSVG(),{reviver:i,withShadow:!0,additionalTransform:vo(this.calcOwnMatrix())}):t}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(i){let{textBgRects:t,textSpans:e}=i;const n=this.getSvgTextDecoration(this);return[t.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(aA,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.join(""),`</text>
`]}_getSVGTextAndBg(i,t){const e=[],n=[];let a,o=i;this.backgroundColor&&n.push(...Zg(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let c=0,h=this._textLines.length;c<h;c++)a=this._getLineLeftOffset(c),this.direction==="rtl"&&(a+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",c))&&this._setSVGTextLineBg(n,c,t+a,o),this._setSVGTextLineText(e,c,t+a,o),o+=this.getHeightOfLine(c);return{textSpans:e,textBgRects:n}}_createTextCharSpan(i,t,e,n,a){const o=It.NUM_FRACTION_DIGITS,c=this.getSvgSpanStyles(t,i!==i.trim()||!!i.match(rA)),h=c?'style="'.concat(c,'"'):"",f=t.deltaY,d=f?' dy="'.concat(ce(f,o),'" '):"",{angle:m,renderLeft:y,renderTop:v,width:b}=a;let S="";if(y!==void 0){const C=b/2;m&&(S=' rotate="'.concat(ce(Ys(m),o),'"'));const _=na({angle:Ys(m)});_[4]=y,_[5]=v;const w=new G(-C,0).transform(_);e=w.x,n=w.y}return'<tspan x="'.concat(ce(e,o),'" y="').concat(ce(n,o),'" ').concat(d).concat(S).concat(h,">").concat(WS(i),"</tspan>")}_setSVGTextLineText(i,t,e,n){const a=this.getHeightOfLine(t),o=this.textAlign.includes(Ls),c=this._textLines[t];let h,f,d,m,y,v="",b=0;n+=a*(1-this._fontSizeFraction)/this.lineHeight;for(let S=0,C=c.length-1;S<=C;S++)y=S===C||this.charSpacing||this.path,v+=c[S],d=this.__charBounds[t][S],b===0?(e+=d.kernedWidth-d.width,b+=d.width):b+=d.kernedWidth,o&&!y&&this._reSpaceAndTab.test(c[S])&&(y=!0),y||(h=h||this.getCompleteStyleDeclaration(t,S),f=this.getCompleteStyleDeclaration(t,S+1),y=nf(h,f,!0)),y&&(m=this._getStyleDeclaration(t,S),i.push(this._createTextCharSpan(v,m,e,n,d)),v="",h=f,this.direction==="rtl"?e-=b:e+=b,b=0)}_setSVGTextLineBg(i,t,e,n){const a=this._textLines[t],o=this.getHeightOfLine(t)/this.lineHeight;let c,h=0,f=0,d=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let m=0;m<a.length;m++){const{left:y,width:v,kernedWidth:b}=this.__charBounds[t][m];c=this.getValueOfPropertyAt(t,m,"textBackgroundColor"),c!==d?(d&&i.push(...Zg(d,e+f,n,h,o)),f=y,h=v,d=c):h+=b}c&&i.push(...Zg(d,e+f,n,h,o))}_getSVGLineTopOffset(i){let t,e=0;for(t=0;t<i;t++)e+=this.getHeightOfLine(t);const n=this.getHeightOfLine(t);return{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(i){return"".concat(super.getSvgStyles(i)," white-space: pre;")}getSvgSpanStyles(i,t){const{fontFamily:e,strokeWidth:n,stroke:a,fill:o,fontSize:c,fontStyle:h,fontWeight:f,deltaY:d}=i,m=this.getSvgTextDecoration(i);return[a?Wl(gn,a):"",n?"stroke-width: ".concat(n,"; "):"",e?"font-family: ".concat(e.includes("'")||e.includes('"')?e:"'".concat(e,"'"),"; "):"",c?"font-size: ".concat(c,"px; "):"",h?"font-style: ".concat(h,"; "):"",f?"font-weight: ".concat(f,"; "):"",m&&"text-decoration: ".concat(m,"; "),o?Wl(Me,o):"",d?"baseline-shift: ".concat(-d,"; "):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(i){return["overline","underline","line-through"].filter(t=>i[t.replace("-","")]).join(" ")}}]),dt.setClass(As),dt.setSVGClass(As);let lA=class{constructor(t){B(this,"target",void 0),B(this,"__mouseDownInPlace",!1),B(this,"__dragStartFired",!1),B(this,"__isDraggingOver",!1),B(this,"__dragStartSelection",void 0),B(this,"__dragImageDisposer",void 0),B(this,"_dispose",void 0),this.target=t;const e=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{e.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(t){const e=this.target,n=e.getSelectionStartFromPointer(t);return e.isEditing&&n>=e.selectionStart&&n<=e.selectionEnd&&e.selectionStart<e.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const e=this.isActive();return e&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,e}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,e){var n;let{selectionStart:a,selectionEnd:o}=e;const c=this.target,h=c.canvas,f=new G(c.flipX?-1:1,c.flipY?-1:1),d=c._getCursorBoundaries(a),m=new G(d.left+d.leftOffset,d.top+d.topOffset).multiply(f).transform(c.calcTransformMatrix()),y=h.getScenePoint(t).subtract(m),v=c.getCanvasRetinaScaling(),b=c.getBoundingRect(),S=m.subtract(new G(b.left,b.top)),C=h.viewportTransform,_=S.add(y).transform(C,!0),w=c.backgroundColor,T=Lp(c.styles);c.backgroundColor="";const E={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};c.setSelectionStyles(E,0,a),c.setSelectionStyles(E,o,c.text.length),c.dirty=!0;const k=c.toCanvasElement({enableRetinaScaling:h.enableRetinaScaling,viewportTransform:!0});c.backgroundColor=w,c.styles=T,c.dirty=!0,Bh(k,{position:"fixed",left:"".concat(-k.width,"px"),border:dn,width:"".concat(k.width/v,"px"),height:"".concat(k.height/v,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{k.remove()},gs(t.target||this.target.hiddenTextarea).body.appendChild(k),(n=t.dataTransfer)===null||n===void 0||n.setDragImage(k,_.x,_.y)}onDragStart(t){this.__dragStartFired=!0;const e=this.target,n=this.isActive();if(n&&t.dataTransfer){const a=this.__dragStartSelection={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd},o=e._text.slice(a.selectionStart,a.selectionEnd).join(""),c=j({text:e.text,value:o},a);t.dataTransfer.setData("text/plain",o),t.dataTransfer.setData("application/fabric",JSON.stringify({value:o,styles:e.getSelectionStyles(a.selectionStart,a.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,c)}return e.abortCursorAnimation(),n}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const e=this.target.getSelectionStartFromPointer(t),n=this.__dragStartSelection;return e<n.selectionStart||e>n.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e}=t;const n=this.targetCanDrop(e);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e}=t,n=this.targetCanDrop(e);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(e.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var e;const{e:n}=t,a=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let o=(e=n.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain");if(o&&!a){const c=this.target,h=c.canvas;let f=c.getSelectionStartFromPointer(n);const{styles:d}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},m=o[Math.max(0,o.length-1)],y=0;if(this.__dragStartSelection){const v=this.__dragStartSelection.selectionStart,b=this.__dragStartSelection.selectionEnd;f>v&&f<=b?f=v:f>b&&(f-=b-v),c.removeChars(v,b),delete this.__dragStartSelection}c._reNewline.test(m)&&(c._reNewline.test(c._text[f])||f===c._text.length)&&(o=o.trimEnd()),t.didDrop=!0,t.dropTarget=c,c.insertChars(o,d,f),h.setActiveObject(c),c.enterEditing(n),c.selectionStart=Math.min(f+y,c._text.length),c.selectionEnd=Math.min(c.selectionStart+o.length,c._text.length),c.hiddenTextarea.value=c.text,c._updateTextarea(),c.hiddenTextarea.focus(),c.fire(Ch,{index:f+y,action:"drop"}),h.fire("text:changed",{target:c}),h.contextTopDirty=!0,h.requestRenderAll()}}dragEndHandler(t){let{e}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const a=this.target,o=this.target.canvas,{selectionStart:c,selectionEnd:h}=this.__dragStartSelection,f=((n=e.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||dn;f===dn?(a.selectionStart=c,a.selectionEnd=h,a._updateTextarea(),a.hiddenTextarea.focus()):(a.clearContextTop(),f==="move"&&(a.removeChars(c,h),a.selectionStart=a.selectionEnd=c,a.hiddenTextarea&&(a.hiddenTextarea.value=a.text),a._updateTextarea(),a.fire(Ch,{index:c,action:"dragend"}),o.fire("text:changed",{target:a}),o.requestRenderAll()),a.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}};const qb=/[ \n\.,;!\?\-]/;let cA=class extends As{constructor(){super(...arguments),B(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:e,duration:n,delay:a,onComplete:o}=t;return kp({startValue:this._currentCursorOpacity,endValue:e,duration:n,delay:a,onComplete:o,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:c=>{this._currentCursorOpacity=c,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(t||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var t;(t=this._currentTickCompleteState)===null||t===void 0||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach(e=>{e&&!e.isDone()&&(t=!0,e.abort())}),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(t=>!t||t.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let e=0,n=t-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n--;for(;/\S/.test(this._text[n])&&n>-1;)e++,n--;return t-e}findWordBoundaryRight(t){let e=0,n=t;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e}findLineBoundaryLeft(t){let e=0,n=t-1;for(;!/\n/.test(this._text[n])&&n>-1;)e++,n--;return t-e}findLineBoundaryRight(t){let e=0,n=t;for(;!/\n/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e}searchWordBoundary(t,e){const n=this._text;let a=t>0&&this._reSpace.test(n[t])&&(e===-1||!yp.test(n[t-1]))?t-1:t,o=n[a];for(;a>0&&a<n.length&&!qb.test(o);)a+=e,o=n[a];return e===-1&&qb.test(o)&&a++,a}selectWord(t){var e;t=(e=t)!==null&&e!==void 0?e:this.selectionStart;const n=this.searchWordBoundary(t,-1),a=Math.max(n,this.searchWordBoundary(t,1));this.selectionStart=n,this.selectionEnd=a,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){var e;t=(e=t)!==null&&e!==void 0?e:this.selectionStart;const n=this.findLineBoundaryLeft(t),a=this.findLineBoundaryRight(t);this.selectionStart=n,this.selectionEnd=a,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(t){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const e=this.hiddenTextarea;gs(e).activeElement!==e&&e.focus();const n=this.getSelectionStartFromPointer(t),a=this.selectionStart,o=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&a!==o||a!==n&&o!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===a&&this.selectionEnd===o||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,e,n){const a=n.slice(0,t),o=this.graphemeSplit(a).length;if(t===e)return{selectionStart:o,selectionEnd:o};const c=n.slice(t,e);return{selectionStart:o,selectionEnd:o+this.graphemeSplit(c).length}}fromGraphemeToStringSelection(t,e,n){const a=n.slice(0,t).join("").length;return t===e?{selectionStart:a,selectionEnd:a}:{selectionStart:a,selectionEnd:a+n.slice(t,e).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const e=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),n=this.get2DCursorLocation(t),a=n.lineIndex,o=n.charIndex,c=this.getValueOfPropertyAt(a,o,"fontSize")*this.lineHeight,h=e.leftOffset,f=this.getCanvasRetinaScaling(),d=this.canvas.upperCanvasEl,m=d.width/f,y=d.height/f,v=m-c,b=y-c,S=new G(e.left+h,e.top+e.topOffset+c).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new G(d.clientWidth/m,d.clientHeight/y));return S.x<0&&(S.x=0),S.x>v&&(S.x=v),S.y<0&&(S.y=0),S.y>b&&(S.y=b),S.x+=this.canvas._offset.left,S.y+=this.canvas._offset.top,{left:"".concat(S.x,"px"),top:"".concat(S.y,"px"),fontSize:"".concat(c,"px"),charHeight:c}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const t=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),t&&this.fire(Th),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,e){const{lineIndex:n,charIndex:a}=this.get2DCursorLocation(t,!0),{lineIndex:o,charIndex:c}=this.get2DCursorLocation(e,!0);if(n!==o){if(this.styles[n])for(let h=a;h<this._unwrappedTextLines[n].length;h++)delete this.styles[n][h];if(this.styles[o])for(let h=c;h<this._unwrappedTextLines[o].length;h++){const f=this.styles[o][h];f&&(this.styles[n]||(this.styles[n]={}),this.styles[n][a+h-c]=f)}for(let h=n+1;h<=o;h++)delete this.styles[h];this.shiftLineStyles(o,n-o)}else if(this.styles[n]){const h=this.styles[n],f=c-a;for(let d=a;d<c;d++)delete h[d];for(const d in this.styles[n]){const m=parseInt(d,10);m>=c&&(h[m-f]=h[d],delete h[d])}}}shiftLineStyles(t,e){const n=Object.assign({},this.styles);for(const a in this.styles){const o=parseInt(a,10);o>t&&(this.styles[o+e]=n[o],n[o-e]||delete this.styles[o])}}insertNewlineStyleObject(t,e,n,a){const o={},c=this._unwrappedTextLines[t].length,h=c===e;let f=!1;n||(n=1),this.shiftLineStyles(t,n);const d=this.styles[t]?this.styles[t][e===0?e:e-1]:void 0;for(const y in this.styles[t]){const v=parseInt(y,10);v>=e&&(f=!0,o[v-e]=this.styles[t][y],h&&e===0||delete this.styles[t][y])}let m=!1;for(f&&!h&&(this.styles[t+n]=o,m=!0),(m||c>e)&&n--;n>0;)a&&a[n-1]?this.styles[t+n]={0:j({},a[n-1])}:d?this.styles[t+n]={0:j({},d)}:delete this.styles[t+n],n--;this._forceClearCache=!0}insertCharStyleObject(t,e,n,a){this.styles||(this.styles={});const o=this.styles[t],c=o?j({},o):{};n||(n=1);for(const f in c){const d=parseInt(f,10);d>=e&&(o[d+n]=c[d],c[d-n]||delete o[d])}if(this._forceClearCache=!0,a){for(;n--;)Object.keys(a[n]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+n]=j({},a[n]));return}if(!o)return;const h=o[e?e-1:1];for(;h&&n--;)this.styles[t][e+n]=j({},h)}insertNewStyleBlock(t,e,n){const a=this.get2DCursorLocation(e,!0),o=[0];let c,h=0;for(let f=0;f<t.length;f++)t[f]===`
`?(h++,o[h]=0):o[h]++;for(o[0]>0&&(this.insertCharStyleObject(a.lineIndex,a.charIndex,o[0],n),n=n&&n.slice(o[0]+1)),h&&this.insertNewlineStyleObject(a.lineIndex,a.charIndex+o[0],h),c=1;c<h;c++)o[c]>0?this.insertCharStyleObject(a.lineIndex+c,0,o[c],n):n&&this.styles[a.lineIndex+c]&&n[0]&&(this.styles[a.lineIndex+c][0]=n[0]),n=n&&n.slice(o[c]+1);o[c]>0&&this.insertCharStyleObject(a.lineIndex+c,0,o[c],n)}removeChars(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t+1;this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,e,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;a>n&&this.removeStyleFromTo(n,a);const o=this.graphemeSplit(t);this.insertNewStyleBlock(o,n,e),this._text=[...this._text.slice(0,n),...o,...this._text.slice(a)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,e,n){n<=t?(e===t?this._selectionDirection=Qt:this._selectionDirection===Te&&(this._selectionDirection=Qt,this.selectionEnd=t),this.selectionStart=n):n>t&&n<e?this._selectionDirection===Te?this.selectionEnd=n:this.selectionStart=n:(e===t?this._selectionDirection=Te:this._selectionDirection===Qt&&(this._selectionDirection=Te,this.selectionStart=e),this.selectionEnd=n)}},uA=class extends cA{initHiddenTextarea(){const t=this.canvas&&gs(this.canvas.getElement())||So(),e=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(c=>{let[h,f]=c;return e.setAttribute(h,f)});const{top:n,left:a,fontSize:o}=this._calcTextareaPosition();e.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(a,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(o,";"),(this.hiddenTextareaContainer||t.body).appendChild(e),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(c=>{let[h,f]=c;return e.addEventListener(h,this[f].bind(this))}),this.hiddenTextarea=e}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const e=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(t){const e=this.fromPaste,{value:n,selectionStart:a,selectionEnd:o}=this.hiddenTextarea;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const c=()=>{this.updateFromTextArea(),this.fire(Ch),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void c();const h=this._splitTextIntoLines(n).graphemeText,f=this._text.length,d=h.length,m=this.selectionStart,y=this.selectionEnd,v=m!==y;let b,S,C,_,w=d-f;const T=this.fromStringToGraphemeSelection(a,o,n),E=m>T.selectionStart;v?(S=this._text.slice(m,y),w+=y-m):d<f&&(S=E?this._text.slice(y+w,y):this._text.slice(m,m-w));const k=h.slice(T.selectionEnd-w,T.selectionEnd);if(S&&S.length&&(k.length&&(b=this.getSelectionStyles(m,m+1,!1),b=k.map(()=>b[0])),v?(C=m,_=y):E?(C=y-S.length,_=y):(C=y,_=y+S.length),this.removeStyleFromTo(C,_)),k.length){const{copyPasteData:A}=Fs();e&&k.join("")===A.copiedText&&!It.disableStyleCopyPaste&&(b=A.copiedTextStyle),this.insertNewStyleBlock(k,m,b)}c()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:e}=t;const{selectionStart:n,selectionEnd:a}=e;this.compositionStart=n,this.compositionEnd=a,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=Fs();t.copiedText=this.getSelectedText(),It.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,e){let n,a=this._getLineLeftOffset(t);return e>0&&(n=this.__charBounds[t][e-1],a+=n.left+n.width),a}getDownCursorOffset(t,e){const n=this._getSelectionForOffset(t,e),a=this.get2DCursorLocation(n),o=a.lineIndex;if(o===this._textLines.length-1||t.metaKey||t.keyCode===34)return this._text.length-n;const c=a.charIndex,h=this._getWidthBeforeCursor(o,c),f=this._getIndexOnLine(o+1,h);return this._textLines[o].slice(c).length+f+1+this.missingNewlineOffset(o)}_getSelectionForOffset(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,e){const n=this._getSelectionForOffset(t,e),a=this.get2DCursorLocation(n),o=a.lineIndex;if(o===0||t.metaKey||t.keyCode===33)return-n;const c=a.charIndex,h=this._getWidthBeforeCursor(o,c),f=this._getIndexOnLine(o-1,h),d=this._textLines[o].slice(0,c),m=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+f-d.length+(1-m)}_getIndexOnLine(t,e){const n=this._textLines[t];let a,o,c=this._getLineLeftOffset(t),h=0;for(let f=0,d=n.length;f<d;f++)if(a=this.__charBounds[t][f].width,c+=a,c>e){o=!0;const m=c-a,y=c,v=Math.abs(m-e);h=Math.abs(y-e)<v?f:f-1;break}return o||(h=n.length-1),h}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,e){const n=this["get".concat(t,"CursorOffset")](e,this._selectionDirection===Te);if(e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const a=this.text.length;this.selectionStart=Zr(0,this.selectionStart,a),this.selectionEnd=Zr(0,this.selectionEnd,a),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const e=this._selectionDirection===Qt?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),t!==0}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),t!==0}moveCursorLeft(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",t)}_move(t,e,n){let a;if(t.altKey)a=this["findWordBoundary".concat(n)](this[e]);else{if(!t.metaKey&&t.keyCode!==35&&t.keyCode!==36)return this[e]+=n==="Left"?-1:1,!0;a=this["findLineBoundary".concat(n)](this[e])}return a!==void 0&&this[e]!==a&&(this[e]=a,!0)}_moveLeft(t,e){return this._move(t,e,"Left")}_moveRight(t,e){return this._move(t,e,"Right")}moveCursorLeftWithoutShift(t){let e=!0;return this._selectionDirection=Qt,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e}moveCursorLeftWithShift(t){return this._selectionDirection===Te&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=Qt,this._moveLeft(t,"selectionStart")):void 0}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,e){const n="moveCursor".concat(t).concat(e.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){return this._selectionDirection===Qt&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Te,this._moveRight(t,"selectionEnd")):void 0}moveCursorRightWithoutShift(t){let e=!0;return this._selectionDirection=Te,this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e}};const Vb=i=>!!i.button;let hA=class extends uA{constructor(){super(...arguments),B(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new lA(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}doubleClickHandler(t){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}tripleClickHandler(t){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}_mouseDownHandler(t){let{e,alreadySelected:n}=t;this.canvas&&this.editable&&!Vb(e)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(e)||(this.canvas.textEditingManager.register(this),n&&(this.inCompositionMode=!1,this.setCursorByClick(e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=n||this.isEditing)))}mouseUpHandler(t){let{e,transform:n}=t;const a=this.draggableTextDelegate.end(e);if(this.canvas){this.canvas.textEditingManager.unregister(this);const o=this.canvas._activeObject;if(o&&o!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||Vb(e)||a||this.selected&&!this.getActiveControl()&&(this.enterEditing(e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(t){const e=this.getSelectionStartFromPointer(t),n=this.selectionStart,a=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(n,a,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const e=this.canvas.getScenePoint(t).transform(wn(this.calcTransformMatrix())).add(new G(-this._getLeftOffset(),-this._getTopOffset()));let n=0,a=0,o=0;for(let d=0;d<this._textLines.length&&n<=e.y;d++)n+=this.getHeightOfLine(d),o=d,d>0&&(a+=this._textLines[d-1].length+this.missingNewlineOffset(d-1));let c=Math.abs(this._getLineLeftOffset(o));const h=this._textLines[o].length,f=this.__charBounds[o];for(let d=0;d<h;d++){const m=c+f[d].kernedWidth;if(e.x<=m){Math.abs(e.x-m)<=Math.abs(e.x-c)&&a++;break}c=m,a++}return Math.min(this.flipX?h-a:a,this._text.length)}};const Vu="moveCursorUp",Gu="moveCursorDown",Iu="moveCursorLeft",Wu="moveCursorRight",Qu="exitEditing",Gb=(i,t)=>{const e=t.getRetinaScaling();i.setTransform(e,0,0,e,0,0);const n=t.viewportTransform;i.transform(n[0],n[1],n[2],n[3],n[4],n[5])},fA=j({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Qu,27:Qu,33:Vu,34:Gu,35:Wu,36:Iu,37:Iu,38:Vu,39:Wu,40:Gu},keysMapRtl:{9:Qu,27:Qu,33:Vu,34:Gu,35:Iu,36:Wu,37:Wu,38:Vu,39:Iu,40:Gu},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});let Za=class Mm extends hA{static getDefaults(){return j(j({},super.getDefaults()),Mm.ownDefaults)}get type(){const t=super.type;return t==="itext"?"i-text":t}constructor(t,e){super(t,j(j({},Mm.ownDefaults),e)),this.initBehavior()}_set(t,e){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=e,this):(t==="canvas"&&(this.canvas instanceof zh&&this.canvas.textEditingManager.remove(this),e instanceof zh&&e.textEditingManager.add(this)),super._set(t,e))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,e,n)}setSelectionStyles(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,e,n)}get2DCursorLocation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,e)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const e=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(t);return this.isEditing=e,n}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const t=this.clearContextTop(!0);if(!t)return;const e=this._getCursorBoundaries(),n=this.findAncestorsWithClipPath(),a=n.length>0;let o,c=t;if(a){o=Pn(t.canvas),c=o.getContext("2d"),Gb(c,this.canvas);const h=this.calcTransformMatrix();c.transform(h[0],h[1],h[2],h[3],h[4],h[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(c,e):this.renderCursor(c,e),a)for(const h of n){const f=h.clipPath,d=Pn(t.canvas),m=d.getContext("2d");if(Gb(m,this.canvas),!f.absolutePositioned){const y=h.calcTransformMatrix();m.transform(y[0],y[1],y[2],y[3],y[4],y[5])}f.transform(m),f.drawObject(m,!0,{}),this.drawClipPathOnCache(c,f,d)}a&&(t.setTransform(1,0,0,1,0,0),t.drawImage(o,0,0)),this.canvas.contextTopDirty=!0,t.restore()}findAncestorsWithClipPath(){const t=[];let e=this;for(;e;)e.clipPath&&t.push(e),e=e.parent;return t}_getCursorBoundaries(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),a=this._getTopOffset(),o=this._getCursorBoundariesOffsets(t,e);return{left:n,top:a,leftOffset:o.left,topOffset:o.top}}_getCursorBoundariesOffsets(t,e){return e?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let e=0,n=0;const{charIndex:a,lineIndex:o}=this.get2DCursorLocation(t);for(let d=0;d<o;d++)e+=this.getHeightOfLine(d);const c=this._getLineLeftOffset(o),h=this.__charBounds[o][a];h&&(n=h.left),this.charSpacing!==0&&a===this._textLines[o].length&&(n-=this._getWidthOfCharSpacing());const f={top:e,left:c+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===Te||this.textAlign===Ls||this.textAlign===Yl?f.left*=-1:this.textAlign===Qt||this.textAlign===Nh?f.left=c-(n>0?n:0):this.textAlign!==Rt&&this.textAlign!==Xl||(f.left=c-(n>0?n:0))),f}renderCursorAt(t){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(t,!0),t)}renderCursor(t,e){this._renderCursor(t,e,this.selectionStart)}getCursorRenderingData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(t);const n=this.get2DCursorLocation(t),a=n.lineIndex,o=n.charIndex>0?n.charIndex-1:0,c=this.getValueOfPropertyAt(a,o,"fontSize"),h=this.getObjectScaling().x*this.canvas.getZoom(),f=this.cursorWidth/h,d=this.getValueOfPropertyAt(a,o,"deltaY"),m=e.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(a)/this.lineHeight-c*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(a,o,"fill"),opacity:this._currentCursorOpacity,left:e.left+e.leftOffset-f/2,top:m+e.top+d,width:f,height:c}}_renderCursor(t,e,n){const{color:a,opacity:o,left:c,top:h,width:f,height:d}=this.getCursorRenderingData(n,e);t.fillStyle=a,t.globalAlpha=o,t.fillRect(c,h,f,d)}renderSelection(t,e){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,n,e)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const e=this.getSelectionStartFromPointer(t);this.renderCursorAt(e)}_renderSelection(t,e,n){const a=e.selectionStart,o=e.selectionEnd,c=this.textAlign.includes(Ls),h=this.get2DCursorLocation(a),f=this.get2DCursorLocation(o),d=h.lineIndex,m=f.lineIndex,y=h.charIndex<0?0:h.charIndex,v=f.charIndex<0?0:f.charIndex;for(let b=d;b<=m;b++){const S=this._getLineLeftOffset(b)||0;let C=this.getHeightOfLine(b),_=0,w=0,T=0;if(b===d&&(w=this.__charBounds[d][y].left),b>=d&&b<m)T=c&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===m)if(v===0)T=this.__charBounds[m][v].left;else{const F=this._getWidthOfCharSpacing();T=this.__charBounds[m][v-1].left+this.__charBounds[m][v-1].width-F}_=C,(this.lineHeight<1||b===m&&this.lineHeight>1)&&(C/=this.lineHeight);let E=n.left+S+w,k=C,A=0;const R=T-w;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",k=1,A=C):t.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Te||this.textAlign===Ls||this.textAlign===Yl?E=this.width-E-R:this.textAlign===Qt||this.textAlign===Nh?E=n.left+S-T:this.textAlign!==Rt&&this.textAlign!==Xl||(E=n.left+S-T)),t.fillRect(E,n.top+n.topOffset+A,R,k),n.topOffset+=_}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,Me)}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}};B(Za,"ownDefaults",fA),B(Za,"type","IText"),dt.setClass(Za),dt.setClass(Za,"i-text");let Nl=class Rm extends Za{static getDefaults(){return j(j({},super.getDefaults()),Rm.ownDefaults)}constructor(t,e){super(t,j(j({},Rm.ownDefaults),e))}static createControls(){return{controls:QO()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Ls)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let e=0,n=0,a=0;const o={};for(let c=0;c<t.graphemeLines.length;c++)t.graphemeText[a]===`
`&&c>0?(n=0,a++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[a])&&c>0&&(n++,a++),o[c]={line:e,offset:n},a+=t.graphemeLines[c].length,n+=t.graphemeLines[c].length;return o}styleHas(t,e){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];n&&(e=n.line)}return super.styleHas(t,e)}isEmptyStyles(t){if(!this.styles)return!0;let e,n=0,a=t+1,o=!1;const c=this._styleMap[t],h=this._styleMap[t+1];c&&(t=c.line,n=c.offset),h&&(a=h.line,o=a===t,e=h.offset);const f=t===void 0?this.styles:{line:this.styles[t]};for(const d in f)for(const m in f[d]){const y=parseInt(m,10);if(y>=n&&(!o||y<e))for(const v in f[d][m])return!1}return!0}_getStyleDeclaration(t,e){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[t];if(!n)return{};t=n.line,e=n.offset+e}return super._getStyleDeclaration(t,e)}_setStyleDeclaration(t,e,n){const a=this._styleMap[t];super._setStyleDeclaration(a.line,a.offset+e,n)}_deleteStyleDeclaration(t,e){const n=this._styleMap[t];super._deleteStyleDeclaration(n.line,n.offset+e)}_getLineStyle(t){const e=this._styleMap[t];return!!this.styles[e.line]}_setLineStyle(t){const e=this._styleMap[t];super._setLineStyle(e.line)}_wrapText(t,e){this.isWrapping=!0;const n=this.getGraphemeDataForRender(t),a=[];for(let o=0;o<n.wordsData.length;o++)a.push(...this._wrapLine(o,e,n));return this.isWrapping=!1,a}getGraphemeDataForRender(t){const e=this.splitByGrapheme,n=e?"":" ";let a=0;return{wordsData:t.map((o,c)=>{let h=0;const f=e?this.graphemeSplit(o):this.wordSplit(o);return f.length===0?[{word:[],width:0}]:f.map(d=>{const m=e?[d]:this.graphemeSplit(d),y=this._measureWord(m,c,h);return a=Math.max(y,a),h+=m.length+n.length,{word:m,width:y}})}),largestWordWidth:a}}_measureWord(t,e){let n,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=0;for(let c=0,h=t.length;c<h;c++)o+=this._getGraphemeBox(t[c],e,c+a,n,!0).kernedWidth,n=t[c];return o}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,e,n){let{largestWordWidth:a,wordsData:o}=n,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const h=this._getWidthOfCharSpacing(),f=this.splitByGrapheme,d=[],m=f?"":" ";let y=0,v=[],b=0,S=0,C=!0;e-=c;const _=Math.max(e,a,this.dynamicMinWidth),w=o[t];let T;for(b=0,T=0;T<w.length;T++){const{word:E,width:k}=w[T];b+=E.length,y+=S+k-h,y>_&&!C?(d.push(v),v=[],y=k,C=!0):y+=h,C||f||v.push(m),v=v.concat(E),S=f?0:this._measureWord([m],t,b),b++,C=!1}return T&&d.push(v),a+c>this.dynamicMinWidth&&(this.dynamicMinWidth=a-h+c),d}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,e){return this.splitByGrapheme&&!e?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const e=super._splitTextIntoLines(t),n=this._wrapText(e.lines,this.width),a=new Array(n.length);for(let o=0;o<n.length;o++)a[o]=n[o].join("");return e.lines=a,e.graphemeLines=n,e}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const e in this._styleMap){const n=parseInt(e,10);if(this._textLines[n]){const a=this._styleMap[e].line;t.set("".concat(a),!0)}}for(const e in this.styles)t.has(e)||delete this.styles[e]}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}};B(Nl,"type","Textbox"),B(Nl,"textLayoutProperties",[...Za.textLayoutProperties,"width"]),B(Nl,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),dt.setClass(Nl);let Ib=class extends sf{shouldPerformLayout(t){return!!t.target.clipPath&&super.shouldPerformLayout(t)}shouldLayoutClipPath(){return!1}calcLayoutResult(t,e){const{target:n}=t,{clipPath:a,group:o}=n;if(!a||!this.shouldPerformLayout(t))return;const{width:c,height:h}=Hs(ZS(n,a)),f=new G(c,h);if(a.absolutePositioned)return{center:Qr(a.getRelativeCenterPoint(),void 0,o?o.calcTransformMatrix():void 0),size:f};{const d=a.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(t)){const{center:m=new G,correction:y=new G}=this.calcBoundingBox(e,t)||{};return{center:m.add(d),correction:y.subtract(d),size:f}}return{center:n.getRelativeCenterPoint().add(d),size:f}}}};B(Ib,"type","clip-path"),dt.setClass(Ib);let Wb=class extends sf{getInitialSize(t,e){let{target:n}=t,{size:a}=e;return new G(n.width||a.x,n.height||a.y)}};B(Wb,"type","fixed"),dt.setClass(Wb);let dA=class extends Kl{subscribeTargets(t){const e=t.target;t.targets.reduce((n,a)=>(a.parent&&n.add(a.parent),n),new Set).forEach(n=>{n.layoutManager.subscribeTargets({target:n,targets:[e]})})}unsubscribeTargets(t){const e=t.target,n=e.getObjects();t.targets.reduce((a,o)=>(o.parent&&a.add(o.parent),a),new Set).forEach(a=>{!n.some(o=>o.parent===a)&&a.layoutManager.unsubscribeTargets({target:a,targets:[e]})})}},Nr=class km extends ar{static getDefaults(){return j(j({},super.getDefaults()),km.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,km.ownDefaults),this.setOptions(e);const{left:n,top:a,layoutManager:o}=e;this.groupInit(t,{left:n,top:a,layoutManager:o??new dA})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...e):e.forEach(a=>{const o=this._objects.findIndex(h=>h.isInFrontOf(a)),c=o===-1?this.size():o;this.insertAt(c,a)})}canEnterGroup(t){return this.getObjects().some(e=>e.isDescendantOf(t)||t.isDescendantOf(e))?(di("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(t)}enterGroup(t,e){t.parent&&t.parent===t.group?t.parent._exitGroup(t):t.group&&t.parent!==t.group&&t.group.remove(t),this._enterGroup(t,e)}exitGroup(t,e){this._exitGroup(t,e),t.parent&&t.parent._enterGroup(t,!0)}_onAfterObjectsChange(t,e){super._onAfterObjectsChange(t,e);const n=new Set;e.forEach(a=>{const{parent:o}=a;o&&n.add(o)}),t===zp?n.forEach(a=>{a._onAfterObjectsChange(kh,e)}):n.forEach(a=>{a._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,e,n){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const a=j(j({hasControls:!1},n),{},{forActiveSelection:!0});for(let o=0;o<this._objects.length;o++)this._objects[o]._renderControls(t,a);super._renderControls(t,e),t.restore()}};B(Nr,"type","ActiveSelection"),B(Nr,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),dt.setClass(Nr),dt.setClass(Nr,"activeSelection");let gA=class{constructor(){B(this,"resources",{})}applyFilters(t,e,n,a,o){const c=o.getContext("2d");if(!c)return;c.drawImage(e,0,0,n,a);const h={sourceWidth:n,sourceHeight:a,imageData:c.getImageData(0,0,n,a),originalEl:e,originalImageData:c.getImageData(0,0,n,a),canvasEl:o,ctx:c,filterBackend:this};t.forEach(d=>{d.applyTo(h)});const{imageData:f}=h;return f.width===n&&f.height===a||(o.width=f.width,o.height=f.height),c.putImageData(f,0,0),h}},A_=class{constructor(){let{tileSize:t=It.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};B(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),B(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,e){this.dispose(),this.createWebGLCanvas(t,e)}createWebGLCanvas(t,e){const n=Pn({width:t,height:e}),a=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});a&&(a.clearColor(0,0,0,0),this.canvas=n,this.gl=a)}applyFilters(t,e,n,a,o,c){const h=this.gl,f=o.getContext("2d");if(!h||!f)return;let d;c&&(d=this.getCachedTexture(c,e));const m={originalWidth:e.width||e.naturalWidth||0,originalHeight:e.height||e.naturalHeight||0,sourceWidth:n,sourceHeight:a,destinationWidth:n,destinationHeight:a,context:h,sourceTexture:this.createTexture(h,n,a,d?void 0:e),targetTexture:this.createTexture(h,n,a),originalTexture:d||this.createTexture(h,n,a,d?void 0:e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},y=h.createFramebuffer();return h.bindFramebuffer(h.FRAMEBUFFER,y),t.forEach(v=>{v&&v.applyTo(m)}),function(v){const b=v.targetCanvas,S=b.width,C=b.height,_=v.destinationWidth,w=v.destinationHeight;S===_&&C===w||(b.width=_,b.height=w)}(m),this.copyGLTo2D(h,m),h.bindTexture(h.TEXTURE_2D,null),h.deleteTexture(m.sourceTexture),h.deleteTexture(m.targetTexture),h.deleteFramebuffer(y),f.setTransform(1,0,0,1,0,0),m}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,e,n,a,o){const{NEAREST:c,TEXTURE_2D:h,RGBA:f,UNSIGNED_BYTE:d,CLAMP_TO_EDGE:m,TEXTURE_MAG_FILTER:y,TEXTURE_MIN_FILTER:v,TEXTURE_WRAP_S:b,TEXTURE_WRAP_T:S}=t,C=t.createTexture();return t.bindTexture(h,C),t.texParameteri(h,y,o||c),t.texParameteri(h,v,o||c),t.texParameteri(h,b,m),t.texParameteri(h,S,m),a?t.texImage2D(h,0,f,f,d,a):t.texImage2D(h,0,f,e,n,0,f,d,null),C}getCachedTexture(t,e,n){const{textureCache:a}=this;if(a[t])return a[t];{const o=this.createTexture(this.gl,e.width,e.height,e,n);return o&&(a[t]=o),o}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,e){const n=t.canvas,a=e.targetCanvas,o=a.getContext("2d");if(!o)return;o.translate(0,a.height),o.scale(1,-1);const c=n.height-a.height;o.drawImage(n,0,c,a.width,a.height,0,0,a.width,a.height)}copyGLTo2DPutImageData(t,e){const n=e.targetCanvas.getContext("2d"),a=e.destinationWidth,o=e.destinationHeight,c=a*o*4;if(!n)return;const h=new Uint8Array(this.imageBuffer,0,c),f=new Uint8ClampedArray(this.imageBuffer,0,c);t.readPixels(0,0,a,o,t.RGBA,t.UNSIGNED_BYTE,h);const d=new ImageData(f,a,o);n.putImageData(d,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,e={renderer:"",vendor:""};if(!t)return e;const n=t.getExtension("WEBGL_debug_renderer_info");if(n){const a=t.getParameter(n.UNMASKED_RENDERER_WEBGL),o=t.getParameter(n.UNMASKED_VENDOR_WEBGL);a&&(e.renderer=a.toLowerCase()),o&&(e.vendor=o.toLowerCase())}return this.gpuInfo=e,e}},tm;function mA(){const{WebGLProbe:i}=Fs();return i.queryWebGL(Ps()),It.enableGLFiltering&&i.isSupported(It.textureSize)?new A_({tileSize:It.textureSize}):new gA}function em(){return!tm&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(tm=mA()),tm}const pA=["filters","resizeFilter","src","crossOrigin","type"],D_=["cropX","cropY"];class Nn extends We{static getDefaults(){return j(j({},super.getDefaults()),Nn.ownDefaults)}constructor(t,e){super(),B(this,"_lastScaleX",1),B(this,"_lastScaleY",1),B(this,"_filterScalingX",1),B(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Nn.ownDefaults),this.setOptions(e),this.cacheKey="texture".concat(ur()),this.setElement(typeof t=="string"?(this.canvas&&gs(this.canvas.getElement())||So()).getElementById(t):t,e)}getElement(){return this._element}setElement(t){var e;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(n),(e=t.classList)===null||e===void 0||e.add(Nn.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const e=em(!1);e instanceof A_&&e.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(t=>{const e=this[t];e&&Fs().dispose(e),this[t]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||this.strokeWidth===0)return;const e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,-n),t.lineTo(e,-n),t.lineTo(e,n),t.lineTo(-e,n),t.lineTo(-e,-n),t.closePath()}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=[];return this.filters.forEach(n=>{n&&e.push(n.toObject())}),j(j({},super.toObject([...D_,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],e=this._element,n=-this.width/2,a=-this.height/2;let o=[],c=[],h="",f="";if(!e)return[];if(this.hasCrop()){const d=ur();o.push('<clipPath id="imageCrop_'+d+`">
`,'	<rect x="'+n+'" y="'+a+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),h=' clip-path="url(#imageCrop_'+d+')" '}if(this.imageSmoothing||(f=' image-rendering="optimizeSpeed"'),t.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(a-this.cropY,'" width="').concat(e.width||e.naturalWidth,'" height="').concat(e.height||e.naturalHeight,'"').concat(f).concat(h,`></image>
`)),this.stroke||this.strokeDashArray){const d=this.fill;this.fill=null,c=['	<rect x="'.concat(n,'" y="').concat(a,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=d}return o=this.paintFirst!==Me?o.concat(c,t):o.concat(t,c),o}getSrc(t){const e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src")||"":e.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:e,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Pl(t,{crossOrigin:e,signal:n}).then(a=>{e!==void 0&&this.set({crossOrigin:e}),this.setElement(a)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,e=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),a=n.x,o=n.y,c=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||a>e&&o>e)return this._element=c,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=a,void(this._lastScaleY=o);const h=Pn(c),{width:f,height:d}=c;this._element=h,this._lastScaleX=t.scaleX=a,this._lastScaleY=t.scaleY=o,em().applyFilters([t],c,f,d,this._element),this._filterScalingX=h.width/this._originalElement.width,this._filterScalingY=h.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(t=t.filter(o=>o&&!o.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),t.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const e=this._originalElement,n=e.naturalWidth||e.width,a=e.naturalHeight||e.height;if(this._element===this._originalElement){const o=Pn({width:n,height:a});this._element=o,this._filteredEl=o}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,a),this._lastScaleX=1,this._lastScaleY=1);em().applyFilters(t,this._originalElement,n,a,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const e=this._element;if(!e)return;const n=this._filterScalingX,a=this._filterScalingY,o=this.width,c=this.height,h=Math.max(this.cropX,0),f=Math.max(this.cropY,0),d=e.naturalWidth||e.width,m=e.naturalHeight||e.height,y=h*n,v=f*a,b=Math.min(o*n,d-y),S=Math.min(c*a,m-v),C=-o/2,_=-c/2,w=Math.min(o,d/n-h),T=Math.min(c,m/a-f);e&&t.drawImage(e,y,v,b,S,C,_,w,T)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=t||n.width,this.height=e||n.height}parsePreserveAspectRatioAttribute(){const t=Ap(this.preserveAspectRatio||""),e=this.width,n=this.height,a={width:e,height:n};let o,c=this._element.width,h=this._element.height,f=1,d=1,m=0,y=0,v=0,b=0;return!t||t.alignX===dn&&t.alignY===dn?(f=e/c,d=n/h):(t.meetOrSlice==="meet"&&(f=d=t_(this._element,a),o=(e-c*f)/2,t.alignX==="Min"&&(m=-o),t.alignX==="Max"&&(m=o),o=(n-h*d)/2,t.alignY==="Min"&&(y=-o),t.alignY==="Max"&&(y=o)),t.meetOrSlice==="slice"&&(f=d=e_(this._element,a),o=c-e/f,t.alignX==="Mid"&&(v=o/2),t.alignX==="Max"&&(v=o),o=h-n/d,t.alignY==="Mid"&&(b=o/2),t.alignY==="Max"&&(b=o),c=e/f,h=n/d)),{width:c,height:h,scaleX:f,scaleY:d,offsetLeft:m,offsetTop:y,cropX:v,cropY:b}}static fromObject(t,e){let{filters:n,resizeFilter:a,src:o,crossOrigin:c,type:h}=t,f=ge(t,pA);return Promise.all([Pl(o,j(j({},e),{},{crossOrigin:c})),n&&yo(n,e),a&&yo([a],e),dc(f,e)]).then(d=>{let[m,y=[],[v]=[],b={}]=d;return new this(m,j(j({},f),{},{src:o,filters:y,resizeFilter:v},b))})}static fromURL(t){let{crossOrigin:e=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return Pl(t,{crossOrigin:e,signal:n}).then(o=>new this(o,a))}static async fromElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const a=yi(t,this.ATTRIBUTE_NAMES,n);return this.fromURL(a["xlink:href"]||a.href,e,a).catch(o=>(di("log","Unable to parse Image",o),null))}}function nm(i){if(!xO.test(i.nodeName))return{};const t=i.getAttribute("viewBox");let e,n,a=1,o=1,c=0,h=0;const f=i.getAttribute("width"),d=i.getAttribute("height"),m=i.getAttribute("x")||0,y=i.getAttribute("y")||0,v=!(t&&Tb.test(t)),b=!f||!d||f==="100%"||d==="100%";let S="",C=0,_=0;if(v&&(m||y)&&i.parentNode&&i.parentNode.nodeName!=="#document"&&(S=" translate("+un(m||"0")+" "+un(y||"0")+") ",e=(i.getAttribute("transform")||"")+S,i.setAttribute("transform",e),i.removeAttribute("x"),i.removeAttribute("y")),v&&b)return{width:0,height:0};const w={width:0,height:0};if(v)return w.width=un(f),w.height=un(d),w;const T=t.match(Tb);c=-parseFloat(T[1]),h=-parseFloat(T[2]);const E=parseFloat(T[3]),k=parseFloat(T[4]);w.minX=c,w.minY=h,w.viewBoxWidth=E,w.viewBoxHeight=k,b?(w.width=E,w.height=k):(w.width=un(f),w.height=un(d),a=w.width/E,o=w.height/k);const A=Ap(i.getAttribute("preserveAspectRatio")||"");if(A.alignX!==dn&&(A.meetOrSlice==="meet"&&(o=a=a>o?o:a),A.meetOrSlice==="slice"&&(o=a=a>o?a:o),C=w.width-E*a,_=w.height-k*a,A.alignX==="Mid"&&(C/=2),A.alignY==="Mid"&&(_/=2),A.alignX==="Min"&&(C=0),A.alignY==="Min"&&(_=0)),a===1&&o===1&&c===0&&h===0&&m===0&&y===0)return w;if((m||y)&&i.parentNode.nodeName!=="#document"&&(S=" translate("+un(m||"0")+" "+un(y||"0")+") "),e=S+" matrix("+a+" 0 0 "+o+" "+(c*a+C)+" "+(h*o+_)+") ",i.nodeName==="svg"){for(n=i.ownerDocument.createElementNS(vm,"g");i.firstChild;)n.appendChild(i.firstChild);i.appendChild(n)}else n=i,n.removeAttribute("x"),n.removeAttribute("y"),e=n.getAttribute("transform")+e;return n.setAttribute("transform",e),w}B(Nn,"type","Image"),B(Nn,"cacheProperties",[...pi,...D_]),B(Nn,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),B(Nn,"CSS_CANVAS","canvas-img"),B(Nn,"ATTRIBUTE_NAMES",[...hr,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),dt.setClass(Nn),dt.setSVGClass(Nn);const Hh=i=>i.tagName.replace("svg:",""),yA=Zh(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);function M_(i,t){let e,n,a,o,c=[];for(a=0,o=t.length;a<o;a++)e=t[a],n=i.getElementsByTagNameNS("http://www.w3.org/2000/svg",e),c=c.concat(Array.from(n));return c}const vA=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],sm="xlink:href";function R_(i,t){var e;const n=((e=t.getAttribute(sm))===null||e===void 0?void 0:e.slice(1))||"",a=i.getElementById(n);if(a&&a.getAttribute(sm)&&R_(i,a),a&&(vA.forEach(o=>{const c=a.getAttribute(o);!t.hasAttribute(o)&&c&&t.setAttribute(o,c)}),!t.children.length)){const o=a.cloneNode(!0);for(;o.firstChild;)t.appendChild(o.firstChild)}t.removeAttribute(sm)}const bA=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"];function xA(i){const t=i.getElementsByTagName("style");let e,n;const a={};for(e=0,n=t.length;e<n;e++){const o=(t[e].textContent||"").replace(/\/\*[\s\S]*?\*\//g,"");o.trim()!==""&&o.split("}").filter((c,h,f)=>f.length>1&&c.trim()).forEach(c=>{if((c.match(/{/g)||[]).length>1&&c.trim().startsWith("@"))return;const h=c.split("{"),f={},d=h[1].trim().split(";").filter(function(m){return m.trim()});for(e=0,n=d.length;e<n;e++){const m=d[e].split(":"),y=m[0].trim(),v=m[1].trim();f[y]=v}(c=h[0].trim()).split(",").forEach(m=>{(m=m.replace(/^svg/i,"").trim())!==""&&(a[m]=j(j({},a[m]||{}),f))})})}return a}const Qb=i=>dt.getSVGClass(Hh(i).toLowerCase());class SA{constructor(t,e,n,a,o){this.elements=t,this.options=e,this.reviver=n,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=a,this.clipPaths=o,this.gradientDefs=function(c){const h=M_(c,bA),f={};let d=h.length;for(;d--;){const m=h[d];m.getAttribute("xlink:href")&&R_(c,m);const y=m.getAttribute("id");y&&(f[y]=m)}return f}(a),this.cssRules=xA(a)}parse(){return Promise.all(this.elements.map(t=>this.createObject(t)))}async createObject(t){const e=Qb(t);if(e){const n=await e.fromElement(t,this.options,this.cssRules);return this.resolveGradient(n,t,Me),this.resolveGradient(n,t,gn),n instanceof Nn&&n._originalElement?ph(n,n.parsePreserveAspectRatioAttribute()):ph(n),await this.resolveClipPath(n,t),this.reviver&&this.reviver(t,n),n}return null}extractPropertyDefinition(t,e,n){const a=t[e],o=this.regexUrl;if(!o.test(a))return;o.lastIndex=0;const c=o.exec(a)[1];return o.lastIndex=0,n[c]}resolveGradient(t,e,n){const a=this.extractPropertyDefinition(t,n,this.gradientDefs);if(a){const o=e.getAttribute(n+"-opacity"),c=Ll.fromElement(a,t,j(j({},this.options),{},{opacity:o}));t.set(n,c)}}async resolveClipPath(t,e,n){const a=this.extractPropertyDefinition(t,"clipPath",this.clipPaths);if(a){const o=wn(t.calcTransformMatrix()),c=a[0].parentElement;let h=e;for(;!n&&h.parentElement&&h.getAttribute("clip-path")!==t.clipPath;)h=h.parentElement;h.parentElement.appendChild(c);const f=Rh("".concat(h.getAttribute("transform")||""," ").concat(c.getAttribute("originalTransform")||""));c.setAttribute("transform","matrix(".concat(f.join(","),")"));const d=await Promise.all(a.map(T=>Qb(T).fromElement(T,this.options,this.cssRules).then(E=>(ph(E),E.fillRule=E.clipRule,delete E.clipRule,E)))),m=d.length===1?d[0]:new ar(d),y=we(o,m.calcTransformMatrix());m.clipPath&&await this.resolveClipPath(m,h,c.getAttribute("clip-path")?h:void 0);const{scaleX:v,scaleY:b,angle:S,skewX:C,translateX:_,translateY:w}=$r(y);m.set({flipX:!1,flipY:!1}),m.set({scaleX:v,scaleY:b,angle:S,skewX:C,skewY:0}),m.setPositionByOrigin(new G(_,w),Rt,Rt),t.clipPath=m}else delete t.clipPath}}const Kb=i=>bO.test(Hh(i)),jm=()=>({objects:[],elements:[],options:{},allElements:[]});async function _A(i,t){let{crossOrigin:e,signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n&&n.aborted)return di("log",new gp("parseSVGDocument")),jm();const a=i.documentElement;(function(m){const y=M_(m,["use","svg:use"]),v=["x","y","xlink:href","href","transform"];for(const b of y){const S=b.attributes,C={};for(const I of S)I.value&&(C[I.name]=I.value);const _=(C["xlink:href"]||C.href||"").slice(1);if(_==="")return;const w=m.getElementById(_);if(w===null)return;let T=w.cloneNode(!0);const E=T.attributes,k={};for(const I of E)I.value&&(k[I.name]=I.value);const{x:A=0,y:R=0,transform:F=""}=C,N="".concat(F," ").concat(k.transform||""," translate(").concat(A,", ").concat(R,")");if(nm(T),/^svg$/i.test(T.nodeName)){const I=T.ownerDocument.createElementNS(vm,"g");Object.entries(k).forEach(J=>{let[ot,rt]=J;return I.setAttributeNS(vm,ot,rt)}),I.append(...T.childNodes),T=I}for(const I of S){if(!I)continue;const{name:J,value:ot}=I;if(!v.includes(J))if(J==="style"){const rt={};Sm(ot,rt),Object.entries(k).forEach(ft=>{let[bt,X]=ft;rt[bt]=X}),Sm(k.style||"",rt);const ut=Object.entries(rt).map(ft=>ft.join(":")).join(";");T.setAttribute(J,ut)}else!k[J]&&T.setAttribute(J,ot)}T.setAttribute("transform",N),T.setAttribute("instantiated_by_use","1"),T.removeAttribute("id"),b.parentNode.replaceChild(T,b)}})(i);const o=Array.from(a.getElementsByTagName("*")),c=j(j({},nm(a)),{},{crossOrigin:e,signal:n}),h=o.filter(m=>(nm(m),Kb(m)&&!function(y){let v=y;for(;v&&(v=v.parentElement);)if(v&&v.nodeName&&yA.test(Hh(v))&&!v.getAttribute("instantiated_by_use"))return!0;return!1}(m)));if(!h||h&&!h.length)return j(j({},jm()),{},{options:c,allElements:o});const f={};return o.filter(m=>Hh(m)==="clipPath").forEach(m=>{m.setAttribute("originalTransform",m.getAttribute("transform")||"");const y=m.getAttribute("id");f[y]=Array.from(m.getElementsByTagName("*")).filter(v=>Kb(v))}),{objects:await new SA(h,c,t,i,f).parse(),elements:h,options:c,allElements:o}}function CA(i,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((n,a)=>{u_(i.replace(/^\n\s*/,"").trim(),{onComplete:o=>{const c=o.responseXML;c&&n(c),a()},signal:e.signal})}).then(n=>_A(n,t,e)).catch(()=>jm())}const rf=i=>i.webgl!==void 0,Hp="precision highp float",TA=`
    `.concat(Hp,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),wA=["type"],OA=["type"],EA=new RegExp(Hp,"g");class Ne{get type(){return this.constructor.type}constructor(){let t=ge(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},wA);Object.assign(this,this.constructor.defaults,t)}getFragmentSource(){return TA}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:a="highp"}}=Fs();a!=="highp"&&(e=e.replace(EA,Hp.replace("highp",a)));const o=t.createShader(t.VERTEX_SHADER),c=t.createShader(t.FRAGMENT_SHADER),h=t.createProgram();if(!o||!c||!h)throw new Bs("Vertex, fragment shader or program creation error");if(t.shaderSource(o,n),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Bs("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(o)));if(t.shaderSource(c,e),t.compileShader(c),!t.getShaderParameter(c,t.COMPILE_STATUS))throw new Bs("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(c)));if(t.attachShader(h,o),t.attachShader(h,c),t.linkProgram(h),!t.getProgramParameter(h,t.LINK_STATUS))throw new Bs('Shader link error for "'.concat(this.type,'" ').concat(t.getProgramInfoLog(h)));const f=this.getUniformLocations(t,h)||{};return f.uStepW=t.getUniformLocation(h,"uStepW"),f.uStepH=t.getUniformLocation(h,"uStepH"),{program:h,attributeLocations:this.getAttributeLocations(t,h),uniformLocations:f}}getAttributeLocations(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}}getUniformLocations(t,e){const n=this.constructor.uniformLocations,a={};for(let o=0;o<n.length;o++)a[n[o]]=t.getUniformLocation(e,n[o]);return a}sendAttributeData(t,e,n){const a=e.aPosition,o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.enableVertexAttribArray(a),t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}_setupFrameBuffer(t){const e=t.context;if(t.passes>1){const n=t.destinationWidth,a=t.destinationHeight;t.sourceWidth===n&&t.sourceHeight===a||(e.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(e,n,a)),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish()}_swapTextures(t){t.passes--,t.pass++;const e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e}isNeutralState(t){return!1}applyTo(t){rf(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const e=this.getCacheKey();return t.programCache[e]||(t.programCache[e]=this.createProgram(t.context)),t.programCache[e]}applyToWebGL(t){const e=t.context,n=this.retrieveShader(t);t.pass===0&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(n.program),this.sendAttributeData(e,n.attributeLocations,t.aPosition),e.uniform1f(n.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(n.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,n.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,e,n){t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}sendUniformData(t,e){}createHelpLayer(t){if(!t.helpLayer){const{sourceWidth:e,sourceHeight:n}=t,a=Pn({width:e,height:n});t.helpLayer=a}}toObject(){const t=Object.keys(this.constructor.defaults||{});return j({type:this.type},t.reduce((e,n)=>(e[n]=this[n],e),{}))}toJSON(){return this.toObject()}static async fromObject(t,e){return new this(ge(t,OA))}}B(Ne,"type","BaseFilter"),B(Ne,"uniformLocations",[]);const AA={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Ku extends Ne{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(AA[this.mode],`
        }
      }
      `)}applyTo2d(t){let{imageData:{data:e}}=t;const n=new Yn(this.color).getSource(),a=this.alpha,o=n[0]*a,c=n[1]*a,h=n[2]*a,f=1-a;for(let d=0;d<e.length;d+=4){const m=e[d],y=e[d+1],v=e[d+2];let b,S,C;switch(this.mode){case"multiply":b=m*o/255,S=y*c/255,C=v*h/255;break;case"screen":b=255-(255-m)*(255-o)/255,S=255-(255-y)*(255-c)/255,C=255-(255-v)*(255-h)/255;break;case"add":b=m+o,S=y+c,C=v+h;break;case"difference":b=Math.abs(m-o),S=Math.abs(y-c),C=Math.abs(v-h);break;case"subtract":b=m-o,S=y-c,C=v-h;break;case"darken":b=Math.min(m,o),S=Math.min(y,c),C=Math.min(v,h);break;case"lighten":b=Math.max(m,o),S=Math.max(y,c),C=Math.max(v,h);break;case"overlay":b=o<128?2*m*o/255:255-2*(255-m)*(255-o)/255,S=c<128?2*y*c/255:255-2*(255-y)*(255-c)/255,C=h<128?2*v*h/255:255-2*(255-v)*(255-h)/255;break;case"exclusion":b=o+m-2*o*m/255,S=c+y-2*c*y/255,C=h+v-2*h*v/255;break;case"tint":b=o+m*f,S=c+y*f,C=h+v*f}e[d]=b,e[d+1]=S,e[d+2]=C}}sendUniformData(t,e){const n=new Yn(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,t.uniform4fv(e.uColor,n)}}B(Ku,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),B(Ku,"type","BlendColor"),B(Ku,"uniformLocations",["uColor"]),dt.setClass(Ku);const DA={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},MA=["type","image"];class $u extends Ne{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return DA[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(t){const e=t.context,n=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,n,e.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(e,e.TEXTURE1)}createTexture(t,e){return t.getCachedTexture(e.cacheKey,e.getElement())}calculateMatrix(){const t=this.image,{width:e,height:n}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/n,1]}applyTo2d(t){let{imageData:{data:e,width:n,height:a},filterBackend:{resources:o}}=t;const c=this.image;o.blendImage||(o.blendImage=Ps());const h=o.blendImage,f=h.getContext("2d");h.width!==n||h.height!==a?(h.width=n,h.height=a):f.clearRect(0,0,n,a),f.setTransform(c.scaleX,0,0,c.scaleY,c.left,c.top),f.drawImage(c.getElement(),0,0,n,a);const d=f.getImageData(0,0,n,a).data;for(let m=0;m<e.length;m+=4){const y=e[m],v=e[m+1],b=e[m+2],S=e[m+3],C=d[m],_=d[m+1],w=d[m+2],T=d[m+3];switch(this.mode){case"multiply":e[m]=y*C/255,e[m+1]=v*_/255,e[m+2]=b*w/255,e[m+3]=S*T/255;break;case"mask":e[m+3]=T}}}sendUniformData(t,e){const n=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,n)}toObject(){return j(j({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(t,e){let{type:n,image:a}=t,o=ge(t,MA);return Nn.fromObject(a,e).then(c=>new this(j(j({},o),{},{image:c})))}}B($u,"type","BlendImage"),B($u,"defaults",{mode:"multiply",alpha:1}),B($u,"uniformLocations",["uTransformMatrix","uImage"]),dt.setClass($u);class Zu extends Ne{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(t){rf(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){let{imageData:{data:e,width:n,height:a}}=t;this.aspectRatio=n/a,this.horizontal=!0;let o=this.getBlurValue()*n;const c=new Uint8ClampedArray(e),h=15,f=4*n;for(let d=0;d<e.length;d+=4){let m=0,y=0,v=0,b=0,S=0;const C=d-d%f,_=C+f;for(let w=-14;w<h;w++){const T=w/h,E=4*Math.floor(o*T),k=1-Math.abs(T);let A=d+E;A<C?A=C:A>_&&(A=_);const R=e[A+3]*k;m+=e[A]*R,y+=e[A+1]*R,v+=e[A+2]*R,b+=R,S+=k}c[d]=m/b,c[d+1]=y/b,c[d+2]=v/b,c[d+3]=b/S}this.horizontal=!1,o=this.getBlurValue()*a;for(let d=0;d<c.length;d+=4){let m=0,y=0,v=0,b=0,S=0;const C=d%f,_=c.length-f+C;for(let w=-14;w<h;w++){const T=w/h,E=Math.floor(o*T)*f,k=1-Math.abs(T);let A=d+E;A<C?A=C:A>_&&(A=_);const R=c[A+3]*k;m+=c[A]*R,y+=c[A+1]*R,v+=c[A+2]*R,b+=R,S+=k}e[d]=m/b,e[d+1]=y/b,e[d+2]=v/b,e[d+3]=b/S}}sendUniformData(t,e){const n=this.chooseRightDelta();t.uniform2fv(e.uDelta,n)}isNeutralState(){return this.blur===0}getBlurValue(){let t=1;const{horizontal:e,aspectRatio:n}=this;return e?n>1&&(t=1/n):n<1&&(t=n),t*this.blur*.12}chooseRightDelta(){const t=this.getBlurValue();return this.horizontal?[t,0]:[0,t]}}B(Zu,"type","Blur"),B(Zu,"defaults",{blur:0}),B(Zu,"uniformLocations",["uDelta"]),dt.setClass(Zu);class Ju extends Ne{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const n=Math.round(255*this.brightness);for(let a=0;a<e.length;a+=4)e[a]+=n,e[a+1]+=n,e[a+2]+=n}isNeutralState(){return this.brightness===0}sendUniformData(t,e){t.uniform1f(e.uBrightness,this.brightness)}}B(Ju,"type","Brightness"),B(Ju,"defaults",{brightness:0}),B(Ju,"uniformLocations",["uBrightness"]),dt.setClass(Ju);const k_={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Ja extends Ne{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(t){const e=t.imageData.data,n=this.matrix,a=this.colorsOnly;for(let o=0;o<e.length;o+=4){const c=e[o],h=e[o+1],f=e[o+2];if(e[o]=c*n[0]+h*n[1]+f*n[2]+255*n[4],e[o+1]=c*n[5]+h*n[6]+f*n[7]+255*n[9],e[o+2]=c*n[10]+h*n[11]+f*n[12]+255*n[14],!a){const d=e[o+3];e[o]+=d*n[3],e[o+1]+=d*n[8],e[o+2]+=d*n[13],e[o+3]=c*n[15]+h*n[16]+f*n[17]+d*n[18]+255*n[19]}}}sendUniformData(t,e){const n=this.matrix,a=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],o=[n[4],n[9],n[14],n[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,a),t.uniform4fv(e.uConstants,o)}toObject(){return j(j({},super.toObject()),{},{matrix:[...this.matrix]})}}function ia(i,t){var e;const n=(B(e=class extends Ja{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",i),B(e,"defaults",{colorsOnly:!1,matrix:t}),e);return dt.setClass(n,i),n}B(Ja,"type","ColorMatrix"),B(Ja,"defaults",k_),B(Ja,"uniformLocations",["uColorMatrix","uConstants"]),dt.setClass(Ja);ia("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);ia("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);ia("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);ia("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);ia("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);ia("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);ia("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class $b extends Ne{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.subFilters=t.subFilters||[]}applyTo(t){rf(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach(e=>{e.applyTo(t)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(t=>t.toObject())}}isNeutralState(){return!this.subFilters.some(t=>!t.isNeutralState())}static fromObject(t,e){return Promise.all((t.subFilters||[]).map(n=>dt.getClass(n.type).fromObject(n,e))).then(n=>new this({subFilters:n}))}}B($b,"type","Composed"),dt.setClass($b);class th extends Ne{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(t){let{imageData:{data:e}}=t;const n=Math.floor(255*this.contrast),a=259*(n+255)/(255*(259-n));for(let o=0;o<e.length;o+=4)e[o]=a*(e[o]-128)+128,e[o+1]=a*(e[o+1]-128)+128,e[o+2]=a*(e[o+2]-128)+128}sendUniformData(t,e){t.uniform1f(e.uContrast,this.contrast)}}B(th,"type","Contrast"),B(th,"defaults",{contrast:0}),B(th,"uniformLocations",["uContrast"]),dt.setClass(th);const RA={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class eh extends Ne{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return RA[this.getCacheKey()]}applyTo2d(t){const e=t.imageData,n=e.data,a=this.matrix,o=Math.round(Math.sqrt(a.length)),c=Math.floor(o/2),h=e.width,f=e.height,d=t.ctx.createImageData(h,f),m=d.data,y=this.opaque?1:0;let v,b,S,C,_,w,T,E,k,A,R,F,N;for(R=0;R<f;R++)for(A=0;A<h;A++){for(_=4*(R*h+A),v=0,b=0,S=0,C=0,N=0;N<o;N++)for(F=0;F<o;F++)T=R+N-c,w=A+F-c,T<0||T>=f||w<0||w>=h||(E=4*(T*h+w),k=a[N*o+F],v+=n[E]*k,b+=n[E+1]*k,S+=n[E+2]*k,y||(C+=n[E+3]*k));m[_]=v,m[_+1]=b,m[_+2]=S,m[_+3]=y?n[_+3]:C}t.imageData=d}sendUniformData(t,e){t.uniform1fv(e.uMatrix,this.matrix)}toObject(){return j(j({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}B(eh,"type","Convolute"),B(eh,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),B(eh,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),dt.setClass(eh);const j_="Gamma";class nh extends Ne{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.gamma=t.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(t){let{imageData:{data:e}}=t;const n=this.gamma,a=1/n[0],o=1/n[1],c=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const h=this.rgbValues;for(let f=0;f<256;f++)h.r[f]=255*Math.pow(f/255,a),h.g[f]=255*Math.pow(f/255,o),h.b[f]=255*Math.pow(f/255,c);for(let f=0;f<e.length;f+=4)e[f]=h.r[e[f]],e[f+1]=h.g[e[f+1]],e[f+2]=h.b[e[f+2]]}sendUniformData(t,e){t.uniform3fv(e.uGamma,this.gamma)}isNeutralState(){const{gamma:t}=this;return t[0]===1&&t[1]===1&&t[2]===1}toObject(){return{type:j_,gamma:this.gamma.concat()}}}B(nh,"type",j_),B(nh,"defaults",{gamma:[1,1,1]}),B(nh,"uniformLocations",["uGamma"]),dt.setClass(nh);const kA={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class sh extends Ne{applyTo2d(t){let{imageData:{data:e}}=t;for(let n,a=0;a<e.length;a+=4){const o=e[a],c=e[a+1],h=e[a+2];switch(this.mode){case"average":n=(o+c+h)/3;break;case"lightness":n=(Math.min(o,c,h)+Math.max(o,c,h))/2;break;case"luminosity":n=.21*o+.72*c+.07*h}e[a+2]=e[a+1]=e[a]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return kA[this.mode]}sendUniformData(t,e){t.uniform1i(e.uMode,1)}isNeutralState(){return!1}}B(sh,"type","Grayscale"),B(sh,"defaults",{mode:"average"}),B(sh,"uniformLocations",["uMode"]),dt.setClass(sh);const jA=j(j({},k_),{},{rotation:0});class im extends Ja{calculateMatrix(){const t=this.rotation*Math.PI,e=ys(t),n=vs(t),a=1/3,o=Math.sqrt(a)*n,c=1-e;this.matrix=[e+c/3,a*c-o,a*c+o,0,0,a*c+o,e+a*c,a*c-o,0,0,a*c-o,a*c+o,e+a*c,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(t){this.calculateMatrix(),super.applyTo(t)}toObject(){return{type:this.type,rotation:this.rotation}}}B(im,"type","HueRotation"),B(im,"defaults",jA),dt.setClass(im);class ih extends Ne{applyTo2d(t){let{imageData:{data:e}}=t;for(let n=0;n<e.length;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2],this.alpha&&(e[n+3]=255-e[n+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(t,e){t.uniform1i(e.uInvert,Number(this.invert)),t.uniform1i(e.uAlpha,Number(this.alpha))}}B(ih,"type","Invert"),B(ih,"defaults",{alpha:!1,invert:!0}),B(ih,"uniformLocations",["uInvert","uAlpha"]),dt.setClass(ih);class rh extends Ne{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const n=this.noise;for(let a=0;a<e.length;a+=4){const o=(.5-Math.random())*n;e[a]+=o,e[a+1]+=o,e[a+2]+=o}}sendUniformData(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())}isNeutralState(){return this.noise===0}}B(rh,"type","Noise"),B(rh,"defaults",{noise:0}),B(rh,"uniformLocations",["uNoise","uSeed"]),dt.setClass(rh);class ah extends Ne{applyTo2d(t){let{imageData:{data:e,width:n,height:a}}=t;for(let o=0;o<a;o+=this.blocksize)for(let c=0;c<n;c+=this.blocksize){const h=4*o*n+4*c,f=e[h],d=e[h+1],m=e[h+2],y=e[h+3];for(let v=o;v<Math.min(o+this.blocksize,a);v++)for(let b=c;b<Math.min(c+this.blocksize,n);b++){const S=4*v*n+4*b;e[S]=f,e[S+1]=d,e[S+2]=m,e[S+3]=y}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}B(ah,"type","Pixelate"),B(ah,"defaults",{blocksize:4}),B(ah,"uniformLocations",["uBlocksize"]),dt.setClass(ah);class oh extends Ne{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(t){let{imageData:{data:e}}=t;const n=255*this.distance,a=new Yn(this.color).getSource(),o=[a[0]-n,a[1]-n,a[2]-n],c=[a[0]+n,a[1]+n,a[2]+n];for(let h=0;h<e.length;h+=4){const f=e[h],d=e[h+1],m=e[h+2];f>o[0]&&d>o[1]&&m>o[2]&&f<c[0]&&d<c[1]&&m<c[2]&&(e[h+3]=0)}}sendUniformData(t,e){const n=new Yn(this.color).getSource(),a=this.distance,o=[0+n[0]/255-a,0+n[1]/255-a,0+n[2]/255-a,1],c=[n[0]/255+a,n[1]/255+a,n[2]/255+a,1];t.uniform4fv(e.uLow,o),t.uniform4fv(e.uHigh,c)}}B(oh,"type","RemoveColor"),B(oh,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),B(oh,"uniformLocations",["uLow","uHigh"]),dt.setClass(oh);class lh extends Ne{sendUniformData(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,n=this.getFilterWindow(),a=new Array(n);for(let o=1;o<=n;o++)a[o-1]=t(o*e);return a}generateShader(t){const e=new Array(t);for(let n=1;n<=t;n++)e[n-1]="".concat(n,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(t,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(e.map((n,a)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(a,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(a,`];
              sum += 2.0 * uTaps[`).concat(a,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){rf(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(t){return e=>{if(e>=t||e<=-t)return 0;if(e<11920929e-14&&e>-11920929e-14)return 1;const n=(e*=Math.PI)/t;return Math.sin(e)/e*Math.sin(n)/n}}applyTo2d(t){const e=t.imageData,n=this.scaleX,a=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/a;const o=e.width,c=e.height,h=Math.round(o*n),f=Math.round(c*a);let d;d=this.resizeType==="sliceHack"?this.sliceByTwo(t,o,c,h,f):this.resizeType==="hermite"?this.hermiteFastResize(t,o,c,h,f):this.resizeType==="bilinear"?this.bilinearFiltering(t,o,c,h,f):this.resizeType==="lanczos"?this.lanczosResize(t,o,c,h,f):new ImageData(h,f),t.imageData=d}sliceByTwo(t,e,n,a,o){const c=t.imageData,h=.5;let f=!1,d=!1,m=e*h,y=n*h;const v=t.filterBackend.resources;let b=0,S=0;const C=e;let _=0;v.sliceByTwo||(v.sliceByTwo=Ps());const w=v.sliceByTwo;(w.width<1.5*e||w.height<n)&&(w.width=1.5*e,w.height=n);const T=w.getContext("2d");for(T.clearRect(0,0,1.5*e,n),T.putImageData(c,0,0),a=Math.floor(a),o=Math.floor(o);!f||!d;)e=m,n=y,a<Math.floor(m*h)?m=Math.floor(m*h):(m=a,f=!0),o<Math.floor(y*h)?y=Math.floor(y*h):(y=o,d=!0),T.drawImage(w,b,S,e,n,C,_,m,y),b=C,S=_,_+=y;return T.getImageData(b,S,a,o)}lanczosResize(t,e,n,a,o){const c=t.imageData.data,h=t.ctx.createImageData(a,o),f=h.data,d=this.lanczosCreate(this.lanczosLobes),m=this.rcpScaleX,y=this.rcpScaleY,v=2/this.rcpScaleX,b=2/this.rcpScaleY,S=Math.ceil(m*this.lanczosLobes/2),C=Math.ceil(y*this.lanczosLobes/2),_={},w={x:0,y:0},T={x:0,y:0};return function E(k){let A,R,F,N,I,J,ot,rt,ut,ft,bt;for(w.x=(k+.5)*m,T.x=Math.floor(w.x),A=0;A<o;A++){for(w.y=(A+.5)*y,T.y=Math.floor(w.y),I=0,J=0,ot=0,rt=0,ut=0,R=T.x-S;R<=T.x+S;R++)if(!(R<0||R>=e)){ft=Math.floor(1e3*Math.abs(R-w.x)),_[ft]||(_[ft]={});for(let X=T.y-C;X<=T.y+C;X++)X<0||X>=n||(bt=Math.floor(1e3*Math.abs(X-w.y)),_[ft][bt]||(_[ft][bt]=d(Math.sqrt(Math.pow(ft*v,2)+Math.pow(bt*b,2))/1e3)),F=_[ft][bt],F>0&&(N=4*(X*e+R),I+=F,J+=F*c[N],ot+=F*c[N+1],rt+=F*c[N+2],ut+=F*c[N+3]))}N=4*(A*a+k),f[N]=J/I,f[N+1]=ot/I,f[N+2]=rt/I,f[N+3]=ut/I}return++k<a?E(k):h}(0)}bilinearFiltering(t,e,n,a,o){let c,h,f,d,m,y,v,b,S,C,_,w,T,E=0;const k=this.rcpScaleX,A=this.rcpScaleY,R=4*(e-1),F=t.imageData.data,N=t.ctx.createImageData(a,o),I=N.data;for(v=0;v<o;v++)for(b=0;b<a;b++)for(m=Math.floor(k*b),y=Math.floor(A*v),S=k*b-m,C=A*v-y,T=4*(y*e+m),_=0;_<4;_++)c=F[T+_],h=F[T+4+_],f=F[T+R+_],d=F[T+R+4+_],w=c*(1-S)*(1-C)+h*S*(1-C)+f*C*(1-S)+d*S*C,I[E++]=w;return N}hermiteFastResize(t,e,n,a,o){const c=this.rcpScaleX,h=this.rcpScaleY,f=Math.ceil(c/2),d=Math.ceil(h/2),m=t.imageData.data,y=t.ctx.createImageData(a,o),v=y.data;for(let b=0;b<o;b++)for(let S=0;S<a;S++){const C=4*(S+b*a);let _=0,w=0,T=0,E=0,k=0,A=0,R=0;const F=(b+.5)*h;for(let N=Math.floor(b*h);N<(b+1)*h;N++){const I=Math.abs(F-(N+.5))/d,J=(S+.5)*c,ot=I*I;for(let rt=Math.floor(S*c);rt<(S+1)*c;rt++){let ut=Math.abs(J-(rt+.5))/f;const ft=Math.sqrt(ot+ut*ut);ft>1&&ft<-1||(_=2*ft*ft*ft-3*ft*ft+1,_>0&&(ut=4*(rt+N*e),R+=_*m[ut+3],T+=_,m[ut+3]<255&&(_=_*m[ut+3]/250),E+=_*m[ut],k+=_*m[ut+1],A+=_*m[ut+2],w+=_))}}v[C]=E/w,v[C+1]=k/w,v[C+2]=A/w,v[C+3]=R/T}return y}}B(lh,"type","Resize"),B(lh,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),B(lh,"uniformLocations",["uDelta","uTaps"]),dt.setClass(lh);class ch extends Ne{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const n=-this.saturation;for(let a=0;a<e.length;a+=4){const o=e[a],c=e[a+1],h=e[a+2],f=Math.max(o,c,h);e[a]+=f!==o?(f-o)*n:0,e[a+1]+=f!==c?(f-c)*n:0,e[a+2]+=f!==h?(f-h)*n:0}}sendUniformData(t,e){t.uniform1f(e.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}B(ch,"type","Saturation"),B(ch,"defaults",{saturation:0}),B(ch,"uniformLocations",["uSaturation"]),dt.setClass(ch);class uh extends Ne{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const n=-this.vibrance;for(let a=0;a<e.length;a+=4){const o=e[a],c=e[a+1],h=e[a+2],f=Math.max(o,c,h),d=(o+c+h)/3,m=2*Math.abs(f-d)/255*n;e[a]+=f!==o?(f-o)*m:0,e[a+1]+=f!==c?(f-c)*m:0,e[a+2]+=f!==h?(f-h)*m:0}}sendUniformData(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}B(uh,"type","Vibrance"),B(uh,"defaults",{vibrance:0}),B(uh,"uniformLocations",["uVibrance"]),dt.setClass(uh);const Up=cp((i,t)=>({undoHistory:[],redoHistory:[],pushUndoHistory:(e,n)=>{i(a=>({undoHistory:[...a.undoHistory,{type:e,objects:[...n]}]}))},pushRedoHistory:(e,n)=>{i(a=>({redoHistory:[...a.redoHistory,{type:e,objects:[...n]}]}))},popUndoHistory:()=>{const{undoHistory:e}=t();if(e.length===0)return;const n=[...e],a=n.pop();return i({undoHistory:n}),a},popRedoHistory:()=>{const{redoHistory:e}=t();if(e.length===0)return;const n=[...e],a=n.pop();return i({redoHistory:n}),a},clearHistory:()=>{i({undoHistory:[],redoHistory:[]})}})),Fp=()=>{const{canvas:i}=ze(c=>c),{pushUndoHistory:t}=Up();return{groupSelectedObjects:()=>{if(!i)return;const c=i.getActiveObjects();if(c.length===0)return;const h=[...c].sort((d,m)=>{const y=d.get("isCheckbox")?0:1,v=m.get("isCheckbox")?0:1;return y-v});i.remove(...c);const f=new ar(h);f.set({uid:new Date().getTime().toString()}),t("group",[f]),i.add(f),i.setActiveObject(f),i.requestRenderAll()},ungroupSelectedObjects:()=>{if(!i)return;const c=i.getActiveObject();if(!c||!c.isType("group"))return;const h=c;i.remove(h);const f=h.getObjects();f.forEach((m,y)=>{m.set({uid:(new Date().getTime()+y).toString()})}),i.add(...h.removeAll());const d=new Nr(f,{canvas:i});i.setActiveObject(d),i.requestRenderAll()},horizontalAlignSelectedObjects:()=>{if(!i)return;const c=i.getActiveObject();if(!c)return;const h=i.getActiveObjects();if(!h||h.length<=1)return;const f=c.getCenterPoint().y;h.forEach(m=>{const y=m.getCenterPoint();m.set({top:m.top+(f-y.y)})});const d=new Nr(h,{canvas:i});i.setActiveObject(d),i.requestRenderAll()},verticalAlignSelectedObjects:()=>{if(!i)return;const c=i.getActiveObject();if(!c)return;const h=i.getActiveObjects();if(!h||h.length<=1)return;const f=c.getCenterPoint().x;h.forEach(m=>{const y=m.getCenterPoint();m.set({left:m.left+(f-y.x)})});const d=new Nr(h,{canvas:i});i.setActiveObject(d),i.requestRenderAll()}}},LA=()=>{const i=ze(_=>_.canvas),t=ze(_=>_.choiceList),e=ze(_=>_.setChoiceList),{pushUndoHistory:n,popUndoHistory:a,pushRedoHistory:o,popRedoHistory:c}=Up(),{groupSelectedObjects:h,ungroupSelectedObjects:f}=Fp(),{ADD:d,DELETE:m,GROUP:y,UNGROUP:v}=iO;return{deleteShape:()=>{if(!i)return;const _=i.getActiveObjects();if(_.length===0)return;const w=new Set(_.map(E=>E.get("uid"))),T=t.filter(E=>!w.has(E.uid));e(T),n(m,_),i.remove(..._),i.discardActiveObject(),i.requestRenderAll()},undo:()=>{if(!i)return;const _=a();if(!_)return;const{type:w,objects:T}=_;switch(w){case d:o(m,T),i.remove(...T);break;case m:o(d,T),i.add(...T);break;case y:o(v,T),f();break;case v:o(y,T),h();break}i.requestRenderAll()},redo:()=>{if(!i)return;const _=c();if(!_)return;const{type:w,objects:T}=_;switch(w){case d:n(m,T),i.remove(...T);break;case m:n(d,T),i.add(...T);break;case y:n(v,T),f();break;case v:n(y,T),h();break}i.requestRenderAll()}}},BA=()=>{const{deleteShape:i,undo:t,redo:e}=LA(),{groupSelectedObjects:n,ungroupSelectedObjects:a}=Fp(),o=U.useCallback(c=>{const{key:h,metaKey:f,ctrlKey:d,shiftKey:m}=c,y=f||d;switch(!0){case h===Al.DELETE:i();break;case(y&&m&&h.toLowerCase()===Al.REDO):c.preventDefault(),e();break;case(y&&h.toLowerCase()===Al.UNDO):c.preventDefault(),t();break;case(y&&m&&h.toLowerCase()===Al.UNGROUP):c.preventDefault(),a();break;case(y&&h.toLowerCase()===Al.GROUP):c.preventDefault(),n();break}},[i,t,e,n,a]);U.useEffect(()=>(document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)),[o])},zA=()=>{const i=ze(h=>h.setCanvas),t=ze(h=>h.setHasSelection),e=U.useRef(null);BA();const n=U.useCallback(h=>{const f=h.getActiveObject();t(!!f)},[t]),a=U.useCallback(h=>{h.on("selection:created",()=>{n(h)}),h.on("selection:updated",()=>{n(h)}),h.on("selection:cleared",()=>{n(h)}),h.on("object:removed",()=>{n(h)})},[n]),o=U.useCallback(()=>{const h=e.current;if(!h)return;const f=h.getBoundingClientRect(),d=new zh(h,{width:f.width,height:f.height});return d.backgroundColor=dp.CANVAS_BACKGROUND,i(d),a(d),d},[i,a]),c=U.useCallback(h=>{h.removeListeners(),h.dispose(),i(null),t(!1)},[i,t]);return U.useEffect(()=>{const h=o();if(h)return h.renderAll(),()=>{c(h)}},[o,c]),{canvasRef:e}};function NA(){const{canvasRef:i}=zA();return Q.jsx("main",{className:"w-[70%] rounded-2xl p-10",style:{backgroundColor:dp.CARD_BACKGROUND},"aria-label":"캔버스 영역",children:Q.jsx("canvas",{className:"w-full h-full rounded-2xl drop-shadow-xl",ref:i})})}const HA=()=>{const i=ze(a=>a.canvas),t=ze(a=>a.choiceList),e=ze(a=>a.answerUid);return{saveData:()=>{i&&(sessionStorage.setItem("elements",JSON.stringify(i.toJSON())),sessionStorage.setItem("interaction",JSON.stringify({choiceList:t,answerUid:e})))}}};function af({onClick:i,label:t,children:e}){return Q.jsx("button",{type:"button","aria-label":t,title:t,className:"w-10 h-10 rounded-full border-none bg-[#f7f8fd] p-0",onClick:i,children:e})}const UA=i=>U.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M12.7076 18.3639L11.2933 19.7781C9.34072 21.7308 6.1749 21.7308 4.22228 19.7781C2.26966 17.8255 2.26966 14.6597 4.22228 12.7071L5.63649 11.2929M18.3644 12.7071L19.7786 11.2929C21.7312 9.34024 21.7312 6.17441 19.7786 4.22179C17.826 2.26917 14.6602 2.26917 12.7076 4.22179L11.2933 5.636M8.50045 15.4999L15.5005 8.49994",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),FA=i=>U.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M9 4V2M15 20V22M4 9H2M20 15H22M4.91421 4.91421L3.5 3.5M19.0858 19.0858L20.5 20.5M12 17.6569L9.87868 19.7782C8.31658 21.3403 5.78392 21.3403 4.22183 19.7782C2.65973 18.2161 2.65973 15.6834 4.22183 14.1213L6.34315 12M17.6569 12L19.7782 9.87868C21.3403 8.31658 21.3403 5.78392 19.7782 4.22183C18.2161 2.65973 15.6834 2.65973 14.1213 4.22183L12 6.34315",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),PA=i=>U.createElement("svg",{width:25,height:25,viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M23 12.5L3 12.5",stroke:"black",strokeWidth:2,strokeLinecap:"round"}),U.createElement("rect",{x:19,y:5,width:15,height:4,rx:1,transform:"rotate(90 19 5)",stroke:"black",strokeWidth:2}),U.createElement("rect",{x:11,y:3,width:19,height:4,rx:1,transform:"rotate(90 11 3)",stroke:"black",strokeWidth:2})),YA=i=>U.createElement("svg",{width:25,height:25,viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M12.5 2L12.5 22",stroke:"black",strokeWidth:2,strokeLinecap:"round"}),U.createElement("rect",{x:5,y:6,width:15,height:4,rx:1,stroke:"black",strokeWidth:2}),U.createElement("rect",{x:3,y:14,width:19,height:4,rx:1,stroke:"black",strokeWidth:2}));function XA(){const{groupSelectedObjects:i,ungroupSelectedObjects:t,horizontalAlignSelectedObjects:e,verticalAlignSelectedObjects:n}=Fp(),a=[{icon:UA,label:"그룹으로 묶기",onClick:i},{icon:FA,label:"그룹 해제",onClick:t},{icon:PA,label:"수평 정렬",onClick:e},{icon:YA,label:"수직 정렬",onClick:n}];return Q.jsxs("div",{"aria-label":"그룹 / 정렬",className:"w-fit",children:[Q.jsx("span",{className:"flex justify-center mb-4 text-gray-800 text-sm",children:"그룹 / 정렬"}),Q.jsx("div",{className:"flex",children:a.map(({icon:o,label:c,onClick:h})=>Q.jsx(af,{label:c,onClick:h,children:Q.jsx(o,{})},c))})]})}const qA=i=>U.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M18 15L12 9L6 15",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),VA=i=>U.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M6 9L12 15L18 9",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),GA=i=>U.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M17 18L12 13L7 18M17 11L12 6L7 11",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),IA=i=>U.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M7 13L12 18L17 13M7 6L12 11L17 6",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),WA=()=>{const i=ze(o=>o.canvas);return{bringForward:()=>{if(!i)return;const o=i.getActiveObject();o&&(i.bringObjectForward(o),i.requestRenderAll())},sendBackwards:()=>{if(!i)return;const o=i.getActiveObject();o&&(i.sendObjectBackwards(o),i.requestRenderAll())},bringToFront:()=>{if(!i)return;const o=i.getActiveObject();o&&(i.bringObjectToFront(o),i.requestRenderAll())},sendToBack:()=>{if(!i)return;const o=i.getActiveObject();o&&(i.sendObjectToBack(o),i.requestRenderAll())}}};function QA(){const{bringForward:i,sendBackwards:t,bringToFront:e,sendToBack:n}=WA(),a=[{icon:qA,label:"위로 이동",onClick:i},{icon:VA,label:"아래로 이동",onClick:t},{icon:GA,label:"맨 위로 이동",onClick:e},{icon:IA,label:"맨 아래로 이동",onClick:n}];return Q.jsxs("div",{"aria-label":"레이어 도구",className:"w-fit",children:[Q.jsx("span",{className:"flex justify-center mb-4 text-gray-800 text-sm",children:"레이어 도구"}),Q.jsx("div",{className:"flex",children:a.map(({icon:o,label:c,onClick:h})=>Q.jsx(af,{label:c,onClick:h,children:Q.jsx(o,{})},c))})]})}const KA=i=>U.createElement("svg",{width:24,height:25,viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M12 22.3806C17.5228 22.3806 22 17.9034 22 12.3806C22 6.85771 17.5228 2.38055 12 2.38055C6.47715 2.38055 2 6.85771 2 12.3806C2 17.9034 6.47715 22.3806 12 22.3806Z",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),$A=i=>U.createElement("svg",{width:24,height:25,viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M3 8.18055C3 6.5004 3 5.66032 3.32698 5.01858C3.6146 4.4541 4.07354 3.99515 4.63803 3.70753C5.27976 3.38055 6.11984 3.38055 7.8 3.38055H16.2C17.8802 3.38055 18.7202 3.38055 19.362 3.70753C19.9265 3.99515 20.3854 4.4541 20.673 5.01858C21 5.66032 21 6.5004 21 8.18055V16.5806C21 18.2607 21 19.1008 20.673 19.7425C20.3854 20.307 19.9265 20.766 19.362 21.0536C18.7202 21.3806 17.8802 21.3806 16.2 21.3806H7.8C6.11984 21.3806 5.27976 21.3806 4.63803 21.0536C4.07354 20.766 3.6146 20.307 3.32698 19.7425C3 19.1008 3 18.2607 3 16.5806V8.18055Z",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),ZA=i=>U.createElement("svg",{width:24,height:25,viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M2.39019 18.4789L10.6151 4.27226C11.0696 3.4871 11.2969 3.09452 11.5935 2.96266C11.8521 2.84765 12.1474 2.84765 12.4061 2.96266C12.7026 3.09452 12.9299 3.4871 13.3844 4.27226L21.6093 18.4789C22.0655 19.2669 22.2936 19.6609 22.2599 19.9842C22.2305 20.2663 22.0827 20.5226 21.8534 20.6893C21.5904 20.8805 21.1352 20.8805 20.2246 20.8805H3.77487C2.86435 20.8805 2.40908 20.8805 2.14613 20.6893C1.91677 20.5226 1.769 20.2663 1.73959 19.9842C1.70588 19.6609 1.93398 19.2669 2.39019 18.4789Z",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),JA=i=>U.createElement("svg",{width:32,height:31,viewBox:"0 0 32 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("g",{clipPath:"url(#clip0_123_744)"},U.createElement("path",{d:"M7.8814 23.0674L24.1187 7.69373",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),U.createElement("defs",null,U.createElement("clipPath",{id:"clip0_123_744"},U.createElement("rect",{width:24,height:24,fill:"white",transform:"translate(8.828) rotate(20)"})))),tD=i=>U.createElement("svg",{width:24,height:25,viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M4 7.38055C4 6.44867 4 5.98273 4.15224 5.61519C4.35523 5.12513 4.74458 4.73578 5.23463 4.5328C5.60218 4.38055 6.06812 4.38055 7 4.38055H17C17.9319 4.38055 18.3978 4.38055 18.7654 4.5328C19.2554 4.73578 19.6448 5.12513 19.8478 5.61519C20 5.98273 20 6.44867 20 7.38055M9 20.3806H15M12 4.38055V20.3806",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),eD=i=>U.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M9 11L12 14L22 4M16 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V16.2C3 17.8802 3 18.7202 3.32698 19.362C3.6146 19.9265 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21H16.2C17.8802 21 18.7202 21 19.362 20.673C19.9265 20.3854 20.3854 19.9265 20.673 19.362C21 18.7202 21 17.8802 21 16.2V12",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),nD=i=>U.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M12.5 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V16.2C3 17.8802 3 18.7202 3.32698 19.362C3.6146 19.9265 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21H17C17.93 21 18.395 21 18.7765 20.8978C19.8117 20.6204 20.6204 19.8117 20.8978 18.7765C21 18.395 21 17.93 21 17M19 8V2M16 5H22M10.5 8.5C10.5 9.60457 9.60457 10.5 8.5 10.5C7.39543 10.5 6.5 9.60457 6.5 8.5C6.5 7.39543 7.39543 6.5 8.5 6.5C9.60457 6.5 10.5 7.39543 10.5 8.5ZM14.99 11.9181L6.53115 19.608C6.05536 20.0406 5.81747 20.2568 5.79643 20.4442C5.77819 20.6066 5.84045 20.7676 5.96319 20.8755C6.10478 21 6.42628 21 7.06929 21H16.456C17.8951 21 18.6147 21 19.1799 20.7582C19.8894 20.4547 20.4547 19.8894 20.7582 19.1799C21 18.6147 21 17.8951 21 16.456C21 15.9717 21 15.7296 20.9471 15.5042C20.8805 15.2208 20.753 14.9554 20.5733 14.7264C20.4303 14.5442 20.2412 14.3929 19.8631 14.0905L17.0658 11.8527C16.6874 11.5499 16.4982 11.3985 16.2898 11.3451C16.1061 11.298 15.9129 11.3041 15.7325 11.3627C15.5279 11.4291 15.3486 11.5921 14.99 11.9181Z",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),of=cp(i=>({isOpen:!1,modalType:"none",openModal:t=>i({isOpen:!0,modalType:t}),closeModal:()=>i({isOpen:!1})})),sD=()=>{const i=ze(m=>m.canvas),t=of(m=>m.openModal),e=Up(m=>m.pushUndoHistory),n=U.useCallback(()=>{if(!i)return;const m=new ks({radius:50,left:100,top:100,stroke:"black",strokeWidth:1,fill:"transparent",uid:new Date().getTime().toString()}),y=new G(100,100);m.setPositionByOrigin(y,"center","center"),e("add",[m]),i.add(m),i.requestRenderAll()},[i,e]),a=U.useCallback(()=>{if(!i)return;const m=new ts({width:100,height:100,stroke:"black",strokeWidth:1,fill:"transparent",uid:new Date().getTime().toString()}),y=new G(100,100);m.setPositionByOrigin(y,"center","center"),e("add",[m]),i.add(m),i.requestRenderAll()},[i,e]),o=U.useCallback(()=>{if(!i)return;const m=new Bl({width:100,height:100,stroke:"black",strokeWidth:1,fill:"transparent",uid:new Date().getTime().toString()}),y=new G(100,100);m.setPositionByOrigin(y,"center","center"),e("add",[m]),i.add(m),i.requestRenderAll()},[i,e]),c=U.useCallback(()=>{if(!i)return;const m=new Qa([50,200,200,50],{stroke:"black",strokeWidth:1,uid:new Date().getTime().toString()});e("add",[m]),i.add(m),i.requestRenderAll()},[i,e]),h=U.useCallback(()=>{if(!i)return;const m=new Nl("text",{width:200,height:50,left:100,top:100,fontSize:32,fill:"black",fontFamily:"Pretendard",uid:new Date().getTime().toString()});m.on("scaling",()=>{const y=m.scaleY??1,v=m.fontSize*y;m.set({fontSize:v,scaleX:1,scaleY:1,height:void 0}),i.requestRenderAll()}),e("add",[m]),i.add(m),i.requestRenderAll()},[i,e]),f=U.useCallback(()=>{if(!i)return;We.customProperties=["isCheckbox","isSelected","uid"];const m=new ts({width:100,height:100,rx:10,ry:10,stroke:"#d2d2d2",strokeWidth:2,fill:"transparent",shadow:new Us({color:"rgba(0, 0, 0, 0.08)",blur:25,affectStroke:!0}),isCheckbox:!0,uid:new Date().getTime().toString()}),y=new G(100,100);m.setPositionByOrigin(y,"center","center"),e("add",[m]),i.add(m),i.requestRenderAll()},[i,e]),d=U.useCallback(()=>{i&&t("image")},[i,t]);return{drawCircle:n,drawSquare:a,drawTriangle:o,drawLine:c,drawText:h,drawCheckBox:f,drawImage:d}};function iD(){const{drawCircle:i,drawSquare:t,drawTriangle:e,drawLine:n,drawText:a,drawCheckBox:o,drawImage:c}=sD(),h=[{icon:KA,label:"원 추가",onClick:i},{icon:$A,label:"사각형 추가",onClick:t},{icon:ZA,label:"세모 추가",onClick:e},{icon:JA,label:"라인 추가",onClick:n},{icon:tD,label:"텍스트 추가",onClick:a},{icon:eD,label:"체크 박스 추가",onClick:o},{icon:nD,label:"이미지 추가",onClick:c}];return Q.jsxs("div",{"aria-label":"도형 생성",className:"w-fit",children:[Q.jsx("span",{className:"flex justify-center mb-4 text-gray-800 text-sm",children:"도형 생성"}),Q.jsx("div",{className:"flex",children:h.map(({icon:f,label:d,onClick:m})=>Q.jsx(af,{label:d,onClick:m,children:Q.jsx(f,{})},d))})]})}const rD=i=>U.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M16 10H3M20 6H3M20 14H3M16 18H3",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),aD=i=>U.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M18 10H6M21 6H3M21 14H3M18 18H6",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),oD=i=>U.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M21 10H8M21 6H4M21 14H4M21 18H8",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),lD=i=>U.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M6 12H14C16.2091 12 18 10.2091 18 8C18 5.79086 16.2091 4 14 4H6V12ZM6 12H15C17.2091 12 19 13.7909 19 16C19 18.2091 17.2091 20 15 20H6V12Z",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),cD=i=>U.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},U.createElement("path",{d:"M19 4H10M14 20H5M15 4L9 20",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),uD=()=>{const{canvas:i}=ze(c=>c);return{alignLeft:()=>{if(!i)return;const c=i==null?void 0:i.getActiveObject();!c||!c.isType("textbox")||(c.set({textAlign:"left"}),i.requestRenderAll())},alignCenter:()=>{if(!i)return;const c=i==null?void 0:i.getActiveObject();!c||!c.isType("textbox")||(c.set({textAlign:"center"}),i.requestRenderAll())},alignRight:()=>{if(!i)return;const c=i==null?void 0:i.getActiveObject();!c||!c.isType("textbox")||(c.set({textAlign:"right"}),i.requestRenderAll())},boldText:()=>{if(!i)return;const c=i.getActiveObject();if(!c||!c.isType("textbox"))return;const h=c,f=h.fontWeight;h.set({fontWeight:f==="bold"?"normal":"bold"}),i.requestRenderAll()},italicText:()=>{if(!i)return;const c=i.getActiveObject();if(!c||!c.isType("textbox"))return;const h=c,f=h.fontStyle;h.set({fontStyle:f==="italic"?"normal":"italic"}),i.requestRenderAll()}}};function hD(){const{alignLeft:i,alignCenter:t,alignRight:e,boldText:n,italicText:a}=uD(),o=[{icon:rD,label:"왼쪽 정렬",onClick:i},{icon:aD,label:"가운데 정렬",onClick:t},{icon:oD,label:"오른쪽 정렬",onClick:e},{icon:lD,label:"굵게",onClick:n},{icon:cD,label:"기울임꼴",onClick:a}];return Q.jsxs("div",{"aria-label":"텍스트 도구",className:"w-fit",children:[Q.jsx("span",{className:"flex justify-center mb-4 text-gray-800 text-sm",children:"텍스트 도구"}),Q.jsx("div",{className:"flex",children:o.map(({icon:c,label:h,onClick:f})=>Q.jsx(af,{label:h,onClick:f,children:Q.jsx(c,{})},h))})]})}function fD(i){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e),e.styleSheet?e.styleSheet.cssText=i:e.appendChild(document.createTextNode(i))}fD(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var mc=i=>typeof i=="number"&&!isNaN(i),Jr=i=>typeof i=="string",mi=i=>typeof i=="function",dD=i=>Jr(i)||mc(i),Lm=i=>Jr(i)||mi(i)?i:null,gD=(i,t)=>i===!1||mc(i)&&i>0?i:t,Bm=i=>U.isValidElement(i)||Jr(i)||mi(i)||mc(i);function mD(i,t,e=300){let{scrollHeight:n,style:a}=i;requestAnimationFrame(()=>{a.minHeight="initial",a.height=n+"px",a.transition=`all ${e}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,e)})})}function pD({enter:i,exit:t,appendPosition:e=!1,collapse:n=!0,collapseDuration:a=300}){return function({children:o,position:c,preventExitTransition:h,done:f,nodeRef:d,isIn:m,playToast:y}){let v=e?`${i}--${c}`:i,b=e?`${t}--${c}`:t,S=U.useRef(0);return U.useLayoutEffect(()=>{let C=d.current,_=v.split(" "),w=T=>{T.target===d.current&&(y(),C.removeEventListener("animationend",w),C.removeEventListener("animationcancel",w),S.current===0&&T.type!=="animationcancel"&&C.classList.remove(..._))};C.classList.add(..._),C.addEventListener("animationend",w),C.addEventListener("animationcancel",w)},[]),U.useEffect(()=>{let C=d.current,_=()=>{C.removeEventListener("animationend",_),n?mD(C,f,a):f()};m||(h?_():(S.current=1,C.className+=` ${b}`,C.addEventListener("animationend",_)))},[m]),ht.createElement(ht.Fragment,null,o)}}function Zb(i,t){return{content:L_(i.content,i.props),containerId:i.props.containerId,id:i.props.toastId,theme:i.props.theme,type:i.props.type,data:i.props.data||{},isLoading:i.props.isLoading,icon:i.props.icon,reason:i.removalReason,status:t}}function L_(i,t,e=!1){return U.isValidElement(i)&&!Jr(i.type)?U.cloneElement(i,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:e}):mi(i)?i({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:e}):i}function yD({closeToast:i,theme:t,ariaLabel:e="close"}){return ht.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:n=>{n.stopPropagation(),i(!0)},"aria-label":e},ht.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ht.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function vD({delay:i,isRunning:t,closeToast:e,type:n="default",hide:a,className:o,controlledProgress:c,progress:h,rtl:f,isIn:d,theme:m}){let y=a||c&&h===0,v={animationDuration:`${i}ms`,animationPlayState:t?"running":"paused"};c&&(v.transform=`scaleX(${h})`);let b=Ns("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${m}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":f}),S=mi(o)?o({rtl:f,type:n,defaultClassName:b}):Ns(b,o),C={[c&&h>=1?"onTransitionEnd":"onAnimationEnd"]:c&&h<1?null:()=>{d&&e()}};return ht.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":y},ht.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${m} Toastify__progress-bar--${n}`}),ht.createElement("div",{role:"progressbar","aria-hidden":y?"true":"false","aria-label":"notification timer",className:S,style:v,...C}))}var bD=1,B_=()=>`${bD++}`;function xD(i,t,e){let n=1,a=0,o=[],c=[],h=t,f=new Map,d=new Set,m=T=>(d.add(T),()=>d.delete(T)),y=()=>{c=Array.from(f.values()),d.forEach(T=>T())},v=({containerId:T,toastId:E,updateId:k})=>{let A=T?T!==i:i!==1,R=f.has(E)&&k==null;return A||R},b=(T,E)=>{f.forEach(k=>{var A;(E==null||E===k.props.toastId)&&((A=k.toggle)==null||A.call(k,T))})},S=T=>{var E,k;(k=(E=T.props)==null?void 0:E.onClose)==null||k.call(E,T.removalReason),T.isActive=!1},C=T=>{if(T==null)f.forEach(S);else{let E=f.get(T);E&&S(E)}y()},_=()=>{a-=o.length,o=[]},w=T=>{var E,k;let{toastId:A,updateId:R}=T.props,F=R==null;T.staleId&&f.delete(T.staleId),T.isActive=!0,f.set(A,T),y(),e(Zb(T,F?"added":"updated")),F&&((k=(E=T.props).onOpen)==null||k.call(E))};return{id:i,props:h,observe:m,toggle:b,removeToast:C,toasts:f,clearQueue:_,buildToast:(T,E)=>{if(v(E))return;let{toastId:k,updateId:A,data:R,staleId:F,delay:N}=E,I=A==null;I&&a++;let J={...h,style:h.toastStyle,key:n++,...Object.fromEntries(Object.entries(E).filter(([rt,ut])=>ut!=null)),toastId:k,updateId:A,data:R,isIn:!1,className:Lm(E.className||h.toastClassName),progressClassName:Lm(E.progressClassName||h.progressClassName),autoClose:E.isLoading?!1:gD(E.autoClose,h.autoClose),closeToast(rt){f.get(k).removalReason=rt,C(k)},deleteToast(){let rt=f.get(k);if(rt!=null){if(e(Zb(rt,"removed")),f.delete(k),a--,a<0&&(a=0),o.length>0){w(o.shift());return}y()}}};J.closeButton=h.closeButton,E.closeButton===!1||Bm(E.closeButton)?J.closeButton=E.closeButton:E.closeButton===!0&&(J.closeButton=Bm(h.closeButton)?h.closeButton:!0);let ot={content:T,props:J,staleId:F};h.limit&&h.limit>0&&a>h.limit&&I?o.push(ot):mc(N)?setTimeout(()=>{w(ot)},N):w(ot)},setProps(T){h=T},setToggle:(T,E)=>{let k=f.get(T);k&&(k.toggle=E)},isToastActive:T=>{var E;return(E=f.get(T))==null?void 0:E.isActive},getSnapshot:()=>c}}var fn=new Map,$l=[],zm=new Set,SD=i=>zm.forEach(t=>t(i)),z_=()=>fn.size>0;function _D(){$l.forEach(i=>H_(i.content,i.options)),$l=[]}var CD=(i,{containerId:t})=>{var e;return(e=fn.get(t||1))==null?void 0:e.toasts.get(i)};function N_(i,t){var e;if(t)return!!((e=fn.get(t))!=null&&e.isToastActive(i));let n=!1;return fn.forEach(a=>{a.isToastActive(i)&&(n=!0)}),n}function TD(i){if(!z_()){$l=$l.filter(t=>i!=null&&t.options.toastId!==i);return}if(i==null||dD(i))fn.forEach(t=>{t.removeToast(i)});else if(i&&("containerId"in i||"id"in i)){let t=fn.get(i.containerId);t?t.removeToast(i.id):fn.forEach(e=>{e.removeToast(i.id)})}}var wD=(i={})=>{fn.forEach(t=>{t.props.limit&&(!i.containerId||t.id===i.containerId)&&t.clearQueue()})};function H_(i,t){Bm(i)&&(z_()||$l.push({content:i,options:t}),fn.forEach(e=>{e.buildToast(i,t)}))}function OD(i){var t;(t=fn.get(i.containerId||1))==null||t.setToggle(i.id,i.fn)}function U_(i,t){fn.forEach(e=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===e.id)&&e.toggle(i,t==null?void 0:t.id)})}function ED(i){let t=i.containerId||1;return{subscribe(e){let n=xD(t,i,SD);fn.set(t,n);let a=n.observe(e);return _D(),()=>{a(),fn.delete(t)}},setProps(e){var n;(n=fn.get(t))==null||n.setProps(e)},getSnapshot(){var e;return(e=fn.get(t))==null?void 0:e.getSnapshot()}}}function AD(i){return zm.add(i),()=>{zm.delete(i)}}function DD(i){return i&&(Jr(i.toastId)||mc(i.toastId))?i.toastId:B_()}function pc(i,t){return H_(i,t),t.toastId}function lf(i,t){return{...t,type:t&&t.type||i,toastId:DD(t)}}function cf(i){return(t,e)=>pc(t,lf(i,e))}function ie(i,t){return pc(i,lf("default",t))}ie.loading=(i,t)=>pc(i,lf("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function MD(i,{pending:t,error:e,success:n},a){let o;t&&(o=Jr(t)?ie.loading(t,a):ie.loading(t.render,{...a,...t}));let c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},h=(d,m,y)=>{if(m==null){ie.dismiss(o);return}let v={type:d,...c,...a,data:y},b=Jr(m)?{render:m}:m;return o?ie.update(o,{...v,...b}):ie(b.render,{...v,...b}),y},f=mi(i)?i():i;return f.then(d=>h("success",n,d)).catch(d=>h("error",e,d)),f}ie.promise=MD;ie.success=cf("success");ie.info=cf("info");ie.error=cf("error");ie.warning=cf("warning");ie.warn=ie.warning;ie.dark=(i,t)=>pc(i,lf("default",{theme:"dark",...t}));function RD(i){TD(i)}ie.dismiss=RD;ie.clearWaitingQueue=wD;ie.isActive=N_;ie.update=(i,t={})=>{let e=CD(i,t);if(e){let{props:n,content:a}=e,o={delay:100,...n,...t,toastId:t.toastId||i,updateId:B_()};o.toastId!==i&&(o.staleId=i);let c=o.render||a;delete o.render,pc(c,o)}};ie.done=i=>{ie.update(i,{progress:1})};ie.onChange=AD;ie.play=i=>U_(!0,i);ie.pause=i=>U_(!1,i);function kD(i){var t;let{subscribe:e,getSnapshot:n,setProps:a}=U.useRef(ED(i)).current;a(i);let o=(t=U.useSyncExternalStore(e,n,n))==null?void 0:t.slice();function c(h){if(!o)return[];let f=new Map;return i.newestOnTop&&o.reverse(),o.forEach(d=>{let{position:m}=d.props;f.has(m)||f.set(m,[]),f.get(m).push(d)}),Array.from(f,d=>h(d[0],d[1]))}return{getToastToRender:c,isToastActive:N_,count:o==null?void 0:o.length}}function jD(i){let[t,e]=U.useState(!1),[n,a]=U.useState(!1),o=U.useRef(null),c=U.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:h,pauseOnHover:f,closeToast:d,onClick:m,closeOnClick:y}=i;OD({id:i.toastId,containerId:i.containerId,fn:e}),U.useEffect(()=>{if(i.pauseOnFocusLoss)return v(),()=>{b()}},[i.pauseOnFocusLoss]);function v(){document.hasFocus()||w(),window.addEventListener("focus",_),window.addEventListener("blur",w)}function b(){window.removeEventListener("focus",_),window.removeEventListener("blur",w)}function S(F){if(i.draggable===!0||i.draggable===F.pointerType){T();let N=o.current;c.canCloseOnClick=!0,c.canDrag=!0,N.style.transition="none",i.draggableDirection==="x"?(c.start=F.clientX,c.removalDistance=N.offsetWidth*(i.draggablePercent/100)):(c.start=F.clientY,c.removalDistance=N.offsetHeight*(i.draggablePercent===80?i.draggablePercent*1.5:i.draggablePercent)/100)}}function C(F){let{top:N,bottom:I,left:J,right:ot}=o.current.getBoundingClientRect();F.nativeEvent.type!=="touchend"&&i.pauseOnHover&&F.clientX>=J&&F.clientX<=ot&&F.clientY>=N&&F.clientY<=I?w():_()}function _(){e(!0)}function w(){e(!1)}function T(){c.didMove=!1,document.addEventListener("pointermove",k),document.addEventListener("pointerup",A)}function E(){document.removeEventListener("pointermove",k),document.removeEventListener("pointerup",A)}function k(F){let N=o.current;if(c.canDrag&&N){c.didMove=!0,t&&w(),i.draggableDirection==="x"?c.delta=F.clientX-c.start:c.delta=F.clientY-c.start,c.start!==F.clientX&&(c.canCloseOnClick=!1);let I=i.draggableDirection==="x"?`${c.delta}px, var(--y)`:`0, calc(${c.delta}px + var(--y))`;N.style.transform=`translate3d(${I},0)`,N.style.opacity=`${1-Math.abs(c.delta/c.removalDistance)}`}}function A(){E();let F=o.current;if(c.canDrag&&c.didMove&&F){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance){a(!0),i.closeToast(!0),i.collapseAll();return}F.style.transition="transform 0.2s, opacity 0.2s",F.style.removeProperty("transform"),F.style.removeProperty("opacity")}}let R={onPointerDown:S,onPointerUp:C};return h&&f&&(R.onMouseEnter=w,i.stacked||(R.onMouseLeave=_)),y&&(R.onClick=F=>{m&&m(F),c.canCloseOnClick&&d(!0)}),{playToast:_,pauseToast:w,isRunning:t,preventExitTransition:n,toastRef:o,eventHandlers:R}}var LD=typeof window<"u"?U.useLayoutEffect:U.useEffect,uf=({theme:i,type:t,isLoading:e,...n})=>ht.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:i==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...n});function BD(i){return ht.createElement(uf,{...i},ht.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function zD(i){return ht.createElement(uf,{...i},ht.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function ND(i){return ht.createElement(uf,{...i},ht.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function HD(i){return ht.createElement(uf,{...i},ht.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function UD(){return ht.createElement("div",{className:"Toastify__spinner"})}var Nm={info:zD,warning:BD,success:ND,error:HD,spinner:UD},FD=i=>i in Nm;function PD({theme:i,type:t,isLoading:e,icon:n}){let a=null,o={theme:i,type:t};return n===!1||(mi(n)?a=n({...o,isLoading:e}):U.isValidElement(n)?a=U.cloneElement(n,o):e?a=Nm.spinner():FD(t)&&(a=Nm[t](o))),a}var YD=i=>{let{isRunning:t,preventExitTransition:e,toastRef:n,eventHandlers:a,playToast:o}=jD(i),{closeButton:c,children:h,autoClose:f,onClick:d,type:m,hideProgressBar:y,closeToast:v,transition:b,position:S,className:C,style:_,progressClassName:w,updateId:T,role:E,progress:k,rtl:A,toastId:R,deleteToast:F,isIn:N,isLoading:I,closeOnClick:J,theme:ot,ariaLabel:rt}=i,ut=Ns("Toastify__toast",`Toastify__toast-theme--${ot}`,`Toastify__toast--${m}`,{"Toastify__toast--rtl":A},{"Toastify__toast--close-on-click":J}),ft=mi(C)?C({rtl:A,position:S,type:m,defaultClassName:ut}):Ns(ut,C),bt=PD(i),X=!!k||!f,nt={closeToast:v,type:m,theme:ot},at=null;return c===!1||(mi(c)?at=c(nt):U.isValidElement(c)?at=U.cloneElement(c,nt):at=yD(nt)),ht.createElement(b,{isIn:N,done:F,position:S,preventExitTransition:e,nodeRef:n,playToast:o},ht.createElement("div",{id:R,tabIndex:0,onClick:d,"data-in":N,className:ft,...a,style:_,ref:n,...N&&{role:E,"aria-label":rt}},bt!=null&&ht.createElement("div",{className:Ns("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!I})},bt),L_(h,i,!t),at,!i.customProgressBar&&ht.createElement(vD,{...T&&!X?{key:`p-${T}`}:{},rtl:A,theme:ot,delay:f,isRunning:t,isIn:N,closeToast:v,hide:y,type:m,className:w,controlledProgress:X,progress:k||0})))},XD=(i,t=!1)=>({enter:`Toastify--animate Toastify__${i}-enter`,exit:`Toastify--animate Toastify__${i}-exit`,appendPosition:t}),qD=pD(XD("bounce",!0)),VD={position:"top-right",transition:qD,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:i=>i.altKey&&i.code==="KeyT"};function GD(i){let t={...VD,...i},e=i.stacked,[n,a]=U.useState(!0),o=U.useRef(null),{getToastToRender:c,isToastActive:h,count:f}=kD(t),{className:d,style:m,rtl:y,containerId:v,hotKeys:b}=t;function S(_){let w=Ns("Toastify__toast-container",`Toastify__toast-container--${_}`,{"Toastify__toast-container--rtl":y});return mi(d)?d({position:_,rtl:y,defaultClassName:w}):Ns(w,Lm(d))}function C(){e&&(a(!0),ie.play())}return LD(()=>{var _;if(e){let w=o.current.querySelectorAll('[data-in="true"]'),T=12,E=(_=t.position)==null?void 0:_.includes("top"),k=0,A=0;Array.from(w).reverse().forEach((R,F)=>{let N=R;N.classList.add("Toastify__toast--stacked"),F>0&&(N.dataset.collapsed=`${n}`),N.dataset.pos||(N.dataset.pos=E?"top":"bot");let I=k*(n?.2:1)+(n?0:T*F);N.style.setProperty("--y",`${E?I:I*-1}px`),N.style.setProperty("--g",`${T}`),N.style.setProperty("--s",`${1-(n?A:0)}`),k+=N.offsetHeight,A+=.025})}},[n,f,e]),U.useEffect(()=>{function _(w){var T;let E=o.current;b(w)&&((T=E.querySelector('[tabIndex="0"]'))==null||T.focus(),a(!1),ie.pause()),w.key==="Escape"&&(document.activeElement===E||E!=null&&E.contains(document.activeElement))&&(a(!0),ie.play())}return document.addEventListener("keydown",_),()=>{document.removeEventListener("keydown",_)}},[b]),ht.createElement("section",{ref:o,className:"Toastify",id:v,onMouseEnter:()=>{e&&(a(!1),ie.pause())},onMouseLeave:C,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},c((_,w)=>{let T=w.length?{...m}:{...m,pointerEvents:"none"};return ht.createElement("div",{tabIndex:-1,className:S(_),"data-stacked":e,style:T,key:`c-${_}`},w.map(({content:E,props:k})=>ht.createElement(YD,{...k,stacked:e,collapseAll:C,isIn:h(k.toastId,k.containerId),key:`t-${k.key}`},E)))}))}function ID(){const{saveData:i}=HA(),t=of(n=>n.openModal),e=U.useCallback(()=>{i(),ie.success("저장되었습니다!",{position:"top-left",autoClose:2e3})},[i]);return Q.jsxs("header",{className:"flex gap-10 rounded-2xl bg-[#f7f8fd] text-gray-800p-4 px-10",children:[Q.jsx("h1",{className:"flex justify-center items-center text-2xl font-bold ",children:"저작 도구"}),Q.jsxs("div",{className:"flex flex-1 justify-between p-5 ",children:[Q.jsx(iD,{}),Q.jsx(XA,{}),Q.jsx(hD,{}),Q.jsx(QA,{}),Q.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Q.jsx(Gl,{borderColor:"border-[#667eea]",bgColor:"white",textColor:"text-[#667eea]",text:"미리보기",size:"medium",onClick:()=>t("preview")}),Q.jsx(Gl,{text:"저장하기",size:"medium",onClick:e})]})]})]})}const WD=i=>{const t=document.getElementById("modal-root");return t?Zx.createPortal(i,t):null};var yc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(i){return this.listeners.add(i),this.onSubscribe(),()=>{this.listeners.delete(i),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ta=typeof window>"u"||"Deno"in globalThis;function Tn(){}function QD(i,t){return typeof i=="function"?i(t):i}function Hm(i){return typeof i=="number"&&i>=0&&i!==1/0}function F_(i,t){return Math.max(i+(t||0)-Date.now(),0)}function or(i,t){return typeof i=="function"?i(t):i}function ds(i,t){return typeof i=="function"?i(t):i}function Jb(i,t){const{type:e="all",exact:n,fetchStatus:a,predicate:o,queryKey:c,stale:h}=i;if(c){if(n){if(t.queryHash!==Pp(c,t.options))return!1}else if(!Jl(t.queryKey,c))return!1}if(e!=="all"){const f=t.isActive();if(e==="active"&&!f||e==="inactive"&&f)return!1}return!(typeof h=="boolean"&&t.isStale()!==h||a&&a!==t.state.fetchStatus||o&&!o(t))}function tx(i,t){const{exact:e,status:n,predicate:a,mutationKey:o}=i;if(o){if(!t.options.mutationKey)return!1;if(e){if(Zl(t.options.mutationKey)!==Zl(o))return!1}else if(!Jl(t.options.mutationKey,o))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function Pp(i,t){return((t==null?void 0:t.queryKeyHashFn)||Zl)(i)}function Zl(i){return JSON.stringify(i,(t,e)=>Fm(e)?Object.keys(e).sort().reduce((n,a)=>(n[a]=e[a],n),{}):e)}function Jl(i,t){return i===t?!0:typeof i!=typeof t?!1:i&&t&&typeof i=="object"&&typeof t=="object"?Object.keys(t).every(e=>Jl(i[e],t[e])):!1}function P_(i,t){if(i===t)return i;const e=ex(i)&&ex(t);if(e||Fm(i)&&Fm(t)){const n=e?i:Object.keys(i),a=n.length,o=e?t:Object.keys(t),c=o.length,h=e?[]:{};let f=0;for(let d=0;d<c;d++){const m=e?d:o[d];(!e&&n.includes(m)||e)&&i[m]===void 0&&t[m]===void 0?(h[m]=void 0,f++):(h[m]=P_(i[m],t[m]),h[m]===i[m]&&i[m]!==void 0&&f++)}return a===c&&f===a?i:h}return t}function Um(i,t){if(!t||Object.keys(i).length!==Object.keys(t).length)return!1;for(const e in i)if(i[e]!==t[e])return!1;return!0}function ex(i){return Array.isArray(i)&&i.length===Object.keys(i).length}function Fm(i){if(!nx(i))return!1;const t=i.constructor;if(t===void 0)return!0;const e=t.prototype;return!(!nx(e)||!e.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(i)!==Object.prototype)}function nx(i){return Object.prototype.toString.call(i)==="[object Object]"}function KD(i){return new Promise(t=>{setTimeout(t,i)})}function Pm(i,t,e){return typeof e.structuralSharing=="function"?e.structuralSharing(i,t):e.structuralSharing!==!1?P_(i,t):t}function $D(i,t,e=0){const n=[...i,t];return e&&n.length>e?n.slice(1):n}function ZD(i,t,e=0){const n=[t,...i];return e&&n.length>e?n.slice(0,-1):n}var Yp=Symbol();function Y_(i,t){return!i.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!i.queryFn||i.queryFn===Yp?()=>Promise.reject(new Error(`Missing queryFn: '${i.queryHash}'`)):i.queryFn}function JD(i,t){return typeof i=="function"?i(...t):!!i}var Fr,Ki,so,Ux,tM=(Ux=class extends yc{constructor(){super();Et(this,Fr);Et(this,Ki);Et(this,so);yt(this,so,t=>{if(!ta&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}})}onSubscribe(){z(this,Ki)||this.setEventListener(z(this,so))}onUnsubscribe(){var t;this.hasListeners()||((t=z(this,Ki))==null||t.call(this),yt(this,Ki,void 0))}setEventListener(t){var e;yt(this,so,t),(e=z(this,Ki))==null||e.call(this),yt(this,Ki,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){z(this,Fr)!==t&&(yt(this,Fr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){var t;return typeof z(this,Fr)=="boolean"?z(this,Fr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Fr=new WeakMap,Ki=new WeakMap,so=new WeakMap,Ux),Xp=new tM,io,$i,ro,Fx,eM=(Fx=class extends yc{constructor(){super();Et(this,io,!0);Et(this,$i);Et(this,ro);yt(this,ro,t=>{if(!ta&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}})}onSubscribe(){z(this,$i)||this.setEventListener(z(this,ro))}onUnsubscribe(){var t;this.hasListeners()||((t=z(this,$i))==null||t.call(this),yt(this,$i,void 0))}setEventListener(t){var e;yt(this,ro,t),(e=z(this,$i))==null||e.call(this),yt(this,$i,t(this.setOnline.bind(this)))}setOnline(t){z(this,io)!==t&&(yt(this,io,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return z(this,io)}},io=new WeakMap,$i=new WeakMap,ro=new WeakMap,Fx),Uh=new eM;function Ym(){let i,t;const e=new Promise((a,o)=>{i=a,t=o});e.status="pending",e.catch(()=>{});function n(a){Object.assign(e,a),delete e.resolve,delete e.reject}return e.resolve=a=>{n({status:"fulfilled",value:a}),i(a)},e.reject=a=>{n({status:"rejected",reason:a}),t(a)},e}function nM(i){return Math.min(1e3*2**i,3e4)}function X_(i){return(i??"online")==="online"?Uh.isOnline():!0}var q_=class extends Error{constructor(i){super("CancelledError"),this.revert=i==null?void 0:i.revert,this.silent=i==null?void 0:i.silent}};function rm(i){return i instanceof q_}function V_(i){let t=!1,e=0,n=!1,a;const o=Ym(),c=C=>{var _;n||(v(new q_(C)),(_=i.abort)==null||_.call(i))},h=()=>{t=!0},f=()=>{t=!1},d=()=>Xp.isFocused()&&(i.networkMode==="always"||Uh.isOnline())&&i.canRun(),m=()=>X_(i.networkMode)&&i.canRun(),y=C=>{var _;n||(n=!0,(_=i.onSuccess)==null||_.call(i,C),a==null||a(),o.resolve(C))},v=C=>{var _;n||(n=!0,(_=i.onError)==null||_.call(i,C),a==null||a(),o.reject(C))},b=()=>new Promise(C=>{var _;a=w=>{(n||d())&&C(w)},(_=i.onPause)==null||_.call(i)}).then(()=>{var C;a=void 0,n||(C=i.onContinue)==null||C.call(i)}),S=()=>{if(n)return;let C;const _=e===0?i.initialPromise:void 0;try{C=_??i.fn()}catch(w){C=Promise.reject(w)}Promise.resolve(C).then(y).catch(w=>{var R;if(n)return;const T=i.retry??(ta?0:3),E=i.retryDelay??nM,k=typeof E=="function"?E(e,w):E,A=T===!0||typeof T=="number"&&e<T||typeof T=="function"&&T(e,w);if(t||!A){v(w);return}e++,(R=i.onFail)==null||R.call(i,e,w),KD(k).then(()=>d()?void 0:b()).then(()=>{t?v(w):S()})})};return{promise:o,cancel:c,continue:()=>(a==null||a(),o),cancelRetry:h,continueRetry:f,canStart:m,start:()=>(m()?S():b().then(S),o)}}var sM=i=>setTimeout(i,0);function iM(){let i=[],t=0,e=h=>{h()},n=h=>{h()},a=sM;const o=h=>{t?i.push(h):a(()=>{e(h)})},c=()=>{const h=i;i=[],h.length&&a(()=>{n(()=>{h.forEach(f=>{e(f)})})})};return{batch:h=>{let f;t++;try{f=h()}finally{t--,t||c()}return f},batchCalls:h=>(...f)=>{o(()=>{h(...f)})},schedule:o,setNotifyFunction:h=>{e=h},setBatchNotifyFunction:h=>{n=h},setScheduler:h=>{a=h}}}var Ie=iM(),Pr,Px,G_=(Px=class{constructor(){Et(this,Pr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Hm(this.gcTime)&&yt(this,Pr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(i){this.gcTime=Math.max(this.gcTime||0,i??(ta?1/0:5*60*1e3))}clearGcTimeout(){z(this,Pr)&&(clearTimeout(z(this,Pr)),yt(this,Pr,void 0))}},Pr=new WeakMap,Px),ao,oo,Jn,Yr,en,oc,Xr,hs,ui,Yx,rM=(Yx=class extends G_{constructor(t){super();Et(this,hs);Et(this,ao);Et(this,oo);Et(this,Jn);Et(this,Yr);Et(this,en);Et(this,oc);Et(this,Xr);yt(this,Xr,!1),yt(this,oc,t.defaultOptions),this.setOptions(t.options),this.observers=[],yt(this,Yr,t.client),yt(this,Jn,z(this,Yr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,yt(this,ao,aM(this.options)),this.state=t.state??z(this,ao),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=z(this,en))==null?void 0:t.promise}setOptions(t){this.options={...z(this,oc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&z(this,Jn).remove(this)}setData(t,e){const n=Pm(this.state.data,t,this.options);return Pt(this,hs,ui).call(this,{data:n,type:"success",dataUpdatedAt:e==null?void 0:e.updatedAt,manual:e==null?void 0:e.manual}),n}setState(t,e){Pt(this,hs,ui).call(this,{type:"setState",state:t,setStateOptions:e})}cancel(t){var n,a;const e=(n=z(this,en))==null?void 0:n.promise;return(a=z(this,en))==null||a.cancel(t),e?e.then(Tn).catch(Tn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(z(this,ao))}isActive(){return this.observers.some(t=>ds(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Yp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>or(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!F_(this.state.dataUpdatedAt,t)}onFocus(){var e;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(e=z(this,en))==null||e.continue()}onOnline(){var e;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(e=z(this,en))==null||e.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),z(this,Jn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(z(this,en)&&(z(this,Xr)?z(this,en).cancel({revert:!0}):z(this,en).cancelRetry()),this.scheduleGc()),z(this,Jn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Pt(this,hs,ui).call(this,{type:"invalidate"})}fetch(t,e){var f,d,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(e!=null&&e.cancelRefetch))this.cancel({silent:!0});else if(z(this,en))return z(this,en).continueRetry(),z(this,en).promise}if(t&&this.setOptions(t),!this.options.queryFn){const y=this.observers.find(v=>v.options.queryFn);y&&this.setOptions(y.options)}const n=new AbortController,a=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(yt(this,Xr,!0),n.signal)})},o=()=>{const y=Y_(this.options,e),v={client:z(this,Yr),queryKey:this.queryKey,meta:this.meta};return a(v),yt(this,Xr,!1),this.options.persister?this.options.persister(y,v,this):y(v)},c={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:z(this,Yr),state:this.state,fetchFn:o};a(c),(f=this.options.behavior)==null||f.onFetch(c,this),yt(this,oo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=c.fetchOptions)==null?void 0:d.meta))&&Pt(this,hs,ui).call(this,{type:"fetch",meta:(m=c.fetchOptions)==null?void 0:m.meta});const h=y=>{var v,b,S,C;rm(y)&&y.silent||Pt(this,hs,ui).call(this,{type:"error",error:y}),rm(y)||((b=(v=z(this,Jn).config).onError)==null||b.call(v,y,this),(C=(S=z(this,Jn).config).onSettled)==null||C.call(S,this.state.data,y,this)),this.scheduleGc()};return yt(this,en,V_({initialPromise:e==null?void 0:e.initialPromise,fn:c.fetchFn,abort:n.abort.bind(n),onSuccess:y=>{var v,b,S,C;if(y===void 0){h(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(y)}catch(_){h(_);return}(b=(v=z(this,Jn).config).onSuccess)==null||b.call(v,y,this),(C=(S=z(this,Jn).config).onSettled)==null||C.call(S,y,this.state.error,this),this.scheduleGc()},onError:h,onFail:(y,v)=>{Pt(this,hs,ui).call(this,{type:"failed",failureCount:y,error:v})},onPause:()=>{Pt(this,hs,ui).call(this,{type:"pause"})},onContinue:()=>{Pt(this,hs,ui).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),z(this,en).start()}},ao=new WeakMap,oo=new WeakMap,Jn=new WeakMap,Yr=new WeakMap,en=new WeakMap,oc=new WeakMap,Xr=new WeakMap,hs=new WeakSet,ui=function(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...I_(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return rm(a)&&a.revert&&z(this,oo)?{...z(this,oo),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Ie.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),z(this,Jn).notify({query:this,type:"updated",action:t})})},Yx);function I_(i,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:X_(t.networkMode)?"fetching":"paused",...i===void 0&&{error:null,status:"pending"}}}function aM(i){const t=typeof i.initialData=="function"?i.initialData():i.initialData,e=t!==void 0,n=e?typeof i.initialDataUpdatedAt=="function"?i.initialDataUpdatedAt():i.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:e?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}var Ds,Xx,oM=(Xx=class extends yc{constructor(t={}){super();Et(this,Ds);this.config=t,yt(this,Ds,new Map)}build(t,e,n){const a=e.queryKey,o=e.queryHash??Pp(a,e);let c=this.get(o);return c||(c=new rM({client:t,queryKey:a,queryHash:o,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(c)),c}add(t){z(this,Ds).has(t.queryHash)||(z(this,Ds).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=z(this,Ds).get(t.queryHash);e&&(t.destroy(),e===t&&z(this,Ds).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ie.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return z(this,Ds).get(t)}getAll(){return[...z(this,Ds).values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Jb(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Jb(t,n)):e}notify(t){Ie.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Ie.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ie.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ds=new WeakMap,Xx),Ms,ln,qr,Rs,Qi,qx,lM=(qx=class extends G_{constructor(t){super();Et(this,Rs);Et(this,Ms);Et(this,ln);Et(this,qr);this.mutationId=t.mutationId,yt(this,ln,t.mutationCache),yt(this,Ms,[]),this.state=t.state||cM(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){z(this,Ms).includes(t)||(z(this,Ms).push(t),this.clearGcTimeout(),z(this,ln).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){yt(this,Ms,z(this,Ms).filter(e=>e!==t)),this.scheduleGc(),z(this,ln).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){z(this,Ms).length||(this.state.status==="pending"?this.scheduleGc():z(this,ln).remove(this))}continue(){var t;return((t=z(this,qr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,c,h,f,d,m,y,v,b,S,C,_,w,T,E,k,A,R,F,N;const e=()=>{Pt(this,Rs,Qi).call(this,{type:"continue"})};yt(this,qr,V_({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(I,J)=>{Pt(this,Rs,Qi).call(this,{type:"failed",failureCount:I,error:J})},onPause:()=>{Pt(this,Rs,Qi).call(this,{type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>z(this,ln).canRun(this)}));const n=this.state.status==="pending",a=!z(this,qr).canStart();try{if(n)e();else{Pt(this,Rs,Qi).call(this,{type:"pending",variables:t,isPaused:a}),await((c=(o=z(this,ln).config).onMutate)==null?void 0:c.call(o,t,this));const J=await((f=(h=this.options).onMutate)==null?void 0:f.call(h,t));J!==this.state.context&&Pt(this,Rs,Qi).call(this,{type:"pending",context:J,variables:t,isPaused:a})}const I=await z(this,qr).start();return await((m=(d=z(this,ln).config).onSuccess)==null?void 0:m.call(d,I,t,this.state.context,this)),await((v=(y=this.options).onSuccess)==null?void 0:v.call(y,I,t,this.state.context)),await((S=(b=z(this,ln).config).onSettled)==null?void 0:S.call(b,I,null,this.state.variables,this.state.context,this)),await((_=(C=this.options).onSettled)==null?void 0:_.call(C,I,null,t,this.state.context)),Pt(this,Rs,Qi).call(this,{type:"success",data:I}),I}catch(I){try{throw await((T=(w=z(this,ln).config).onError)==null?void 0:T.call(w,I,t,this.state.context,this)),await((k=(E=this.options).onError)==null?void 0:k.call(E,I,t,this.state.context)),await((R=(A=z(this,ln).config).onSettled)==null?void 0:R.call(A,void 0,I,this.state.variables,this.state.context,this)),await((N=(F=this.options).onSettled)==null?void 0:N.call(F,void 0,I,t,this.state.context)),I}finally{Pt(this,Rs,Qi).call(this,{type:"error",error:I})}}finally{z(this,ln).runNext(this)}}},Ms=new WeakMap,ln=new WeakMap,qr=new WeakMap,Rs=new WeakSet,Qi=function(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Ie.batch(()=>{z(this,Ms).forEach(n=>{n.onMutationUpdate(t)}),z(this,ln).notify({mutation:this,type:"updated",action:t})})},qx);function cM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var hi,fs,lc,Vx,uM=(Vx=class extends yc{constructor(t={}){super();Et(this,hi);Et(this,fs);Et(this,lc);this.config=t,yt(this,hi,new Set),yt(this,fs,new Map),yt(this,lc,0)}build(t,e,n){const a=new lM({mutationCache:this,mutationId:++Uu(this,lc)._,options:t.defaultMutationOptions(e),state:n});return this.add(a),a}add(t){z(this,hi).add(t);const e=hh(t);if(typeof e=="string"){const n=z(this,fs).get(e);n?n.push(t):z(this,fs).set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(z(this,hi).delete(t)){const e=hh(t);if(typeof e=="string"){const n=z(this,fs).get(e);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&z(this,fs).delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=hh(t);if(typeof e=="string"){const n=z(this,fs).get(e),a=n==null?void 0:n.find(o=>o.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const e=hh(t);if(typeof e=="string"){const a=(n=z(this,fs).get(e))==null?void 0:n.find(o=>o!==t&&o.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ie.batch(()=>{z(this,hi).forEach(t=>{this.notify({type:"removed",mutation:t})}),z(this,hi).clear(),z(this,fs).clear()})}getAll(){return Array.from(z(this,hi))}find(t){const e={exact:!0,...t};return this.getAll().find(n=>tx(e,n))}findAll(t={}){return this.getAll().filter(e=>tx(t,e))}notify(t){Ie.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Ie.batch(()=>Promise.all(t.map(e=>e.continue().catch(Tn))))}},hi=new WeakMap,fs=new WeakMap,lc=new WeakMap,Vx);function hh(i){var t;return(t=i.options.scope)==null?void 0:t.id}function sx(i){return{onFetch:(t,e)=>{var m,y,v,b,S;const n=t.options,a=(v=(y=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:y.fetchMore)==null?void 0:v.direction,o=((b=t.state.data)==null?void 0:b.pages)||[],c=((S=t.state.data)==null?void 0:S.pageParams)||[];let h={pages:[],pageParams:[]},f=0;const d=async()=>{let C=!1;const _=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(t.signal.aborted?C=!0:t.signal.addEventListener("abort",()=>{C=!0}),t.signal)})},w=Y_(t.options,t.fetchOptions),T=async(E,k,A)=>{if(C)return Promise.reject();if(k==null&&E.pages.length)return Promise.resolve(E);const R={client:t.client,queryKey:t.queryKey,pageParam:k,direction:A?"backward":"forward",meta:t.options.meta};_(R);const F=await w(R),{maxPages:N}=t.options,I=A?ZD:$D;return{pages:I(E.pages,F,N),pageParams:I(E.pageParams,k,N)}};if(a&&o.length){const E=a==="backward",k=E?hM:ix,A={pages:o,pageParams:c},R=k(n,A);h=await T(A,R,E)}else{const E=i??o.length;do{const k=f===0?c[0]??n.initialPageParam:ix(n,h);if(f>0&&k==null)break;h=await T(h,k),f++}while(f<E)}return h};t.options.persister?t.fetchFn=()=>{var C,_;return(_=(C=t.options).persister)==null?void 0:_.call(C,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},e)}:t.fetchFn=d}}}function ix(i,{pages:t,pageParams:e}){const n=t.length-1;return t.length>0?i.getNextPageParam(t[n],t,e[n],e):void 0}function hM(i,{pages:t,pageParams:e}){var n;return t.length>0?(n=i.getPreviousPageParam)==null?void 0:n.call(i,t[0],t,e[0],e):void 0}var xe,Zi,Ji,lo,co,tr,uo,ho,Gx,fM=(Gx=class{constructor(i={}){Et(this,xe);Et(this,Zi);Et(this,Ji);Et(this,lo);Et(this,co);Et(this,tr);Et(this,uo);Et(this,ho);yt(this,xe,i.queryCache||new oM),yt(this,Zi,i.mutationCache||new uM),yt(this,Ji,i.defaultOptions||{}),yt(this,lo,new Map),yt(this,co,new Map),yt(this,tr,0)}mount(){Uu(this,tr)._++,z(this,tr)===1&&(yt(this,uo,Xp.subscribe(async i=>{i&&(await this.resumePausedMutations(),z(this,xe).onFocus())})),yt(this,ho,Uh.subscribe(async i=>{i&&(await this.resumePausedMutations(),z(this,xe).onOnline())})))}unmount(){var i,t;Uu(this,tr)._--,z(this,tr)===0&&((i=z(this,uo))==null||i.call(this),yt(this,uo,void 0),(t=z(this,ho))==null||t.call(this),yt(this,ho,void 0))}isFetching(i){return z(this,xe).findAll({...i,fetchStatus:"fetching"}).length}isMutating(i){return z(this,Zi).findAll({...i,status:"pending"}).length}getQueryData(i){var e;const t=this.defaultQueryOptions({queryKey:i});return(e=z(this,xe).get(t.queryHash))==null?void 0:e.state.data}ensureQueryData(i){const t=this.defaultQueryOptions(i),e=z(this,xe).build(this,t),n=e.state.data;return n===void 0?this.fetchQuery(i):(i.revalidateIfStale&&e.isStaleByTime(or(t.staleTime,e))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(i){return z(this,xe).findAll(i).map(({queryKey:t,state:e})=>{const n=e.data;return[t,n]})}setQueryData(i,t,e){const n=this.defaultQueryOptions({queryKey:i}),a=z(this,xe).get(n.queryHash),o=a==null?void 0:a.state.data,c=QD(t,o);if(c!==void 0)return z(this,xe).build(this,n).setData(c,{...e,manual:!0})}setQueriesData(i,t,e){return Ie.batch(()=>z(this,xe).findAll(i).map(({queryKey:n})=>[n,this.setQueryData(n,t,e)]))}getQueryState(i){var e;const t=this.defaultQueryOptions({queryKey:i});return(e=z(this,xe).get(t.queryHash))==null?void 0:e.state}removeQueries(i){const t=z(this,xe);Ie.batch(()=>{t.findAll(i).forEach(e=>{t.remove(e)})})}resetQueries(i,t){const e=z(this,xe);return Ie.batch(()=>(e.findAll(i).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...i},t)))}cancelQueries(i,t={}){const e={revert:!0,...t},n=Ie.batch(()=>z(this,xe).findAll(i).map(a=>a.cancel(e)));return Promise.all(n).then(Tn).catch(Tn)}invalidateQueries(i,t={}){return Ie.batch(()=>(z(this,xe).findAll(i).forEach(e=>{e.invalidate()}),(i==null?void 0:i.refetchType)==="none"?Promise.resolve():this.refetchQueries({...i,type:(i==null?void 0:i.refetchType)??(i==null?void 0:i.type)??"active"},t)))}refetchQueries(i,t={}){const e={...t,cancelRefetch:t.cancelRefetch??!0},n=Ie.batch(()=>z(this,xe).findAll(i).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,e);return e.throwOnError||(o=o.catch(Tn)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(Tn)}fetchQuery(i){const t=this.defaultQueryOptions(i);t.retry===void 0&&(t.retry=!1);const e=z(this,xe).build(this,t);return e.isStaleByTime(or(t.staleTime,e))?e.fetch(t):Promise.resolve(e.state.data)}prefetchQuery(i){return this.fetchQuery(i).then(Tn).catch(Tn)}fetchInfiniteQuery(i){return i.behavior=sx(i.pages),this.fetchQuery(i)}prefetchInfiniteQuery(i){return this.fetchInfiniteQuery(i).then(Tn).catch(Tn)}ensureInfiniteQueryData(i){return i.behavior=sx(i.pages),this.ensureQueryData(i)}resumePausedMutations(){return Uh.isOnline()?z(this,Zi).resumePausedMutations():Promise.resolve()}getQueryCache(){return z(this,xe)}getMutationCache(){return z(this,Zi)}getDefaultOptions(){return z(this,Ji)}setDefaultOptions(i){yt(this,Ji,i)}setQueryDefaults(i,t){z(this,lo).set(Zl(i),{queryKey:i,defaultOptions:t})}getQueryDefaults(i){const t=[...z(this,lo).values()],e={};return t.forEach(n=>{Jl(i,n.queryKey)&&Object.assign(e,n.defaultOptions)}),e}setMutationDefaults(i,t){z(this,co).set(Zl(i),{mutationKey:i,defaultOptions:t})}getMutationDefaults(i){const t=[...z(this,co).values()],e={};return t.forEach(n=>{Jl(i,n.mutationKey)&&Object.assign(e,n.defaultOptions)}),e}defaultQueryOptions(i){if(i._defaulted)return i;const t={...z(this,Ji).queries,...this.getQueryDefaults(i.queryKey),...i,_defaulted:!0};return t.queryHash||(t.queryHash=Pp(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Yp&&(t.enabled=!1),t}defaultMutationOptions(i){return i!=null&&i._defaulted?i:{...z(this,Ji).mutations,...(i==null?void 0:i.mutationKey)&&this.getMutationDefaults(i.mutationKey),...i,_defaulted:!0}}clear(){z(this,xe).clear(),z(this,Zi).clear()}},xe=new WeakMap,Zi=new WeakMap,Ji=new WeakMap,lo=new WeakMap,co=new WeakMap,tr=new WeakMap,uo=new WeakMap,ho=new WeakMap,Gx),Cn,Yt,cc,cn,Vr,fo,er,nr,uc,go,mo,Gr,Ir,sr,po,Kt,Hl,Xm,qm,Vm,Gm,Im,Wm,Qm,W_,Ix,dM=(Ix=class extends yc{constructor(t,e){super();Et(this,Kt);Et(this,Cn);Et(this,Yt);Et(this,cc);Et(this,cn);Et(this,Vr);Et(this,fo);Et(this,er);Et(this,nr);Et(this,uc);Et(this,go);Et(this,mo);Et(this,Gr);Et(this,Ir);Et(this,sr);Et(this,po,new Set);this.options=e,yt(this,Cn,t),yt(this,nr,null),yt(this,er,Ym()),this.options.experimental_prefetchInRender||z(this,er).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(z(this,Yt).addObserver(this),rx(z(this,Yt),this.options)?Pt(this,Kt,Hl).call(this):this.updateResult(),Pt(this,Kt,Gm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Km(z(this,Yt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Km(z(this,Yt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Pt(this,Kt,Im).call(this),Pt(this,Kt,Wm).call(this),z(this,Yt).removeObserver(this)}setOptions(t){const e=this.options,n=z(this,Yt);if(this.options=z(this,Cn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ds(this.options.enabled,z(this,Yt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Pt(this,Kt,Qm).call(this),z(this,Yt).setOptions(this.options),e._defaulted&&!Um(this.options,e)&&z(this,Cn).getQueryCache().notify({type:"observerOptionsUpdated",query:z(this,Yt),observer:this});const a=this.hasListeners();a&&ax(z(this,Yt),n,this.options,e)&&Pt(this,Kt,Hl).call(this),this.updateResult(),a&&(z(this,Yt)!==n||ds(this.options.enabled,z(this,Yt))!==ds(e.enabled,z(this,Yt))||or(this.options.staleTime,z(this,Yt))!==or(e.staleTime,z(this,Yt)))&&Pt(this,Kt,Xm).call(this);const o=Pt(this,Kt,qm).call(this);a&&(z(this,Yt)!==n||ds(this.options.enabled,z(this,Yt))!==ds(e.enabled,z(this,Yt))||o!==z(this,sr))&&Pt(this,Kt,Vm).call(this,o)}getOptimisticResult(t){const e=z(this,Cn).getQueryCache().build(z(this,Cn),t),n=this.createResult(e,t);return mM(this,n)&&(yt(this,cn,n),yt(this,fo,this.options),yt(this,Vr,z(this,Yt).state)),n}getCurrentResult(){return z(this,cn)}trackResult(t,e){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),e==null||e(a),Reflect.get(n,a))})}trackProp(t){z(this,po).add(t)}getCurrentQuery(){return z(this,Yt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=z(this,Cn).defaultQueryOptions(t),n=z(this,Cn).getQueryCache().build(z(this,Cn),e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return Pt(this,Kt,Hl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),z(this,cn)))}createResult(t,e){var I;const n=z(this,Yt),a=this.options,o=z(this,cn),c=z(this,Vr),h=z(this,fo),d=t!==n?t.state:z(this,cc),{state:m}=t;let y={...m},v=!1,b;if(e._optimisticResults){const J=this.hasListeners(),ot=!J&&rx(t,e),rt=J&&ax(t,n,e,a);(ot||rt)&&(y={...y,...I_(m.data,t.options)}),e._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:S,errorUpdatedAt:C,status:_}=y;b=y.data;let w=!1;if(e.placeholderData!==void 0&&b===void 0&&_==="pending"){let J;o!=null&&o.isPlaceholderData&&e.placeholderData===(h==null?void 0:h.placeholderData)?(J=o.data,w=!0):J=typeof e.placeholderData=="function"?e.placeholderData((I=z(this,mo))==null?void 0:I.state.data,z(this,mo)):e.placeholderData,J!==void 0&&(_="success",b=Pm(o==null?void 0:o.data,J,e),v=!0)}if(e.select&&b!==void 0&&!w)if(o&&b===(c==null?void 0:c.data)&&e.select===z(this,uc))b=z(this,go);else try{yt(this,uc,e.select),b=e.select(b),b=Pm(o==null?void 0:o.data,b,e),yt(this,go,b),yt(this,nr,null)}catch(J){yt(this,nr,J)}z(this,nr)&&(S=z(this,nr),b=z(this,go),C=Date.now(),_="error");const T=y.fetchStatus==="fetching",E=_==="pending",k=_==="error",A=E&&T,R=b!==void 0,N={status:_,fetchStatus:y.fetchStatus,isPending:E,isSuccess:_==="success",isError:k,isInitialLoading:A,isLoading:A,data:b,dataUpdatedAt:y.dataUpdatedAt,error:S,errorUpdatedAt:C,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>d.dataUpdateCount||y.errorUpdateCount>d.errorUpdateCount,isFetching:T,isRefetching:T&&!E,isLoadingError:k&&!R,isPaused:y.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:k&&R,isStale:qp(t,e),refetch:this.refetch,promise:z(this,er)};if(this.options.experimental_prefetchInRender){const J=ut=>{N.status==="error"?ut.reject(N.error):N.data!==void 0&&ut.resolve(N.data)},ot=()=>{const ut=yt(this,er,N.promise=Ym());J(ut)},rt=z(this,er);switch(rt.status){case"pending":t.queryHash===n.queryHash&&J(rt);break;case"fulfilled":(N.status==="error"||N.data!==rt.value)&&ot();break;case"rejected":(N.status!=="error"||N.error!==rt.reason)&&ot();break}}return N}updateResult(){const t=z(this,cn),e=this.createResult(z(this,Yt),this.options);if(yt(this,Vr,z(this,Yt).state),yt(this,fo,this.options),z(this,Vr).data!==void 0&&yt(this,mo,z(this,Yt)),Um(e,t))return;yt(this,cn,e);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!z(this,po).size)return!0;const c=new Set(o??z(this,po));return this.options.throwOnError&&c.add("error"),Object.keys(z(this,cn)).some(h=>{const f=h;return z(this,cn)[f]!==t[f]&&c.has(f)})};Pt(this,Kt,W_).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Pt(this,Kt,Gm).call(this)}},Cn=new WeakMap,Yt=new WeakMap,cc=new WeakMap,cn=new WeakMap,Vr=new WeakMap,fo=new WeakMap,er=new WeakMap,nr=new WeakMap,uc=new WeakMap,go=new WeakMap,mo=new WeakMap,Gr=new WeakMap,Ir=new WeakMap,sr=new WeakMap,po=new WeakMap,Kt=new WeakSet,Hl=function(t){Pt(this,Kt,Qm).call(this);let e=z(this,Yt).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(Tn)),e},Xm=function(){Pt(this,Kt,Im).call(this);const t=or(this.options.staleTime,z(this,Yt));if(ta||z(this,cn).isStale||!Hm(t))return;const n=F_(z(this,cn).dataUpdatedAt,t)+1;yt(this,Gr,setTimeout(()=>{z(this,cn).isStale||this.updateResult()},n))},qm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(z(this,Yt)):this.options.refetchInterval)??!1},Vm=function(t){Pt(this,Kt,Wm).call(this),yt(this,sr,t),!(ta||ds(this.options.enabled,z(this,Yt))===!1||!Hm(z(this,sr))||z(this,sr)===0)&&yt(this,Ir,setInterval(()=>{(this.options.refetchIntervalInBackground||Xp.isFocused())&&Pt(this,Kt,Hl).call(this)},z(this,sr)))},Gm=function(){Pt(this,Kt,Xm).call(this),Pt(this,Kt,Vm).call(this,Pt(this,Kt,qm).call(this))},Im=function(){z(this,Gr)&&(clearTimeout(z(this,Gr)),yt(this,Gr,void 0))},Wm=function(){z(this,Ir)&&(clearInterval(z(this,Ir)),yt(this,Ir,void 0))},Qm=function(){const t=z(this,Cn).getQueryCache().build(z(this,Cn),this.options);if(t===z(this,Yt))return;const e=z(this,Yt);yt(this,Yt,t),yt(this,cc,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},W_=function(t){Ie.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(z(this,cn))}),z(this,Cn).getQueryCache().notify({query:z(this,Yt),type:"observerResultsUpdated"})})},Ix);function gM(i,t){return ds(t.enabled,i)!==!1&&i.state.data===void 0&&!(i.state.status==="error"&&t.retryOnMount===!1)}function rx(i,t){return gM(i,t)||i.state.data!==void 0&&Km(i,t,t.refetchOnMount)}function Km(i,t,e){if(ds(t.enabled,i)!==!1&&or(t.staleTime,i)!=="static"){const n=typeof e=="function"?e(i):e;return n==="always"||n!==!1&&qp(i,t)}return!1}function ax(i,t,e,n){return(i!==t||ds(n.enabled,i)===!1)&&(!e.suspense||i.state.status!=="error")&&qp(i,e)}function qp(i,t){return ds(t.enabled,i)!==!1&&i.isStaleByTime(or(t.staleTime,i))}function mM(i,t){return!Um(i.getCurrentResult(),t)}var Q_=U.createContext(void 0),pM=i=>{const t=U.useContext(Q_);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},yM=({client:i,children:t})=>(U.useEffect(()=>(i.mount(),()=>{i.unmount()}),[i]),Q.jsx(Q_.Provider,{value:i,children:t})),K_=U.createContext(!1),vM=()=>U.useContext(K_);K_.Provider;function bM(){let i=!1;return{clearReset:()=>{i=!1},reset:()=>{i=!0},isReset:()=>i}}var xM=U.createContext(bM()),SM=()=>U.useContext(xM),_M=(i,t)=>{(i.suspense||i.throwOnError||i.experimental_prefetchInRender)&&(t.isReset()||(i.retryOnMount=!1))},CM=i=>{U.useEffect(()=>{i.clearReset()},[i])},TM=({result:i,errorResetBoundary:t,throwOnError:e,query:n,suspense:a})=>i.isError&&!t.isReset()&&!i.isFetching&&n&&(a&&i.data===void 0||JD(e,[i.error,n])),wM=i=>{if(i.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),e=i.staleTime;i.staleTime=typeof e=="function"?(...n)=>t(e(...n)):t(e),typeof i.gcTime=="number"&&(i.gcTime=Math.max(i.gcTime,1e3))}},OM=(i,t)=>i.isLoading&&i.isFetching&&!t,EM=(i,t)=>(i==null?void 0:i.suspense)&&t.isPending,ox=(i,t,e)=>t.fetchOptimistic(i).catch(()=>{e.clearReset()});function AM(i,t,e){var y,v,b,S,C;const n=pM(),a=vM(),o=SM(),c=n.defaultQueryOptions(i);(v=(y=n.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||v.call(y,c),c._optimisticResults=a?"isRestoring":"optimistic",wM(c),_M(c,o),CM(o);const h=!n.getQueryCache().get(c.queryHash),[f]=U.useState(()=>new t(n,c)),d=f.getOptimisticResult(c),m=!a&&i.subscribed!==!1;if(U.useSyncExternalStore(U.useCallback(_=>{const w=m?f.subscribe(Ie.batchCalls(_)):Tn;return f.updateResult(),w},[f,m]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),U.useEffect(()=>{f.setOptions(c)},[c,f]),EM(c,d))throw ox(c,f,o);if(TM({result:d,errorResetBoundary:o,throwOnError:c.throwOnError,query:n.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw d.error;if((S=(b=n.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||S.call(b,c,d),c.experimental_prefetchInRender&&!ta&&OM(d,a)){const _=h?ox(c,f,o):(C=n.getQueryCache().get(c.queryHash))==null?void 0:C.promise;_==null||_.catch(Tn).finally(()=>{f.updateResult()})}return c.notifyOnChangeProps?d:f.trackResult(d)}function DM(i,t){return AM(i,dM)}const hf=0,fr=1,Eo=2,$_=4;function lx(i){return()=>i}function MM(i){i()}function RM(i,t){return e=>i(t(e))}function cx(i,t){return()=>i(t)}function kM(i,t){return e=>i(t,e)}function Vp(i){return i!==void 0}function jM(...i){return()=>{i.map(MM)}}function vc(){}function ff(i,t){return t(i),i}function LM(i,t){return t(i)}function he(...i){return i}function te(i,t){return i(fr,t)}function Bt(i,t){i(hf,t)}function Gp(i){i(Eo)}function Ye(i){return i($_)}function St(i,t){return te(i,kM(t,hf))}function Xs(i,t){const e=i(fr,n=>{e(),t(n)});return e}function ux(i){let t,e;return n=>a=>{t=a,e&&clearTimeout(e),e=setTimeout(()=>{n(t)},i)}}function Z_(i,t){return i===t}function ue(i=Z_){let t;return e=>n=>{i(t,n)||(t=n,e(n))}}function At(i){return t=>e=>{i(e)&&t(e)}}function mt(i){return t=>RM(t,i)}function js(i){return t=>()=>{t(i)}}function st(i,...t){const e=BM(...t);return(n,a)=>{switch(n){case Eo:Gp(i);return;case fr:return te(i,e(a))}}}function zs(i,t){return e=>n=>{e(t=i(t,n))}}function xo(i){return t=>e=>{i>0?i--:t(e)}}function ir(i){let t=null,e;return n=>a=>{t=a,!e&&(e=setTimeout(()=>{e=void 0,n(t)},i))}}function Nt(...i){const t=new Array(i.length);let e=0,n=null;const a=Math.pow(2,i.length)-1;return i.forEach((o,c)=>{const h=Math.pow(2,c);te(o,f=>{const d=e;e=e|h,t[c]=f,d!==a&&e===a&&n&&(n(),n=null)})}),o=>c=>{const h=()=>{o([c].concat(t))};e===a?h():n=h}}function BM(...i){return t=>i.reduceRight(LM,t)}function zM(i){let t,e;const n=()=>t==null?void 0:t();return function(a,o){switch(a){case fr:return o?e===o?void 0:(n(),e=o,t=te(i,o),t):(n(),vc);case Eo:n(),e=null;return}}}function lt(i){let t=i;const e=qt();return(n,a)=>{switch(n){case hf:t=a;break;case fr:{a(t);break}case $_:return t}return e(n,a)}}function rn(i,t){return ff(lt(t),e=>St(i,e))}function qt(){const i=[];return(t,e)=>{switch(t){case hf:i.slice().forEach(n=>{n(e)});return;case Eo:i.splice(0,i.length);return;case fr:return i.push(e),()=>{const n=i.indexOf(e);n>-1&&i.splice(n,1)}}}}function Un(i){return ff(qt(),t=>St(i,t))}function Wt(i,t=[],{singleton:e}={singleton:!0}){return{constructor:i,dependencies:t,id:NM(),singleton:e}}const NM=()=>Symbol();function HM(i){const t=new Map,e=({constructor:n,dependencies:a,id:o,singleton:c})=>{if(c&&t.has(o))return t.get(o);const h=n(a.map(f=>e(f)));return c&&t.set(o,h),h};return e(i)}function Be(...i){const t=qt(),e=new Array(i.length);let n=0;const a=Math.pow(2,i.length)-1;return i.forEach((o,c)=>{const h=Math.pow(2,c);te(o,f=>{e[c]=f,n=n|h,n===a&&Bt(t,e)})}),function(o,c){switch(o){case Eo:{Gp(t);return}case fr:return n===a&&c(e),te(t,c)}}}function Dt(i,t=Z_){return st(i,ue(t))}function hx(...i){return function(t,e){switch(t){case Eo:return;case fr:return jM(...i.map(n=>te(n,e)))}}}var ss=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i))(ss||{});const UM={0:"debug",3:"error",1:"log",2:"warn"},FM=()=>typeof globalThis>"u"?window:globalThis,dr=Wt(()=>{const i=lt(3);return{log:lt((t,e,n=1)=>{var a;const o=(a=FM().VIRTUOSO_LOG_LEVEL)!=null?a:Ye(i);n>=o&&console[UM[n]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,e)}),logLevel:i}},[],{singleton:!0});function df(i,t,e){return J_(i,t,e).callbackRef}function J_(i,t,e){const n=ht.useRef(null);let a=c=>{};const o=ht.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(c=>{requestAnimationFrame(()=>{const f=c[0].target;f.offsetParent!==null&&i(f)})}):null,[i,e]);return a=c=>{c&&t?(o==null||o.observe(c),n.current=c):(n.current&&(o==null||o.unobserve(n.current)),n.current=null)},{callbackRef:a,ref:n}}function PM(i,t,e){const n=ht.useRef(null),a=ht.useCallback(f=>{if(!(f!=null&&f.offsetParent))return;const d=f.getBoundingClientRect(),m=d.width;let y,v;if(t){const b=t.getBoundingClientRect(),S=d.top-b.top;v=b.height-Math.max(0,S),y=S+t.scrollTop}else{const b=c.current.ownerDocument.defaultView;v=b.innerHeight-Math.max(0,d.top),y=d.top+b.scrollY}n.current={offsetTop:y,visibleHeight:v,visibleWidth:m},i(n.current)},[i,t]),{callbackRef:o,ref:c}=J_(a,!0,e),h=ht.useCallback(()=>{a(c.current)},[a,c]);return ht.useEffect(()=>{var f;if(t){t.addEventListener("scroll",h);const d=new ResizeObserver(()=>{requestAnimationFrame(h)});return d.observe(t),()=>{t.removeEventListener("scroll",h),d.unobserve(t)}}else{const d=(f=c.current)==null?void 0:f.ownerDocument.defaultView;return d==null||d.addEventListener("scroll",h),d==null||d.addEventListener("resize",h),()=>{d==null||d.removeEventListener("scroll",h),d==null||d.removeEventListener("resize",h)}}},[h,t,c]),o}const yn=Wt(()=>{const i=qt(),t=qt(),e=lt(0),n=qt(),a=lt(0),o=qt(),c=qt(),h=lt(0),f=lt(0),d=lt(0),m=lt(0),y=qt(),v=qt(),b=lt(!1),S=lt(!1),C=lt(!1);return St(st(i,mt(({scrollTop:_})=>_)),t),St(st(i,mt(({scrollHeight:_})=>_)),c),St(t,a),{deviation:e,fixedFooterHeight:d,fixedHeaderHeight:f,footerHeight:m,headerHeight:h,horizontalDirection:S,scrollBy:v,scrollContainerState:i,scrollHeight:c,scrollingInProgress:b,scrollTo:y,scrollTop:t,skipAnimationFrameInResizeObserver:C,smoothScrollTargetReached:n,statefulScrollTop:a,viewportHeight:o}},[],{singleton:!0}),tc={lvl:0};function t2(i,t){const e=i.length;if(e===0)return[];let{index:n,value:a}=t(i[0]);const o=[];for(let c=1;c<e;c++){const{index:h,value:f}=t(i[c]);o.push({end:h-1,start:n,value:a}),n=h,a=f}return o.push({end:1/0,start:n,value:a}),o}function ae(i){return i===tc}function ec(i,t){if(!ae(i))return t===i.k?i.v:t<i.k?ec(i.l,t):ec(i.r,t)}function bs(i,t,e="k"){if(ae(i))return[-1/0,void 0];if(Number(i[e])===t)return[i.k,i.v];if(Number(i[e])<t){const n=bs(i.r,t,e);return n[0]===-1/0?[i.k,i.v]:n}return bs(i.l,t,e)}function Hn(i,t,e){return ae(i)?s2(t,e,1):t===i.k?Le(i,{k:t,v:e}):t<i.k?fx(Le(i,{l:Hn(i.l,t,e)})):fx(Le(i,{r:Hn(i.r,t,e)}))}function no(){return tc}function gf(i,t,e){if(ae(i))return[];const n=bs(i,t)[0];return YM(Zm(i,n,e))}function $m(i,t){if(ae(i))return tc;const{k:e,l:n,r:a}=i;if(t===e){if(ae(n))return a;if(ae(a))return n;{const[o,c]=n2(n);return yh(Le(i,{k:o,l:e2(n),v:c}))}}else return t<e?yh(Le(i,{l:$m(n,t)})):yh(Le(i,{r:$m(a,t)}))}function Hr(i){return ae(i)?[]:[...Hr(i.l),{k:i.k,v:i.v},...Hr(i.r)]}function Zm(i,t,e){if(ae(i))return[];const{k:n,l:a,r:o,v:c}=i;let h=[];return n>t&&(h=h.concat(Zm(a,t,e))),n>=t&&n<=e&&h.push({k:n,v:c}),n<=e&&(h=h.concat(Zm(o,t,e))),h}function yh(i){const{l:t,lvl:e,r:n}=i;if(n.lvl>=e-1&&t.lvl>=e-1)return i;if(e>n.lvl+1){if(am(t))return i2(Le(i,{lvl:e-1}));if(!ae(t)&&!ae(t.r))return Le(t.r,{l:Le(t,{r:t.r.l}),lvl:e,r:Le(i,{l:t.r.r,lvl:e-1})});throw new Error("Unexpected empty nodes")}else{if(am(i))return Jm(Le(i,{lvl:e-1}));if(!ae(n)&&!ae(n.l)){const a=n.l,o=am(a)?n.lvl-1:n.lvl;return Le(a,{l:Le(i,{lvl:e-1,r:a.l}),lvl:a.lvl+1,r:Jm(Le(n,{l:a.r,lvl:o}))})}else throw new Error("Unexpected empty nodes")}}function Le(i,t){return s2(t.k!==void 0?t.k:i.k,t.v!==void 0?t.v:i.v,t.lvl!==void 0?t.lvl:i.lvl,t.l!==void 0?t.l:i.l,t.r!==void 0?t.r:i.r)}function e2(i){return ae(i.r)?i.l:yh(Le(i,{r:e2(i.r)}))}function am(i){return ae(i)||i.lvl>i.r.lvl}function n2(i){return ae(i.r)?[i.k,i.v]:n2(i.r)}function s2(i,t,e,n=tc,a=tc){return{k:i,l:n,lvl:e,r:a,v:t}}function fx(i){return Jm(i2(i))}function i2(i){const{l:t}=i;return!ae(t)&&t.lvl===i.lvl?Le(t,{r:Le(i,{l:t.r})}):i}function Jm(i){const{lvl:t,r:e}=i;return!ae(e)&&!ae(e.r)&&e.lvl===t&&e.r.lvl===t?Le(e,{l:Le(i,{r:e.l}),lvl:t+1}):i}function YM(i){return t2(i,({k:t,v:e})=>({index:t,value:e}))}function r2(i,t){return!!(i&&i.startIndex===t.startIndex&&i.endIndex===t.endIndex)}function nc(i,t){return!!(i&&i[0]===t[0]&&i[1]===t[1])}const Ip=Wt(()=>({recalcInProgress:lt(!1)}),[],{singleton:!0});function a2(i,t,e){return i[Fh(i,t,e)]}function Fh(i,t,e,n=0){let a=i.length-1;for(;n<=a;){const o=Math.floor((n+a)/2),c=i[o],h=e(c,t);if(h===0)return o;if(h===-1){if(a-n<2)return o-1;a=o-1}else{if(a===n)return o;n=o+1}}throw new Error(`Failed binary finding record in array - ${i.join(",")}, searched for ${t}`)}function XM(i,t,e,n){const a=Fh(i,t,n),o=Fh(i,e,n,a);return i.slice(a,o+1)}function sc(i,t){return Math.round(i.getBoundingClientRect()[t])}function mf(i){return!ae(i.groupOffsetTree)}function Wp({index:i},t){return t===i?0:t<i?-1:1}function qM(){return{groupIndices:[],groupOffsetTree:no(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:no()}}function VM(i,t){let e=ae(i)?0:1/0;for(const n of t){const{endIndex:a,size:o,startIndex:c}=n;if(e=Math.min(e,c),ae(i)){i=Hn(i,0,o);continue}const h=gf(i,c-1,a+1);if(h.some(ZM(n)))continue;let f=!1,d=!1;for(const{end:m,start:y,value:v}of h)f?(a>=y||o===v)&&(i=$m(i,y)):(d=v!==o,f=!0),m>a&&a>=y&&v!==o&&(i=Hn(i,a+1,v));d&&(i=Hn(i,c,o))}return[i,e]}function GM(i){return typeof i.groupIndex<"u"}function IM({offset:i},t){return t===i?0:t<i?-1:1}function ic(i,t,e){if(t.length===0)return 0;const{index:n,offset:a,size:o}=a2(t,i,Wp),c=i-n,h=o*c+(c-1)*e+a;return h>0?h+e:h}function o2(i,t){if(!mf(t))return i;let e=0;for(;t.groupIndices[e]<=i+e;)e++;return i+e}function l2(i,t,e){if(GM(i))return t.groupIndices[i.groupIndex]+1;{const n=i.index==="LAST"?e:i.index;let a=o2(n,t);return a=Math.max(0,a,Math.min(e,a)),a}}function WM(i,t,e,n=0){return n>0&&(t=Math.max(t,a2(i,n,Wp).offset)),t2(XM(i,t,e,IM),$M)}function QM(i,[t,e,n,a]){t.length>0&&n("received item sizes",t,ss.DEBUG);const o=i.sizeTree;let c=o,h=0;if(e.length>0&&ae(o)&&t.length===2){const v=t[0].size,b=t[1].size;c=e.reduce((S,C)=>Hn(Hn(S,C,v),C+1,b),c)}else[c,h]=VM(c,t);if(c===o)return i;const{lastIndex:f,lastOffset:d,lastSize:m,offsetTree:y}=tp(i.offsetTree,h,c,a);return{groupIndices:e,groupOffsetTree:e.reduce((v,b)=>Hn(v,b,ic(b,y,a)),no()),lastIndex:f,lastOffset:d,lastSize:m,offsetTree:y,sizeTree:c}}function KM(i){return Hr(i).map(({k:t,v:e},n,a)=>{const o=a[n+1];return{endIndex:o?o.k-1:1/0,size:e,startIndex:t}})}function dx(i,t){let e=0,n=0;for(;e<i;)e+=t[n+1]-t[n]-1,n++;return n-(e===i?0:1)}function tp(i,t,e,n){let a=i,o=0,c=0,h=0,f=0;if(t!==0){f=Fh(a,t-1,Wp),h=a[f].offset;const d=bs(e,t-1);o=d[0],c=d[1],a.length&&a[f].size===bs(e,t)[1]&&(f-=1),a=a.slice(0,f+1)}else a=[];for(const{start:d,value:m}of gf(e,t,1/0)){const y=d-o,v=y*c+h+y*n;a.push({index:d,offset:v,size:m}),o=d,h=v,c=m}return{lastIndex:o,lastOffset:h,lastSize:c,offsetTree:a}}function $M(i){return{index:i.index,value:i}}function ZM(i){const{endIndex:t,size:e,startIndex:n}=i;return a=>a.start===n&&(a.end===t||a.end===1/0)&&a.value===e}const JM={offsetHeight:"height",offsetWidth:"width"},Vs=Wt(([{log:i},{recalcInProgress:t}])=>{const e=qt(),n=qt(),a=rn(n,0),o=qt(),c=qt(),h=lt(0),f=lt([]),d=lt(void 0),m=lt(void 0),y=lt((A,R)=>sc(A,JM[R])),v=lt(void 0),b=lt(0),S=qM(),C=rn(st(e,Nt(f,i,b),zs(QM,S),ue()),S),_=rn(st(f,ue(),zs((A,R)=>({current:R,prev:A.current}),{current:[],prev:[]}),mt(({prev:A})=>A)),[]);St(st(f,At(A=>A.length>0),Nt(C,b),mt(([A,R,F])=>{const N=A.reduce((I,J,ot)=>Hn(I,J,ic(J,R.offsetTree,F)||ot),no());return{...R,groupIndices:A,groupOffsetTree:N}})),C),St(st(n,Nt(C),At(([A,{lastIndex:R}])=>A<R),mt(([A,{lastIndex:R,lastSize:F}])=>[{endIndex:R,size:F,startIndex:A}])),e),St(d,m);const w=rn(st(d,mt(A=>A===void 0)),!0);St(st(m,At(A=>A!==void 0&&ae(Ye(C).sizeTree)),mt(A=>[{endIndex:0,size:A,startIndex:0}])),e);const T=Un(st(e,Nt(C),zs(({sizes:A},[R,F])=>({changed:F!==A,sizes:F}),{changed:!1,sizes:S}),mt(A=>A.changed)));te(st(h,zs((A,R)=>({diff:A.prev-R,prev:R}),{diff:0,prev:0}),mt(A=>A.diff)),A=>{const{groupIndices:R}=Ye(C);if(A>0)Bt(t,!0),Bt(o,A+dx(A,R));else if(A<0){const F=Ye(_);F.length>0&&(A-=dx(-A,F)),Bt(c,A)}}),te(st(h,Nt(i)),([A,R])=>{A<0&&R("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:h},ss.ERROR)});const E=Un(o);St(st(o,Nt(C),mt(([A,R])=>{const F=R.groupIndices.length>0,N=[],I=R.lastSize;if(F){const J=ec(R.sizeTree,0);let ot=0,rt=0;for(;ot<A;){const ft=R.groupIndices[rt],bt=R.groupIndices.length===rt+1?1/0:R.groupIndices[rt+1]-ft-1;N.push({endIndex:ft,size:J,startIndex:ft}),N.push({endIndex:ft+1+bt-1,size:I,startIndex:ft+1}),rt++,ot+=bt+1}const ut=Hr(R.sizeTree);return ot!==A&&ut.shift(),ut.reduce((ft,{k:bt,v:X})=>{let nt=ft.ranges;return ft.prevSize!==0&&(nt=[...ft.ranges,{endIndex:bt+A-1,size:ft.prevSize,startIndex:ft.prevIndex}]),{prevIndex:bt+A,prevSize:X,ranges:nt}},{prevIndex:A,prevSize:0,ranges:N}).ranges}return Hr(R.sizeTree).reduce((J,{k:ot,v:rt})=>({prevIndex:ot+A,prevSize:rt,ranges:[...J.ranges,{endIndex:ot+A-1,size:J.prevSize,startIndex:J.prevIndex}]}),{prevIndex:0,prevSize:I,ranges:[]}).ranges})),e);const k=Un(st(c,Nt(C,b),mt(([A,{offsetTree:R},F])=>{const N=-A;return ic(N,R,F)})));return St(st(c,Nt(C,b),mt(([A,R,F])=>{if(R.groupIndices.length>0){if(ae(R.sizeTree))return R;let N=no();const I=Ye(_);let J=0,ot=0,rt=0;for(;J<-A;){rt=I[ot];const ut=I[ot+1]-rt-1;ot++,J+=ut+1}if(N=Hr(R.sizeTree).reduce((ut,{k:ft,v:bt})=>Hn(ut,Math.max(0,ft+A),bt),N),J!==-A){const ut=ec(R.sizeTree,rt);N=Hn(N,0,ut);const ft=bs(R.sizeTree,-A+1)[1];N=Hn(N,1,ft)}return{...R,sizeTree:N,...tp(R.offsetTree,0,N,F)}}else{const N=Hr(R.sizeTree).reduce((I,{k:J,v:ot})=>Hn(I,Math.max(0,J+A),ot),no());return{...R,sizeTree:N,...tp(R.offsetTree,0,N,F)}}})),C),{beforeUnshiftWith:E,data:v,defaultItemSize:m,firstItemIndex:h,fixedItemSize:d,gap:b,groupIndices:f,itemSize:y,listRefresh:T,shiftWith:c,shiftWithOffset:k,sizeRanges:e,sizes:C,statefulTotalCount:a,totalCount:n,trackItemSizes:w,unshiftWith:o}},he(dr,Ip),{singleton:!0});function t3(i){return i.reduce((t,e)=>(t.groupIndices.push(t.totalCount),t.totalCount+=e+1,t),{groupIndices:[],totalCount:0})}const c2=Wt(([{groupIndices:i,sizes:t,totalCount:e},{headerHeight:n,scrollTop:a}])=>{const o=qt(),c=qt(),h=Un(st(o,mt(t3)));return St(st(h,mt(f=>f.totalCount)),e),St(st(h,mt(f=>f.groupIndices)),i),St(st(Be(a,t,n),At(([f,d])=>mf(d)),mt(([f,d,m])=>bs(d.groupOffsetTree,Math.max(f-m,0),"v")[0]),ue(),mt(f=>[f])),c),{groupCounts:o,topItemsIndexes:c}},he(Vs,yn)),gr=Wt(([{log:i}])=>{const t=lt(!1),e=Un(st(t,At(n=>n),ue()));return te(t,n=>{n&&Ye(i)("props updated",{},ss.DEBUG)}),{didMount:e,propsReady:t}},he(dr),{singleton:!0}),e3=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function u2(i){const t=typeof i=="number"?{index:i}:i;return t.align||(t.align="start"),(!t.behavior||!e3)&&(t.behavior="auto"),t.offset||(t.offset=0),t}const bc=Wt(([{gap:i,listRefresh:t,sizes:e,totalCount:n},{fixedFooterHeight:a,fixedHeaderHeight:o,footerHeight:c,headerHeight:h,scrollingInProgress:f,scrollTo:d,smoothScrollTargetReached:m,viewportHeight:y},{log:v}])=>{const b=qt(),S=qt(),C=lt(0);let _=null,w=null,T=null;function E(){_&&(_(),_=null),T&&(T(),T=null),w&&(clearTimeout(w),w=null),Bt(f,!1)}return St(st(b,Nt(e,y,n,C,h,c,v),Nt(i,o,a),mt(([[k,A,R,F,N,I,J,ot],rt,ut,ft])=>{const bt=u2(k),{align:X,behavior:nt,offset:at}=bt,Ct=F-1,M=l2(bt,A,Ct);let K=ic(M,A.offsetTree,rt)+I;X==="end"?(K+=ut+bs(A.sizeTree,M)[1]-R+ft,M===Ct&&(K+=J)):X==="center"?K+=(ut+bs(A.sizeTree,M)[1]-R+ft)/2:K-=N,at&&(K+=at);const ct=it=>{E(),it?(ot("retrying to scroll to",{location:k},ss.DEBUG),Bt(b,k)):(Bt(S,!0),ot("list did not change, scroll successful",{},ss.DEBUG))};if(E(),nt==="smooth"){let it=!1;T=te(t,gt=>{it=it||gt}),_=Xs(m,()=>{ct(it)})}else _=Xs(st(t,n3(150)),ct);return w=setTimeout(()=>{E()},1200),Bt(f,!0),ot("scrolling from index to",{behavior:nt,index:M,top:K},ss.DEBUG),{behavior:nt,top:K}})),d),{scrollTargetReached:S,scrollToIndex:b,topListHeight:C}},he(Vs,yn,dr),{singleton:!0});function n3(i){return t=>{const e=setTimeout(()=>{t(!1)},i);return n=>{n&&(t(!0),clearTimeout(e))}}}function Qp(i,t){i==0?t():requestAnimationFrame(()=>{Qp(i-1,t)})}function Kp(i,t){const e=t-1;return typeof i=="number"?i:i.index==="LAST"?e:i.index}const xc=Wt(([{defaultItemSize:i,listRefresh:t,sizes:e},{scrollTop:n},{scrollTargetReached:a,scrollToIndex:o},{didMount:c}])=>{const h=lt(!0),f=lt(0),d=lt(!0);return St(st(c,Nt(f),At(([m,y])=>!!y),js(!1)),h),St(st(c,Nt(f),At(([m,y])=>!!y),js(!1)),d),te(st(Be(t,c),Nt(h,e,i,d),At(([[,m],y,{sizeTree:v},b,S])=>m&&(!ae(v)||Vp(b))&&!y&&!S),Nt(f)),([,m])=>{Xs(a,()=>{Bt(d,!0)}),Qp(4,()=>{Xs(n,()=>{Bt(h,!0)}),Bt(o,m)})}),{initialItemFinalLocationReached:d,initialTopMostItemIndex:f,scrolledToInitialItem:h}},he(Vs,yn,bc,gr),{singleton:!0});function h2(i,t){return Math.abs(i-t)<1.01}const rc="up",ql="down",s3="none",i3={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},r3=0,Sc=Wt(([{footerHeight:i,headerHeight:t,scrollBy:e,scrollContainerState:n,scrollTop:a,viewportHeight:o}])=>{const c=lt(!1),h=lt(!0),f=qt(),d=qt(),m=lt(4),y=lt(r3),v=rn(st(hx(st(Dt(a),xo(1),js(!0)),st(Dt(a),xo(1),js(!1),ux(100))),ue()),!1),b=rn(st(hx(st(e,js(!0)),st(e,js(!1),ux(200))),ue()),!1);St(st(Be(Dt(a),Dt(y)),mt(([T,E])=>T<=E),ue()),h),St(st(h,ir(50)),d);const S=Un(st(Be(n,Dt(o),Dt(t),Dt(i),Dt(m)),zs((T,[{scrollHeight:E,scrollTop:k},A,R,F,N])=>{const I=k+A-E>-N,J={scrollHeight:E,scrollTop:k,viewportHeight:A};if(I){let rt,ut;return k>T.state.scrollTop?(rt="SCROLLED_DOWN",ut=T.state.scrollTop-k):(rt="SIZE_DECREASED",ut=T.state.scrollTop-k||T.scrollTopDelta),{atBottom:!0,atBottomBecause:rt,scrollTopDelta:ut,state:J}}let ot;return J.scrollHeight>T.state.scrollHeight?ot="SIZE_INCREASED":A<T.state.viewportHeight?ot="VIEWPORT_HEIGHT_DECREASING":k<T.state.scrollTop?ot="SCROLLING_UPWARDS":ot="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:ot,state:J}},i3),ue((T,E)=>T&&T.atBottom===E.atBottom))),C=rn(st(n,zs((T,{scrollHeight:E,scrollTop:k,viewportHeight:A})=>{if(h2(T.scrollHeight,E))return{changed:!1,jump:0,scrollHeight:E,scrollTop:k};{const R=E-(k+A)<1;return T.scrollTop!==k&&R?{changed:!0,jump:T.scrollTop-k,scrollHeight:E,scrollTop:k}:{changed:!0,jump:0,scrollHeight:E,scrollTop:k}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),At(T=>T.changed),mt(T=>T.jump)),0);St(st(S,mt(T=>T.atBottom)),c),St(st(c,ir(50)),f);const _=lt(ql);St(st(n,mt(({scrollTop:T})=>T),ue(),zs((T,E)=>Ye(b)?{direction:T.direction,prevScrollTop:E}:{direction:E<T.prevScrollTop?rc:ql,prevScrollTop:E},{direction:ql,prevScrollTop:0}),mt(T=>T.direction)),_),St(st(n,ir(50),js(s3)),_);const w=lt(0);return St(st(v,At(T=>!T),js(0)),w),St(st(a,ir(100),Nt(v),At(([T,E])=>!!E),zs(([T,E],[k])=>[E,k],[0,0]),mt(([T,E])=>E-T)),w),{atBottomState:S,atBottomStateChange:f,atBottomThreshold:m,atTopStateChange:d,atTopThreshold:y,isAtBottom:c,isAtTop:h,isScrolling:v,lastJumpDueToItemResize:C,scrollDirection:_,scrollVelocity:w}},he(yn)),Ph="top",Yh="bottom",gx="none";function mx(i,t,e){return typeof i=="number"?e===rc&&t===Ph||e===ql&&t===Yh?i:0:e===rc?t===Ph?i.main:i.reverse:t===Yh?i.main:i.reverse}function px(i,t){var e;return typeof i=="number"?i:(e=i[t])!=null?e:0}const $p=Wt(([{deviation:i,fixedHeaderHeight:t,headerHeight:e,scrollTop:n,viewportHeight:a}])=>{const o=qt(),c=lt(0),h=lt(0),f=lt(0),d=rn(st(Be(Dt(n),Dt(a),Dt(e),Dt(o,nc),Dt(f),Dt(c),Dt(t),Dt(i),Dt(h)),mt(([m,y,v,[b,S],C,_,w,T,E])=>{const k=m-T,A=_+w,R=Math.max(v-k,0);let F=gx;const N=px(E,Ph),I=px(E,Yh);return b-=T,b+=v+w,S+=v+w,S-=T,b>m+A-N&&(F=rc),S<m-R+y+I&&(F=ql),F!==gx?[Math.max(k-v-mx(C,Ph,F)-N,0),k-R-w+y+mx(C,Yh,F)+I]:null}),At(m=>m!=null),ue(nc)),[0,0]);return{increaseViewportBy:h,listBoundary:o,overscan:f,topListHeight:c,visibleRange:d}},he(yn),{singleton:!0});function a3(i,t,e){if(mf(t)){const n=o2(i,t);return[{index:bs(t.groupOffsetTree,n)[0],offset:0,size:0},{data:e==null?void 0:e[0],index:n,offset:0,size:0}]}return[{data:e==null?void 0:e[0],index:i,offset:0,size:0}]}const om={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function vh(i,t,e,n,a,o){const{lastIndex:c,lastOffset:h,lastSize:f}=a;let d=0,m=0;if(i.length>0){d=i[0].offset;const C=i[i.length-1];m=C.offset+C.size}const y=e-c,v=h+y*f+(y-1)*n,b=d,S=v-m;return{bottom:m,firstItemIndex:o,items:yx(i,a,o),offsetBottom:S,offsetTop:d,top:b,topItems:yx(t,a,o),topListHeight:t.reduce((C,_)=>_.size+C,0),totalCount:e}}function f2(i,t,e,n,a,o){let c=0;if(e.groupIndices.length>0)for(const m of e.groupIndices){if(m-c>=i)break;c++}const h=i+c,f=Kp(t,h),d=Array.from({length:h}).map((m,y)=>({data:o[y+f],index:y+f,offset:0,size:0}));return vh(d,[],h,a,e,n)}function yx(i,t,e){if(i.length===0)return[];if(!mf(t))return i.map(d=>({...d,index:d.index+e,originalIndex:d.index}));const n=i[0].index,a=i[i.length-1].index,o=[],c=gf(t.groupOffsetTree,n,a);let h,f=0;for(const d of i){(!h||h.end<d.index)&&(h=c.shift(),f=t.groupIndices.indexOf(h.start));let m;d.index===h.start?m={index:f,type:"group"}:m={groupIndex:f,index:d.index-(f+1)+e},o.push({...m,data:d.data,offset:d.offset,originalIndex:d.index,size:d.size})}return o}const ra=Wt(([{data:i,firstItemIndex:t,gap:e,sizes:n,totalCount:a},o,{listBoundary:c,topListHeight:h,visibleRange:f},{initialTopMostItemIndex:d,scrolledToInitialItem:m},{topListHeight:y},v,{didMount:b},{recalcInProgress:S}])=>{const C=lt([]),_=lt(0),w=qt();St(o.topItemsIndexes,C);const T=rn(st(Be(b,S,Dt(f,nc),Dt(a),Dt(n),Dt(d),m,Dt(C),Dt(t),Dt(e),i),At(([R,F,,N,,,,,,,I])=>{const J=I&&I.length!==N;return R&&!F&&!J}),mt(([,,[R,F],N,I,J,ot,rt,ut,ft,bt])=>{const X=I,{offsetTree:nt,sizeTree:at}=X,Ct=Ye(_);if(N===0)return{...om,totalCount:N};if(R===0&&F===0)return Ct===0?{...om,totalCount:N}:f2(Ct,J,I,ut,ft,bt||[]);if(ae(at))return Ct>0?null:vh(a3(Kp(J,N),X,bt),[],N,ft,X,ut);const M=[];if(rt.length>0){const Mt=rt[0],vt=rt[rt.length-1];let $t=0;for(const et of gf(at,Mt,vt)){const Tt=et.value,Ht=Math.max(et.start,Mt),ye=Math.min(et.end,vt);for(let le=Ht;le<=ye;le++)M.push({data:bt==null?void 0:bt[le],index:le,offset:$t,size:Tt}),$t+=Tt}}if(!ot)return vh([],M,N,ft,X,ut);const K=rt.length>0?rt[rt.length-1]+1:0,ct=WM(nt,R,F,K);if(ct.length===0)return null;const it=N-1,gt=ff([],Mt=>{for(const vt of ct){const $t=vt.value;let et=$t.offset,Tt=vt.start;const Ht=$t.size;if($t.offset<R){Tt+=Math.floor((R-$t.offset+ft)/(Ht+ft));const le=Tt-vt.start;et+=le*Ht+le*ft}Tt<K&&(et+=(K-Tt)*Ht,Tt=K);const ye=Math.min(vt.end,it);for(let le=Tt;le<=ye&&!(et>=F);le++)Mt.push({data:bt==null?void 0:bt[le],index:le,offset:et,size:Ht}),et+=Ht+ft}});return vh(gt,M,N,ft,X,ut)}),At(R=>R!==null),ue()),om);St(st(i,At(Vp),mt(R=>R==null?void 0:R.length)),a),St(st(T,mt(R=>R.topListHeight)),y),St(y,h),St(st(T,mt(R=>[R.top,R.bottom])),c),St(st(T,mt(R=>R.items)),w);const E=Un(st(T,At(({items:R})=>R.length>0),Nt(a,i),At(([{items:R},F])=>R[R.length-1].originalIndex===F-1),mt(([,R,F])=>[R-1,F]),ue(nc),mt(([R])=>R))),k=Un(st(T,ir(200),At(({items:R,topItems:F})=>R.length>0&&R[0].originalIndex===F.length),mt(({items:R})=>R[0].index),ue())),A=Un(st(T,At(({items:R})=>R.length>0),mt(({items:R})=>{let F=0,N=R.length-1;for(;R[F].type==="group"&&F<N;)F++;for(;R[N].type==="group"&&N>F;)N--;return{endIndex:R[N].index,startIndex:R[F].index}}),ue(r2)));return{endReached:E,initialItemCount:_,itemsRendered:w,listState:T,rangeChanged:A,startReached:k,topItemsIndexes:C,...v}},he(Vs,c2,$p,xc,bc,Sc,gr,Ip),{singleton:!0}),d2=Wt(([{fixedFooterHeight:i,fixedHeaderHeight:t,footerHeight:e,headerHeight:n},{listState:a}])=>{const o=qt(),c=rn(st(Be(e,i,n,t,a),mt(([h,f,d,m,y])=>h+f+d+m+y.offsetBottom+y.bottom)),0);return St(Dt(c),o),{totalListHeight:c,totalListHeightChanged:o}},he(yn,ra),{singleton:!0}),o3=Wt(([{viewportHeight:i},{totalListHeight:t}])=>{const e=lt(!1),n=rn(st(Be(e,i,t),At(([a])=>a),mt(([,a,o])=>Math.max(0,a-o)),ir(0),ue()),0);return{alignToBottom:e,paddingTopAddition:n}},he(yn,d2),{singleton:!0});function vx(i){return i?i==="smooth"?"smooth":"auto":!1}const l3=(i,t)=>typeof i=="function"?vx(i(t)):t&&vx(i),c3=Wt(([{listRefresh:i,totalCount:t,fixedItemSize:e},{atBottomState:n,isAtBottom:a},{scrollToIndex:o},{scrolledToInitialItem:c},{didMount:h,propsReady:f},{log:d},{scrollingInProgress:m}])=>{const y=lt(!1),v=qt();let b=null;function S(_){Bt(o,{align:"end",behavior:_,index:"LAST"})}te(st(Be(st(Dt(t),xo(1)),h),Nt(Dt(y),a,c,m),mt(([[_,w],T,E,k,A])=>{let R=w&&k,F="auto";return R&&(F=l3(T,E||A),R=R&&!!F),{followOutputBehavior:F,shouldFollow:R,totalCount:_}}),At(({shouldFollow:_})=>_)),({followOutputBehavior:_,totalCount:w})=>{b&&(b(),b=null),Ye(e)?requestAnimationFrame(()=>{Ye(d)("following output to ",{totalCount:w},ss.DEBUG),S(_)}):b=Xs(i,()=>{Ye(d)("following output to ",{totalCount:w},ss.DEBUG),S(_),b=null})});function C(_){const w=Xs(n,T=>{_&&!T.atBottom&&T.notAtBottomBecause==="SIZE_INCREASED"&&!b&&(Ye(d)("scrolling to bottom due to increased size",{},ss.DEBUG),S("auto"))});setTimeout(w,100)}return te(st(Be(Dt(y),t,f),At(([_,,w])=>_&&w),zs(({value:_},[,w])=>({refreshed:_===w,value:w}),{refreshed:!1,value:0}),At(({refreshed:_})=>_),Nt(y,t)),([,_])=>{Ye(c)&&C(_!==!1)}),te(v,()=>{C(Ye(y)!==!1)}),te(Be(Dt(y),n),([_,w])=>{_&&!w.atBottom&&w.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&S("auto")}),{autoscrollToBottom:v,followOutput:y}},he(Vs,Sc,bc,xc,gr,dr,yn)),u3=Wt(([{data:i,firstItemIndex:t,gap:e,sizes:n},{initialTopMostItemIndex:a},{initialItemCount:o,listState:c},{didMount:h}])=>(St(st(h,Nt(o),At(([,f])=>f!==0),Nt(a,n,t,e,i),mt(([[,f],d,m,y,v,b=[]])=>f2(f,d,m,y,v,b))),c),{}),he(Vs,xc,ra,gr),{singleton:!0}),h3=Wt(([{didMount:i},{scrollTo:t},{listState:e}])=>{const n=lt(0);return te(st(i,Nt(n),At(([,a])=>a!==0),mt(([,a])=>({top:a}))),a=>{Xs(st(e,xo(1),At(o=>o.items.length>1)),()=>{requestAnimationFrame(()=>{Bt(t,a)})})}),{initialScrollTop:n}},he(gr,yn,ra),{singleton:!0}),f3=({itemBottom:i,itemTop:t,locationParams:{align:e,behavior:n,...a},viewportBottom:o,viewportTop:c})=>t<c?{...a,align:e??"start",behavior:n}:i>o?{...a,align:e??"end",behavior:n}:null,d3=Wt(([{gap:i,sizes:t,totalCount:e},{fixedFooterHeight:n,fixedHeaderHeight:a,headerHeight:o,scrollingInProgress:c,scrollTop:h,viewportHeight:f},{scrollToIndex:d}])=>{const m=qt();return St(st(m,Nt(t,f,e,o,a,n,h),Nt(i),mt(([[y,v,b,S,C,_,w,T],E])=>{const{align:k,behavior:A,calculateViewLocation:R=f3,done:F,...N}=y,I=l2(y,v,S-1),J=ic(I,v.offsetTree,E)+C+_,ot=J+bs(v.sizeTree,I)[1],rt=T+_,ut=T+b-w,ft=R({itemBottom:ot,itemTop:J,locationParams:{align:k,behavior:A,...N},viewportBottom:ut,viewportTop:rt});return ft?F&&Xs(st(c,At(bt=>!bt),xo(Ye(c)?1:2)),F):F&&F(),ft}),At(y=>y!==null)),d),{scrollIntoView:m}},he(Vs,yn,bc,ra,dr),{singleton:!0}),g2=Wt(([{scrollVelocity:i}])=>{const t=lt(!1),e=qt(),n=lt(!1);return St(st(i,Nt(n,t,e),At(([a,o])=>!!o),mt(([a,o,c,h])=>{const{enter:f,exit:d}=o;if(c){if(d(a,h))return!1}else if(f(a,h))return!0;return c}),ue()),t),te(st(Be(t,i,e),Nt(n)),([[a,o,c],h])=>{a&&h&&h.change&&h.change(o,c)}),{isSeeking:t,scrollSeekConfiguration:n,scrollSeekRangeChanged:e,scrollVelocity:i}},he(Sc),{singleton:!0}),Zp=Wt(([{scrollContainerState:i,scrollTo:t}])=>{const e=qt(),n=qt(),a=qt(),o=lt(!1),c=lt(void 0);return St(st(Be(e,n),mt(([{scrollHeight:h,scrollTop:f,viewportHeight:d},{offsetTop:m}])=>({scrollHeight:h,scrollTop:Math.max(0,f-m),viewportHeight:d}))),i),St(st(t,Nt(n),mt(([h,{offsetTop:f}])=>({...h,top:h.top+f}))),a),{customScrollParent:c,useWindowScroll:o,windowScrollContainerState:e,windowScrollTo:a,windowViewportRect:n}},he(yn)),g3=Wt(([{sizeRanges:i,sizes:t},{headerHeight:e,scrollTop:n},{initialTopMostItemIndex:a},{didMount:o},{useWindowScroll:c,windowScrollContainerState:h,windowViewportRect:f}])=>{const d=qt(),m=lt(void 0),y=lt(null),v=lt(null);return St(h,y),St(f,v),te(st(d,Nt(t,n,c,y,v,e)),([b,S,C,_,w,T,E])=>{const k=KM(S.sizeTree);_&&w!==null&&T!==null&&(C=w.scrollTop-T.offsetTop),C-=E,b({ranges:k,scrollTop:C})}),St(st(m,At(Vp),mt(m3)),a),St(st(o,Nt(m),At(([,b])=>b!==void 0),ue(),mt(([,b])=>b.ranges)),i),{getState:d,restoreStateFrom:m}},he(Vs,yn,xc,gr,Zp));function m3(i){return{align:"start",index:0,offset:i.scrollTop}}const p3=Wt(([{topItemsIndexes:i}])=>{const t=lt(0);return St(st(t,At(e=>e>=0),mt(e=>Array.from({length:e}).map((n,a)=>a))),i),{topItemCount:t}},he(ra));function m2(i){let t=!1,e;return()=>(t||(t=!0,e=i()),e)}const y3=m2(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),v3=Wt(([{deviation:i,scrollBy:t,scrollingInProgress:e,scrollTop:n},{isAtBottom:a,isScrolling:o,lastJumpDueToItemResize:c,scrollDirection:h},{listState:f},{beforeUnshiftWith:d,gap:m,shiftWithOffset:y,sizes:v},{log:b},{recalcInProgress:S}])=>{const C=Un(st(f,Nt(c),zs(([,w,T,E],[{bottom:k,items:A,offsetBottom:R,totalCount:F},N])=>{const I=k+R;let J=0;return T===F&&w.length>0&&A.length>0&&(A[0].originalIndex===0&&w[0].originalIndex===0||(J=I-E,J!==0&&(J+=N))),[J,A,F,I]},[0,[],0,0]),At(([w])=>w!==0),Nt(n,h,e,a,b,S),At(([,w,T,E,,,k])=>!k&&!E&&w!==0&&T===rc),mt(([[w],,,,,T])=>(T("Upward scrolling compensation",{amount:w},ss.DEBUG),w))));function _(w){w>0?(Bt(t,{behavior:"auto",top:-w}),Bt(i,0)):(Bt(i,0),Bt(t,{behavior:"auto",top:-w}))}return te(st(C,Nt(i,o)),([w,T,E])=>{E&&y3()?Bt(i,T-w):_(-w)}),te(st(Be(rn(o,!1),i,S),At(([w,T,E])=>!w&&!E&&T!==0),mt(([w,T])=>T),ir(1)),_),St(st(y,mt(w=>({top:-w}))),t),te(st(d,Nt(v,m),mt(([w,{groupIndices:T,lastSize:E,sizeTree:k},A])=>{function R(F){return F*(E+A)}if(T.length===0)return R(w);{let F=0;const N=ec(k,0);let I=0,J=0;for(;I<w;){I++,F+=N;let ot=T.length===J+1?1/0:T[J+1]-T[J]-1;I+ot>w&&(F-=N,ot=w-I+1),I+=ot,F+=R(ot),J++}return F}})),w=>{Bt(i,w),requestAnimationFrame(()=>{Bt(t,{top:w}),requestAnimationFrame(()=>{Bt(i,0),Bt(S,!1)})})}),{deviation:i}},he(yn,Sc,ra,Vs,dr,Ip)),b3=Wt(([i,t,e,n,a,o,c,h,f,d])=>({...i,...t,...e,...n,...a,...o,...c,...h,...f,...d}),he($p,u3,gr,g2,d2,h3,o3,Zp,d3,dr)),p2=Wt(([{data:i,defaultItemSize:t,firstItemIndex:e,fixedItemSize:n,gap:a,groupIndices:o,itemSize:c,sizeRanges:h,sizes:f,statefulTotalCount:d,totalCount:m,trackItemSizes:y},{initialItemFinalLocationReached:v,initialTopMostItemIndex:b,scrolledToInitialItem:S},C,_,w,{listState:T,topItemsIndexes:E,...k},{scrollToIndex:A},R,{topItemCount:F},{groupCounts:N},I])=>(St(k.rangeChanged,I.scrollSeekRangeChanged),St(st(I.windowViewportRect,mt(J=>J.visibleHeight)),C.viewportHeight),{data:i,defaultItemHeight:t,firstItemIndex:e,fixedItemHeight:n,gap:a,groupCounts:N,initialItemFinalLocationReached:v,initialTopMostItemIndex:b,scrolledToInitialItem:S,sizeRanges:h,topItemCount:F,topItemsIndexes:E,totalCount:m,...w,groupIndices:o,itemSize:c,listState:T,scrollToIndex:A,statefulTotalCount:d,trackItemSizes:y,...k,...I,...C,sizes:f,..._}),he(Vs,xc,yn,g3,c3,ra,bc,v3,p3,c2,b3));function x3(i,t){const e={},n={};let a=0;const o=i.length;for(;a<o;)n[i[a]]=1,a+=1;for(const c in t)Object.hasOwn(n,c)||(e[c]=t[c]);return e}const fh=typeof document<"u"?ht.useLayoutEffect:ht.useEffect;function S3(i,t,e){const n=Object.keys(t.required||{}),a=Object.keys(t.optional||{}),o=Object.keys(t.methods||{}),c=Object.keys(t.events||{}),h=ht.createContext({});function f(_,w){_.propsReady&&Bt(_.propsReady,!1);for(const T of n){const E=_[t.required[T]];Bt(E,w[T])}for(const T of a)if(T in w){const E=_[t.optional[T]];Bt(E,w[T])}_.propsReady&&Bt(_.propsReady,!0)}function d(_){return o.reduce((w,T)=>(w[T]=E=>{const k=_[t.methods[T]];Bt(k,E)},w),{})}function m(_){return c.reduce((w,T)=>(w[T]=zM(_[t.events[T]]),w),{})}const y=ht.forwardRef((_,w)=>{const{children:T,...E}=_,[k]=ht.useState(()=>ff(HM(i),F=>{f(F,E)})),[A]=ht.useState(cx(m,k));fh(()=>{for(const F of c)F in E&&te(A[F],E[F]);return()=>{Object.values(A).map(Gp)}},[E,A,k]),fh(()=>{f(k,E)}),ht.useImperativeHandle(w,lx(d(k)));const R=e;return Q.jsx(h.Provider,{value:k,children:e?Q.jsx(R,{...x3([...n,...a,...c],E),children:T}):T})}),v=_=>{const w=ht.useContext(h);return ht.useCallback(T=>{Bt(w[_],T)},[w,_])},b=_=>{const w=ht.useContext(h)[_],T=ht.useCallback(E=>te(w,E),[w]);return ht.useSyncExternalStore(T,()=>Ye(w),()=>Ye(w))},S=_=>{const w=ht.useContext(h)[_],[T,E]=ht.useState(cx(Ye,w));return fh(()=>te(w,k=>{k!==T&&E(lx(k))}),[w,T]),T},C=ht.version.startsWith("18")?b:S;return{Component:y,useEmitter:(_,w)=>{const T=ht.useContext(h)[_];fh(()=>te(T,w),[w,T])},useEmitterValue:C,usePublisher:v}}ht.createContext(void 0);const y2=ht.createContext(void 0),v2=typeof document<"u"?ht.useLayoutEffect:ht.useEffect;function lm(i){return"self"in i}function _3(i){return"body"in i}function b2(i,t,e,n=vc,a,o){const c=ht.useRef(null),h=ht.useRef(null),f=ht.useRef(null),d=ht.useCallback(v=>{let b,S,C;const _=v.target;if(_3(_)||lm(_)){const T=lm(_)?_:_.defaultView;C=o?T.scrollX:T.scrollY,b=o?T.document.documentElement.scrollWidth:T.document.documentElement.scrollHeight,S=o?T.innerWidth:T.innerHeight}else C=o?_.scrollLeft:_.scrollTop,b=o?_.scrollWidth:_.scrollHeight,S=o?_.offsetWidth:_.offsetHeight;const w=()=>{i({scrollHeight:b,scrollTop:Math.max(C,0),viewportHeight:S})};v.suppressFlushSync?w():Lw.flushSync(w),h.current!==null&&(C===h.current||C<=0||C===b-S)&&(h.current=null,t(!0),f.current&&(clearTimeout(f.current),f.current=null))},[i,t,o]);ht.useEffect(()=>{const v=a||c.current;return n(a||c.current),d({suppressFlushSync:!0,target:v}),v.addEventListener("scroll",d,{passive:!0}),()=>{n(null),v.removeEventListener("scroll",d)}},[c,d,e,n,a]);function m(v){const b=c.current;if(!b||(o?"offsetWidth"in b&&b.offsetWidth===0:"offsetHeight"in b&&b.offsetHeight===0))return;const S=v.behavior==="smooth";let C,_,w;lm(b)?(_=Math.max(sc(b.document.documentElement,o?"width":"height"),o?b.document.documentElement.scrollWidth:b.document.documentElement.scrollHeight),C=o?b.innerWidth:b.innerHeight,w=o?window.scrollX:window.scrollY):(_=b[o?"scrollWidth":"scrollHeight"],C=sc(b,o?"width":"height"),w=b[o?"scrollLeft":"scrollTop"]);const T=_-C;if(v.top=Math.ceil(Math.max(Math.min(T,v.top),0)),h2(C,_)||v.top===w){i({scrollHeight:_,scrollTop:w,viewportHeight:C}),S&&t(!0);return}S?(h.current=v.top,f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{f.current=null,h.current=null,t(!0)},1e3)):h.current=null,o&&(v={behavior:v.behavior,left:v.top}),b.scrollTo(v)}function y(v){o&&(v={behavior:v.behavior,left:v.top}),c.current.scrollBy(v)}return{scrollByCallback:y,scrollerRef:c,scrollToCallback:m}}const cm="-webkit-sticky",bx="sticky",x2=m2(()=>{if(typeof document>"u")return bx;const i=document.createElement("div");return i.style.position=cm,i.style.position===cm?cm:bx});function Jp(i){return i}const C3=Wt(()=>{const i=lt(f=>`Item ${f}`),t=lt(null),e=lt(f=>`Group ${f}`),n=lt({}),a=lt(Jp),o=lt("div"),c=lt(vc),h=(f,d=null)=>rn(st(n,mt(m=>m[f]),ue()),d);return{components:n,computeItemKey:a,context:t,EmptyPlaceholder:h("EmptyPlaceholder"),FooterComponent:h("Footer"),GroupComponent:h("Group","div"),groupContent:e,HeaderComponent:h("Header"),HeaderFooterTag:o,ItemComponent:h("Item","div"),itemContent:i,ListComponent:h("List","div"),ScrollerComponent:h("Scroller","div"),scrollerRef:c,ScrollSeekPlaceholder:h("ScrollSeekPlaceholder"),TopItemListComponent:h("TopItemList")}});he(p2,C3);x2();const T3={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},w3={outline:"none",overflowX:"auto",position:"relative"},S2=i=>({height:"100%",position:"absolute",top:0,width:"100%"});x2();function lr(i,t){if(typeof i!="string")return{context:t}}function O3({useEmitter:i,useEmitterValue:t,usePublisher:e}){return ht.memo(function({children:n,style:a,...o}){const c=e("scrollContainerState"),h=t("ScrollerComponent"),f=e("smoothScrollTargetReached"),d=t("scrollerRef"),m=t("context"),y=t("horizontalDirection")||!1,{scrollByCallback:v,scrollerRef:b,scrollToCallback:S}=b2(c,f,h,d,void 0,y);return i("scrollTo",S),i("scrollBy",v),Q.jsx(h,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:b,style:{...y?w3:T3,...a},tabIndex:0,...o,...lr(h,m),children:n})})}function E3({useEmitter:i,useEmitterValue:t,usePublisher:e}){return ht.memo(function({children:n,style:a,...o}){const c=e("windowScrollContainerState"),h=t("ScrollerComponent"),f=e("smoothScrollTargetReached"),d=t("totalListHeight"),m=t("deviation"),y=t("customScrollParent"),v=t("context"),b=ht.useRef(null),S=t("scrollerRef"),{scrollByCallback:C,scrollerRef:_,scrollToCallback:w}=b2(c,f,h,S,y);return v2(()=>{var T;return _.current=y||((T=b.current)==null?void 0:T.ownerDocument.defaultView),()=>{_.current=null}},[_,y]),i("windowScrollTo",w),i("scrollBy",C),Q.jsx(h,{ref:b,"data-virtuoso-scroller":!0,style:{position:"relative",...a,...d!==0?{height:d+m}:{}},...o,...lr(h,v),children:n})})}const A3=Wt(()=>{const i=lt(f=>Q.jsxs("td",{children:["Item $",f]})),t=lt(null),e=lt(null),n=lt(null),a=lt({}),o=lt(Jp),c=lt(vc),h=(f,d=null)=>rn(st(a,mt(m=>m[f]),ue()),d);return{components:a,computeItemKey:o,context:t,EmptyPlaceholder:h("EmptyPlaceholder"),FillerRow:h("FillerRow"),fixedFooterContent:n,fixedHeaderContent:e,itemContent:i,ScrollerComponent:h("Scroller","div"),scrollerRef:c,ScrollSeekPlaceholder:h("ScrollSeekPlaceholder"),TableBodyComponent:h("TableBody","tbody"),TableComponent:h("Table","table"),TableFooterComponent:h("TableFoot","tfoot"),TableHeadComponent:h("TableHead","thead"),TableRowComponent:h("TableRow","tr")}});he(p2,A3);const xx={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},D3={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:Sx,floor:Xh,max:Vl,min:um,round:_x}=Math;function Cx(i,t,e){return Array.from({length:t-i+1}).map((n,a)=>({data:e===null?null:e[a+i],index:a+i}))}function M3(i){return{...D3,items:i}}function dh(i,t){return i&&i.width===t.width&&i.height===t.height}function R3(i,t){return i&&i.column===t.column&&i.row===t.row}const k3=Wt(([{increaseViewportBy:i,listBoundary:t,overscan:e,visibleRange:n},{footerHeight:a,headerHeight:o,scrollBy:c,scrollContainerState:h,scrollTo:f,scrollTop:d,smoothScrollTargetReached:m,viewportHeight:y},v,b,{didMount:S,propsReady:C},{customScrollParent:_,useWindowScroll:w,windowScrollContainerState:T,windowScrollTo:E,windowViewportRect:k},A])=>{const R=lt(0),F=lt(0),N=lt(xx),I=lt({height:0,width:0}),J=lt({height:0,width:0}),ot=qt(),rt=qt(),ut=lt(0),ft=lt(null),bt=lt({column:0,row:0}),X=qt(),nt=qt(),at=lt(!1),Ct=lt(0),M=lt(!0),K=lt(!1),ct=lt(!1);te(st(S,Nt(Ct),At(([et,Tt])=>!!Tt)),()=>{Bt(M,!1)}),te(st(Be(S,M,J,I,Ct,K),At(([et,Tt,Ht,ye,,le])=>et&&!Tt&&Ht.height!==0&&ye.height!==0&&!le)),([,,,,et])=>{Bt(K,!0),Qp(1,()=>{Bt(ot,et)}),Xs(st(d),()=>{Bt(t,[0,0]),Bt(M,!0)})}),St(st(nt,At(et=>et!=null&&et.scrollTop>0),js(0)),F),te(st(S,Nt(nt),At(([,et])=>et!=null)),([,et])=>{et&&(Bt(I,et.viewport),Bt(J,et.item),Bt(bt,et.gap),et.scrollTop>0&&(Bt(at,!0),Xs(st(d,xo(1)),Tt=>{Bt(at,!1)}),Bt(f,{top:et.scrollTop})))}),St(st(I,mt(({height:et})=>et)),y),St(st(Be(Dt(I,dh),Dt(J,dh),Dt(bt,(et,Tt)=>et&&et.column===Tt.column&&et.row===Tt.row),Dt(d)),mt(([et,Tt,Ht,ye])=>({gap:Ht,item:Tt,scrollTop:ye,viewport:et}))),X),St(st(Be(Dt(R),n,Dt(bt,R3),Dt(J,dh),Dt(I,dh),Dt(ft),Dt(F),Dt(at),Dt(M),Dt(Ct)),At(([,,,,,,,et])=>!et),mt(([et,[Tt,Ht],ye,le,is,Gs,vi,,aa,Re])=>{const{column:Ss,row:bi}=ye,{height:mr,width:xi}=le,{width:Tc}=is;if(vi===0&&(et===0||Tc===0))return xx;if(xi===0){const wc=Kp(Re,et),Tf=wc+Math.max(vi-1,0);return M3(Cx(wc,Tf,Gs))}const pr=_2(Tc,xi,Ss);let Si,Is;aa?Tt===0&&Ht===0&&vi>0?(Si=0,Is=vi-1):(Si=pr*Xh((Tt+bi)/(mr+bi)),Is=pr*Sx((Ht+bi)/(mr+bi))-1,Is=um(et-1,Vl(Is,pr-1)),Si=um(Is,Vl(0,Si))):(Si=0,Is=-1);const _i=Cx(Si,Is,Gs),{bottom:Qe,top:rs}=Tx(is,ye,le,_i),Ke=Sx(et/pr),Cf=Ke*mr+(Ke-1)*bi-Qe;return{bottom:Qe,itemHeight:mr,items:_i,itemWidth:xi,offsetBottom:Cf,offsetTop:rs,top:rs}})),N),St(st(ft,At(et=>et!==null),mt(et=>et.length)),R),St(st(Be(I,J,N,bt),At(([et,Tt,{items:Ht}])=>Ht.length>0&&Tt.height!==0&&et.height!==0),mt(([et,Tt,{items:Ht},ye])=>{const{bottom:le,top:is}=Tx(et,ye,Tt,Ht);return[is,le]}),ue(nc)),t);const it=lt(!1);St(st(d,Nt(it),mt(([et,Tt])=>Tt||et!==0)),it);const gt=Un(st(Be(N,R),At(([{items:et}])=>et.length>0),Nt(it),At(([[et,Tt],Ht])=>{const ye=et.items[et.items.length-1].index===Tt-1;return(Ht||et.bottom>0&&et.itemHeight>0&&et.offsetBottom===0&&et.items.length===Tt)&&ye}),mt(([[,et]])=>et-1),ue())),Mt=Un(st(Dt(N),At(({items:et})=>et.length>0&&et[0].index===0),js(0),ue())),vt=Un(st(Dt(N),Nt(at),At(([{items:et},Tt])=>et.length>0&&!Tt),mt(([{items:et}])=>({endIndex:et[et.length-1].index,startIndex:et[0].index})),ue(r2),ir(0)));St(vt,b.scrollSeekRangeChanged),St(st(ot,Nt(I,J,R,bt),mt(([et,Tt,Ht,ye,le])=>{const is=u2(et),{align:Gs,behavior:vi,offset:aa}=is;let Re=is.index;Re==="LAST"&&(Re=ye-1),Re=Vl(0,Re,um(ye-1,Re));let Ss=ep(Tt,le,Ht,Re);return Gs==="end"?Ss=_x(Ss-Tt.height+Ht.height):Gs==="center"&&(Ss=_x(Ss-Tt.height/2+Ht.height/2)),aa&&(Ss+=aa),{behavior:vi,top:Ss}})),f);const $t=rn(st(N,mt(et=>et.offsetBottom+et.bottom)),0);return St(st(k,mt(et=>({height:et.visibleHeight,width:et.visibleWidth}))),I),{customScrollParent:_,data:ft,deviation:ut,footerHeight:a,gap:bt,headerHeight:o,increaseViewportBy:i,initialItemCount:F,itemDimensions:J,overscan:e,restoreStateFrom:nt,scrollBy:c,scrollContainerState:h,scrollHeight:rt,scrollTo:f,scrollToIndex:ot,scrollTop:d,smoothScrollTargetReached:m,totalCount:R,useWindowScroll:w,viewportDimensions:I,windowScrollContainerState:T,windowScrollTo:E,windowViewportRect:k,...b,gridState:N,horizontalDirection:ct,initialTopMostItemIndex:Ct,totalListHeight:$t,...v,endReached:gt,propsReady:C,rangeChanged:vt,startReached:Mt,stateChanged:X,stateRestoreInProgress:at,...A}},he($p,yn,Sc,g2,gr,Zp,dr));function _2(i,t,e){return Vl(1,Xh((i+e)/(Xh(t)+e)))}function Tx(i,t,e,n){const{height:a}=e;if(a===void 0||n.length===0)return{bottom:0,top:0};const o=ep(i,t,e,n[0].index);return{bottom:ep(i,t,e,n[n.length-1].index)+a,top:o}}function ep(i,t,e,n){const a=_2(i.width,e.width,t.column),o=Xh(n/a),c=o*e.height+Vl(0,o-1)*t.row;return c>0?c+t.row:c}const j3=Wt(()=>{const i=lt(y=>`Item ${y}`),t=lt({}),e=lt(null),n=lt("virtuoso-grid-item"),a=lt("virtuoso-grid-list"),o=lt(Jp),c=lt("div"),h=lt(vc),f=(y,v=null)=>rn(st(t,mt(b=>b[y]),ue()),v),d=lt(!1),m=lt(!1);return St(Dt(m),d),{components:t,computeItemKey:o,context:e,FooterComponent:f("Footer"),HeaderComponent:f("Header"),headerFooterTag:c,itemClassName:n,ItemComponent:f("Item","div"),itemContent:i,listClassName:a,ListComponent:f("List","div"),readyStateChanged:d,reportReadyState:m,ScrollerComponent:f("Scroller","div"),scrollerRef:h,ScrollSeekPlaceholder:f("ScrollSeekPlaceholder","div")}}),L3=Wt(([i,t])=>({...i,...t}),he(k3,j3)),B3=ht.memo(function(){const i=de("gridState"),t=de("listClassName"),e=de("itemClassName"),n=de("itemContent"),a=de("computeItemKey"),o=de("isSeeking"),c=ns("scrollHeight"),h=de("ItemComponent"),f=de("ListComponent"),d=de("ScrollSeekPlaceholder"),m=de("context"),y=ns("itemDimensions"),v=ns("gap"),b=de("log"),S=de("stateRestoreInProgress"),C=ns("reportReadyState"),_=df(ht.useMemo(()=>w=>{const T=w.parentElement.parentElement.scrollHeight;c(T);const E=w.firstChild;if(E){const{height:k,width:A}=E.getBoundingClientRect();y({height:k,width:A})}v({column:wx("column-gap",getComputedStyle(w).columnGap,b),row:wx("row-gap",getComputedStyle(w).rowGap,b)})},[c,y,v,b]),!0,!1);return v2(()=>{i.itemHeight>0&&i.itemWidth>0&&C(!0)},[i]),S?null:Q.jsx(f,{className:t,ref:_,...lr(f,m),"data-testid":"virtuoso-item-list",style:{paddingBottom:i.offsetBottom,paddingTop:i.offsetTop},children:i.items.map(w=>{const T=a(w.index,w.data,m);return o?Q.jsx(d,{...lr(d,m),height:i.itemHeight,index:w.index,width:i.itemWidth},T):U.createElement(h,{...lr(h,m),className:e,"data-index":w.index,key:T},n(w.index,w.data,m))})})}),z3=ht.memo(function(){const i=de("HeaderComponent"),t=ns("headerHeight"),e=de("headerFooterTag"),n=df(ht.useMemo(()=>o=>{t(sc(o,"height"))},[t]),!0,!1),a=de("context");return i?Q.jsx(e,{ref:n,children:Q.jsx(i,{...lr(i,a)})}):null}),N3=ht.memo(function(){const i=de("FooterComponent"),t=ns("footerHeight"),e=de("headerFooterTag"),n=df(ht.useMemo(()=>o=>{t(sc(o,"height"))},[t]),!0,!1),a=de("context");return i?Q.jsx(e,{ref:n,children:Q.jsx(i,{...lr(i,a)})}):null}),H3=({children:i})=>{const t=ht.useContext(y2),e=ns("itemDimensions"),n=ns("viewportDimensions"),a=df(ht.useMemo(()=>o=>{n(o.getBoundingClientRect())},[n]),!0,!1);return ht.useEffect(()=>{t&&(n({height:t.viewportHeight,width:t.viewportWidth}),e({height:t.itemHeight,width:t.itemWidth}))},[t,n,e]),Q.jsx("div",{ref:a,style:S2(),children:i})},U3=({children:i})=>{const t=ht.useContext(y2),e=ns("windowViewportRect"),n=ns("itemDimensions"),a=de("customScrollParent"),o=PM(e,a,!1);return ht.useEffect(()=>{t&&(n({height:t.itemHeight,width:t.itemWidth}),e({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))},[t,e,n]),Q.jsx("div",{ref:o,style:S2(),children:i})},F3=ht.memo(function({...i}){const t=de("useWindowScroll"),e=de("customScrollParent"),n=e||t?X3:Y3,a=e||t?U3:H3,o=de("context");return Q.jsx(n,{...i,...lr(n,o),children:Q.jsxs(a,{children:[Q.jsx(z3,{}),Q.jsx(B3,{}),Q.jsx(N3,{})]})})}),{Component:P3,useEmitter:C2,useEmitterValue:de,usePublisher:ns}=S3(L3,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},F3),Y3=O3({useEmitter:C2,useEmitterValue:de,usePublisher:ns}),X3=E3({useEmitter:C2,useEmitterValue:de,usePublisher:ns});function wx(i,t,e){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&e(`${i} was not resolved to pixel value correctly`,t,ss.WARN),t==="normal"?0:parseInt(t??"0",10)}const q3=P3;var V3=i=>{let t=Object.keys(i).sort((e,n)=>e.localeCompare(n));if(t.some(e=>e.startsWith("_")))throw new Error('Keys that start with "_" are reserved for Query Key Factory');return t};function Ge(i){return Object.assign(Object.create(null),i)}function G3(i,t){let e={_def:[i]};if(t==null)return Ge(e);let n=(o,c)=>V3(o).reduce((h,f)=>{let d=o[f],m=[...c,f],y=b=>Array.isArray(b),v;if(typeof d=="function"){let b=(...S)=>{let C=d(...S);if(y(C))return Ge({queryKey:[...m,...C]});let _=[...m,...C.queryKey];if("queryFn"in C){let w={queryKey:_,queryFn:C.queryFn};if("contextQueries"in C){let T=n(C.contextQueries,_);return Ge({_ctx:Ge(Object.fromEntries(T)),...w})}return Ge({...w})}if("contextQueries"in C){let w=n(C.contextQueries,_);return Ge({_ctx:Ge(Object.fromEntries(w)),queryKey:_})}return Ge({queryKey:_})};b._def=m,v=b}else if(d==null)v=Ge({queryKey:m});else if(y(d))v=Ge({_def:m,queryKey:[...m,...d]});else if("queryFn"in d){let b={...d.queryKey?{_def:m}:void 0},S=[...m,...d.queryKey??[]],C={queryKey:S,queryFn:d.queryFn};if("contextQueries"in d){let _=n(d.contextQueries,S);v=Ge({_ctx:Ge(Object.fromEntries(_)),...b,...C})}else v=Ge({...b,...C})}else if("contextQueries"in d){let b={...d.queryKey?{_def:m}:void 0},S=[...m,...d.queryKey??[]],C=n(d.contextQueries,S);v=Ge({_ctx:Ge(Object.fromEntries(C)),queryKey:S,...b})}else{let b={...d.queryKey?{_def:m}:void 0},S=[...m,...d.queryKey??[]];v=Ge({queryKey:S,...b})}return h.set(f,v),h},new Map),a=n(t,e._def);return Ge({...Object.fromEntries(a),...e})}function T2(i,t){return function(){return i.apply(t,arguments)}}const{toString:I3}=Object.prototype,{getPrototypeOf:t0}=Object,{iterator:pf,toStringTag:w2}=Symbol,yf=(i=>t=>{const e=I3.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),xs=i=>(i=i.toLowerCase(),t=>yf(t)===i),vf=i=>t=>typeof t===i,{isArray:Ao}=Array,ac=vf("undefined");function W3(i){return i!==null&&!ac(i)&&i.constructor!==null&&!ac(i.constructor)&&En(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const O2=xs("ArrayBuffer");function Q3(i){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(i):t=i&&i.buffer&&O2(i.buffer),t}const K3=vf("string"),En=vf("function"),E2=vf("number"),bf=i=>i!==null&&typeof i=="object",$3=i=>i===!0||i===!1,bh=i=>{if(yf(i)!=="object")return!1;const t=t0(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(w2 in i)&&!(pf in i)},Z3=xs("Date"),J3=xs("File"),t5=xs("Blob"),e5=xs("FileList"),n5=i=>bf(i)&&En(i.pipe),s5=i=>{let t;return i&&(typeof FormData=="function"&&i instanceof FormData||En(i.append)&&((t=yf(i))==="formdata"||t==="object"&&En(i.toString)&&i.toString()==="[object FormData]"))},i5=xs("URLSearchParams"),[r5,a5,o5,l5]=["ReadableStream","Request","Response","Headers"].map(xs),c5=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _c(i,t,{allOwnKeys:e=!1}={}){if(i===null||typeof i>"u")return;let n,a;if(typeof i!="object"&&(i=[i]),Ao(i))for(n=0,a=i.length;n<a;n++)t.call(null,i[n],n,i);else{const o=e?Object.getOwnPropertyNames(i):Object.keys(i),c=o.length;let h;for(n=0;n<c;n++)h=o[n],t.call(null,i[h],h,i)}}function A2(i,t){t=t.toLowerCase();const e=Object.keys(i);let n=e.length,a;for(;n-- >0;)if(a=e[n],t===a.toLowerCase())return a;return null}const Ur=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,D2=i=>!ac(i)&&i!==Ur;function np(){const{caseless:i}=D2(this)&&this||{},t={},e=(n,a)=>{const o=i&&A2(t,a)||a;bh(t[o])&&bh(n)?t[o]=np(t[o],n):bh(n)?t[o]=np({},n):Ao(n)?t[o]=n.slice():t[o]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&_c(arguments[n],e);return t}const u5=(i,t,e,{allOwnKeys:n}={})=>(_c(t,(a,o)=>{e&&En(a)?i[o]=T2(a,e):i[o]=a},{allOwnKeys:n}),i),h5=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),f5=(i,t,e,n)=>{i.prototype=Object.create(t.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:t.prototype}),e&&Object.assign(i.prototype,e)},d5=(i,t,e,n)=>{let a,o,c;const h={};if(t=t||{},i==null)return t;do{for(a=Object.getOwnPropertyNames(i),o=a.length;o-- >0;)c=a[o],(!n||n(c,i,t))&&!h[c]&&(t[c]=i[c],h[c]=!0);i=e!==!1&&t0(i)}while(i&&(!e||e(i,t))&&i!==Object.prototype);return t},g5=(i,t,e)=>{i=String(i),(e===void 0||e>i.length)&&(e=i.length),e-=t.length;const n=i.indexOf(t,e);return n!==-1&&n===e},m5=i=>{if(!i)return null;if(Ao(i))return i;let t=i.length;if(!E2(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=i[t];return e},p5=(i=>t=>i&&t instanceof i)(typeof Uint8Array<"u"&&t0(Uint8Array)),y5=(i,t)=>{const n=(i&&i[pf]).call(i);let a;for(;(a=n.next())&&!a.done;){const o=a.value;t.call(i,o[0],o[1])}},v5=(i,t)=>{let e;const n=[];for(;(e=i.exec(t))!==null;)n.push(e);return n},b5=xs("HTMLFormElement"),x5=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,a){return n.toUpperCase()+a}),Ox=(({hasOwnProperty:i})=>(t,e)=>i.call(t,e))(Object.prototype),S5=xs("RegExp"),M2=(i,t)=>{const e=Object.getOwnPropertyDescriptors(i),n={};_c(e,(a,o)=>{let c;(c=t(a,o,i))!==!1&&(n[o]=c||a)}),Object.defineProperties(i,n)},_5=i=>{M2(i,(t,e)=>{if(En(i)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=i[e];if(En(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},C5=(i,t)=>{const e={},n=a=>{a.forEach(o=>{e[o]=!0})};return Ao(i)?n(i):n(String(i).split(t)),e},T5=()=>{},w5=(i,t)=>i!=null&&Number.isFinite(i=+i)?i:t;function O5(i){return!!(i&&En(i.append)&&i[w2]==="FormData"&&i[pf])}const E5=i=>{const t=new Array(10),e=(n,a)=>{if(bf(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[a]=n;const o=Ao(n)?[]:{};return _c(n,(c,h)=>{const f=e(c,a+1);!ac(f)&&(o[h]=f)}),t[a]=void 0,o}}return n};return e(i,0)},A5=xs("AsyncFunction"),D5=i=>i&&(bf(i)||En(i))&&En(i.then)&&En(i.catch),R2=((i,t)=>i?setImmediate:t?((e,n)=>(Ur.addEventListener("message",({source:a,data:o})=>{a===Ur&&o===e&&n.length&&n.shift()()},!1),a=>{n.push(a),Ur.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",En(Ur.postMessage)),M5=typeof queueMicrotask<"u"?queueMicrotask.bind(Ur):typeof process<"u"&&process.nextTick||R2,R5=i=>i!=null&&En(i[pf]),W={isArray:Ao,isArrayBuffer:O2,isBuffer:W3,isFormData:s5,isArrayBufferView:Q3,isString:K3,isNumber:E2,isBoolean:$3,isObject:bf,isPlainObject:bh,isReadableStream:r5,isRequest:a5,isResponse:o5,isHeaders:l5,isUndefined:ac,isDate:Z3,isFile:J3,isBlob:t5,isRegExp:S5,isFunction:En,isStream:n5,isURLSearchParams:i5,isTypedArray:p5,isFileList:e5,forEach:_c,merge:np,extend:u5,trim:c5,stripBOM:h5,inherits:f5,toFlatObject:d5,kindOf:yf,kindOfTest:xs,endsWith:g5,toArray:m5,forEachEntry:y5,matchAll:v5,isHTMLForm:b5,hasOwnProperty:Ox,hasOwnProp:Ox,reduceDescriptors:M2,freezeMethods:_5,toObjectSet:C5,toCamelCase:x5,noop:T5,toFiniteNumber:w5,findKey:A2,global:Ur,isContextDefined:D2,isSpecCompliantForm:O5,toJSONObject:E5,isAsyncFn:A5,isThenable:D5,setImmediate:R2,asap:M5,isIterable:R5};function kt(i,t,e,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}W.inherits(kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const k2=kt.prototype,j2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{j2[i]={value:i}});Object.defineProperties(kt,j2);Object.defineProperty(k2,"isAxiosError",{value:!0});kt.from=(i,t,e,n,a,o)=>{const c=Object.create(k2);return W.toFlatObject(i,c,function(f){return f!==Error.prototype},h=>h!=="isAxiosError"),kt.call(c,i.message,t,e,n,a),c.cause=i,c.name=i.name,o&&Object.assign(c,o),c};const k5=null;function sp(i){return W.isPlainObject(i)||W.isArray(i)}function L2(i){return W.endsWith(i,"[]")?i.slice(0,-2):i}function Ex(i,t,e){return i?i.concat(t).map(function(a,o){return a=L2(a),!e&&o?"["+a+"]":a}).join(e?".":""):t}function j5(i){return W.isArray(i)&&!i.some(sp)}const L5=W.toFlatObject(W,{},null,function(t){return/^is[A-Z]/.test(t)});function xf(i,t,e){if(!W.isObject(i))throw new TypeError("target must be an object");t=t||new FormData,e=W.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,_){return!W.isUndefined(_[C])});const n=e.metaTokens,a=e.visitor||m,o=e.dots,c=e.indexes,f=(e.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(t);if(!W.isFunction(a))throw new TypeError("visitor must be a function");function d(S){if(S===null)return"";if(W.isDate(S))return S.toISOString();if(!f&&W.isBlob(S))throw new kt("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(S)||W.isTypedArray(S)?f&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function m(S,C,_){let w=S;if(S&&!_&&typeof S=="object"){if(W.endsWith(C,"{}"))C=n?C:C.slice(0,-2),S=JSON.stringify(S);else if(W.isArray(S)&&j5(S)||(W.isFileList(S)||W.endsWith(C,"[]"))&&(w=W.toArray(S)))return C=L2(C),w.forEach(function(E,k){!(W.isUndefined(E)||E===null)&&t.append(c===!0?Ex([C],k,o):c===null?C:C+"[]",d(E))}),!1}return sp(S)?!0:(t.append(Ex(_,C,o),d(S)),!1)}const y=[],v=Object.assign(L5,{defaultVisitor:m,convertValue:d,isVisitable:sp});function b(S,C){if(!W.isUndefined(S)){if(y.indexOf(S)!==-1)throw Error("Circular reference detected in "+C.join("."));y.push(S),W.forEach(S,function(w,T){(!(W.isUndefined(w)||w===null)&&a.call(t,w,W.isString(T)?T.trim():T,C,v))===!0&&b(w,C?C.concat(T):[T])}),y.pop()}}if(!W.isObject(i))throw new TypeError("data must be an object");return b(i),t}function Ax(i){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function e0(i,t){this._pairs=[],i&&xf(i,this,t)}const B2=e0.prototype;B2.append=function(t,e){this._pairs.push([t,e])};B2.toString=function(t){const e=t?function(n){return t.call(this,n,Ax)}:Ax;return this._pairs.map(function(a){return e(a[0])+"="+e(a[1])},"").join("&")};function B5(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function z2(i,t,e){if(!t)return i;const n=e&&e.encode||B5;W.isFunction(e)&&(e={serialize:e});const a=e&&e.serialize;let o;if(a?o=a(t,e):o=W.isURLSearchParams(t)?t.toString():new e0(t,e).toString(n),o){const c=i.indexOf("#");c!==-1&&(i=i.slice(0,c)),i+=(i.indexOf("?")===-1?"?":"&")+o}return i}class Dx{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){W.forEach(this.handlers,function(n){n!==null&&t(n)})}}const N2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},z5=typeof URLSearchParams<"u"?URLSearchParams:e0,N5=typeof FormData<"u"?FormData:null,H5=typeof Blob<"u"?Blob:null,U5={isBrowser:!0,classes:{URLSearchParams:z5,FormData:N5,Blob:H5},protocols:["http","https","file","blob","url","data"]},n0=typeof window<"u"&&typeof document<"u",ip=typeof navigator=="object"&&navigator||void 0,F5=n0&&(!ip||["ReactNative","NativeScript","NS"].indexOf(ip.product)<0),P5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Y5=n0&&window.location.href||"http://localhost",X5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:n0,hasStandardBrowserEnv:F5,hasStandardBrowserWebWorkerEnv:P5,navigator:ip,origin:Y5},Symbol.toStringTag,{value:"Module"})),sn={...X5,...U5};function q5(i,t){return xf(i,new sn.classes.URLSearchParams,Object.assign({visitor:function(e,n,a,o){return sn.isNode&&W.isBuffer(e)?(this.append(n,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function V5(i){return W.matchAll(/\w+|\[(\w*)]/g,i).map(t=>t[0]==="[]"?"":t[1]||t[0])}function G5(i){const t={},e=Object.keys(i);let n;const a=e.length;let o;for(n=0;n<a;n++)o=e[n],t[o]=i[o];return t}function H2(i){function t(e,n,a,o){let c=e[o++];if(c==="__proto__")return!0;const h=Number.isFinite(+c),f=o>=e.length;return c=!c&&W.isArray(a)?a.length:c,f?(W.hasOwnProp(a,c)?a[c]=[a[c],n]:a[c]=n,!h):((!a[c]||!W.isObject(a[c]))&&(a[c]=[]),t(e,n,a[c],o)&&W.isArray(a[c])&&(a[c]=G5(a[c])),!h)}if(W.isFormData(i)&&W.isFunction(i.entries)){const e={};return W.forEachEntry(i,(n,a)=>{t(V5(n),a,e,0)}),e}return null}function I5(i,t,e){if(W.isString(i))try{return(t||JSON.parse)(i),W.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(i)}const Cc={transitional:N2,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",a=n.indexOf("application/json")>-1,o=W.isObject(t);if(o&&W.isHTMLForm(t)&&(t=new FormData(t)),W.isFormData(t))return a?JSON.stringify(H2(t)):t;if(W.isArrayBuffer(t)||W.isBuffer(t)||W.isStream(t)||W.isFile(t)||W.isBlob(t)||W.isReadableStream(t))return t;if(W.isArrayBufferView(t))return t.buffer;if(W.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let h;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return q5(t,this.formSerializer).toString();if((h=W.isFileList(t))||n.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return xf(h?{"files[]":t}:t,f&&new f,this.formSerializer)}}return o||a?(e.setContentType("application/json",!1),I5(t)):t}],transformResponse:[function(t){const e=this.transitional||Cc.transitional,n=e&&e.forcedJSONParsing,a=this.responseType==="json";if(W.isResponse(t)||W.isReadableStream(t))return t;if(t&&W.isString(t)&&(n&&!this.responseType||a)){const c=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(h){if(c)throw h.name==="SyntaxError"?kt.from(h,kt.ERR_BAD_RESPONSE,this,null,this.response):h}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:sn.classes.FormData,Blob:sn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],i=>{Cc.headers[i]={}});const W5=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Q5=i=>{const t={};let e,n,a;return i&&i.split(`
`).forEach(function(c){a=c.indexOf(":"),e=c.substring(0,a).trim().toLowerCase(),n=c.substring(a+1).trim(),!(!e||t[e]&&W5[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},Mx=Symbol("internals");function kl(i){return i&&String(i).trim().toLowerCase()}function xh(i){return i===!1||i==null?i:W.isArray(i)?i.map(xh):String(i)}function K5(i){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(i);)t[n[1]]=n[2];return t}const $5=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function hm(i,t,e,n,a){if(W.isFunction(n))return n.call(this,t,e);if(a&&(t=e),!!W.isString(t)){if(W.isString(n))return t.indexOf(n)!==-1;if(W.isRegExp(n))return n.test(t)}}function Z5(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function J5(i,t){const e=W.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+e,{value:function(a,o,c){return this[n].call(this,t,a,o,c)},configurable:!0})})}let An=class{constructor(t){t&&this.set(t)}set(t,e,n){const a=this;function o(h,f,d){const m=kl(f);if(!m)throw new Error("header name must be a non-empty string");const y=W.findKey(a,m);(!y||a[y]===void 0||d===!0||d===void 0&&a[y]!==!1)&&(a[y||f]=xh(h))}const c=(h,f)=>W.forEach(h,(d,m)=>o(d,m,f));if(W.isPlainObject(t)||t instanceof this.constructor)c(t,e);else if(W.isString(t)&&(t=t.trim())&&!$5(t))c(Q5(t),e);else if(W.isObject(t)&&W.isIterable(t)){let h={},f,d;for(const m of t){if(!W.isArray(m))throw TypeError("Object iterator must return a key-value pair");h[d=m[0]]=(f=h[d])?W.isArray(f)?[...f,m[1]]:[f,m[1]]:m[1]}c(h,e)}else t!=null&&o(e,t,n);return this}get(t,e){if(t=kl(t),t){const n=W.findKey(this,t);if(n){const a=this[n];if(!e)return a;if(e===!0)return K5(a);if(W.isFunction(e))return e.call(this,a,n);if(W.isRegExp(e))return e.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=kl(t),t){const n=W.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||hm(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let a=!1;function o(c){if(c=kl(c),c){const h=W.findKey(n,c);h&&(!e||hm(n,n[h],h,e))&&(delete n[h],a=!0)}}return W.isArray(t)?t.forEach(o):o(t),a}clear(t){const e=Object.keys(this);let n=e.length,a=!1;for(;n--;){const o=e[n];(!t||hm(this,this[o],o,t,!0))&&(delete this[o],a=!0)}return a}normalize(t){const e=this,n={};return W.forEach(this,(a,o)=>{const c=W.findKey(n,o);if(c){e[c]=xh(a),delete e[o];return}const h=t?Z5(o):String(o).trim();h!==o&&delete e[o],e[h]=xh(a),n[h]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return W.forEach(this,(n,a)=>{n!=null&&n!==!1&&(e[a]=t&&W.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[Mx]=this[Mx]={accessors:{}}).accessors,a=this.prototype;function o(c){const h=kl(c);n[h]||(J5(a,c),n[h]=!0)}return W.isArray(t)?t.forEach(o):o(t),this}};An.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(An.prototype,({value:i},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(n){this[e]=n}}});W.freezeMethods(An);function fm(i,t){const e=this||Cc,n=t||e,a=An.from(n.headers);let o=n.data;return W.forEach(i,function(h){o=h.call(e,o,a.normalize(),t?t.status:void 0)}),a.normalize(),o}function U2(i){return!!(i&&i.__CANCEL__)}function Do(i,t,e){kt.call(this,i??"canceled",kt.ERR_CANCELED,t,e),this.name="CanceledError"}W.inherits(Do,kt,{__CANCEL__:!0});function F2(i,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?i(e):t(new kt("Request failed with status code "+e.status,[kt.ERR_BAD_REQUEST,kt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function tR(i){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return t&&t[1]||""}function eR(i,t){i=i||10;const e=new Array(i),n=new Array(i);let a=0,o=0,c;return t=t!==void 0?t:1e3,function(f){const d=Date.now(),m=n[o];c||(c=d),e[a]=f,n[a]=d;let y=o,v=0;for(;y!==a;)v+=e[y++],y=y%i;if(a=(a+1)%i,a===o&&(o=(o+1)%i),d-c<t)return;const b=m&&d-m;return b?Math.round(v*1e3/b):void 0}}function nR(i,t){let e=0,n=1e3/t,a,o;const c=(d,m=Date.now())=>{e=m,a=null,o&&(clearTimeout(o),o=null),i.apply(null,d)};return[(...d)=>{const m=Date.now(),y=m-e;y>=n?c(d,m):(a=d,o||(o=setTimeout(()=>{o=null,c(a)},n-y)))},()=>a&&c(a)]}const qh=(i,t,e=3)=>{let n=0;const a=eR(50,250);return nR(o=>{const c=o.loaded,h=o.lengthComputable?o.total:void 0,f=c-n,d=a(f),m=c<=h;n=c;const y={loaded:c,total:h,progress:h?c/h:void 0,bytes:f,rate:d||void 0,estimated:d&&h&&m?(h-c)/d:void 0,event:o,lengthComputable:h!=null,[t?"download":"upload"]:!0};i(y)},e)},Rx=(i,t)=>{const e=i!=null;return[n=>t[0]({lengthComputable:e,total:i,loaded:n}),t[1]]},kx=i=>(...t)=>W.asap(()=>i(...t)),sR=sn.hasStandardBrowserEnv?((i,t)=>e=>(e=new URL(e,sn.origin),i.protocol===e.protocol&&i.host===e.host&&(t||i.port===e.port)))(new URL(sn.origin),sn.navigator&&/(msie|trident)/i.test(sn.navigator.userAgent)):()=>!0,iR=sn.hasStandardBrowserEnv?{write(i,t,e,n,a,o){const c=[i+"="+encodeURIComponent(t)];W.isNumber(e)&&c.push("expires="+new Date(e).toGMTString()),W.isString(n)&&c.push("path="+n),W.isString(a)&&c.push("domain="+a),o===!0&&c.push("secure"),document.cookie=c.join("; ")},read(i){const t=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function rR(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function aR(i,t){return t?i.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):i}function P2(i,t,e){let n=!rR(t);return i&&(n||e==!1)?aR(i,t):t}const jx=i=>i instanceof An?{...i}:i;function ea(i,t){t=t||{};const e={};function n(d,m,y,v){return W.isPlainObject(d)&&W.isPlainObject(m)?W.merge.call({caseless:v},d,m):W.isPlainObject(m)?W.merge({},m):W.isArray(m)?m.slice():m}function a(d,m,y,v){if(W.isUndefined(m)){if(!W.isUndefined(d))return n(void 0,d,y,v)}else return n(d,m,y,v)}function o(d,m){if(!W.isUndefined(m))return n(void 0,m)}function c(d,m){if(W.isUndefined(m)){if(!W.isUndefined(d))return n(void 0,d)}else return n(void 0,m)}function h(d,m,y){if(y in t)return n(d,m);if(y in i)return n(void 0,d)}const f={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:h,headers:(d,m,y)=>a(jx(d),jx(m),y,!0)};return W.forEach(Object.keys(Object.assign({},i,t)),function(m){const y=f[m]||a,v=y(i[m],t[m],m);W.isUndefined(v)&&y!==h||(e[m]=v)}),e}const Y2=i=>{const t=ea({},i);let{data:e,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:o,headers:c,auth:h}=t;t.headers=c=An.from(c),t.url=z2(P2(t.baseURL,t.url,t.allowAbsoluteUrls),i.params,i.paramsSerializer),h&&c.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let f;if(W.isFormData(e)){if(sn.hasStandardBrowserEnv||sn.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((f=c.getContentType())!==!1){const[d,...m]=f?f.split(";").map(y=>y.trim()).filter(Boolean):[];c.setContentType([d||"multipart/form-data",...m].join("; "))}}if(sn.hasStandardBrowserEnv&&(n&&W.isFunction(n)&&(n=n(t)),n||n!==!1&&sR(t.url))){const d=a&&o&&iR.read(o);d&&c.set(a,d)}return t},oR=typeof XMLHttpRequest<"u",lR=oR&&function(i){return new Promise(function(e,n){const a=Y2(i);let o=a.data;const c=An.from(a.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:d}=a,m,y,v,b,S;function C(){b&&b(),S&&S(),a.cancelToken&&a.cancelToken.unsubscribe(m),a.signal&&a.signal.removeEventListener("abort",m)}let _=new XMLHttpRequest;_.open(a.method.toUpperCase(),a.url,!0),_.timeout=a.timeout;function w(){if(!_)return;const E=An.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),A={data:!h||h==="text"||h==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:E,config:i,request:_};F2(function(F){e(F),C()},function(F){n(F),C()},A),_=null}"onloadend"in _?_.onloadend=w:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(w)},_.onabort=function(){_&&(n(new kt("Request aborted",kt.ECONNABORTED,i,_)),_=null)},_.onerror=function(){n(new kt("Network Error",kt.ERR_NETWORK,i,_)),_=null},_.ontimeout=function(){let k=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const A=a.transitional||N2;a.timeoutErrorMessage&&(k=a.timeoutErrorMessage),n(new kt(k,A.clarifyTimeoutError?kt.ETIMEDOUT:kt.ECONNABORTED,i,_)),_=null},o===void 0&&c.setContentType(null),"setRequestHeader"in _&&W.forEach(c.toJSON(),function(k,A){_.setRequestHeader(A,k)}),W.isUndefined(a.withCredentials)||(_.withCredentials=!!a.withCredentials),h&&h!=="json"&&(_.responseType=a.responseType),d&&([v,S]=qh(d,!0),_.addEventListener("progress",v)),f&&_.upload&&([y,b]=qh(f),_.upload.addEventListener("progress",y),_.upload.addEventListener("loadend",b)),(a.cancelToken||a.signal)&&(m=E=>{_&&(n(!E||E.type?new Do(null,i,_):E),_.abort(),_=null)},a.cancelToken&&a.cancelToken.subscribe(m),a.signal&&(a.signal.aborted?m():a.signal.addEventListener("abort",m)));const T=tR(a.url);if(T&&sn.protocols.indexOf(T)===-1){n(new kt("Unsupported protocol "+T+":",kt.ERR_BAD_REQUEST,i));return}_.send(o||null)})},cR=(i,t)=>{const{length:e}=i=i?i.filter(Boolean):[];if(t||e){let n=new AbortController,a;const o=function(d){if(!a){a=!0,h();const m=d instanceof Error?d:this.reason;n.abort(m instanceof kt?m:new Do(m instanceof Error?m.message:m))}};let c=t&&setTimeout(()=>{c=null,o(new kt(`timeout ${t} of ms exceeded`,kt.ETIMEDOUT))},t);const h=()=>{i&&(c&&clearTimeout(c),c=null,i.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),i=null)};i.forEach(d=>d.addEventListener("abort",o));const{signal:f}=n;return f.unsubscribe=()=>W.asap(h),f}},uR=function*(i,t){let e=i.byteLength;if(e<t){yield i;return}let n=0,a;for(;n<e;)a=n+t,yield i.slice(n,a),n=a},hR=async function*(i,t){for await(const e of fR(i))yield*uR(e,t)},fR=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const t=i.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Lx=(i,t,e,n)=>{const a=hR(i,t);let o=0,c,h=f=>{c||(c=!0,n&&n(f))};return new ReadableStream({async pull(f){try{const{done:d,value:m}=await a.next();if(d){h(),f.close();return}let y=m.byteLength;if(e){let v=o+=y;e(v)}f.enqueue(new Uint8Array(m))}catch(d){throw h(d),d}},cancel(f){return h(f),a.return()}},{highWaterMark:2})},Sf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",X2=Sf&&typeof ReadableStream=="function",dR=Sf&&(typeof TextEncoder=="function"?(i=>t=>i.encode(t))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),q2=(i,...t)=>{try{return!!i(...t)}catch{return!1}},gR=X2&&q2(()=>{let i=!1;const t=new Request(sn.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!t}),Bx=64*1024,rp=X2&&q2(()=>W.isReadableStream(new Response("").body)),Vh={stream:rp&&(i=>i.body)};Sf&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Vh[t]&&(Vh[t]=W.isFunction(i[t])?e=>e[t]():(e,n)=>{throw new kt(`Response type '${t}' is not supported`,kt.ERR_NOT_SUPPORT,n)})})})(new Response);const mR=async i=>{if(i==null)return 0;if(W.isBlob(i))return i.size;if(W.isSpecCompliantForm(i))return(await new Request(sn.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(W.isArrayBufferView(i)||W.isArrayBuffer(i))return i.byteLength;if(W.isURLSearchParams(i)&&(i=i+""),W.isString(i))return(await dR(i)).byteLength},pR=async(i,t)=>{const e=W.toFiniteNumber(i.getContentLength());return e??mR(t)},yR=Sf&&(async i=>{let{url:t,method:e,data:n,signal:a,cancelToken:o,timeout:c,onDownloadProgress:h,onUploadProgress:f,responseType:d,headers:m,withCredentials:y="same-origin",fetchOptions:v}=Y2(i);d=d?(d+"").toLowerCase():"text";let b=cR([a,o&&o.toAbortSignal()],c),S;const C=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let _;try{if(f&&gR&&e!=="get"&&e!=="head"&&(_=await pR(m,n))!==0){let A=new Request(t,{method:"POST",body:n,duplex:"half"}),R;if(W.isFormData(n)&&(R=A.headers.get("content-type"))&&m.setContentType(R),A.body){const[F,N]=Rx(_,qh(kx(f)));n=Lx(A.body,Bx,F,N)}}W.isString(y)||(y=y?"include":"omit");const w="credentials"in Request.prototype;S=new Request(t,{...v,signal:b,method:e.toUpperCase(),headers:m.normalize().toJSON(),body:n,duplex:"half",credentials:w?y:void 0});let T=await fetch(S);const E=rp&&(d==="stream"||d==="response");if(rp&&(h||E&&C)){const A={};["status","statusText","headers"].forEach(I=>{A[I]=T[I]});const R=W.toFiniteNumber(T.headers.get("content-length")),[F,N]=h&&Rx(R,qh(kx(h),!0))||[];T=new Response(Lx(T.body,Bx,F,()=>{N&&N(),C&&C()}),A)}d=d||"text";let k=await Vh[W.findKey(Vh,d)||"text"](T,i);return!E&&C&&C(),await new Promise((A,R)=>{F2(A,R,{data:k,headers:An.from(T.headers),status:T.status,statusText:T.statusText,config:i,request:S})})}catch(w){throw C&&C(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new kt("Network Error",kt.ERR_NETWORK,i,S),{cause:w.cause||w}):kt.from(w,w&&w.code,i,S)}}),ap={http:k5,xhr:lR,fetch:yR};W.forEach(ap,(i,t)=>{if(i){try{Object.defineProperty(i,"name",{value:t})}catch{}Object.defineProperty(i,"adapterName",{value:t})}});const zx=i=>`- ${i}`,vR=i=>W.isFunction(i)||i===null||i===!1,V2={getAdapter:i=>{i=W.isArray(i)?i:[i];const{length:t}=i;let e,n;const a={};for(let o=0;o<t;o++){e=i[o];let c;if(n=e,!vR(e)&&(n=ap[(c=String(e)).toLowerCase()],n===void 0))throw new kt(`Unknown adapter '${c}'`);if(n)break;a[c||"#"+o]=n}if(!n){const o=Object.entries(a).map(([h,f])=>`adapter ${h} `+(f===!1?"is not supported by the environment":"is not available in the build"));let c=t?o.length>1?`since :
`+o.map(zx).join(`
`):" "+zx(o[0]):"as no adapter specified";throw new kt("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n},adapters:ap};function dm(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Do(null,i)}function Nx(i){return dm(i),i.headers=An.from(i.headers),i.data=fm.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),V2.getAdapter(i.adapter||Cc.adapter)(i).then(function(n){return dm(i),n.data=fm.call(i,i.transformResponse,n),n.headers=An.from(n.headers),n},function(n){return U2(n)||(dm(i),n&&n.response&&(n.response.data=fm.call(i,i.transformResponse,n.response),n.response.headers=An.from(n.response.headers))),Promise.reject(n)})}const G2="1.9.0",_f={};["object","boolean","number","function","string","symbol"].forEach((i,t)=>{_f[i]=function(n){return typeof n===i||"a"+(t<1?"n ":" ")+i}});const Hx={};_f.transitional=function(t,e,n){function a(o,c){return"[Axios v"+G2+"] Transitional option '"+o+"'"+c+(n?". "+n:"")}return(o,c,h)=>{if(t===!1)throw new kt(a(c," has been removed"+(e?" in "+e:"")),kt.ERR_DEPRECATED);return e&&!Hx[c]&&(Hx[c]=!0,console.warn(a(c," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(o,c,h):!0}};_f.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function bR(i,t,e){if(typeof i!="object")throw new kt("options must be an object",kt.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let a=n.length;for(;a-- >0;){const o=n[a],c=t[o];if(c){const h=i[o],f=h===void 0||c(h,o,i);if(f!==!0)throw new kt("option "+o+" must be "+f,kt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new kt("Unknown option "+o,kt.ERR_BAD_OPTION)}}const Sh={assertOptions:bR,validators:_f},Es=Sh.validators;let Kr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Dx,response:new Dx}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=ea(this.defaults,e);const{transitional:n,paramsSerializer:a,headers:o}=e;n!==void 0&&Sh.assertOptions(n,{silentJSONParsing:Es.transitional(Es.boolean),forcedJSONParsing:Es.transitional(Es.boolean),clarifyTimeoutError:Es.transitional(Es.boolean)},!1),a!=null&&(W.isFunction(a)?e.paramsSerializer={serialize:a}:Sh.assertOptions(a,{encode:Es.function,serialize:Es.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Sh.assertOptions(e,{baseUrl:Es.spelling("baseURL"),withXsrfToken:Es.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let c=o&&W.merge(o.common,o[e.method]);o&&W.forEach(["delete","get","head","post","put","patch","common"],S=>{delete o[S]}),e.headers=An.concat(c,o);const h=[];let f=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(e)===!1||(f=f&&C.synchronous,h.unshift(C.fulfilled,C.rejected))});const d=[];this.interceptors.response.forEach(function(C){d.push(C.fulfilled,C.rejected)});let m,y=0,v;if(!f){const S=[Nx.bind(this),void 0];for(S.unshift.apply(S,h),S.push.apply(S,d),v=S.length,m=Promise.resolve(e);y<v;)m=m.then(S[y++],S[y++]);return m}v=h.length;let b=e;for(y=0;y<v;){const S=h[y++],C=h[y++];try{b=S(b)}catch(_){C.call(this,_);break}}try{m=Nx.call(this,b)}catch(S){return Promise.reject(S)}for(y=0,v=d.length;y<v;)m=m.then(d[y++],d[y++]);return m}getUri(t){t=ea(this.defaults,t);const e=P2(t.baseURL,t.url,t.allowAbsoluteUrls);return z2(e,t.params,t.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(t){Kr.prototype[t]=function(e,n){return this.request(ea(n||{},{method:t,url:e,data:(n||{}).data}))}});W.forEach(["post","put","patch"],function(t){function e(n){return function(o,c,h){return this.request(ea(h||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:c}))}}Kr.prototype[t]=e(),Kr.prototype[t+"Form"]=e(!0)});let xR=class I2{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const n=this;this.promise.then(a=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](a);n._listeners=null}),this.promise.then=a=>{let o;const c=new Promise(h=>{n.subscribe(h),o=h}).then(a);return c.cancel=function(){n.unsubscribe(o)},c},t(function(o,c,h){n.reason||(n.reason=new Do(o,c,h),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new I2(function(a){t=a}),cancel:t}}};function SR(i){return function(e){return i.apply(null,e)}}function _R(i){return W.isObject(i)&&i.isAxiosError===!0}const op={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(op).forEach(([i,t])=>{op[t]=i});function W2(i){const t=new Kr(i),e=T2(Kr.prototype.request,t);return W.extend(e,Kr.prototype,t,{allOwnKeys:!0}),W.extend(e,t,null,{allOwnKeys:!0}),e.create=function(a){return W2(ea(i,a))},e}const Oe=W2(Cc);Oe.Axios=Kr;Oe.CanceledError=Do;Oe.CancelToken=xR;Oe.isCancel=U2;Oe.VERSION=G2;Oe.toFormData=xf;Oe.AxiosError=kt;Oe.Cancel=Oe.CanceledError;Oe.all=function(t){return Promise.all(t)};Oe.spread=SR;Oe.isAxiosError=_R;Oe.mergeConfig=ea;Oe.AxiosHeaders=An;Oe.formToJSON=i=>H2(W.isHTMLForm(i)?new FormData(i):i);Oe.getAdapter=V2.getAdapter;Oe.HttpStatusCode=op;Oe.default=Oe;const{Axios:uk,AxiosError:hk,CanceledError:fk,isCancel:dk,CancelToken:gk,VERSION:mk,all:pk,Cancel:yk,isAxiosError:vk,spread:bk,toFormData:xk,AxiosHeaders:Sk,HttpStatusCode:_k,formToJSON:Ck,getAdapter:Tk,mergeConfig:wk}=Oe,CR=Oe.create({baseURL:"https://sol2-api.esls.io/",headers:{Authorization:"Bearer rE_M6Kmix3p7mqOLaXAe"}}),TR=async()=>(await CR.get("editor/image/T1")).data,wR=G3("images",{imageList:()=>({queryKey:["imageList"],queryFn:TR})}),OR=i=>i?i.split(",").map(t=>t.trim()):[];function ER({imageId:i,width:t,height:e,size:n,tags:a,isSelected:o,onClick:c}){const h=OR(a);return Q.jsxs("div",{className:Ns("image-card","relative bg-white rounded-lg p-4 cursor-pointer transition-all duration-200 hover:shadow-lg hover:shadow-gray-300/50 hover:-translate-y-1 min-h-[300px] mt-1 border-3 border-transparent",{"bg-blue-100":o,"border border-blue-200!":o,"border-3":o}),onClick:()=>c(i),children:[Q.jsxs("div",{className:"flex flex-col image-size absolute top-2 left-2 text-[#666666] text-xs",children:[Q.jsxs("span",{className:" px-1",children:[t," x ",e]}),Q.jsx("span",{className:"px-1",children:n})]}),Q.jsx("div",{className:"absolute top-3 right-3",children:Q.jsx("span",{className:"bg-green-500 text-white text-xs font-medium px-2 py-1 rounded",children:"svg"})}),Q.jsx("div",{className:"image flex items-center justify-center rounded-lg mb-4 h-48 overflow-hidden",children:Q.jsx("img",{src:`https://sol2-api.esls.io//images/T1/${i}.svg`,alt:i,className:"w-full h-full object-fill"})}),Q.jsx("div",{className:"flex flex-wrap gap-0.5",children:h.map(f=>Q.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:f},f))})]})}const AR="/assets/loading-CC49kvPC.gif";function DR(){return Q.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full",children:[Q.jsx("img",{src:AR,className:"w-2/5",alt:"로딩중.."}),Q.jsx("span",{className:"text-gray-600 text-3xl ml-2",children:"로딩중..."})]})}const MR={List:i=>{const{children:t,ref:e,...n}=i;return Q.jsx("div",{ref:e,...n,className:"grid grid-cols-4 gap-2 p-4",children:t})},Item:({children:i,...t})=>Q.jsx("div",{...t,children:i})};function RR(){var v;const[i,t]=U.useState(!0),{data:e,isError:n,isPending:a}=DM({...wR.imageList(),staleTime:1e3*60*5}),{canvas:o,selectedImageSet:c,setSelectedImageSet:h}=ze(),f=of(b=>b.closeModal);U.useEffect(()=>{if(!a){const b=setTimeout(()=>{t(!1)},1e3);return()=>clearTimeout(b)}},[a]);const d=b=>{const S=new Set(c);S.has(b)?S.delete(b):S.add(b),h(S)},m=async()=>{if(o){for(const b of c){const S=`https://sol2-api.esls.io//images/T1/${b}.svg`,C=await CA(S),_=NE.groupSVGElements(C.objects,{left:100,top:100,scaleX:.5,scaleY:.5});_.set({uid:new Date().getTime().toString()}),o.add(_)}o.requestRenderAll(),h(new Set),f()}},y=b=>{const S=e==null?void 0:e.list[b];if(!S)return null;const{imageId:C,width:_,height:w,size:T,tags:E}=S;return Q.jsx(ER,{imageId:C,width:_,height:w,size:T,tags:E,isSelected:c.has(C),onClick:d})};return a||i?Q.jsx(DR,{}):n?Q.jsx("div",{children:"Error loading images."}):Q.jsxs("div",{className:"w-full h-full",children:[Q.jsx(q3,{style:{height:"100%"},totalCount:((v=e.list)==null?void 0:v.length)||0,components:MR,itemContent:y,overscan:8}),Q.jsx("div",{className:"absolute bottom-4 right-6",children:Q.jsx(Gl,{size:"medium",text:"이미지 추가하기",onClick:m})})]})}function kR(){const i=U.useRef(null),t=U.useRef(null),e=U.useCallback(()=>{const v=i.current;if(!v)return null;const b=v.getBoundingClientRect(),S=new zh(v,{width:b.width,height:b.height,selection:!1});return t.current=S,S},[]),n=U.useCallback(v=>{try{const b=sessionStorage.getItem(v);return b?JSON.parse(b):null}catch(b){return console.error("Failed to parse session data:",b),null}},[]),a=U.useCallback(v=>{v.on("mousedown",()=>{v.forEachObject(b=>{if(b.get("isCheckbox")){const S=!v.get("isSelected");v.set("isSelected",S),b.set({fill:S?"#dbeafe":"transparent",stroke:S?"blue":"#d2d2d2",strokeWidth:S?2:1})}})})},[]),o=U.useCallback(v=>v.isType("group")?v.getObjects().some(S=>S.get("isCheckbox")):!1,[]),c=U.useCallback(v=>{v.forEachObject(b=>{o(b)?(a(b),b.set({selectable:!1,hoverCursor:"pointer"})):b.set({selectable:!1,hoverCursor:"default"})}),v.requestRenderAll()},[o,a]),h=U.useCallback(async()=>{const v=e();if(!v)return;const b=n("elements");if(b)try{await v.loadFromJSON(b),c(v)}catch(S){console.error("데이터를 가져오는데 실패했습니다:",S)}},[e,n,c]),f=U.useCallback(()=>{var v;(v=t.current)==null||v.dispose(),t.current=null},[]),d=U.useCallback(v=>{const b=t.current;if(!b)return;const S=v.scaleX,C=v.scaleY;v.animate({scaleX:S*1.1,scaleY:C*1.1},{duration:300,onChange:()=>b.requestRenderAll(),onComplete:()=>{v.animate({scaleX:S,scaleY:C},{duration:300,onChange:()=>b.requestRenderAll()})}}),v.forEachObject(_=>{_.get("isCheckbox")&&_.set({stroke:"#22c55e",strokeWidth:3,fill:"#dcfce7"})}),b.requestRenderAll()},[]),m=U.useCallback(v=>{const b=t.current;if(!b)return;const S=v.left,C=10;v.animate({left:S-C},{duration:100,onChange:()=>b.requestRenderAll(),onComplete:()=>{v.animate({left:S+C},{duration:100,onChange:()=>b.requestRenderAll(),onComplete:()=>{v.animate({left:S},{duration:100,onChange:()=>b.requestRenderAll()})}})}}),v.forEachObject(_=>{_.get("isCheckbox")&&_.set({stroke:"#ef4444",strokeWidth:3,fill:"#fee2e2"})}),b.requestRenderAll()},[]),y=U.useCallback(()=>{const v=t.current;if(!v)return;const b=n("interaction"),S=(b==null?void 0:b.answerUid)||[],C=v.getObjects().filter(T=>T.get("isSelected")),_=C.map(T=>T.get("uid"));_.length===S.length&&_.every(T=>S.includes(T))?C.forEach(T=>{d(T)}):C.forEach(T=>{m(T)})},[n,d,m]);return U.useEffect(()=>{const v=requestAnimationFrame(h);return()=>{cancelAnimationFrame(v),f()}},[h,f]),Q.jsxs("div",{className:"w-full h-full",children:[Q.jsx("canvas",{ref:i,className:"w-full h-full rounded-2xl border-1 drop-shadow-xl"}),Q.jsx("div",{className:"absolute right-5 bottom-5",children:Q.jsx(Gl,{size:"medium",text:"정답확인",onClick:y})})]})}function jR(){const{isOpen:i,modalType:t,closeModal:e}=of(n=>n);return i?WD(Q.jsxs("div",{className:"modal",children:[Q.jsx("div",{className:"modal-overlay fixed inset-0 bg-black opacity-50",onClick:e}),Q.jsxs("div",{className:"modal-content fixed w-[70%] h-[80%] top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-6 rounded-lg shadow-lg",children:[Q.jsxs("div",{className:"modal-header w-full flex justify-between items-center mb-4",children:[Q.jsx("h2",{className:"font-bold text-2xl!",children:"이미지 리스트"}),Q.jsx("button",{type:"button",className:"close-button w-10 h-10 text-2xl! cursor-pointer","aria-label":"팝업 창 닫기",onClick:e,children:"×"})]}),Q.jsxs("div",{className:"modal-body w-full h-[80%] overflow-y-auto",children:[t==="image"&&Q.jsx(RR,{}),t==="preview"&&Q.jsx(kR,{})]})]})]})):null}function LR(){return Q.jsxs(Q.Fragment,{children:[Q.jsxs("div",{className:"h-screen max-h-screen overflow-hidden flex flex-col gap-5 p-5",children:[Q.jsx(ID,{}),Q.jsxs("div",{className:"flex flex-1 min-h-0 gap-4",children:[Q.jsx(NA,{}),Q.jsx("aside",{className:"relative w-[30%] rounded-2xl",style:{backgroundColor:dp.CARD_BACKGROUND},children:Q.jsx(sO,{})})]}),Q.jsx(jR,{})]}),Q.jsx(GD,{})]})}const BR=new fM;vw.createRoot(document.getElementById("root")).render(Q.jsx(U.StrictMode,{children:Q.jsx(yM,{client:BR,children:Q.jsx(LR,{})})}));
